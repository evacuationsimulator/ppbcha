((self||window).webpackJsonp=(self||window).webpackJsonp||[]).push([[3],[,,function(e,t,r){"use strict";var i=y(r(507)),a=y(r(773)),n=y(r(137)),o=y(r(781)),s=y(r(1061)),l=y(r(1170)),u=y(r(452)),c=y(r(1275)),d=y(r(1276)),p=y(r(670)),f=y(r(1284)),h=y(r(1286)),m=y(r(1287)),g=y(r(8)),v=y(r(1289));function y(e){return e&&e.__esModule?e:{default:e}}var b={baseUrl:"build/TerriaJS"};(0,s.default)(),(0,o.default)(),b.analytics=new i.default;var _=new u.default(b);(0,l.default)(_);var w=new p.default({terria:_});e.exports=_.start({applicationUrl:window.location,configUrl:"config.json",shareDataService:new a.default({terria:_})}).otherwise(function(e){(0,n.default)(_,e)}).always(function(){try{w.searchState.locationSearchProviders=[new f.default({terria:_,key:_.configParameters.bingMapsKey}),new h.default({terria:_}),new m.default({terria:_})],(0,c.default)(_,window),(0,d.default)(_,window);var e=r(1677),t=r(1679),i=r(1688),a=e(_),n=t(_,_.configParameters.bingMapsKey),o=a.concat(n);if(i(_,o,"Bing Maps Aerial with Labels",!0),(0,g.default)(_.configParameters.globalDisclaimer)){var s=_.configParameters.globalDisclaimer,l=window.location.hostname;if(s.enableOnLocalhost||-1===l.indexOf("localhost")){var u="";((0,g.default)(s.devHostRegex)&&l.match(s.devHostRegex)||(0,g.default)(s.prodHostRegex)&&!l.match(s.prodHostRegex))&&(u+=r(1689)),u+=r(1690);var p={title:void 0!==s.title?s.title:"Warning",confirmText:s.buttonTitle||"Ok",width:600,height:550,message:u,horizontalPadding:100};w.notifications.push(p)}}(0,v.default)(_,o,w)}catch(e){console.error(e),console.error(e.stack)}})},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=n(r(8)),a=n(r(23));function n(e){return e&&e.__esModule?e:{default:e}}var o={componentWillMount:function(){this.__observeModelChangeSubscriptions=void 0;var e=this.render;this.render=function(){var t=this,r=!0;return s(t),a.default.ignoreDependencies(function(){var n=a.default.computed(function(){if(r)return r=!1,e.call(t)}).extend({notify:"always"});t.__observeModelChangeSubscriptions=[];var o=!1;function l(){s(t),o||(o=!0,t.forceUpdate())}for(var u in t.props)t.props.hasOwnProperty(u)&&(0,i.default)(t.props[u])&&(0,i.default)(t.props[u].__knockoutSubscribable)&&t.__observeModelChangeSubscriptions.push(t.props[u].__knockoutSubscribable.subscribe(l));return t.__observeModelChangeSubscriptions.push(n.subscribe(l)),n()})}},componentWillUnmount:function(){s(this)},shouldComponentUpdate:n(r(1301)).default.shouldComponentUpdate};function s(e){if((0,i.default)(e.__observeModelChangeSubscriptions)){for(var t=0;t<e.__observeModelChangeSubscriptions.length;++t)e.__observeModelChangeSubscriptions[t].dispose();e.__observeModelChangeSubscriptions=void 0}}e.exports=o},,,,,,function(e,t,r){"use strict";e.exports=function(e,t){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},,,,,,,,,function(e,t,r){"use strict";var i=r(9);e.exports=function(e){e=i(e,i.EMPTY_OBJECT),this.sender=e.sender,this.title=i(e.title,"An error occurred"),this.message=e.message,this.raisedToUser=!1}},,,function(e,t,r){"use strict";var i=l(r(13)),a=l(r(15)),n=l(r(19)),o=l(r(35)),s=l(r(1185));function l(e){return e&&e.__esModule?e:{default:e}}var u={calendar:r(1186),add:r(1187),arHover0:r(1188),arHover1:r(1189),arHover2:r(1190),arOff:r(1191),arOn:r(1192),arRealign:r(1193),arResetAlignment:r(1194),backToStart:r(1195),backward:r(1196),barChart:r(1197),bulb:r(1198),checkboxOff:r(1199),checkboxOn:r(1200),close:r(1201),closed:r(1202),decrease:r(1203),download:r(1204),expand:r(1205),eye:r(1206),externalLink:r(1207),feedback:r(1208),folder:r(1209),folderOpen:r(1210),forward:r(1211),geolocation:r(1212),gallery:r(1213),increase:r(1214),left:r(1215),lineChart:r(1216),link:r(1217),loader:r(1218),location:r(1219),loop:r(1220),menu:r(1221),measure:r(1222),opened:r(1223),pause:r(1224),play:r(1225),radioOff:r(1226),radioOn:r(1227),refresh:r(1228),remove:r(1229),right:r(1230),search:r(1231),selected:r(1232),settings:r(1233),share:r(1234),showLess:r(1235),showMore:r(1236),sphere:r(1237),map:r(1238),splitter:r(1239),splitterOn:r(1240),splitterOff:r(1241),previous:r(1242),next:r(1243),timeline:r(1244),data:r(1245),upload:r(1246),trashcan:r(1247),local:r(1248),web:r(1249),compassInner:r(1250),compassOuter:r(1251),compassRotationMarker:r(1252),circleFull:r(1253),circleEmpty:r(1254),story:r(1255),recapture:r(1256),menuDotted:r(1257),areaMeasure:r(1258)},c=(0,n.default)({displayName:"Icon",propTypes:{glyph:a.default.object,style:a.default.object,className:a.default.string},render:function(){var e=this.props.glyph;return i.default.createElement("svg",{viewBox:"0 0 100 100",className:(0,o.default)("icon",this.props.className,s.default.svg),style:this.props.style},i.default.createElement("use",{xlinkHref:"#"+e.id}))}});e.exports=c,e.exports.GLYPHS=u},,,,,,,function(e,t,r){"use strict";var i=r(9),a=r(8);e.exports=function(e,t,r){if(!a(e))return t;var n=e.terria;if(!a(n))return t;var o=n.corsProxy;return a(o)&&(o.shouldUseProxy(t)||e.forceProxy)?o.getURL(t,i(e.cacheDuration,r)):t}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(37);e.exports=function(e){return i.createIfNeeded(e).fetchJson()}},,,,,,,,,function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(12),n=r(22),o=r(75),s=r(8),l=r(10),u=r(11),c=r(143),d=r(23),p=r(574),f=r(70),h=r(267),m=r(18),g=r(9),v=r(575),y=r(393),b=r(71),_=r(397),w=r(398),S=r(581),C=r(400),x=r(27),E=r(117),I=r(401),k=r(46),L=r(402),P=r(36),T=r(403),M=function(e,t){_.call(this,e),this._dataSource=void 0,this._readyData=void 0,this.url=t,this.data=void 0,this.dataSourceUrl=void 0,this.style=void 0,this.clampToGround=void 0,d.track(this,["data","dataSourceUrl","style","clampToGround"])};x(_,M),l(M.prototype,{type:{get:function(){return"geojson"}},typeName:{get:function(){return"GeoJSON"}},metadata:{get:function(){var e=new E;return e.isLoading=!1,e.dataSourceErrorMessage="This data source does not have any details available.",e.serviceErrorMessage="This service does not have any details available.",e}},dataSource:{get:function(){return this._dataSource}}}),M.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.data]};var A=/.zip\b/i,j=/.geojson\b/i,D=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function N(e,t){var r="";for(var a in e)if(e.hasOwnProperty(a)){if(a===t||-1!==D.indexOf(a))continue;var n=e[a];n="object"===i(n)?N(n):S(n),a=a.replace(/_/g," "),s(n)&&(r+="<tr><th>"+a+"</th><td>"+n+"</td></tr>")}return r.length>0&&(r='<table class="cesium-infoBox-defaultTable"><tbody>'+r+"</tbody></table>"),r}function O(e,t){e.getData(new v.Data64URIWriter,function(e){t.resolve(f(e))})}function F(e,t){var r,a,l=0;for(r in t)if(t.hasOwnProperty(r)&&++l>1)break;1===l&&(a=r,t=t[r],s(e.name)&&0!==e.name.length&&!function(e,t){if(e===t)return!0;if(!t)return!1;var r=t.lastIndexOf(e);if(r>=0&&r===t.length-e.length)return!0;return!1}(e.name,e.url)||(e.name=a));var c=function(e,t){var r;s(t.crs)?"EPSG"===t.crs.type?r="EPSG:"+t.crs.properties.code:"name"===t.crs.type&&s(t.crs.properties)&&s(t.crs.properties.name)&&(r=T.crsStringToCode(t.crs.properties.name)):r=void 0;if(t.crs={type:"EPSG",properties:{code:"4326"}},!T.willNeedReprojecting(r))return!0;return m(T.checkProjection(e.terria.configParameters.proj4ServiceBaseUrl,r),function(e){if(!e)throw new u("The crs code for this datasource is unsupported.");!function e(t,r,a){for(var n in t)!1!==t.hasOwnProperty(n)&&(n===r?a&&"function"==typeof a&&a(t,r):"object"===i(t[n])&&e(t[n],r,a))}(t,"coordinates",function(e,t){e[t]=function e(t,r){if(!(t[0]instanceof Array&&t[0][0]instanceof Array))return t=r(t);var i=new Array(t.length);for(var a=0;a<t.length;a++)i[a]=e(t[a],r);return i}(e[t],function(e){return function(e,t){if(!(e[0]instanceof Array))return T.reprojectPoint(e,t,"EPSG:4326");for(var r=[],i=0;i<e.length;i++)r.push(T.reprojectPoint(e[i],t,"EPSG:4326"));return r}(e,r)})})})}(e,t);return m(c,function(){return e._readyData=t,function(e){function t(e,t){if(void 0===e){var r=n.fromCssColorString(function(e,t){var r=C(t||"")%e.length;return e[r]}(w.highContrast,t));return r.alpha=1,r}return n.fromCssColorString(e)}function r(e){return"string"==typeof e||e instanceof String?n.fromCssColorString(e):e}var i=e._dataSource,a=g(e.style,{}),l={describe:N,markerSize:g(function(e){var t={small:24,medium:48,large:64};if(void 0===e)return;if(t[e])return t[e];return parseInt(e,10)}(a["marker-size"]),20),markerSymbol:a["marker-symbol"],markerColor:t(a["marker-color"],e.name),strokeWidth:g(a["stroke-width"],2),polygonStroke:r(g(a.stroke,"#000000")),polylineStroke:t(a.stroke,e.name),markerOpacity:a["marker-opacity"],clampToGround:e.clampToGround,markerUrl:g(a["marker-url"],null)};l.fill=t(a.fill,(e.name||"")+" fill"),s(a["stroke-opacity"])&&(l.stroke.alpha=parseFloat(a["stroke-opacity"]));s(a["fill-opacity"])?l.fill.alpha=parseFloat(a["fill-opacity"]):l.fill.alpha=.75;return i.load(e._readyData,l).then(function(){for(var t,u=i.entities.values,c=0;c<u.length;++c){var d=u[c],p=d.properties||{};if(s(d.billboard)&&s(l.markerUrl)?d.billboard={image:k(e,l.markerUrl),width:a["marker-width"],height:a["marker-height"],rotation:a["marker-angle"]}:!s(d.billboard)||s(p["marker-symbol"])||s(l.markerSymbol)||(d.point=new y({color:r(g(p["marker-color"],l.markerColor)),pixelSize:g(p["marker-size"],l.markerSize/2),outlineWidth:g(p["stroke-width"],l.strokeWidth),outlineColor:r(g(p.stroke,l.polygonStroke)),heightReference:l.clampToGround?b.RELATIVE_TO_GROUND:null}),s(p["marker-opacity"])&&(d.point.color.alpha=parseFloat(p["marker-opacity"])),d.billboard=void 0),s(d.billboard)&&s(p["marker-opacity"])&&(d.billboard.color=new n(1,1,1,parseFloat(p["marker-opacity"]))),s(d.polygon)&&(t=d.polygon,s(t.outlineWidth)&&t.outlineWidth.getValue()>1)&&!B(d.polygon)){d.polyline=new h,d.polyline.show=d.polygon.show,s(d.polygon.outlineColor)&&(d.polyline.material=new o(d.polygon.outlineColor.getValue()));var f=d.polygon.hierarchy.getValue(),m=f.positions;V(m),d.polyline.positions=m,d.polyline.width=d.polygon.outlineWidth,R(i.entities,f.holes,d),d.polygon=void 0}}})}(e)})}function R(e,t,r){if(s(t))for(var i=0;i<t.length;++i)U(e,t[i],r)}function U(e,t,r){if(s(t)&&s(t.positions)&&0!==t.positions.length){var i=new c;i.name=r.name,i.availability=r.availability,i.description=r.description,i.properties=r.properties,i.polyline=new h,i.polyline.show=r.polyline.show,i.polyline.material=r.polyline.material,i.polyline.width=r.polyline.width,V(t.positions),i.polyline.positions=t.positions,e.add(i),R(e,t.holes,r)}}function V(e){e.length>=2&&!a.equalsEpsilon(e[0],e[e.length-1],0,1)&&e.push(e[0])}function B(e){var t=!0;if(s(e.fill)&&(t=e.fill.getValue()),!t)return!1;if(!s(e.material))return!0;var r=e.material.getValue();return!s(r)||!s(r.color)||0!==r.color.alpha}M.prototype._load=function(){var e=m.defer(),t=this;return Promise.all([r.e(6),r.e(2)]).then(function(){var i=r(736);I(e,function(){var e,r=!1;if(s(t._dataSource)&&(r=t.terria.dataSources.remove(t._dataSource,!0)),t._dataSource=new i(t.name),r&&t.terria.dataSources.add(t._dataSource),s(t.data))return m(t.data,function(e){var r;if("undefined"!=typeof Blob&&e instanceof Blob)r=L(e);else if(e instanceof String||"string"==typeof e)try{r=JSON.parse(e)}catch(e){throw new P({sender:t,title:"Error loading GeoJSON",message:"An error occurred parsing the provided data as JSON.  This may indicate that the file is invalid or that it is not supported by "+t.terria.appName+'.  If you would like assistance or further information, please email us at <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>."})}else r=e;return m(r,function(e){return t.data=e,F(t,e)}).otherwise(function(){throw new P({sender:t,title:"Error loading GeoJSON",message:"An error occurred while loading a GeoJSON file.  This may indicate that the file is invalid or that it is not supported by "+t.terria.appName+'.  If you would like assistance or further information, please email us at <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>."})})});if(A.test(t.url)){if("undefined"==typeof FileReader)throw new P({sender:t,title:"Unsupported web browser",message:"Sorry, your web browser does not support the File API, which "+t.terria.appName+' requires in order to load this dataset.  Please upgrade your web browser.  For the best experience, we recommend the latest versions of <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a>, or <a href="http://www.mozilla.org/firefox" target="_blank">Mozilla Firefox</a>, or <a href="http://www.microsoft.com/ie" target="_blank">Internet Explorer 11</a>.'});e=p(k(t,t.url,"1d")).then(function(e){var t=m.defer();return v.createReader(new v.BlobReader(e),function(e){e.getEntries(function(e){for(var r=!1,i=0;i<e.length;i++){var a=e[i];j.test(a.filename)&&(O(a,t),r=!0)}r||t.reject()})},function(e){t.reject(e)}),t.promise})}else e=f(k(t,t.url,"1d"));return e.then(function(e){return F(t,e)}).otherwise(function(e){if(e instanceof P)throw e;throw new P({sender:t,title:"Could not load JSON",message:'An error occurred while retrieving JSON data from the provided link.  <p>If you entered the link manually, please verify that the link is correct.</p><p>This error may also indicate that the server does not support <a href="http://enable-cors.org/" target="_blank">CORS</a>.  If this is your server, verify that CORS is enabled and enable it if it is not.  If you do not control the server, please contact the administrator of the server and ask them to enable CORS.  Or, contact the '+t.terria.appName+' team by emailing <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a> and ask us to add this server to the list of non-CORS-supporting servers that may be proxied by "+t.terria.appName+" itself.</p><p>If you did not enter this link manually, this error may indicate that the data source you're trying to add is temporarily unavailable or there is a problem with your internet connection.  Try adding the data source again, and if the problem persists, please report it by sending an email to <a href=\"mailto:"+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"})})})}.bind(null,r)).catch(r.oe),e.promise},e.exports=M},,,,,,,,,,,,,function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(287),n=r(14),o=r(41),s=r(138),l=r(86),u=r(8),c=r(10),d=r(11),p=r(17),f=r(27),h=r(42),m=r(23),g=r(229),v=r(117),y=r(256),b=r(29),_=r(18),w=function(e){a.call(this,e),this._enabledDate=void 0,this._shownDate=void 0,this._loadForEnablePromise=void 0,this._lastLoadInfluencingValues=void 0,this.nowViewingCatalogItem=void 0,this.creatorCatalogItem=void 0,this.nowViewingIndex=void 0,this.rectangle=void 0,this.url=void 0,this.dataCustodian=void 0,this.attribution=void 0,this.metadataUrl=void 0,this.isEnabled=!1,this.isShown=!1,this.isLegendVisible=!0,this.displayChoicesBeforeLegend=!1,this.clock=void 0,this.isLoading=!1,this.isEnableable=!0,this.isMappable=!0,this.showsInfo=!0,this.nowViewingMessage=void 0,this.featureInfoTemplate=void 0,this.maximumShownFeatureInfos=e.configParameters.defaultMaximumShownFeatureInfos,this.zoomOnEnable=!1,this.dateFormat={},this.useOwnClock=!1,this.disablePreview=!1,this._currentTime=void 0,this._legendUrl=void 0,this._legendUrls=void 0,this._dataUrl=void 0,this._dataUrlType=void 0,m.track(this,["rectangle","dataCustodian","attribution","metadataUrl","isEnabled","isShown","isLegendVisible","clock","_currentTime","isLoading","isMappable","nowViewingMessage","zoomOnEnable","isEnableable","showsInfo","nowViewingMessage","url","_legendUrl","_legendUrls","_dataUrl","_dataUrlType","nowViewingCatalogItem","useOwnClock","disablePreview"]);var t=!1;m.defineProperty(this,"legendUrls",{get:function(){if(!u(this._legendUrls)||0===this._legendUrls.length){var e=t?void 0:this.legendUrl;if(u(e)&&u(e.url)&&e.url.length>0)return[e]}return this._legendUrls},set:function(e){this._legendUrls=e,this._legendUrl=void 0}}),m.defineProperty(this,"legendUrl",{get:function(){t=!0;try{if(u(this._legendUrl))return this._legendUrl;var e=this.legendUrls;return u(e)?this.legendUrls[0]:void 0}finally{t=!1}},set:function(e){this._legendUrl=e,this._legendUrls=void 0}}),m.defineProperty(this,"dataUrl",{get:function(){return u(this._dataUrl)?this._dataUrl:this.url},set:function(e){this._dataUrl=e}}),m.defineProperty(this,"dataUrlType",{get:function(){return u(this._dataUrlType)?this._dataUrlType:"direct"},set:function(e){this._dataUrlType=e}}),m.defineProperty(this,"currentTime",{get:function(){return this._currentTime},set:function(e){if(this.useOwnClock?x(this,e):(this.terria.clock.currentTime=h.clone(e),this.terria.clock.tick()),this._currentChartData){var t=this.intervals.indexOf(e);this.selectedIndex=t,this._currentChartData.selectedIndex=t,this._currentChartData.renderer&&this._currentChartData.renderer.highlightMoment(t)}}}),m.defineProperty(this,"discreteTime",{get:function(){return E(this,k(this))}}),m.defineProperty(this,"clampedDiscreteTime",{get:function(){return u(this.discreteTime)?this.discreteTime:I(this)?P(this,this.currentTime)?E(this,0):T(this,this.currentTime)?E(this,this.intervals.length-1):void 0:void 0}}),m.defineProperty(this,"_mirroringTerriaClock",{get:function(){return this.isEnabled&&!this.useOwnClock&&u(this.clock)}}),m.defineProperty(this,"_clockDefined",{get:function(){return u(this.clock)}}),m.getObservable(this,"_clockDefined").subscribe(function(e){var t;(function(e){u(e._removeCurrentTimeChange)&&(e._removeCurrentTimeChange(),e._removeCurrentTimeChange=void 0)})(t=this),u(t.clock)&&(t._removeCurrentTimeChange=t.clock.definitionChanged.addEventListener(function(){t._currentTime=h.clone(t.clock.currentTime)}),t._currentTime=h.clone(t.clock.currentTime))},this),m.getObservable(this,"isEnabled").subscribe(function(e){!function(e){var t=e.terria;u(e.creatorCatalogItem)&&(e.creatorCatalogItem.isEnabled=e.isEnabled);if(e.isEnabled){if(t.nowViewing.add(e),!u(e._loadForEnablePromise)){var r=!1,i=_.all([e.load(),e.waitForDisclaimerIfNeeded()]).then(function(){if(e.isEnabled&&(u(e.nowViewingCatalogItem)&&e.terria.nowViewing.items.remove(e),e._enable(),e.terria.currentViewer.notifyRepaintRequired(),e.terria.currentViewer.addAttribution(e.attribution),u(e.imageryLayer)&&(e.imageryLayer.featureInfoTemplate=e.featureInfoTemplate),e.zoomOnEnable))return e.zoomTo()});y(e.terria,i),i.always(function(){r=!0,e._loadForEnablePromise=void 0}),e._loadForEnablePromise=r?void 0:i}e.isShown=!0,t.analytics.logEvent("dataSource","added",e.name),e._enabledDate=Date.now()}else{var a;e.isShown=!1,u(e._loadForEnablePromise)||(e._disable(),e.terria.currentViewer.removeAttribution(e.attribution)),t.nowViewing.remove(e),e._enabledDate&&(a=(Date.now()-e._enabledDate)/1e3|0),t.analytics.logEvent("dataSource","removed",e.name,a)}e.terria.currentViewer.notifyRepaintRequired()}(this)},this),m.getObservable(this,"isShown").subscribe(function(e){!function(e){u(e.creatorCatalogItem)&&(e.creatorCatalogItem.isShown=e.isShown);if(e.isShown)e.isEnabled=!0,y(e.terria,_(e._loadForEnablePromise,function(){e.isEnabled&&e.isShown&&(e._show(),e.useClock(),e.terria.currentViewer.notifyRepaintRequired())})),e.terria.analytics.logEvent("dataSource","shown",e.name),e._shownDate=Date.now();else{var t;u(e._loadForEnablePromise)||(e._hide(),e.useClock()),u(e._shownDate)?t=(Date.now()-e._shownDate)/1e3|0:e._enabledDate&&(t=(Date.now()-e._enabledDate)/1e3|0),e.terria.analytics.logEvent("dataSource","hidden",e.name,t)}e.terria.currentViewer.notifyRepaintRequired()}(this)},this),m.getObservable(this,"_mirroringTerriaClock").subscribe(function(e){var t;(t=this)._mirroringTerriaClock&&!u(t._removeTerriaClockWatch)?t._removeTerriaClockWatch=t.terria.clock.onTick.addEventListener(function(e){h.equals(e.currentTime,t.clock.currentTime)||x(t,e.currentTime)}):!t._mirroringTerriaClock&&u(t._removeTerriaClockWatch)&&(t._removeTerriaClockWatch(),t._removeTerriaClockWatch=void 0)},this),m.getObservable(this,"useOwnClock").subscribe(function(e){var t;(t=this)._lastUseOwnClock!==t.useOwnClock&&u(t.clock)&&u(t.terria)&&u(t.terria.clock)&&u(t.terria.clock.currentTime)&&(t.useOwnClock?x(t,t.terria.clock.currentTime):t.terria.clock.currentTime=h.clone(t.clock.currentTime),t._lastUseOwnClock=t.useOwnClock,t.useClock())},this)};f(a,w),c(w.prototype,{supportsReordering:{get:function(){return!1}},supportsToggleShown:{get:function(){return!0}},supportsOpacity:{get:function(){return!1}},supportsSplitting:{get:function(){return!1}},hasLegend:{get:function(){return u(this.legendUrl)}},canZoomTo:{get:function(){return u(this.nowViewingCatalogItem)?this.nowViewingCatalogItem.canZoomTo:u(this.rectangle)}},metadata:{get:function(){return w.defaultMetadata}},updaters:{get:function(){return w.defaultUpdaters}},serializers:{get:function(){return w.defaultSerializers}},propertiesForSharing:{get:function(){return w.defaultPropertiesForSharing}}}),(w.defaultMetadata=new v).isLoading=!1,w.defaultMetadata.dataSourceErrorMessage="This data item does not have any details available.",w.defaultMetadata.serviceErrorMessage="This service does not have any details available.",p(w.defaultMetadata),(w.defaultUpdaters=o(a.defaultUpdaters)).rectangle=function(e,t,r){u(t.rectangle)?e.rectangle=b.fromDegrees(t.rectangle[0],t.rectangle[1],t.rectangle[2],t.rectangle[3]):e.rectangle=b.MAX_VALUE},w.defaultUpdaters.attribution=function(e,t,r){if(u(t.attribution))if("object"===i(t.attribution)&&t.attribution.text&&t.attribution.link){var a=document.createElement("a");a.href=t.attribution.link,a.target="_blank",a.innerText=t.attribution.text,e.attribution=new l(a.outerHTML)}else"object"===i(t.attribution)&&t.attribution.text?e.attribution=new l(t.attribution.text):"string"==typeof t.attribution&&(e.attribution=new l(t.attribution))},w.defaultUpdaters.legendUrl=function(e,t,r){var i,a;u(t.legendUrl)&&("string"==typeof t.legendUrl?i=t.legendUrl:(i=t.legendUrl.url,a=t.legendUrl.mimeType),e.legendUrl=new g(i,a))},w.defaultUpdaters.legendUrls=function(e,t,r){u(t.legendUrls)&&(e.legendUrls=t.legendUrls.map(function(e){var t,r;return"string"==typeof e?t=e:(t=e.url,r=e.mimeType),new g(t,r)}))},w.defaultUpdaters.nowViewingCatalogItem=function(e,t,r,i){if(u(t.nowViewingCatalogItem))return _(e.load()).then(function(){return u(e.nowViewingCatalogItem)||(e.nowViewingCatalogItem=s(t.nowViewingCatalogItem.type,e.terria)),e.nowViewingCatalogItem.updateFromJson(t.nowViewingCatalogItem,i)})},w.defaultUpdaters.currentTime=function(e,t,r){},w.defaultUpdaters.discreteTime=function(e,t,r){},p(w.defaultUpdaters),(w.defaultSerializers=o(a.defaultSerializers)).rectangle=function(e,t,r){u(e.rectangle)&&(t.rectangle=[n.toDegrees(e.rectangle.west),n.toDegrees(e.rectangle.south),n.toDegrees(e.rectangle.east),n.toDegrees(e.rectangle.north)])},w.defaultSerializers.legendUrl=function(e,t,r){u(e._legendUrl)&&(t.legendUrl=e._legendUrl)},w.defaultSerializers.legendUrls=function(e,t,r){u(e._legendUrls)&&e._legendUrls.length>0&&(t.legendUrls=e._legendUrls)},w.defaultSerializers.attribution=function(e,t,r){u(e.attribution)&&(u(e.attribution.link)?t.attribution={text:e.attribution.text,link:e.attribution.link}:t.attribution=e.attribution.text)},w.defaultSerializers.dataUrl=function(e,t,r){u(e._dataUrl)&&(t.dataUrl=e._dataUrl)},w.defaultSerializers.dataUrlType=function(e,t,r){u(e._dataUrlType)&&(t.dataUrlType=e._dataUrlType)},w.defaultSerializers.nowViewingCatalogItem=function(e,t,r,i){e.isEnabled&&u(e.nowViewingCatalogItem)&&(t.nowViewingCatalogItem=e.nowViewingCatalogItem.serializeToJson(i))},w.defaultSerializers.currentTime=function(e,t,r){},w.defaultSerializers.discreteTime=function(e,t,r){},w.defaultSerializers.clampedDiscreteTime=function(e,t,r){},p(w.defaultSerializers),(w.defaultPropertiesForSharing=o(a.defaultPropertiesForSharing)).push("isEnabled"),w.defaultPropertiesForSharing.push("isShown"),w.defaultPropertiesForSharing.push("isLegendVisible"),w.defaultPropertiesForSharing.push("nowViewingIndex"),w.defaultPropertiesForSharing.push("nowViewingCatalogItem"),w.defaultPropertiesForSharing.push("useOwnClock"),p(w.defaultPropertiesForSharing),w.prototype.load=function(){var e=a.prototype.load.call(this);if(e)return e.then(function(e){e instanceof w&&(this.nowViewingCatalogItem=e,e.creatorCatalogItem=this),this.terria.currentViewer.notifyRepaintRequired()}.bind(this)).otherwise(function(e){throw this.isEnabled=!1,e}.bind(this))},w.prototype.loadAndEnable=function(){return this.isEnabled=!0,this._loadingPromise},w.prototype._load=function(){return _()};var S=p([]);w.prototype._getValuesThatInfluenceLoad=function(){return S},w.prototype.toggleEnabled=function(){return this.isEnabled=!this.isEnabled,this.isEnabled},w.prototype.toggleShown=function(){return this.isShown=!this.isShown,this.isShown},w.prototype.toggleLegendVisible=function(){return this.isLegendVisible=!this.isLegendVisible,this.isLegendVisible};var C=new b;function x(e,t){u(e.clock)&&(e.clock.currentTime=h.clone(t))}function E(e,t){if(u(t)&&u(e.intervals)&&t>=0&&t<e.intervals.length)return h.toDate(e.intervals.get(t).start)}function I(e){return u(e.currentTime)&&u(e.intervals)&&0!==e.intervals.length}function k(e){if(I(e)&&!P(e,e.currentTime)&&!T(e,e.currentTime))return e.intervals.indexOf(e.currentTime)}function L(e,t){if(u(t)){var r=E(e,t);u(r)&&(e.currentTime=h.fromDate(new Date(r)))}}function P(e,t){var r=e.intervals.get(0);return!!(h.lessThan(t,r.start)||h.equals(t,r.start)&&!r.isStartIncluded)}function T(e,t){var r=e.intervals.length-1,i=e.intervals.get(r);return!!(h.greaterThan(t,i.stop)||h.equals(t,i.stop)&&!i.isStopIncluded)}function M(e){if(I(e)&&!T(e,e.currentTime)){if(P(e,e.currentTime))return 0;var t=k(e);return u(t)&&t<e.intervals.length-1?t+1:void 0}}function A(e){if(I(e)&&!P(e,e.currentTime)){if(T(e,e.currentTime))return e.intervals.length-1;var t=k(e);return u(t)&&t>0?t-1:void 0}}w.prototype.zoomTo=function(){var e=this;return _(this.load(),function(){if(u(e.nowViewingCatalogItem))return e.nowViewingCatalogItem.zoomTo();if(u(e.rectangle)){var t=b.clone(e.rectangle,C);t.east-t.west>3.14&&(t=b.clone(e.terria.homeView.rectangle,C),console.log("Extent is wider than world so using homeView."));var r=e.terria;r.analytics.logEvent("dataSource","zoomTo",e.name);var i=n.EPSILON3;return t.east===t.west&&(t.east+=i,t.west-=i),t.north===t.south&&(t.north+=i,t.south-=i),r.currentViewer.zoomTo(t)}})},w.prototype.useClock=function(){var e=this;return _(this.load(),function(){if(u(e.nowViewingCatalogItem))return e.nowViewingCatalogItem.useClock();u(e.clock)&&(e.isEnabled&&e.isShown&&!e.useOwnClock?e.terria.timeSeriesStack.addLayerToTop(e):e.terria.timeSeriesStack.removeLayer(e))})},w.prototype.moveToNextTime=function(){L(this,M(this))},w.prototype.moveToPreviousTime=function(){L(this,A(this))},w.prototype.isNextTimeAvaliable=function(){return u(M(this))},w.prototype.isPreviousTimeAvaliable=function(){return u(A(this))},w.prototype.zoomToAndUseClock=function(){return _.all([this.zoomTo(),this.useClock()])},w.prototype._enable=function(){if(u(this.nowViewingCatalogItem))this.nowViewingCatalogItem.isEnabled=!0;else{var e=this.terria;u(e.cesium)&&(e.cesium.stoppedRendering=!0,this._enableInCesium()),u(e.leaflet)&&this._enableInLeaflet()}},w.prototype._disable=function(){if(u(this.nowViewingCatalogItem))this.nowViewingCatalogItem.isEnabled=!1;else{var e=this.terria;u(e.cesium)&&this._disableInCesium(),u(e.leaflet)&&this._disableInLeaflet()}},w.prototype._show=function(){if(u(this.nowViewingCatalogItem))this.nowViewingCatalogItem.isShown=!0;else{var e=this.terria;u(e.cesium)&&this._showInCesium(),u(e.leaflet)&&this._showInLeaflet()}},w.prototype._hide=function(){if(u(this.nowViewingCatalogItem))this.nowViewingCatalogItem.isShown=!1;else{var e=this.terria;u(e.cesium)&&this._hideInCesium(),u(e.leaflet)&&this._hideInLeaflet()}},w.prototype._enableInCesium=function(){throw new d("_enableInCesium must be implemented in the derived class.")},w.prototype._disableInCesium=function(){throw new d("_disableInCesium must be implemented in the derived class.")},w.prototype._showInCesium=function(){throw new d("_showInCesium must be implemented in the derived class.")},w.prototype._hideInCesium=function(){throw new d("_hideInCesium must be implemented in the derived class.")},w.prototype._enableInLeaflet=function(){throw new d("enableInLeaflet must be implemented in the derived class.")},w.prototype._disableInLeaflet=function(){throw new d("disableInLeaflet must be implemented in the derived class.")},w.prototype._showInLeaflet=function(){throw new d("_showInLeaflet must be implemented in the derived class.")},w.prototype._hideInLeaflet=function(){throw new d("_hideInLeaflet must be implemented in the derived class.")},w.prototype.enableWithParents=function(){this.isEnabled=!0,this.parent&&this.parent.enableWithParents()},w.prototype.handleTileError=function(e,t,r,i,a){return e},e.exports=w},,,,,,function(e,t,r){e.exports={tree:"tjs-parameter-editors__tree tjs-_base__list-reset","parameter-editor-important-note":"tjs-parameter-editors__parameter-editor-important-note",parameterEditorImportantNote:"tjs-parameter-editors__parameter-editor-important-note",data:"tjs-parameter-editors__data","parameter-editor":"tjs-parameter-editors__parameter-editor",parameterEditor:"tjs-parameter-editors__parameter-editor",field:"tjs-parameter-editors__field tjs-_form__field tjs-_form__input","field-date-placeholder":"tjs-parameter-editors__field-date-placeholder tjs-parameter-editors__field tjs-_form__field tjs-_form__input",fieldDatePlaceholder:"tjs-parameter-editors__field-date-placeholder tjs-parameter-editors__field tjs-_form__field tjs-_form__input","field-invalid":"tjs-parameter-editors__field-invalid tjs-parameter-editors__field tjs-_form__field tjs-_form__input",fieldInvalid:"tjs-parameter-editors__field-invalid tjs-parameter-editors__field tjs-_form__field tjs-_form__input","warning-text":"tjs-parameter-editors__warning-text",warningText:"tjs-parameter-editors__warning-text","field--parameter-editor":"tjs-parameter-editors__field--parameter-editor",fieldParameterEditor:"tjs-parameter-editors__field--parameter-editor",label:"tjs-parameter-editors__label","btn-catalog":"tjs-parameter-editors__btn-catalog",btnCatalog:"tjs-parameter-editors__btn-catalog","btn-selector":"tjs-parameter-editors__btn-selector tjs-_buttons__btn tjs-_buttons__btn-primary",btnSelector:"tjs-parameter-editors__btn-selector tjs-_buttons__btn tjs-_buttons__btn-primary",map:"tjs-parameter-editors__map","region-input":"tjs-parameter-editors__region-input tjs-_form__field tjs-_form__input",regionInput:"tjs-parameter-editors__region-input tjs-_form__field tjs-_form__input","is-hidden":"tjs-parameter-editors__is-hidden undefined",isHidden:"tjs-parameter-editors__is-hidden undefined",autocomplete:"tjs-parameter-editors__autocomplete tjs-_base__list-reset tjs-_base__scrollbars","autocomplete-item":"tjs-parameter-editors__autocomplete-item tjs-_buttons__btn",autocompleteItem:"tjs-parameter-editors__autocomplete-item tjs-_buttons__btn",embeddedMap:"tjs-parameter-editors__embeddedMap",radio:"tjs-parameter-editors__radio","btn-radio":"tjs-parameter-editors__btn-radio tjs-_buttons__btn",btnRadio:"tjs-parameter-editors__btn-radio tjs-_buttons__btn","btn-location-selector":"tjs-parameter-editors__btn-location-selector tjs-_buttons__btn tjs-_buttons__btn--tertiary",btnLocationSelector:"tjs-parameter-editors__btn-location-selector tjs-_buttons__btn tjs-_buttons__btn--tertiary"}},,,,,,function(e,t,r){"use strict";var i=r(41),a=r(9),n=r(8),o=r(10),s=r(17),l=r(23),u=r(40),c=r(18),d=r(11),p=r(58),f=r(608),h=r(138),m=r(287),g=r(27),v=r(256),y=function(e){m.call(this,e),this._lastLoadInfluencingValues=void 0,this.isOpen=!1,this.items=[],this.preserveOrder=!1,this.sortFunction=function(e,t){if(e.isPromoted&&!t.isPromoted)return-1;if(!e.isPromoted&&t.isPromoted)return 1;for(var r=e.nameSortKey,i=t.nameSortKey,a=0;a<r.length&&a<i.length;++a){if(r[a]<i[a])return-1;if(r[a]>i[a])return 1}return r.length===i.length?0:r.length>i.length?1:-1},l.track(this,["isOpen","items"]);var t=this;l.getObservable(this,"isOpen").subscribe(function(e){e&&v(t.terria,c.all([t.waitForDisclaimerIfNeeded(),t.load()]))}),l.getObservable(this,"isLoading").subscribe(function(e){!1===e&&t.isOpen&&v(t.terria,t.load())}),this._setupItemListeners()};g(m,y),o(y.prototype,{type:{get:function(){return"group"}},typeName:{get:function(){return"Group"}},isGroup:{get:function(){return!0}},updaters:{get:function(){return y.defaultUpdaters}},serializers:{get:function(){return y.defaultSerializers}},propertiesForSharing:{get:function(){return y.defaultPropertiesForSharing}}}),(y.defaultUpdaters=i(m.defaultUpdaters)).items=function(e,t,r,i){return c(e.load(),function(){return y.updateItems(t.items,i,e)})},y.defaultUpdaters.isLoading=function(e,t,r){},s(y.defaultUpdaters),(y.defaultSerializers=i(m.defaultSerializers)).items=function(e,t,r,i){t.items=e.items.filter(function(e){return!n(i.itemFilter)||i.itemFilter(e)}).map(function(e){return e.serializeToJson(i)}).filter(function(e){return n(e)})},y.enabledShareableItemsSerializer=function(e,t,r,i){return y.defaultSerializers.items(e,t,r,p({propertyFilter:f([i.propertyFilter,m.propertyFilters.sharedOnly]),itemFilter:f([i.itemFilter,m.itemFilters.enabled])},i))},y.defaultSerializers.isLoading=function(e,t,r,i){},s(y.defaultSerializers),(y.defaultPropertiesForSharing=i(m.defaultPropertiesForSharing)).push("items"),y.defaultPropertiesForSharing.push("isOpen"),s(y.defaultPropertiesForSharing),y.prototype._setupItemListeners=function(){var e={added:function(e){e.parent=this,e.connectsWithRoot()&&function e(t,r){t.forEach(function(t){t.allShareKeys.forEach(function(e){var i=e;r[i]&&(i=function(e,t){var r=t,i=0;for(;e[r];){var a=r.match(b);if(null!==a){var n=parseInt(a[1],10)+1;r=r.replace(b,"("+n+")")}else r+=" (1)";if(++i>=1e5)throw new d("Was not able to find a unique key for "+t+" after 100000 iterations. This is probably because the regex for matching keys was somehow unable to work for that key.")}return r}(r,e),t.uniqueId===e&&(t.id=i),console.warn("Duplicate shareKey: "+e+". Inserting new item under "+i)),r[i]=t},this),n(t.items)&&e(t.items,r)})}([e],this.terria.catalog.shareKeyIndex)}.bind(this),deleted:function(e){e.connectsWithRoot()&&function e(t,r){t.forEach(function(t){t.allShareKeys.forEach(function(e){r[e]=void 0},this),n(t.items)&&e(t.items,r)})}([e],this.terria.catalog.shareKeyIndex),e.parent=void 0}.bind(this)};l.getObservable(this,"items").subscribe(function(t){t.forEach(function(t){n(t.moved)||e[t.status](t.value)})},null,"arrayChange")};var b=/\((\d+)\)$/;y.prototype.load=function(){var e=m.prototype.load.call(this);if(e)return e.then(function(){this.sortItems(!0)}.bind(this)).otherwise(function(e){throw this.isOpen=!1,e}.bind(this))},y.prototype._load=function(){return c()};var _=s([]);y.prototype._getValuesThatInfluenceLoad=function(){return _},y.prototype.add=function(e){this.items.push(e)},y.prototype.remove=function(e){this.items.remove(e)},y.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},y.prototype.findFirstItemByName=function(e){for(var t=0;t<this.items.length;++t)if(this.items[t].name===e)return this.items[t]},y.prototype.sortItems=function(e){if(this.preserveOrder){var t=this.items.filter(function(e){return e.isPromoted}),r=this.items.filter(function(e){return!e.isPromoted});t.length>0&&r.length>0&&(this.items=t.concat(r))}else this.items.sort(this.sortFunction);if(a(e,!1))for(var i=0;i<this.items.length;++i){var o=this.items[i];n(o.sortItems)&&o.sortItems(e)}},y.prototype.enableWithParents=function(){this.isOpen=!0,this.parent&&this.parent.enableWithParents()},y.updateItems=function(e,t,r){if(!(e instanceof Array))throw new d("JSON catalog description must be an array of groups.");t=a(t,a.EMPTY_OBJECT);for(var i=a(t.onlyUpdateExistingItems,!1),o=[],s=0;s<e.length;++s){var l,p=e[s];if(!n(p.name)&&!n(p.id))throw new u("A catalog member must have a name or a id for matching.");p.id?l=r.terria.catalog.shareKeyIndex[p.id]:p.name&&(l=r.findFirstItemByName(p.name));var f=n(l);if(!f){if(i)continue;if(!n(p.name))throw new u("A newly created catalog member must have a name.");if(!n(p.type))throw new u("A catalog member must have a type.");l=h(p.type,r.terria)}o.push(l.updateFromJson(p,t)),f||r.add(l)}return r.sortItems(),c.all(o)},e.exports=y},,,,,,,,,,,,function(e,t,r){"use strict";var i=r(254),a=r(9),n=r(8),o=r(10),s=r(11),l=r(23),u=r(139),c=r(288),d=r(255),p=r(36),f=function e(t){if(!n(t)||!n(t.terria))throw new s("options.terria is required.");if(!n(t.catalogFunction))throw new s("options.catalogFunction is required.");if(!n(t.id))throw new s("options.id is required.");this._terria=t.terria,this._catalogFunction=t.catalogFunction,this._id=t.id,this._loadingPromise=void 0,this._lastLoadInfluencingValues=void 0,this.isLoading=!1,this.name=a(t.name,t.id),this.description=t.description,this.isRequired=a(t.isRequired,!1),this.converter=void 0,this.formatter="default",this._defaultValue=t.defaultValue,this.value=t.value,l.track(this,["_value","formatter","_defaultValue"]),l.defineProperty(this,"value",{get:e.defaultValueGetter,set:e.defaultValueSetter}),l.defineProperty(this,"defaultValue",{get:function(){return this._defaultValue},set:function(e){this._defaultValue=e}})};f.defaultValueGetter=function(){return n(this._value)?this._value:this.defaultValue},f.defaultValueSetter=function(e){this._value=e},o(f.prototype,{type:{get:function(){throw new s("FunctionParameter.type must be overridden in derived classes.")}},terria:{get:function(){return this._terria}},catalogFunction:{get:function(){return this._catalogFunction}},id:{get:function(){return this._id}},availableFormatters:{get:function(){return this.constructor&&this.constructor.AvailableFormatters?this.constructor.AvailableFormatters:{default:this.formatValueAsString.bind(this)}}}}),f.prototype.load=function(){if(n(this._load)){if(n(this._loadingPromise))return this._loadingPromise;var e=[];if(n(this._getValuesThatInfluenceLoad)&&(e=this._getValuesThatInfluenceLoad()),!i(e,this._lastLoadInfluencingValues)){this.isLoading=!0;var t=this;return this._loadingPromise=u(function(){return t._lastLoadInfluencingValues=[],n(t._getValuesThatInfluenceLoad)&&(t._lastLoadInfluencingValues=t._getValuesThatInfluenceLoad()),t._load()}).then(function(){t._loadingPromise=void 0,t.isLoading=!1}).otherwise(function(e){throw t._lastLoadInfluencingValues=void 0,t._loadingPromise=void 0,t.isLoading=!1,e}),this._loadingPromise}}},f.prototype.formatValueAsString=function(e){return e=a(e,this._value),n(e)?e.toString():"-"},f.prototype.formatForService=function(e){var t=this.availableFormatters[this.formatter];if(!t)throw new p({sender:this,title:"Unknown formatter",message:"The function parameter formatter ".concat(this.formatter," is unknown.\n\n")+"Valid formatters are:\n\n   * "+Object.keys(this.availableFormatters).join("\n   * ")});return t(e=a(e,this._value))},f.prototype.updateFromJson=function(e){return d(this,e)},f.prototype.serializeToJson=function(){var e=c(this);return e.type=this.type,e},e.exports=f},function(e,t,r){"use strict";var i=r(291),a=r(23);e.exports=function(){this.dataSourceMetadata=new i,this.serviceMetadata=new i,this.promise=void 0,this.dataSourceErrorMessage=void 0,this.serviceErrorMessage=void 0,this.isLoading=!0,a.track(this,["dataSourceMetadata","serviceMetadata","dataSourceErrorMessage","serviceErrorMessage","isLoading"])}},function(e,t,r){"use strict";var i=r(8),a=r(23);e.exports=function(e,t,r){var n=a.getObservable(e,t);i(n)&&delete e.__knockoutObservables[t],delete e[t],a.defineProperty(e,t,r),i(n)&&n.notifySubscribers()}},,,,,,,,,,function(e,t,r){"use strict";e.exports={LON:0,LAT:1,ALT:2,TIME:3,SCALAR:4,ENUM:5,REGION:6,TAG:7,HIDDEN:8,ADDR:9}},,,,function(e,t,r){"use strict";var i=u(r(21)),a=u(r(13)),n=u(r(19)),o=u(r(15)),s=u(r(39)),l=u(r(1373));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)({displayName:"Loader",mixins:[i.default],getDefaultProps:function(){return{className:"",message:"Loading..."}},propTypes:{message:o.default.string,className:o.default.string},render:function(){return a.default.createElement("span",{className:l.default.loader},a.default.createElement(s.default,{glyph:s.default.GLYPHS.loader}),a.default.createElement("span",null,this.props.message||"Loading"))}});e.exports=c},,,,,function(e,t,r){"use strict";var i=r(36);e.exports=function(e,t){t instanceof i?t.raisedToUser||(t.raisedToUser=!0,e.error.raiseEvent(t)):e.error.raiseEvent(new i({sender:void 0,title:"An error occurred",message:"<p>"+e.appName+' experienced an error.  Please report this by emailing <a href="mailto:'+e.supportEmail+'">'+e.supportEmail+"</a>.  Details of the error are below.</p><p><pre>"+t.toString()+"</pre></p>"}))}},function(e,t,r){"use strict";var i=r(8),a=r(36),n={},o=function(e,t){var r=n[e];if(!i(r))throw new a({title:"Unsupported catalogue item type",message:"Unknown catalogue item type: "+e+".  If you are loading your own catalogue, please verify that it is correct. This error may also indicate an attempt to load a newer catalogue file in an older version of "+t.appName+"."});return new r(t)};o.register=function(e,t){n[e]=t},e.exports=o},function(e,t,r){"use strict";var i=r(9),a=r(18);e.exports=function(e,t){t=i(t,0);var r=a.defer();return setTimeout(function(){try{r.resolve(e())}catch(e){r.reject(e)}},t),r.promise}},,,,,,,,,,,,function(e,t,r){"use strict";e.exports=function(e,t){if(!e)return{};var r=function(e){return String(e||"").replace(/-/g,"_")};var i,a=function(e){return Array.isArray(e)||(e=[e]),e.length=e.length,e};if("string"==typeof e&&(i=e,e=(new DOMParser).parseFromString(i,"text/xml")),e.nodeType){if(3==e.nodeType||4==e.nodeType)return e.nodeValue;var n=9==e.nodeType?e.documentElement:e,o=function e(i,n){if(!i)return null;var o="",s=null,l=null;if(i.nodeType,r(i.localName||i.nodeName),i.text||i.nodeValue,i.childNodes&&i.childNodes.length>0)for(var u=0;u<i.childNodes.length;++u){var c=i.childNodes[u],d=c.nodeType,p=r(c.localName||c.nodeName),f=c.text||c.nodeValue||"";if(8!=d)if(3!=d&&4!=d&&p)(s=s||{})[p]?(s[p].length||(s[p]=a(s[p])),s[p]=a(s[p]),s[p][s[p].length]=e(c,!0),s[p].length=s[p].length):s[p]=e(c);else{if(f.match(/^\s+$/))continue;o+=f.replace(/^\s+/,"").replace(/\s+$/,"")}}if(i.attributes&&i.attributes.length>0){l={},s=s||{};for(var h=0;h<i.attributes.length;++h){var m=i.attributes[h],g=r(m.name),v=m.value;l[g]=v,s[g]?(s[p]=a(s[p]),s[g][s[g].length]=v,s[g].length=s[g].length):s[g]=v}}if(s){var y=""!=o?new String(o):{};for(var b in s)s.hasOwnProperty(b)&&(y[b]=s[b]);(o=(s=y).text?[s.text||""].concat([o]):o)&&(s.text=o),o=""}var _=s||o;return t&&(o&&(_={}),(o=_.text||o||"")&&(_.text=o),n||(_=a(_))),_}(n,!0);return e=null,n=null,o}}},,,function(e,t,r){"use strict";var i=r(9),a=r(10),n=r(37);function o(e){return new n(e)._makeRequest({responseType:e.responseType,overrideMimeType:e.overrideMimeType,method:i(e.method,"GET"),data:e.data})}a(o,{load:{get:function(){return n._Implementations.loadWithXhr},set:function(e){n._Implementations.loadWithXhr=e}},defaultLoad:{get:function(){return n._DefaultImplementations.loadWithXhr}}}),e.exports=o},function(e,t,r){"use strict";var i=r(14),a=r(168),n=r(41),o=r(261),s=r(9),l=r(8),u=r(10),c=r(11),d=r(26),p=r(201),f=r(17),h=r(140),m=r(42),g=r(23),v=r(29),y=r(37),b=r(802),_=r(107),w=r(127),S=r(18),C=r(92),x=r(374),E=r(526),I=r(27),k=r(36),L=r(118),P=r(530),T=P.setOpacity,M=P.fixNextLayerOrder,A=r(531),j=r(368),D=r(128),N=r(263),O=r(183),F=function(e){C.call(this,e),this._imageryLayer=void 0,this._clock=void 0,this._currentIntervalIndex=-1,this._currentInterval=void 0,this._nextIntervalIndex=void 0,this._nextInterval=void 0,this._nextLayer=void 0,this.opacity=.6,this.treat404AsError=!1,this.treat403AsError=!0,this.ignoreUnknownTileErrors=!1,this.keepOnTop=!1,this.clipToRectangle=!0,this.isRequiredForRendering=!1,this.initialTimeSource=void 0,this.splitDirection=h.NONE,this.showOnChart=!1,this.dontChartAlone=!1,this.chartColor="#44C99F",this.chartType="moment",this.featureTimesProperty=void 0,this._allIntervals=void 0,this.intervalFilterFeature=void 0,this._intervalFilterCoordinates=void 0,g.track(this,["_clock","opacity","treat404AsError","ignoreUnknownTileErrors","intervals","clipToRectangle","splitDirection","initialTimeSource","showOnChart","dontChartAlone","featureTimesProperty","_allIntervals","intervalFilterFeature","_intervalFilterCoordinates"]),L(this,"_filteredIntervals",{get:function(){var e=this;if(l(this.intervalFilterFeature)){var t=this.intervalFilterFeature.properties[this.featureTimesProperty];if(l(t)){var r=t.getValue(this.currentTime);return new w(r.map(function(t){return e._allIntervals.findIntervalContainingDate(m.fromIso8601(t))}).filter(function(e){return void 0!==e}))}}}}),L(this,"intervals",{get:function(){return l(this._filteredIntervals)?this._filteredIntervals:this._allIntervals},set:function(e){this._allIntervals=e}}),L(this,"clock",{get:function(){var e=this._clock;if(!e&&this.intervals&&this.intervals.length>0){var t=this.intervals.start,r=this.intervals.stop,i=m.secondsDifference(r,t)/this.intervals.length/5;(e=new o).startTime=t,e.stopTime=r,e.multiplier=i,A(e,this.initialTimeSource),this._clock=e}return e},set:function(e){this._clock=e}}),g.defineProperty(this,"availableDates",{get:function(){var e=this.intervals;if(l(e)){for(var t=[],r=0;r<e.length;r++)t.push(m.toDate(e.get(r).start));return t}return[]}},this),L(this,"xAxis",{get:function(){return this.showOnChart?new N("Date",this.availableDates,{type:D.TIME,units:"Date"}):void 0}}),g.getObservable(this,"opacity").subscribe(function(){var e;l((e=this)._imageryLayer)&&e.isEnabled&&e.isShown&&(l(e._imageryLayer.alpha)&&(e._imageryLayer.alpha=e.opacity),l(e._imageryLayer.setOpacity)&&e._imageryLayer.setOpacity(e.opacity),e.terria.currentViewer.notifyRepaintRequired())},this),g.getObservable(this,"splitDirection").subscribe(function(){R(this)},this)};function R(e){e.terria.currentViewer.updateItemForSplitter(e)}function U(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];function i(t){var r=e.intervals.get(t).data,i=e.createImageryProvider(r);i.enablePickFeatures=!1,e._nextLayer=F.enableLayer(e,i,0,void 0,void 0,r),R(e),F.showLayer(e,e._nextLayer)}var n=e.intervals;if(l(t)&&l(n)&&e.isEnabled&&e.isShown){var o=e._currentIntervalIndex;if(!(o>=0&&o<n.length&&_.contains(n.get(o),t)&&_.equals(n.get(o),e._currentInterval))){var s=n.indexOf(t);if(s<0)return F.disableLayer(e,e._imageryLayer),e._imageryLayer=void 0,e._currentIntervalIndex=-1,void(e._currentInterval=void 0);if(s===e._nextIntervalIndex&&_.equals(n.get(s),e._nextInterval)||(F.disableLayer(e,e._nextLayer),i(s)),T(e,e._nextLayer,e.opacity),M(e,e._imageryLayer,e._nextLayer),F.disableLayer(e,e._imageryLayer),e._imageryLayer=e._nextLayer,l(e._imageryLayer)&&(e._imageryLayer.imageryProvider.enablePickFeatures=!0),e._nextLayer=void 0,e._nextIntervalIndex=-1,e._nextInterval=void 0,e._currentIntervalIndex=s,e._currentInterval=n.get(s),r){var u=s+(e.terria.clock.multiplier>=0?1:-1);u===n.length&&e.terria.clock.clockRange===a.LOOP_STOP&&(u=0),u>=0&&u<n.length&&(u!==e._nextIntervalIndex||!_.equals(e._nextInterval,n.get(u)))&&(i(u),e._nextIntervalIndex=u,e._nextInterval=n.get(u))}}}}I(C,F),u(F.prototype,{supportsIntervals:{get:function(){return!1}},imageryLayer:{get:function(){return this._imageryLayer}},supportsReordering:{get:function(){return!this.keepOnTop}},supportsOpacity:{get:function(){return!0}},supportsSplitting:{get:function(){return!0}},updaters:{get:function(){return F.defaultUpdaters}},serializers:{get:function(){return F.defaultSerializers}},propertiesForSharing:{get:function(){return F.defaultPropertiesForSharing}},canFilterIntervalsByFeature:{get:function(){return l(this.featureTimesProperty)}}}),F.defaultUpdaters=n(C.defaultUpdaters),F.defaultUpdaters.intervals=function(e,t,r){if(l(t.intervals)){if(!e.supportsIntervals)throw new k({sender:e,title:"Intervals not supported",message:"Sorry, "+e.typeName+" ("+e.type+') catalog items cannot currently be made time-varying by specifying the "intervals" property.'});for(var i=new w,a=0;a<t.intervals.length;++a){var n=t.intervals[a];i.addInterval(_.fromIso8601({iso8601:n.interval,data:n.data}))}e.intervals=i}},F.defaultUpdaters.initialTimeSource=function(e,t,r){e.initialTimeSource=t.initialTimeSource,l(e.clock)&&A(e.clock,e.initialTimeSource)},F.defaultUpdaters.availableDates=function(){},F.defaultUpdaters.xAxis=function(){},F.defaultUpdaters.intervalFilterFeature=function(e,t,r){if(l(t.intervalFilterFeature)){var i=S();if(e.terria.currentViewer===e.terria._noViewer){var a=S.defer(),n=e.terria.afterViewerChanged.addEventListener(function(){e.terria.currentViewer!==e.terria._noViewer&&(n(),a.resolve())});i=a.promise}i.then(function(){var r,i,a,n=new O({message:"Resolving availability at a location...",onCancel:function(){e.terria.mapInteractionModeStack.pop()}});e.terria.mapInteractionModeStack.push(n),e._intervalFilterCoordinates={level:t.intervalFilterFeature.level,x:t.intervalFilterFeature.x,y:t.intervalFilterFeature.y},e.terria.currentViewer.pickFromLocation({lng:t.intervalFilterFeature.longitude,lat:t.intervalFilterFeature.latitude,height:t.intervalFilterFeature.height},(r={},i=e._imageryLayer.imageryProvider.url,a=e._intervalFilterCoordinates,i in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r)),e.terria.mapInteractionModeStack.pop();var o=n.pickedFeatures;return o.allFeaturesAvailablePromise.then(function(){var t=n.pickedFeatures.features.filter(function(t){return t.imageryLayer===e.imageryLayer})[0];if(void 0!==t)try{e.filterIntervalsByFeature(t,o)}catch(e){}e.terria.mapInteractionModeStack.pop()})})}},f(F.defaultUpdaters),F.defaultSerializers=n(C.defaultSerializers),F.defaultSerializers.intervals=function(e,t,r){if(l(e.intervals)){for(var i=[],a=0;a<e.intervals.length;++a){var n=e.intervals.get(a);i.push({interval:_.toIso8601(n),data:n.data})}t.intervals=i}},F.defaultSerializers.initialTimeSource=function(e,t,r){l(e.clock)?t.initialTimeSource=m.toIso8601(e.clock.currentTime):t.initialTimeSource=e.initialTimeSource},F.defaultSerializers.clock=function(){},F.defaultSerializers.availableDates=function(){},F.defaultSerializers.xAxis=function(){},F.defaultSerializers.intervalFilterFeature=function(e,t,r){if(l(e.intervalFilterFeature)&&l(e._intervalFilterCoordinates)&&l(e.intervalFilterFeature.position)){var a=e.intervalFilterFeature.position.getValue(this.currentTime),n=d.WGS84.cartesianToCartographic(a);t.intervalFilterFeature={level:e._intervalFilterCoordinates.level,x:e._intervalFilterCoordinates.x,y:e._intervalFilterCoordinates.y,longitude:i.toDegrees(n.longitude),latitude:i.toDegrees(n.latitude),height:n.height}}},f(F.defaultSerializers),F.defaultPropertiesForSharing=n(C.defaultPropertiesForSharing),F.defaultPropertiesForSharing.push("opacity"),F.defaultPropertiesForSharing.push("keepOnTop"),F.defaultPropertiesForSharing.push("initialTimeSource"),F.defaultPropertiesForSharing.push("splitDirection"),F.defaultPropertiesForSharing.push("intervalFilterFeature"),F.defaultPropertiesForSharing.push("showOnChart"),f(F.defaultPropertiesForSharing),F.prototype.createImageryProvider=function(e){return this._createImageryProvider(e)},F.prototype._createImageryProvider=function(e){throw new c("_createImageryProvider must be implemented in the derived class.")},F.prototype._enable=function(e){if(!l(this._imageryLayer)){var t,r,i=l(this.intervals)&&this.intervals.length>0&&l(this.clock);if(i){var a,n=this.intervals.indexOf(this.clock.currentTime),o=this.terria.clock.multiplier;n<0?(this._currentIntervalIndex=-1,this._currentInterval=void 0,t=void 0,a=~n+(o<0?-1:0)):(this._currentIntervalIndex=n,this._currentInterval=this.intervals.get(n),t=this._currentInterval.data,a=n+(o<0?-1:1)),a===this.intervals.length&&(a=0),a>=0&&a<this.intervals.length?(this._nextIntervalIndex=a,this._nextInterval=this.intervals.get(a),r=this._nextInterval.data):(this._nextIntervalIndex=-1,this._nextInterval=void 0),this._currentTimeSubscription=g.getObservable(this,"currentTime").subscribe(function(){!function(e){var t=e.intervals;if(!(l(t)&&e.isEnabled&&e.isShown&&l(e.clock)))return;U(e,e.clock.currentTime)}(this)},this)}if(!i||l(t)){var s=this.createImageryProvider(t);this._imageryLayer=F.enableLayer(this,s,this.opacity,e,void 0,t)}if(l(r)){var u=this.createImageryProvider(r);u.enablePickFeatures=!1,this._nextLayer=F.enableLayer(this,u,0,e+1,void 0,r)}R(this)}},F.prototype._disable=function(){l(this._currentTimeSubscription)&&(this._currentTimeSubscription.dispose(),this._currentTimeSubscription=void 0),F.disableLayer(this,this._imageryLayer),this._imageryLayer=void 0,F.disableLayer(this,this._nextLayer),this._nextLayer=void 0},F.prototype._show=function(){U(this,this.currentTime),F.showLayer(this,this._imageryLayer),F.showLayer(this,this._nextLayer),this.terria.catalog.chartableItems.indexOf(this)<0&&this.terria.catalog.addChartableItem(this)},F.prototype._hide=function(){F.hideLayer(this,this._imageryLayer),F.hideLayer(this,this._nextLayer),this.terria.catalog.removeChartableItem(this)},F.prototype.showOnSeparateMap=function(e){var t=this._createImageryProvider(),r=F.enableLayer(this,t,this.opacity,void 0,e,void 0);e.updateItemForSplitter(this),F.showLayer(this,r,e);var i=this;return function(){F.hideLayer(i,r,e),F.disableLayer(i,r,e)}},F.prototype.refresh=function(){if(l(this._imageryLayer)){var e;if(l(this.terria.cesium))e=this.terria.cesium.scene.imageryLayers.indexOf(this._imageryLayer);this._hide(),this._disable(),this.isEnabled&&(this._enable(e),this.isShown&&this._show()),this.terria.currentViewer.notifyRepaintRequired()}},F.enableLayer=function(e,t,r,i,a,n){a=s(a,e.terria.currentViewer);var o=0,u={},c=a.addImageryProvider({imageryProvider:t,rectangle:e.rectangle,clipToRectangle:e.clipToRectangle,opacity:r,layerIndex:i,treat403AsError:e.treat403AsError,treat404AsError:e.treat404AsError,ignoreUnknownTileErrors:e.ignoreUnknownTileErrors,isRequiredForRendering:e.isRequiredForRendering,onLoadError:function(r){if(l(c)&&a.isImageryLayerShown({layer:c})){0===r.timesRetried&&(o=0,u={}),r.retry=void 0;var i=S.defer(),s=b.operation({retries:8,minTimeout:200,randomize:!0}),d=r.error;s.attempt(function(){if(l(c)&&a.isImageryLayerShown({layer:c})){var o,p=l(d)&&l(d.statusCode)?S.reject(d):(o=E(t,r.x,r.y,r.level))?y.fetchImage({url:o,preferBlob:!0}):S.reject();void 0!==e.handleTileError&&(p=e.handleTileError(p,t,r.x,r.y,r.level)),p.then(function(){var e="L".concat(r.level,"X").concat(r.x,"Y").concat(r.y);n&&(e+="T"+n),u[e]=u[e]||0,++u[e]>5?h({name:"Tile Error",message:"The tile with the URL:\n"+E(t,r.x,r.y,r.level)+"\nsucceeded when loaded with XMLHttpRequest but failed multiple times when loaded directly by Cesium or Leaflet.\nThis may indicate that the server is very sensitive to the request headers provided or is simply unreliable."}):(s.stop(),i.resolve())}).otherwise(function(i){if(i=i||{},l(e.rectangle)){var a=t.tilingScheme.tileXYToRectangle(r.x,r.y,r.level),n=v.intersection(a,e.rectangle);if(!l(n))return void f()}i.statusCode>=400&&i.statusCode<500?!1===e.treat404AsError&&404===i.statusCode?f():!1===e.treat403AsError&&403===i.statusCode?f():h(i):i.statusCode>=500&&i.statusCode<600?function(e){d=void 0,s.retry(e)||h(e)}(i):!l(i.statusCode)&&l(i.target)?h({name:"Tile Error",message:"Got a 200 (OK) response from URL:\n"+E(t,r.x,r.y,r.level)+"\nbut it could not be loaded as an image."}):l(i.statusCode)?h(i):e.ignoreUnknownTileErrors?f():h({name:"Unknown Tile Error",message:"While accessing URL:\n"+E(t,r.x,r.y,r.level)+"\nThis probably indicates one of the following:\n* The server hostname could not be resolved,\n* The server did not respond to the request, or\n* The server denied Cross-Origin Resource Sharing (CORS) access to this URL (See https://docs.terria.io/guide/connecting-to-data/cross-origin-resource-sharing/)."})})}else f()}),r.retry=i.promise}function f(){s.stop(),i.reject()}function h(t){++o>5&&l(c)&&a.isImageryLayerShown({layer:c})&&(e===e.terria.baseMap||e.terria.baseMap instanceof x&&e.terria.baseMap.items.indexOf(e)>=0?(a.terria.error.raiseEvent(new k({sender:e,title:"Error accessing base map",message:"An error occurred while attempting to download tiles for base map:<p><center>"+e.terria.baseMap.name+"</center></p> This may indicate that there is a problem with your internet connection, that the base map is temporarily unavailable, or that the base map is invalid.  Please select a different base map using the Map button in the top-right corner.  Further technical details may be found below.<br/><br/><pre>"+p(t)+"</pre>"})),a.hideImageryLayer({layer:c}),e.terria.baseMap=void 0,e.terria.setLocalProperty("basemap",void 0)):(a.terria.error.raiseEvent(new k({sender:e,title:"Error accessing catalogue item",message:"An error occurred while attempting to download tiles for catalogue item:<p><center>"+e.name+"</center></p> This may indicate that there is a problem with your internet connection, that the catalogue item is temporarily unavailable, or that the catalogue item is invalid.  The catalogue item has been hidden from the map.  You may re-show it in the Now Viewing panel to try again.  Further technical details may be found below.<br/><br/><pre>"+p(t)+"</pre>"})),a===e.terria.currentViewer?e.isShown=!1:a.hideImageryLayer({layer:c}))),f()}},onProjectionError:function(){a.terria.error.raiseEvent({sender:e,title:"Unable to display dataset",message:e.name+'" cannot be shown in 2D because it does not support the standard Web Mercator (EPSG:3857) projection.  Please switch to 3D if it is supported on your system, update the dataset to support the projection, or use a different dataset.'}),a===e.terria.currentViewer?e.isShown=!1:a.hideImageryLayer({layer:c})}});return c},F.disableLayer=function(e,t,r){l(t)&&(r=s(r,e.terria.currentViewer)).removeImageryLayer({layer:t})},F.showLayer=function(e,t,r){l(t)&&(r=s(r,e.terria.currentViewer)).showImageryLayer({layer:t})},F.hideLayer=function(e,t,r){l(t)&&(r=s(r,e.terria.currentViewer)).hideImageryLayer({layer:t})},F.snapNearestAvailableTime=function(e,t){var r=e.indexOf(t);if(0!==e.length){if(~r===e.length)return e.get(e.length-1).stop;if(0==~r)return e.get(~r).start;if(r<0){var i=e.get(~r-1).start,a=e.get(~r).start;return m.secondsDifference(t,i)<m.secondsDifference(a,t)?i:a}return e.get(r).start}},F.prototype.filterIntervalsByFeature=function(e,t){if(void 0!==e){if(l(this.featureTimesProperty)){var r=l(e.properties)?e.properties[this.featureTimesProperty]:void 0;if(!l(r))throw new k({sender:this,title:"Unable to show at this location",message:"".concat(this.name," cannot be shown at this location because the available capture times are unknown. ")+'The "'.concat(this.featureTimesProperty,'" property was not found.')});if(this.intervalFilterFeature=e,t&&t.providerCoords&&this._imageryLayer&&this._imageryLayer.imageryProvider&&this._imageryLayer.imageryProvider.url){var i=t.providerCoords[this._imageryLayer.imageryProvider.url];i&&(this._intervalFilterCoordinates={level:i.level,x:i.x,y:i.y})}if(this.intervals.length>0){var a=this.intervals.indexOf(this.currentTime);if(a<0){var n=~a;n<0&&(n=0),n>=this.intervals.length&&(n=this.intervals.length-1),this.currentTime=m.clone(this.intervals.get(n).start)}}}}else this.intervalFilterFeature=void 0},F.prototype.chartData=function(){if(this.showOnChart){var e=this.availableDates.map(function(e){return{x:e,y:1}}),t=this,r=new j(e,{id:this.uniqueid+"-availability",name:this.name,categoryName:this.name,type:this.chartType?this.chartType:"moment",showAll:!1,yAxisMin:0,yAxisMax:1,color:t.chartColor,selectedIndex:t.intervals.indexOf(t.currentTime),onClick:function(e){t.useOwnClock=!0,t.currentTime=F.snapNearestAvailableTime(t.intervals,m.fromDate(e)),U(t,t.currentTime)}});return t._currentChartData&&(r.renderer=t._currentChartData.renderer),t._currentChartData=r,r}},e.exports=F},,function(e,t,r){"use strict";var i=r(211),a=r(168),n=r(262),o=r(261),s=r(9),l=r(8),u=r(10),c=r(20),d=r(11),p=r(80),f=r(42),h=r(23),m=r(107),g=r(127),v=r(1045),y=r(407),b=r(318),_=r(27),w=r(263),S=r(128),C=r(531),x=[S.ENUM,S.SCALAR,S.ALT],E=86399,I=function(e,t){t=s(t,s.EMPTY_OBJECT),b.call(this,e,{getColorCallback:t.getColorCallback,requireSomeActive:s(t.requireSomeActive,!1)}),this.displayVariableTypes=s(t.displayVariableTypes,x),this.shaveSeconds=s(t.shaveSeconds,0),this.finalEndJulianDate=t.finalEndJulianDate,this.unallowedTypes=t.unallowedTypes,this.initialTimeSource=t.initialTimeSource,this.displayDuration=t.displayDuration,this.replaceWithNullValues=t.replaceWithNullValues,this.replaceWithZeroValues=t.replaceWithZeroValues,this.columnOptions=t.columnOptions,this.sourceFeature=t.sourceFeature,this.idColumnNames=t.idColumnNames,this.isSampled=t.isSampled,this._activeTimeColumnNameIdOrIndex=void 0,h.track(this,["sourceFeature","_activeTimeColumnNameIdOrIndex"]),h.defineProperty(this,"columnsByType",{get:function(){return function(e){var t={};for(var r in S)if(S.hasOwnProperty(r)){var i=S[r];t[i]=[]}for(var a=0;a<e.length;a++){var n=e[a];l(t[n.type])&&t[n.type].push(n)}return t}(this.items)}})};function k(e){var t=e.filter(function(e){return l(e)});return t=t.filter(function(e,t,r){return 0===t||!f.equals(r[t-1],e)})}function L(e,t,r,i){var a,n,o,s,u=k(e),c=(a=u,n=e.map(function(e){return e&&f.toIso8601(e)}),o=a.map(function(e){return e&&f.toIso8601(e)}),n.map(function(e){return o.indexOf(e)}));if(s=r>0?u.slice(1).map(function(e,t){var r=f.secondsDifference(e,u[t]);return r<20?f.addSeconds(e,-r/20,new f):f.addSeconds(e,-1,new f)}):u.slice(1),l(i))s.push(i);else{var d=l(t)?t:E,p=u.length;p>1?(d=f.secondsDifference(u[p-1],u[0])/(p-1),s.push(f.addSeconds(u[p-1],d,new f))):s.push(void 0)}return c.map(function(e){return s[e]})}_(b,I),u(I.prototype,{columns:{get:function(){return this.items},set:function(e){if(!function(e){if(e.length<=1)return!0;var t=e[0].values.length;return e.slice(1).filter(function(e){return e.values.length===t}).length===e.length-1}(e)){throw new d("Badly formed data table - columns have different lengths.")}this.items=e}},hasLatitudeAndLongitude:{get:function(){var e=this.columnsByType[S.LON][0],t=this.columnsByType[S.LAT][0];return l(e)&&l(t)}},hasAddress:{get:function(){var e=this.columnsByType[S.ADDR][0];return l(e)}},activeTimeColumnNameIdOrIndex:{get:function(){return this._activeTimeColumnNameIdOrIndex},set:function(e){if(this._activeTimeColumnNameIdOrIndex=e,l(e)){var t=F(this,this.getColumnWithNameIdOrIndex(U(e))),r=j(U(e),t);if(l(r)&&!l(r.finishJulianDates)){r.finishJulianDates=function(e,t,r){var i=j(U(t),e);if(Array.isArray(t)&&t.length>1){var a=j(t[1],e);if(l(a)&&l(a.julianDates))return a.julianDates}var n,o=i.julianDates;if(!l(r.idColumnNames)||0===r.idColumnNames.length)return L(o,E,r.shaveSeconds,r.finalEndJulianDate);var s=O(r.idColumnNames,e);for(var u in s)if(s.hasOwnProperty(u)){var c=s[u];if(c.length>1){var d=c.map(function(e){return i.julianDates[e]}),p=k(d),h=p.length;if(h>1){n=f.secondsDifference(p[h-1],p[0])/(h-1);break}}}var m=[];for(u in s)if(s.hasOwnProperty(u)){c=s[u];for(var g=L(d=c.map(function(e){return i.julianDates[e]}),n,r.shaveSeconds,r.finalEndJulianDate),v=0;v<g.length;v++)m[c[v]]=g[v]}return m}(t,e,this),r._timeIntervals=(h=(d=r).values.reduce(function(e,t,r){var i=T(d,r);return!l(e)||l(i)&&f.greaterThan(i,e)?i:e},T(d,0)),d.values.map(function(e,t){return function(e,t,r){var i=e.julianDates[t];if(l(i)){var a=T(e,t);return new m({start:e.julianDates[t],stop:a,isStopIncluded:f.equals(a,r),data:e.julianDates[t]})}}(d,t,h)})),r._clock=function(e,t){var r=new g;if(e._timeIntervals.filter(function(e){return l(e&&e.start)}).forEach(function(e){r.addInterval(e)}),!l(e._clock)&&r.length>0&&!r.start.equals(p.MINIMUM_VALUE)){var i=r.start,s=r.stop,u=f.secondsDifference(s,i),c=Math.round(u/120);l(t.idColumnNames)&&t.idColumnNames.length>0&&(s=e.julianDates.reduce(function(e,t){return f.greaterThan(e,t)?e:t}));var d=new o;return d.startTime=f.clone(i),d.stopTime=f.clone(s),d.clockRange=a.LOOP_STOP,d.multiplier=c,d.currentTime=f.clone(i),d.clockStep=n.SYSTEM_CLOCK_MULTIPLIER,d}return e._clock}(r,this);var i,s=r._timeIntervals;if(s.length>0){for(var u,c=s.length-1;!l(u)&&c>=0;--c)u=s[c];l(u)&&(i=u.start)}C(r._clock,this.initialTimeSource,i),this.columns=t}else this._activeTimeColumnNameIdOrIndex=void 0}var d,h}},activeTimeColumn:{get:function(){var e=this._activeTimeColumnNameIdOrIndex;if(l(e))return this.getColumnWithNameIdOrIndex(U(e))}},timeIntervals:{get:function(){var e=this.activeTimeColumn;if(l(this.activeTimeColumn))return e._timeIntervals}},finishJulianDates:{get:function(){var e=this.activeTimeColumn;if(l(this.activeTimeColumn))return e.finishJulianDates}},clock:{get:function(){var e=this.activeTimeColumn;if(l(this.activeTimeColumn))return e._clock}}}),I.defaultDisplayVariableTypes=x,I.fromJson=function(e,t){if(l(e)&&0!==e.length&&0!==e[0].length){l(t)||(t=new I);for(var r,i,a,n,o=[],s=e[0],u=0;u<s.length;u++){for(i="string"==typeof(n=s[u])||n instanceof String?s[u].trim():"_Column"+String(u),a=[],r=1;r<e.length;r++)a.push(e[r][u]);var c=R(i,t,u);o.push(new w(c[0],a,c[1]))}return t.items=o,t}},I.fromCsv=function(e,t){"\n"!==(e=e.replace(/\r\n|\r|\n/g,"\r\n"))[e.length-1]&&(e+="\r\n");var r=v.toArrays(e,{onParseValue:function(e,t){if(1===t.rowNum)return e;if(/^[1-9]\d?\d?(,\d\d\d)+(\.\d+)?$/.test(e)&&(e=e.replace(/,/g,"")),isNaN(e))return e;if(/^0[0-9]/.test(e))return e;if(/\./.test(e))return parseFloat(e);var r=parseInt(e,10);return isNaN(r)?null:r}});return r=r.filter(function(e){return!e.every(function(e){return null===e})}),I.fromJson(r,t)},I.prototype.loadFromJson=function(e){return I.fromJson(e,this)},I.prototype.loadFromCsv=function(e){return I.fromCsv(e,this)},I.prototype.getActiveColumns=function(){return this.columns.filter(function(e){return e.isActive})};var P=new f;function T(e,t){return l(e.displayDuration)?f.addMinutes(e.julianDates[t],e.displayDuration,P):e.finishJulianDates[t]}function M(e,t){for(var r=0;r<e.columns.length;r++)if(e.columns[r]===t)return r}function A(e,t){for(var r=0;r<t.length;r++)if(t[r].name===e||t[r].id===e)return t[r]}function j(e,t){var r;if(null!==e)return r=e,isNaN(r)||parseInt(Number(r),10)!==+r||isNaN(parseInt(r,10))?A(e,t):t[e]}function D(e,t){return l(e)?e.map(function(e){return j(e,t)}):[]}function N(e,t){return e.map(function(e){return e.values[t]}).join("^^")}function O(e,t){var r=D(e,t);return 0===r.length?{}:r[0].values.reduce(function(e,t,i){var a=N(r,i);return l(e[a])||(e[a]=[]),e[a].push(i),e},{})}function F(e,t,r){var i=t.julianDatesOrValues.map(function(e,t){return{index:t,value:e}});return l(r)||(r=t.type===S.TIME?function(e,t){return l(e)&&l(t)?f.compare(e,t):l(e)?-1:l(t)?1:0}:function(e,t){return+(e>t)||+(e===t)-1}),i.sort(function(e,t){return r(e.value,t.value)}),e.columns.map(function(e){var t=i.map(function(t){return e.values[t.index]});return new w(e.name,t,e.getFullOptions())})}function R(e,t,r){var i=s.EMPTY_OBJECT;l(t.columnOptions)&&(i=s(t.columnOptions[e],s(t.columnOptions[r],s.EMPTY_OBJECT)));var a=s(i.name,e),n=function(e){if(l(e)){var t=parseInt(e,10);if(t==t)return t;for(var r in S)if(e.toLowerCase()===r.toLowerCase())return S[r]}}(i.type),o=s(i.format,o),u=s(i.displayDuration,t.displayDuration),c=s(i.replaceWithNullValues,t.replaceWithNullValues),d=s(i.replaceWithZeroValues,t.replaceWithZeroValues);return[a,{tableStructure:t,displayVariableTypes:t.displayVariableTypes,unallowedTypes:t.unallowedTypes,displayDuration:u,replaceWithNullValues:c,replaceWithZeroValues:d,id:e,type:n,units:i.units,format:i.format,active:i.active,chartLineColor:i.chartLineColor,yAxisMin:i.yAxisMin,yAxisMax:i.yAxisMax}]}function U(e){return Array.isArray(e)?e[0]:e}I.prototype.toArrayOfColumns=function(){for(var e,t=[],r=0;r<this.columns.length;r++)e=this.columns[r],t.push(e.toArrayWithName());return t},I.prototype.toArrayOfRows=function(e,t,r,a){if(this.columns.length<1)return[];l(r)||(r=!0);var n,o=this;function s(e){var t=e.indexOf('"')>=0;return t&&(e=e.replace(/"/g,'""')),(t||e.indexOf(",")>=0)&&(e='"'+e+'"'),e}function u(t){return o.columns.map(function(n){if(e&&n.type===S.TIME)return"source"===e?n.values[t]:i(n.dates[t],e);if(!r&&n.type===S.SCALAR)return n.values[t];var o=n._formattedValues[t];return a?o&&s(o.toString()):o})}n=l(t)?t.map(u):o.columns[0].values.map(function(e,t){return u(t)});var c=o.getColumnNames();return a&&(c=c.map(function(e){return s(e)})),n.unshift(c),n},I.prototype.toCsvString=function(e,t,r){return this.toArrayOfRows(e,t,r,!0).map(function(e){return e.join(",")}).join("\n")},I.prototype.toRowObjects=function(e,t,r,i){var a=this.toArrayOfRows(e,t,r,i);if(!l(a)||a.length<1)return[];for(var n=a[0],o=[],s=1;s<a.length;s++){for(var u={},c=0;c<n.length;c++)u[n[c]]=a[s][c];o.push(u)}return o},I.prototype.toStringAndNumberRowObjects=function(e){var t=this.toArrayOfRows(e,void 0,!0);if(!l(t)||t.length<1)return[];for(var r=this.toArrayOfRows(e,void 0,!1),i=t[0],a=[],n=1;n<t.length;n++){for(var o={string:{},number:{}},s=0;s<i.length;s++)o.string[i[s]]=t[n][s],o.number[i[s]]=r[n][s];a.push(o)}return a},I.prototype.toDataUri=function(){return y.make("csv",this.toCsvString("source"))},I.prototype.getColumnAliases=function(){return this.columns.filter(function(e){return e.id!==e.name}).map(function(e){return{id:e.id,name:e.name}})},I.prototype.toRowDescriptions=function(e){var t=l(e)?e:this.getColumnNames();if(t instanceof Array){var r={};t.forEach(function(e){r[e]=e}),t=r}return this.toRowObjects().map(function(e,r){return function(e,t,r,i){var a='<table class="cesium-infoBox-defaultTable">';for(var n in i)if(i.hasOwnProperty(n)){var o=t[n];if(l(o)){if("__"===n.substring(0,2))continue;a+="<tr><td>"+i[n]+"</td><td>"+o+"</td></tr>"}}return a+="</table>"}(0,e,0,t)})},I.prototype.toPointArrays=function(e,t){var r=[];l(e)||(e=this.columns[0]);var i=e.type===S.TIME?e.dates:e.values;l(t)||(t=this.columns.filter(function(t){return t!==e}));for(var a=function(e){return function(r,i){return{x:r,y:t[e].values[i]}}},n=0;n<t.length;n++)r.push(i.map(a(n)));return r},I.prototype.getColumnNames=function(){for(var e=[],t=0;t<this.columns.length;t++)e.push(this.columns[t].name);return e},I.prototype.getColumnWithName=function(e,t){l(t)||(t=this.columns);for(var r=0;r<t.length;r++)if(t[r].name===e)return t[r]},I.prototype.getColumnWithNameOrId=function(e){return A(e,this.columns)},I.prototype.getColumnWithNameIdOrIndex=function(e){return j(e,this.columns)},I.prototype.addColumn=function(e,t){var r=R(e,this,0),i=[new w(e,t,r[1])].concat(this.columns);this.columns=i},I.prototype.getIdStringForRowNumber=function(e,t){return l(t)||(t=this.idColumnNames),N(D(t,this.columns),e)},I.prototype.getIdMapping=function(e){return l(e)||(e=this.idColumnNames),O(e,this.columns)},I.prototype.getUpdatedColumns=function(e){return this.columns.reduce(function(t,r,i){return t.push(new w(r.name,e[i],r.getFullOptions())),t},[])},I.prototype.append=function(e,t){if(this.columns.length!==e.columns.length)throw new d("Cannot add tables with different numbers of columns.");var r=[];function i(e){return function(t){return e[t]}}for(var a=0;a<e.columns.length;a++){var n;n=l(t)?t.map(i(e.columns[a].values)):e.columns[a].values,r.push(this.columns[a].values.concat(n))}this.columns=this.getUpdatedColumns(r)},I.prototype.replaceRows=function(e,t){for(var r=[],i=0;i<e.columns.length;i++)for(var a in r.push(this.columns[i].values),t)if(t.hasOwnProperty(a)){var n=t[a];r[i][a]=e.columns[i].values[n]}var o=this.columns.map(function(e,t){return new w(e.name,r[t],e.getFullOptions())});this.columns=o},I.prototype.merge=function(e){var t=this;if(!l(this.idColumnNames)||0===this.idColumnNames.length)throw new d("Cannot merge tables without id columns.");if(this.columns.length!==e.columns.length)throw new d("Cannot merge tables with different numbers of columns.");var r=this.getIdMapping(),i=e.getIdMapping(this.idColumnNames),a=[],n={},o=function(e,t){if(l(e)){var r=t.filter(function(t){return t.id===e.id});if(1!==r.length)throw new d("Ambiguous column: "+e.name);return r[0]}}(this.activeTimeColumn,e.columns);for(var s in i)if(i.hasOwnProperty(s)){var u=i[s],c=r[s];if(l(c))if(this.activeTimeColumn)for(var p=0;p<u.length;p++){var f=u[p],h=c.map(function(e){return t.activeTimeColumn.dates[e].toString()}).indexOf(o.dates[f].toString());h>=0?n[c[h]]=f:a.push(f)}else n[c[0]]=u[0];else a=a.concat(u)}this.replaceRows(e,n),this.append(e,a)},I.prototype.setActiveTimeColumn=function(e){function t(e){for(var t,r,i=e.length-1;i>=0;i--)e[i].type===S.TIME&&(e[i]._isEndDate?r=i:t=i);return l(r)?[t,r]:t}if(void 0!==e){if(this.activeTimeColumnNameIdOrIndex=e,l(this.activeTimeColumn)&&this.activeTimeColumn.type!==S.TIME)throw this.activeTimeColumnNameIdOrIndex=t(this.columns),new d('"'+e+'" is not a valid time column.')}else this.activeTimeColumnNameIdOrIndex=t(this.columns)},I.prototype.sortBy=function(e,t){this.columns=F(this,e,t)},I.prototype.getColumnIndex=function(e){for(var t,r=0;r<this.columns.length;r++)e===this.columns[r].id&&(t=r);return t},I.prototype.getChartDetailsForRowNumbers=function(e){var t=this.toCsvString("source",e,!1),r=this.getActiveColumns()[0];if(l(r)&&r.type===S.SCALAR)return{xName:this.activeTimeColumn.name,yName:r.name,csvData:t,units:this.columns.map(function(e){return e.units||""})}},I.prototype.getColumnsWithFeatureRowsAtStartAndEndDates=function(e,t){var r=this,i=M(r,r.getColumnWithNameIdOrIndex(t));l(e)||(e=r.activeTimeColumnNameIdOrIndex);var a=r.getColumnWithNameIdOrIndex(e),n=M(r,a),o=a.dates,s=Math.min.apply(null,o),u=Math.max.apply(null,o),c=a.values[o.map(function(e){return Number(e)}).indexOf(s)],d=a.values[o.map(function(e){return Number(e)}).indexOf(u)],p=r.getIdMapping(),f=r.columns.map(function(e){return e.values.slice()});function h(e,t){for(var a=f[0].length,o=0;o<f.length;o++)f[o].push(r.columns[o].values[t]);f[n][a]=e,f[i][a]=null}return Object.keys(p).forEach(function(e){var t=p[e];if(t.length>0){Number(a.dates[t[0]])>s&&h(c,t[0]);var r=t[t.length-1];Number(a.dates[r])<u&&h(d,r)}}),this.getUpdatedColumns(f)},I.prototype.destroy=function(){return c(this)},e.exports=I},function(e,t,r){"use strict";var i=r(37);e.exports=function(e){return i.createIfNeeded(e).fetchXML()}},,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(51),a=r(408),n=r(41),o=r(58),s=r(9),l=r(8),u=r(10),c=r(26),d=r(17),p=r(119),f=r(293),h=r(595),m=r(167),g=r(42),v=r(23),y=r(158),b=r(29),_=r(107),w=r(127),S=r(181),C=r(370),x=r(109),E=r(18),I=r(596),k=r(117),L=r(291),P=r(36),T=r(155),M=r(27),A=r(139),j=r(118),D=r(46),N=r(597),O=r(151),F=r(229),R=r(1046),U=function(e){T.call(this,e),this._rawMetadata=void 0,this._thisLayerInRawMetadata=void 0,this._allLayersInRawMetadata=void 0,this._metadata=void 0,this._getCapabilitiesUrl=void 0,this._rectangle=void 0,this._rectangleFromMetadata=void 0,this._intervalsFromMetadata=void 0,this._lastToken=void 0,this._newTokenRequestInFlight=void 0,this.layers="",this.linkedWcsUrl=void 0,this.linkedWcsCoverage="",this.styles="",this.parameters={},this.tilingScheme=void 0,this.getFeatureInfoFormats=void 0,this.populateIntervalsFromTimeDimension=!0,this.minScaleDenominator=void 0,this.hideLayerAfterMinScaleDenominator=!1,this.maxRefreshIntervals=1e3,this.isGeoServer=void 0,this.isEsri=void 0,this.isNcWMS=void 0,this.supportsColorScaleRange=void 0,this.styleEnvColorScaleRangeKeys=void 0,this.displayDuration=void 0,this.disableUserChanges=!1,this.availableStyles=void 0,this.availableStyleEnvs=void 0,this.colorScaleMinimum=void 0,this.colorScaleMaximum=void 0,this.availableDimensions=void 0,this.dimensions=void 0,this.urlAuth="",this.tokenUrl=void 0,this.tokenParameterName="token",this.tokenInvalidHttpCodes=[401,498,499],this._sourceInfoItemNames=["GetCapabilities URL"],v.track(this,["_getCapabilitiesUrl","_rectangle","_rectangleFromMetadata","_intervalsFromMetadata","layers","styles","parameters","getFeatureInfoFormats","tilingScheme","populateIntervalsFromTimeDimension","minScaleDenominator","disableUserChanges","availableStyles","colorScaleMinimum","colorScaleMaximum","availableDimensions","dimensions","tokenUrl","tokenParameterName","tokenInvalidHttpCodes","_lastToken","_thisLayerInRawMetadata","_allLayersInRawMetadata"]),v.defineProperty(this,"_colorScaleRange",{get:function(){return[this.colorScaleMinimum,this.colorScaleMaximum]}}),this._refreshInProgress=void 0,v.getObservable(this,"_colorScaleRange").subscribe(function(){var e=this;this.isEnabled&&!this._refreshInProgress&&(this._refreshInProgress=A(function(){e.refresh(),e._refreshInProgress=void 0}))},this),j(this,"getCapabilitiesUrl",{get:function(){return l(this._getCapabilitiesUrl)?this._getCapabilitiesUrl:l(this.metadataUrl)?this.metadataUrl:l(this.url)?W(this.url)+"?service=WMS&version=1.3.0&request=GetCapabilities&"+this.urlAuth:void 0},set:function(e){this._getCapabilitiesUrl=e}});var t=Object.getOwnPropertyDescriptor(this,"legendUrls");j(this,"legendUrls",{get:function(){return l(this._legendUrls)?this._legendUrls:l(this._legendUrl)?[this._legendUrl]:function(e){var t=[],r=e._allLayersInRawMetadata;if(!l(r))return t;var i=e.styles.split(",");1===i.length&&""===i[0]&&(i=[]);for(var a=0;a<r.length;++a){var n=re(e,r[a],i[a]);l(n)&&t.push(n)}return t}(this)},set:function(e){t.set.call(this,e)}}),j(this,"dataUrl",{get:function(){return this._dataUrl+"&"+this.urlAuth},set:function(e){this._dataUrl=e}}),j(this,"dataUrlType",{get:function(){return this._dataUrlType},set:function(e){this._dataUrlType=e}})};function V(e){var t=e._thisLayerInRawMetadata;if(l(t)){var r=e._overwriteFromGetCapabilities,i=e._rawMetadata;I(t.Abstract,U.abstractsToIgnore)||K(e,r,"Data Description",t.Abstract);var a=l(i.Service)?i.Service:{};I(a.Abstract,U.abstractsToIgnore)||a.Abstract===t.Abstract||K(e,r,"Service Description",a.Abstract);var n=Array.isArray(t.Style)?t.Style[0]:t.Style;if(l(e.parameters.styles)){var o=e.parameters.styles;if(Array.isArray(t.Style))for(var u=0;u<t.Style.length;u++)t.Style[u].Name===o&&(n=t.Style[u]);else l(t.style)&&t.style.styleName===o&&(n=t.style)}if(l(n)&&l(n.MetadataURL))K(e,r,"Metadata Links",(Array.isArray(n.MetadataURL)?n.MetadataURL:[n.MetadataURL]).map(function(e){return e&&e.OnlineResource?e.OnlineResource["xlink:href"]:void 0}).filter(function(e){return l(e)}).join("<br>"));l(a.AccessConstraints)&&!/^none$/i.test(a.AccessConstraints)&&K(e,r,"Access Constraints",a.AccessConstraints),K(e,r,"Service Contact",function(e){if(l(e.Service.ContactInformation)){var t=e.Service.ContactInformation,r="",i=t.ContactPersonPrimary;return l(i)&&l(i.ContactOrganization)&&i.ContactOrganization.length>0&&(r+=i.ContactOrganization+"<br/>"),l(t.ContactElectronicMailAddress)&&t.ContactElectronicMailAddress.length>0&&(r+="["+t.ContactElectronicMailAddress+"](mailto:"+t.ContactElectronicMailAddress+")"),r}return}(i)),K(e,r,"GetCapabilities URL",e.getCapabilitiesUrl),Q(e,r,"minScaleDenominator",t.MinScaleDenominator),Q(e,r,"getFeatureInfoFormats",function(e){var t=!1,r=!1,i=!1,a="text/xml";if(l(e.Capability.Request)&&l(e.Capability.Request.GetFeatureInfo)&&l(e.Capability.Request.GetFeatureInfo.Format)){var n=e.Capability.Request.GetFeatureInfo.Format;"application/json"===n?t=!0:l(n.indexOf)&&n.indexOf("application/json")>=0&&(t=!0),"text/xml"===n||"application/vnd.ogc.gml"===n?(r=!0,a=n):l(n.indexOf)&&n.indexOf("text/xml")>=0?(r=!0,a="text/xml"):l(n.indexOf)&&n.indexOf("application/vnd.ogc.gml")>=0?(r=!0,a="application/vnd.ogc.gml"):l(n.indexOf)&&n.indexOf("text/html")>=0&&(i=!0)}var o=[];t&&o.push(new f("json"));r&&o.push(new f("xml",a));i&&o.push(new f("html"));return o}(i)),Q(e,r,"rectangle",function(e){if(!Array.isArray(e))return z(e);return N(e.map(function(e){return z(e)}))}(e._allLayersInRawMetadata)),Q(e,r,"intervals",function(e,t){var r=e.availableDimensions[t.Name];if(!l(r))return;r instanceof Array||(r=[r]);for(var i=new w,a=0;a<r.length;++a){var n=r[a];if(!n.name||"time"===n.name.toLowerCase())for(var o=n.options,s=0;s<o.length;++s){var u=o[s].split("/");u.length>1?H(i,u,o[s],e):Z(i,o,s,e.displayDuration)}}return i}(e,t));var c,d,h=s(ee(t,"CRS",!0),ee(t,"SRS",!0));l(h)&&($(h,"EPSG:3857")?(c=new x,d="EPSG:3857"):$(h,"EPSG:900913")?(c=new x,d="EPSG:900913"):$(h,"EPSG:4326")?(c=new p,d="EPSG:4326"):$(h,"CRS:84")?(c=new p,d="CRS:84"):$(h,"EPSG:4283")?(c=new p,d="EPSG:4283"):(c=new x,d="EPSG:3857")),Q(e,r,"tilingScheme",c),l(e.parameters)||(e.parameters={}),Q(e.parameters,r,"srs",d),e.supportsColorScaleRange&&(Q(e,r,"colorScaleMinimum",-50),Q(e,r,"colorScaleMaximum",50))}}function B(e,t,r){return l(r)?new i(e).setQuery(t,r).toString():e}function G(e){return e.replace(/%7B/g,"{").replace(/%7D/g,"}")}function W(e){var t=new i(e);return t.search(""),t.toString()}function z(e){var t=e.EX_GeographicBoundingBox;if(l(t))return b.fromDegrees(t.westBoundLongitude,t.southBoundLatitude,t.eastBoundLongitude,t.northBoundLatitude);var r=e.LatLonBoundingBox;return l(r)?b.fromDegrees(r.minx,r.miny,r.maxx,r.maxy):void 0}function H(e,t,r,i){var n=a.parseZone(t[0]),o=a.parseZone(t[1]);if(2===t.length)e.addInterval(new _({start:g.fromIso8601(n.format()),stop:g.fromIso8601(o.format()),data:n}));else{var s=a.duration(t[2]);if(s.isValid()&&(s.milliseconds()>0||s.seconds()>0||s.minutes()>0||s.hours()>0||s.days()>0||s.weeks()>0||s.months()>0||s.years()>0))for(var l=n.clone(),u=n,c=o,d=0;l&&u.isSameOrBefore(c)&&d<i.maxRefreshIntervals;)l.add(s),e.addInterval(new _({start:g.fromIso8601(u.format()),stop:g.fromIso8601(l.format()),data:q(u,s)})),u=l.clone(),++d;else i.terria.error.raiseEvent(new P({title:"Badly formatted periodicity",message:'The "'+i.name+'" dataset has a badly formed periodicity, "'+t[2]+"\".  Click the dataset's Info button for more information about the dataset and the data custodian."}))}}function q(e,t){return t.hours()>0||t.minutes()>0||t.seconds()>0||t.milliseconds()>0?e.format():e.creationData().format.indexOf("T")>=0?e.format():e.format(e.creationData().format)}function Z(e,t,r,i){var a,n=g.fromIso8601(t[r]);if(i)a=g.addMinutes(n,i,new g);else if(r<t.length-1){var o=t[r+1].split("/");a=g.fromIso8601(o[0])}else if(e.length>0){var s=e.get(e.length-1),l=g.secondsDifference(s.stop,s.start);a=g.addSeconds(n,l,new g)}else a=n;e.addInterval(new _({start:n,stop:a,data:t[r]}))}function J(e,t){return t.split(",").map(function(t){var r=Y(e,t,!1);if(!r){var i=t.indexOf(":");if(i>=0){var a=t.substring(i+1);r=Y(e,a,!1)}}return r||(r=Y(e,t,!0)),r})}function Y(e,t,r){if(e.Name===t||r&&e.Title===t&&l(e.Name))return e;var i=e.Layer;if(l(i)){for(var a=Y(i,t,r),n=0;!a&&n<i.length;++n){a=Y(i[n],t,r)}return a}}function X(e,t){if(!("string"==typeof t||t instanceof String))for(var r in t)if(t.hasOwnProperty(r)&&"_parent"!==r){var i,a=t[r];if("BoundingBox"===r&&a instanceof Array)for(var n=0;n<a.length;++n){var o=a[n];(i=new L).name=r+" ("+o.CRS+")",i.value=o,X(i,o),e.items.push(i)}else(i=new L).name=r,i.value=a,X(i,a),e.items.push(i)}}function K(e,t,r,i){if(l(i)&&0!==i.length){var a=e.findInfoSection(r);l(a)?t&&(a.content=i):e.info.push({name:r,content:i})}}function Q(e,t,r,i){l(i)&&(!t&&l(e[r])||(e[r]=i))}function $(e,t){return e===t||e instanceof Array&&e.indexOf(t)>=0}function ee(e,t,r){for(var i=[];l(e);){if(l(e[t])){if(!r)return e[t];i=i.concat(e[t]instanceof Array?e[t]:[e[t]])}e=e._parent}return i.length>0?i:void 0}function te(e,t){var r=O(t);if(!l(r.Capability))throw new P({title:"Missing data",message:'The WMS dataset "'+e.name+'" did not return any data.\n\nEither the catalog file has been set up incorrectly, or the server address has changed.\n\nPlease report this error by emailing <a href="mailto:'+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a>."});return function e(t,r){t._parent=r;var i=t.Layer;if(i instanceof Array)for(var a=0;a<i.length;++a)e(i[a],t);else l(i)&&e(i,t)}(r.Capability),r}function re(e,t,r){var a,n,o=Array.isArray(t.Style)?t.Style[0]:t.Style;if(l(r))if(Array.isArray(t.Style))for(var s=0;s<t.Style.length;++s)t.Style[s].Name===r&&(o=t.Style[s]);else l(t.Style)&&t.Style.styleName===r&&(o=t.Style);if(l(o)&&l(o.LegendURL)){var u=Array.isArray(o.LegendURL)?o.LegendURL[0]:o.LegendURL;l(u)&&l(u.OnlineResource)&&l(u.OnlineResource["xlink:href"])&&(a=new i(decodeURIComponent(u.OnlineResource["xlink:href"])),n=u.Format)}if(l(a)||(a=new i(W(e.url)+"?service=WMS&version=1.1.0&request=GetLegendGraphic&format=image/png&transparent=True&layer="+encodeURIComponent(t.Name)),l(o)&&l(o.Name)&&a.addQuery("styles",o.Name),n="image/png"),l(a)){if(a.toString().match(/GetLegendGraphic/i)){if(e.isGeoServer){a.setQuery("version","1.1.0");a.setQuery("transparent","True"),a.setQuery("LEGEND_OPTIONS","fontSize:14;forceLabels:on;fontAntiAliasing:true")}else e.isEsri;if(l(e.parameters))for(var c in e.parameters)e.parameters.hasOwnProperty(c)&&a.setQuery(c,e.parameters[c]);l(e.colorScaleMinimum)&&l(e.colorScaleMaximum)&&!l(e.parameters.colorscalerange)&&a.setQuery("colorscalerange",[e.colorScaleMinimum,e.colorScaleMaximum].join(","))}return new F(B(a.toString()+"&"+e.urlAuth,e.tokenParameterName,e._lastToken),n)}}M(T,U),u(U.prototype,{type:{get:function(){return"wms"}},typeName:{get:function(){return"Web Map Service (WMS)"}},supportsIntervals:{get:function(){return!0}},metadata:{get:function(){var e,t;return l(this._metadata)||(this._metadata=(e=this,(t=new k).isLoading=!0,t.promise=E(e.load()).then(function(){var r=e._rawMetadata;r&&r.Service?X(t.serviceMetadata,r.Service):t.serviceErrorMessage="Service information not found in GetCapabilities operation response.",e._thisLayerInRawMetadata?X(t.dataSourceMetadata,e._thisLayerInRawMetadata):t.dataSourceErrorMessage="Layer information not found in GetCapabilities operation response.",t.isLoading=!1}).otherwise(function(){t.dataSourceErrorMessage="An error occurred while invoking the GetCapabilities service.",t.serviceErrorMessage="An error occurred while invoking the GetCapabilities service.",t.isLoading=!1}),t)),this._metadata}},updaters:{get:function(){return U.defaultUpdaters}},serializers:{get:function(){return U.defaultSerializers}},propertiesForSharing:{get:function(){return U.defaultPropertiesForSharing}},layerTitles:{get:function(){if(l(this._allLayersInRawMetadata))return this._allLayersInRawMetadata.map(function(e){return e.Title||e.Name})}}}),U.defaultUpdaters=n(T.defaultUpdaters),U.defaultUpdaters.tilingScheme=function(e,t,r,i){"geographic"===t.tilingScheme?e.tilingScheme=new p:"web-mercator"===t.tilingScheme?e.tilingScheme=new x:e.tilingScheme=t.tilingScheme},U.defaultUpdaters.getFeatureInfoFormats=function(e,t,r,i){for(var a=[],n=0;n<t.getFeatureInfoFormats.length;++n){var o=t.getFeatureInfoFormats[n];a.push(new f(o.type,o.format))}e.getFeatureInfoFormats=a},d(U.defaultUpdaters),U.defaultSerializers=n(T.defaultSerializers),U.defaultSerializers.getCapabilitiesUrl=function(e,t,r){t.getCapabilitiesUrl=e._getCapabilitiesUrl},U.defaultSerializers.tilingScheme=function(e,t,r){e.tilingScheme instanceof p?t.tilingScheme="geographic":e.tilingScheme instanceof x?t.tilingScheme="web-mercator":t.tilingScheme=e.tilingScheme},U.defaultSerializers.availableDimensions=function(){},U.defaultSerializers.availableStyles=function(){},U.defaultSerializers.intervals=function(){},U.defaultSerializers.description=function(){},U.defaultSerializers.info=function(){},d(U.defaultSerializers),U.defaultPropertiesForSharing=n(T.defaultPropertiesForSharing),U.defaultPropertiesForSharing.push("styles"),U.defaultPropertiesForSharing.push("colorScaleMinimum"),U.defaultPropertiesForSharing.push("colorScaleMaximum"),U.defaultPropertiesForSharing.push("dimensions"),d(U.defaultPropertiesForSharing),U.abstractsToIgnore=["A compliant implementation of WMS"],U.getAllAvailableStylesFromCapabilities=function(e,t,r,i){if(l(r)||(r={},t=e&&e.Capability?e.Capability.Layer:[]),!l(t))return r;t=Array.isArray(t)?t:[t];for(var a=0;a<t.length;++a){var n=t[a],o=U.getSingleLayerStylesFromCapabilities(n,i);l(n.Name)&&n.Name.length>0&&(r[n.Name]=o),U.getAllAvailableStylesFromCapabilities(e,n.Layer,r,o)}return r},U.getSingleLayerStylesFromCapabilities=function(e,t){if(t=t||[],!l(e)||!l(e.Style))return t;var r=Array.isArray(e.Style)?e.Style:[e.Style];return t.concat(r.map(function(e){var t,r,a=Array.isArray(e.LegendURL)?e.LegendURL[0]:e.LegendURL;return a&&a.OnlineResource&&a.OnlineResource["xlink:href"]&&(t=new i(decodeURIComponent(a.OnlineResource["xlink:href"])),r=a.Format),{name:e.Name,title:e.Title,abstract:e.Abstract,legendUri:t?new F(t.toString(),r):void 0}}))},U.getAllAvailableDimensionsFromCapabilities=function(e,t,r,i){if(l(r)||(r={},t=e&&e.Capability?e.Capability.Layer:[]),!l(t))return r;t=Array.isArray(t)?t:[t];for(var a=0;a<t.length;++a){var n=t[a],o=U.getSingleLayerDimensionsFromCapabilities(n,i);l(n.Name)&&n.Name.length>0&&(r[n.Name]=o),U.getAllAvailableDimensionsFromCapabilities(e,n.Layer,r,o)}return r},U.getSingleLayerDimensionsFromCapabilities=function(e,t){if(t=t||[],!l(e)||!l(e.Dimension))return t;var r=Array.isArray(e.Dimension)?e.Dimension:[e.Dimension],i=e.Extent?Array.isArray(e.Extent)?e.Extent:[e.Extent]:[];return(t=t.filter(function(e){return 0===r.filter(function(t){return t.name===e.name}).length})).concat(r.map(function(e){var t,r=i.filter(function(t){return t.name===e.name})[0];return t=r&&r.split?r.split(","):e.split?e.split(","):[],{name:e.name,units:e.units,unitSymbol:e.unitSymbol,default:e.default,multipleValues:e.multipleValues,nearestValue:e.nearestValue,options:t}}))},U.prototype.updateFromCapabilities=function(e,t,r,i){if(l(e.documentElement)&&(e=te(this,e),r=void 0),l(this.availableStyles)||(l(i)&&l(i.availableStyles)?this.availableStyles=i.availableStyles:this.availableStyles=U.getAllAvailableStylesFromCapabilities(e)),l(this.availableDimensions)||(l(i)&&l(i.availableDimensions)?this.availableDimensions=i.availableDimensions:this.availableDimensions=U.getAllAvailableDimensionsFromCapabilities(e)),!l(this.isGeoServer)&&e&&e.Service&&e.Service.KeywordList&&e.Service.KeywordList.Keyword&&e.Service.KeywordList.Keyword.indexOf("GEOSERVER")>=0&&(this.isGeoServer=!0),(!l(this.isEsri)&&l(e["xmlns:esri_wms"])||this.url.match(/\/MapServer\//))&&(this.isEsri=!0),!l(this.isNcWMS)&&e&&e.Capability&&e.Capability.Layer){var a=J(e.Capability.Layer,this.layers);if(l(a)&&a.length>0&&(a=a[0])&&a.Style&&a.Style.length>0)for(var n=0;n<a.Style.length;++n)!l(this.isNcWMS)&&a.Style[n].Name&&(a.Style[n].Name.match(/boxfill\/rainbow/i)||a.Style[n].Name.match(/default-scalar\/default/i)||a.Style[n].Name.match(/default-vector\/default/i))&&(this.isNcWMS=!0)}if(!l(this.supportsColorScaleRange)&&(this.supportsColorScaleRange=this.isNcWMS,!this.supportsColorScaleRange&&e.Capability&&e.Capability.ExtendedCapabilities&&e.Capability.ExtendedCapabilities.ExtendedRequest)){var o=e.Capability.ExtendedCapabilities.ExtendedRequest,s=(o=Array.isArray(o)?o:[o]).filter(function(e){return"GetMap"===e.Request})[0];if(s){var u=(Array.isArray(s.UrlParameter)?s.UrlParameter:[s.UrlParameter]).filter(function(e){return"COLORSCALERANGE"===e.ParameterName})[0];this.supportsColorScaleRange=l(u)}}if(!l(r)){if(r=J(e.Capability.Layer,this.layers),l(this.layers)){for(var c=this.layers.split(","),d=(this.styles||this.parameters.styles||"").split(","),p=0;p<r.length;++p)if(l(r[p]))c[p]=r[p].Name;else{if(!(r.length>1)){var f=e&&e.Capability&&e.Capability.Layer&&e.Capability.Layer.Layer&&e.Capability.Layer.Layer.Name;throw f=f?' (Perhaps it should be "'+f+'").':"",new P({title:"No layer found",message:'The WMS dataset "'+this.name+'" has no layers matching "'+this.layers+'".'+f+'\n\nEither the catalog file has been set up incorrectly, or the WMS server has changed.\n\nPlease report this error by sending an email to <a href="mailto:'+this.terria.supportEmail+'">'+this.terria.supportEmail+"</a>."})}console.log('A layer with the name or ID "'+c[p]+'" does not exist on the WMS Server - ignoring it.'),r.splice(p,1),c.splice(p,1),d.splice(p,1),--p}this.layers=c.join(","),this.styles=d.join(",")}if(0===r.length)return}this._rawMetadata=e,Array.isArray(r)?(this._thisLayerInRawMetadata=r[0],this._allLayersInRawMetadata=r,r=this._thisLayerInRawMetadata):(this._thisLayerInRawMetadata=r,this._allLayersInRawMetadata=[r]),this._overwriteFromGetCapabilities=t},U.prototype._load=function(){var e=this,t=E();return this.tokenUrl&&(t=h(this.terria,this.tokenUrl,this.url)),t.then(function(t){e._lastToken=t;var r=[];if(!l(e._rawMetadata)&&l(e.getCapabilitiesUrl)?r.push(y(D(e,B(e.getCapabilitiesUrl,e.tokenParameterName,e._lastToken),"1d")).then(function(t){var r=te(e,t);e.updateFromCapabilities(r,!1),V(e)})):V(e),!l(e.dataUrl)&&l(e.url)){var i=W(e.url)+"?service=WMS&version=1.1.1&sld_version=1.1.0&request=DescribeLayer&"+e.urlAuth+"&layers="+encodeURIComponent(e.layers);r.push(y(D(e,B(i,e.tokenParameterName,e._lastToken),"1d")).then(function(t){var r=O(t),i=r.LayerDescription instanceof Array?r.LayerDescription[0]:r.LayerDescription;if(l(i)&&l(i.owsURL)&&l(i.owsType))switch(i.owsType.toLowerCase()){case"wfs":l(i.Query)&&l(i.Query.typeName)?(e.dataUrl=B(W(i.owsURL)+"?service=WFS&version=1.1.0&request=GetFeature&typeName="+i.Query.typeName+"&srsName=EPSG%3A4326&maxFeatures=1000&"+e.urlAuth,e.tokenParameterName,e._lastToken),e.dataUrlType="wfs-complete"):(e.dataUrl=B(W(i.owsURL)+"?"+e.urlAuth,e.tokenParameterName,e._lastToken),e.dataUrlType="wfs");break;case"wcs":l(i.Query)&&l(i.Query.typeName)?(e.dataUrl=B(W(i.owsURL)+"?service=WCS&version=1.1.1&request=DescribeCoverage&identifiers="+i.Query.typeName+"&"+e.urlAuth,e.tokenParameterName,e._lastToken),e.linkedWcsUrl&&""===e.linkedWcsCoverage&&(e.linkedWcsCoverage=i.Query.typeName),e.dataUrlType="wcs-complete"):(e.dataUrl=B(W(i.owsURL)+"?"+e.urlAuth,e.tokenParameterName,e._lastToken),e.dataUrlType="wcs")}}).otherwise(function(e){}))}return E.all(r)})},U.prototype.handleTileError=function(e,t,r,i,a){if(!l(this.tokenUrl))return e;var n=this;return e.otherwise(function(e){return!e||498!==e.statusCode&&499!==e.statusCode?E.reject(e):(l(n._newTokenRequestInFlight)||(n._newTokenRequestInFlight=h(n.terria,n.tokenUrl,n.url).then(function(e){n._lastToken=e;var r=t._tileProvider,i=new S({url:G(B(r.url,n.tokenParameterName,n._lastToken)),pickFeaturesUrl:G(B(r.pickFeaturesUrl,n.tokenParameterName,n._lastToken)),tilingScheme:r.tilingScheme,rectangle:r.rectangle,tileWidth:r.tileWidth,tileHeight:r.tileHeight,minimumLevel:r.minimumLevel,maximumLevel:r.maximumLevel,proxy:r.proxy,subdomains:r.subdomains,tileDiscardPolicy:r.tileDiscardPolicy,credit:r.credit,getFeatureInfoFormats:r.getFeatureInfoFormats,enablePickFeatures:r.enablePickFeatures,hasAlphaChannel:r.hasAlphaChannel,urlSchemeZeroPadding:r.urlSchemeZeroPadding});i._errorEvent=r._errorEvent,t._tileProvider=i,n._newTokenRequestInFlight=void 0})),n._newTokenRequestInFlight)})},U.prototype._createImageryProvider=function(e){var t,r,i,a=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r.toLowerCase()]=e[r]);return t}(this.parameters);l(e)&&(a=o({time:e},a)),l(this._lastToken)&&(a=o((t={},r=this.tokenParameterName,i=this._lastToken,r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t))),a=o(a,U.defaultParameters),l(a.feature_count)?(console.log(this.name+": using parameters.feature_count ("+a.feature_count+") to override maximumShownFeatureInfos ("+this.maximumShownFeatureInfos+")."),1===a.feature_count?this.maximumShownFeatureInfos=1:this.maximumShownFeatureInfos=a.feature_count-1):a.feature_count=this.maximumShownFeatureInfos+1,!l(this.styles)||l(a.styles)&&0!==a.styles.length||(l(this.styleEnv)&&""!==this.styleEnv&&(a.env=this.styleEnv),a.styles=this.styles),l(this.colorScaleMinimum)&&l(this.colorScaleMaximum)&&!l(a.colorscalerange)&&(l(this.styleEnvColorScaleRangeKeys)&&2===this.styleEnvColorScaleRangeKeys.length?(l(a.env)?a.env.endsWith(";")||(a.env+=";"):a.env="",a.env+="".concat(this.styleEnvColorScaleRangeKeys[0],":").concat(this.colorScaleMinimum,";").concat(this.styleEnvColorScaleRangeKeys[1],":").concat(this.colorScaleMaximum,";")):a.colorscalerange=[this.colorScaleMinimum,this.colorScaleMaximum].join(","));var n=function(e){if(!l(e)||e<=0)return;var t=2*Math.PI*c.WGS84.maximumRadius/256/28e-5/(e-1e-6);return Math.log(t)/Math.log(2)|0}(this.minScaleDenominator);if(l(this.dimensions)&&(!l(a.dimensions)||0===a.dimensions.length))for(var s in this.dimensions)this.dimensions.hasOwnProperty(s)&&("elevation"===s.toLowerCase()?a.elevation=this.dimensions[s]:a["dim_"+s]=this.dimensions[s]);var u,d,p={url:(u=this,d=this.url,D(u,W(d))+"?"+this.urlAuth),layers:this.layers,getFeatureInfoFormats:this.getFeatureInfoFormats,parameters:a,getFeatureInfoParameters:a,tilingScheme:l(this.tilingScheme)?this.tilingScheme:new x,maximumLevel:n};this.hideLayerAfterMinScaleDenominator&&(p.maximumLevel=n+1);var f=new C(p);if(this.hideLayerAfterMinScaleDenominator){var h=f.requestImage,g=!1,v=this;f.requestImage=function(e,t,r){return r>n?(g||(v.terria.error.raiseEvent(new P({title:"Dataset will not be shown at this scale",message:'The "'+v.name+"\" dataset will not be shown when zoomed in this close to the map because the data custodian has indicated that the data is not intended or suitable for display at this scale.  Click the dataset's Info button on the Now Viewing tab for more information about the dataset and the data custodian."})),g=!0),m.loadImage(f,v.terria.baseUrl+"images/blank.png")):h.call(f,e,t,r)}}return f},U.prototype.exportData=function(){l(this.linkedWcsUrl)&&R(this)},U.defaultParameters={transparent:!0,format:"image/png",exceptions:"application/vnd.ogc.se_xml",styles:"",tiled:!0},e.exports=U},,,,,function(e,t,r){"use strict";e.exports={CesiumTerrain:0,CesiumEllipsoid:1,Leaflet:2}},,function(e,t,r){"use strict";var i=r(41),a=r(9),n=r(8),o=r(10),s=r(11),l=r(17),u=r(37),c=r(18),d=r(27),p=r(117),f=r(257),h=r(36),m=r(46),g=r(315),v=r(157),y=function(e,t,r){f.call(this,e,t,r),r=a(r,a.EMPTY_OBJECT),this.charSet=void 0,this.sourceCatalogItem=void 0,this.sourceCatalogItemId=void 0,this.regenerationOptions={},this.initialTimeSource=void 0,this.isCsvForCharting=a(r.isCsvForCharting,!1)};function b(e,t){var r=e._tableStyle,i={idColumnNames:e.idColumns,isSampled:e.isSampled,initialTimeSource:e.initialTimeSource,displayDuration:r.displayDuration,replaceWithNullValues:r.replaceWithNullValues,replaceWithZeroValues:r.replaceWithZeroValues,columnOptions:r.columns},a=new v(void 0,i);return a.loadFromCsv(t),e.initializeFromTableStructure(a)}function _(e,t,r){return u.fetch({url:e,headers:t,overrideMimeType:r})}d(f,y),o(y.prototype,{type:{get:function(){return"csv"}},typeName:{get:function(){return"Comma-Separated Values (CSV)"}},metadata:{get:function(){var e=new p;return e.isLoading=!1,e.dataSourceErrorMessage="This data source does not have any details available.",e.serviceErrorMessage="This service does not have any details available.",e}},dataSource:{get:function(){return this._dataSource}},propertiesForSharing:{get:function(){return y.defaultPropertiesForSharing}}}),(y.defaultUpdaters=i(f.defaultUpdaters)).sourceCatalogItem=function(){},l(y.defaultUpdaters),(y.defaultSerializers=i(f.defaultSerializers)).sourceCatalogItem=function(){},l(y.defaultSerializers),(y.defaultPropertiesForSharing=i(f.defaultPropertiesForSharing)).push("isCsvForCharting"),y.defaultPropertiesForSharing.push("dataUrl"),y.defaultPropertiesForSharing.push("sourceCatalogItemId"),y.defaultPropertiesForSharing.push("regenerationOptions"),l(y.defaultPropertiesForSharing),y.regenerateChartItem=function(e,t){var r=new y(t,e.url,{tableStyle:e.tableStyle,isCsvForCharting:!0}),i=t.catalog.chartDataGroup;if(r.name=e.name,r.id=i.uniqueId+"/"+e.name,i.isOpen=!0,i.add(r),r.isLoading=!0,r.isMappable=!1,t.catalog.addChartableItem(r),e.sourceCatalogItemId){var a=t.catalog.shareKeyIndex[e.sourceCatalogItemId];if(r.sourceCatalogItem=a,n(a)&&"sos"===a.type&&n(e.regenerationOptions)&&n(a.load))return r.updateFromJson(e).then(a.load.bind(a)).then(function(){r.data=a.loadIntoTableStructure(e.url,e.regenerationOptions),r.isEnabled=!0}).then(r.load.bind(r)).then(function(){return r.applyTableStyleColumnsToStructure(e.tableStyle,r.tableStructure)});console.error("Csv regeneration referenced a sourceCatalogItemId that we could not look up")}return r.isEnabled=!0,r.updateFromJson(e).then(r.load.bind(r)).then(function(){return r.applyTableStyleColumnsToStructure(e.tableStyle,r.tableStructure)})},y.prototype.loadIntoTableStructure=function(e){var t=new v;return _(m(this,e,"0d")).then(t.loadFromCsv.bind(t))},y.prototype.startPolling=function(){var e=this.polling;if(n(e.seconds)&&e.seconds>0){var t=this;if(e.isPolling=t.isEnabled,!n(e.nextScheduledUpdateTime)){var r=new Date;r.setSeconds((new Date).getSeconds()+e.seconds),e.nextScheduledUpdateTime=r}this._pollTimeout=setTimeout(function(){t.isEnabled&&(e.isPolling=!0,t.loadIntoTableStructure(e.url||t.url).then(function(r){var i=new Date;if(i.setSeconds((new Date).getSeconds()+e.seconds),e.nextScheduledUpdateTime=i,t._tableStructure.hasLatitudeAndLongitude!==r.hasLatitudeAndLongitude||t._tableStructure.columns.length!==r.columns.length)throw console.log("The newly polled data is incompatible with the old data."),new s("The newly polled data is incompatible with the old data.");t._tableStructure.columns.forEach(function(e,t){r.columns[t].isActive=e.isActive,r.columns[t].color=e.color}),e.replace?t._tableStructure.columns=r.columns:n(t.idColumns)&&t.idColumns.length>0?t._tableStructure.merge(r):t._tableStructure.append(r)})),e.isPolling=!1,t.startPolling()},1e3*e.seconds)}},y.prototype._load=function(){var e=this,t=this.terria.catalog.shareKeyIndex[this.sourceCatalogItemId],r=t&&"sos"===t.type,i=this.url||this.dataUrl;if(n(this.data)||!r){if(n(this.data))return c(e.data,function(t){if("undefined"!=typeof Blob&&t instanceof Blob)return g(t).then(function(t){return b(e,t)});if("string"==typeof t)return b(e,t);if(t instanceof v)return e.applyTableStyleColumnsToStructure(e._tableStyle,t),e.initializeFromTableStructure(t);throw new h({sender:e,title:"Unexpected type of CSV data",message:"CsvCatalogItem data is expected to be a Blob, File, or String, but it was not any of these. This may indicate a bug in terriajs or incorrect use of the terriajs API. If you believe it is a bug in "+e.terria.appName+', please report it by emailing <a href="mailto:'+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a>."})});var a;if(n(i))return n(e.charSet)&&(a="text/csv; charset="+e.charSet),_(m(e,i,"1d"),void 0,a).then(function(t){return b(e,t)}).otherwise(function(t){throw new h({sender:e,title:"Unable to load CSV file",message:'See the <a href="https://github.com/TerriaJS/nationalmap/wiki/csv-geo-au">csv-geo-au</a> specification for supported CSV formats.\n\n'+(t.message||t.response)})});throw new h({sender:e,title:"Unable to load CSV Catalog Item",message:"CSV did not have data or url to load from."})}},e.exports=y},,,,function(e,t,r){"use strict";var i=r(9),a=r(23);e.exports=function(e){this.onCancel=e.onCancel,this.customUi=i(e.customUi,void 0),this.message=function(){return e.message},this.buttonText=i(e.buttonText,"Cancel"),this.pickedFeatures=void 0,this.drawRectangle=i(e.drawRectangle,!1),a.track(this,["message","pickedFeatures","customUi"])}},,,,,,,,,function(e,t,r){"use strict";var i=o(r(335)),a=o(r(1377)),n=o(r(278));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=function(e,t){var r=(0,a.default)(e,!1,{ADD_TAGS:i.default.names(),ADD_ATTR:i.default.attributes()});return(0,n.default)("<div>"+r+"</div>",t)}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports={panel:"tjs-panel__panel",content:"tjs-panel__content tjs-_base__scrollbars undefined",inner:"tjs-panel__inner","is-open":"tjs-panel__is-open",isOpen:"tjs-panel__is-open","show-dropdown-as-modal":"tjs-panel__show-dropdown-as-modal",showDropdownAsModal:"tjs-panel__show-dropdown-as-modal","inner-close-btn":"tjs-panel__inner-close-btn tjs-_buttons__btn",innerCloseBtn:"tjs-panel__inner-close-btn tjs-_buttons__btn","inner-close-btn--for-modal":"tjs-panel__inner-close-btn--for-modal",innerCloseBtnForModal:"tjs-panel__inner-close-btn--for-modal",caret:"tjs-panel__caret",label:"tjs-panel__label",heading:"tjs-panel__heading tjs-panel__label","sub-heading":"tjs-panel__sub-heading tjs-panel__label",subHeading:"tjs-panel__sub-heading tjs-panel__label",section:"tjs-panel__section",button:"tjs-panel__button tjs-_buttons__btn tjs-_buttons__btn--map",overlay:"tjs-panel__overlay",link:"tjs-panel__link"}},,,,,,,,,,,,function(e,t,r){"use strict";var i=["image/jpeg","image/gif","image/png","image/svg+xml","image/bmp","image/x-bmp"].reduce(function(e,t){return e[t]=!0,e},{}),a=/[.\/](png|jpg|jpeg|gif|svg)/i,n=function(e,t){this.url=e,this.mimeType=t,this.safeSvgContent=void 0};n.prototype.isImage=function(){return this.mimeType?!!i[this.mimeType]:!!this.url.match(a)},n.prototype.isValid=function(){return this.url&&this.url.length},e.exports=n},,,function(e,t,r){"use strict";var i=r(143),a=r(23),n=r(27),o=["entityCollection","properties","data"],s=function(e){i.call(this,e),function(e){for(var t=0;t<o.length;t++)-1===e.propertyNames.indexOf(o[t])&&e.addProperty(o[t])}(this),this.currentProperties=void 0,this.currentDescription=void 0,this.updateCounters=void 0,a.track(this,["currentProperties","currentDescription","updateCounters"])};n(i,s),s.fromEntity=function(e){var t=new s({id:e.id});t.merge(e);for(var r=0;r<o.length;r++)-1===e.propertyNames.indexOf(o[r])&&(t[o[r]]=e[o[r]]);return t.cesiumEntity=e,t},s.fromEntityCollectionOrEntity=function(e){var t;return e.entityCollection&&(t=e.entityCollection.getById(e.id)),t&&t instanceof s||(t=s.fromEntity(e)),t},e.exports=s},,function(e,t,r){"use strict";var i=r(37);e.exports=function(e){return i.createIfNeeded(e).fetchText()}},function(e,t,r){"use strict";var i=r(92),a=r(10),n=r(27),o=r(23),s=function(e){i.call(this,e),this.loadPromise=void 0,this.loadingMessage=void 0,o.track(this,["loadingMessage"])};n(i,s),a(s.prototype,{type:{get:function(){return"result-pending"}},typeName:{get:function(){return"Result Pending"}}}),s.prototype._load=function(){return this.loadPromise},s.prototype.cancel=function(){},s.prototype._enable=function(){},s.prototype._disable=function(){},s.prototype._show=function(){},s.prototype._hide=function(){},e.exports=s},,,function(e,t,r){"use strict";var i=r(8),a=r(10),n=r(23),o=r(118),s=r(116),l=r(27),u=r(593),c=r(592),d=function(e){s.call(this,e),this._regionProviderPromise=void 0,this._regionProviderList=void 0,this.validRegionTypes=e.validRegionTypes,n.track(this,["_regionProviderList"]),o(this,"defaultValue",{get:function(){if(i(this._defaultValue))return this._defaultValue;var e=this.terria.nowViewing.items;if(e.length>0)for(var t=0;t<e.length;++t){var r=e[t];if(i(r.regionMapping)&&i(r.regionMapping.regionDetails)&&r.regionMapping.regionDetails.length>0)return r.regionMapping.regionDetails[0].regionProvider}if(i(this._regionProviderList)&&this._regionProviderList.length>0)return this._regionProviderList[0];this.load()}})};d.resolveRegionProvider=function(e){return e instanceof u?e:e instanceof d?e.value:void 0},l(s,d),a(d.prototype,{type:{get:function(){return"regionType"}}}),d.prototype._load=function(){return this.getAllRegionTypes()},d.prototype.getAllRegionTypes=function(){var e=this;return i(this._regionProviderPromise)?this._regionProviderPromise:(this._regionProviderPromise=c.fromUrl(this.terria.configParameters.regionMappingDefinitionsUrl,this.terria.corsProxy).then(function(t){var r;return r=(r=i(e.validRegionTypes)?t.regionProviders.filter(function(t){return e.validRegionTypes.indexOf(t.regionType)>=0}):t.regionProviders).filter(function(e){return i(e.analyticsWmsServer)}),e._regionProviderList=r,r}),this._regionProviderPromise)},e.exports=d},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(611),n=r(9),o=r(8),s=r(10),l=r(26),u=r(595),c=r(155),d=r(167),p=r(27),f=r(23),h=r(406),m=r(229),g=r(70),v=r(117),y=r(291),b=r(118),_=r(503).default,w=r(588),S=r(46),C=r(29),x=r(320),E=r(516),I=r(36),k=r(597),L=r(51),P=r(109),T=r(18),M=function(e){c.call(this,e),this._legendUrl=void 0,this._generatedLegendUrl=void 0,this._mapServerData=void 0,this._layersData=void 0,this._thisLayerInLayersData=void 0,this._allLayersInLayersData=void 0,this._lastToken=void 0,this._newTokenRequestInFlight=void 0,this.layers=void 0,this.maximumScale=void 0,this.maximumScaleBeforeMessage=void 0,this.showTilesAfterMessage=!0,this.allowFeaturePicking=!0,this.tokenUrl=void 0,this.parameters={},f.track(this,["layers","maximumScale","_legendUrl","_generatedLegendUrl","maximumScaleBeforeMessage","showTilesAfterMessage","allowFeaturePicking","tokenUrl","parameters"]),b(this,"metadataUrl",{get:function(){return o(this._metadataUrl)?this._metadataUrl:B(this.url)},set:function(e){this._metadataUrl=e}}),b(this,"legendUrl",{get:function(){return o(this._legendUrl)?this._legendUrl:o(this._generatedLegendUrl)?this._generatedLegendUrl:new m(B(this.url)+"/legend")},set:function(e){this._legendUrl=e}}),b(this,"dataUrl",{get:function(){return this._dataUrl},set:function(e){this._dataUrl=e}}),b(this,"dataUrlType",{get:function(){return this._dataUrlType},set:function(e){this._dataUrlType=e}})};p(c,M),s(M.prototype,{type:{get:function(){return"esri-mapServer"}},typeName:{get:function(){return"Esri ArcGIS MapServer"}},metadata:{get:function(){var e,t;return o(this._metadata)||(this._metadata=(e=this,(t=new v).isLoading=!0,t.promise=T(e.load()).then(function(){G(t.serviceMetadata,e._mapServerData),o(e.layers)?o(e._thisLayerInLayersData)?G(t.dataSourceMetadata,e._thisLayerInLayersData):t.dataSourceErrorMessage="No details are available.":t.dataSourceErrorMessage="Using all layers from this service that are visible by default.  See the Service Details below.",t.isLoading=!1}).otherwise(function(){t.dataSourceErrorMessage="An error occurred while invoking the ArcGIS map service.",t.serviceErrorMessage="An error occurred while invoking the ArcGIS map service.",t.isLoading=!1}),t)),this._metadata}}});var A=new RegExp("^(.*/MapServer/)([0-9]+)","i");function j(e){var t=new L(e.url);return t.segment(-1).match(/\d+/)&&t.segment(-1,""),t}function D(e,t){return g(S(e,t.addQuery("f","json").toString(),"1d"))}function N(e,t){return o(e._newTokenRequestInFlight)||(e._newTokenRequestInFlight=u(e.terria,e.tokenUrl,e.url).then(function(r){e._lastToken=r,t.token=r,e._newTokenRequestInFlight=void 0})),e._newTokenRequestInFlight}M.prototype._load=function(){var e=this;if(!o(this._mapServerData)||!o(this._layersData)){var t=new L(this.url),r="layers";t.segment(-1).match(/\d+/)&&(r=t.segment(-1),this.layers=r);var i=T();return this.tokenUrl&&(i=u(this.terria,this.tokenUrl,this.url)),i.then(function(t){e._lastToken=t;var i=j(e),a=j(e).segment(r),n=j(e).segment("legend");t&&(i.addQuery("token",t),a.addQuery("token",t),n.addQuery("token",t));var s=e._mapServerData||D(e,i),l=e._layersData||D(e,a),u=e._legendData||D(e,n);return T.all([s,l,u]).then(function(t){if(o(t[1].layers))e.updateFromMetadata(t[0],t[1],t[2],!1);else{if(!o(t[1].id)){var r=o(t[0].error)?t[0].error.message:"This dataset returned unusable metadata.";throw new I({title:"ArcGIS Mapserver Error",message:"<p>"+r+'</p><p>Please report it by sending an email to <a href="mailto:'+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a>.</p>"})}e.updateFromMetadata(t[0],{layers:[t[1]]},t[2],!1,t[1])}})})}},M.prototype.handleTileError=function(e,t,r,i,a){if(!o(this.tokenUrl))return e;var n=this;return e.otherwise(function(e){return!e||498!==e.statusCode&&499!==e.statusCode?T.reject(e):N(n,t)}).then(function(e){try{var r=JSON.parse(e);if(r&&r.error&&r.error.code)return 498===r.error.code||499===r.error.code?N(n,t):T.reject(new E(r.error.code,r.error.message))}catch(e){}return e})},M.prototype._createImageryProvider=function(){var e=F(this.maximumScale),t=A.exec(this.url),r=t&&t[2]?t[1]:this.url;r=r.replace(/\/$/g,"");var i,s,l=this.layers&&this.layers.length>0,u={url:(i=this,s=r,S(i,B(s))),layers:W(this),tilingScheme:new P,maximumLevel:e,mapServerData:this._mapServerData,enablePickFeatures:n(this.allowFeaturePicking,!0),usePreCachedTilesIfAvailable:!l,parameters:this.parameters};o(this._lastToken)&&(u.token=this._lastToken),!o(this._legendUrl)&&o(this._legendData)&&this.loadLegendFromJson(this._legendData);var c=new a(u),p=F(this.maximumScaleBeforeMessage);if(o(p)){var f=c.requestImage,h=!1,m=this;c.requestImage=function(e,t,r){return r>p&&(h||(m.terria.error.raiseEvent(new I({title:"Dataset will not be shown at this scale",message:'The "'+m.name+"\" dataset will not be shown when zoomed in this close to the map because the data custodian has indicated that the data is not intended or suitable for display at this scale.  Click the dataset's Info button on the Now Viewing tab for more information about the dataset and the data custodian."})),h=!0),!m.showTilesAfterMessage)?d.loadImage(c,m.terria.baseUrl+"images/blank.png"):f.call(c,e,t,r)}}return c};var O=/^No[\s_-]?Data$/i;function F(e){if(o(e)&&!(e<=0)){var t=2*Math.PI*l.WGS84.maximumRadius/256*(9600/2.54)/(e-1e-6);return 0|Math.log(t)/Math.log(2)}}function R(e){var t=e.extent;if(o(t)&&t.spatialReference&&t.spatialReference.wkid){var r="EPSG:"+t.spatialReference.wkid;if(!o(w[r]))return;var i=new _.Proj(w[r]),a=new _.Proj("EPSG:4326"),n=_(i,a,[t.xmin,t.ymin]),s=n[0],l=n[1],u=(n=_(i,a,[t.xmax,t.ymax]))[0],c=n[1];return C.fromDegrees(s,l,u,c)}}function U(e,t,r,i){if(o(i)&&0!==i.length){var a=e.findInfoSection(r);o(a)?t&&(a.content=i):e.info.push({name:r,content:i})}}function V(e,t,r,i){o(i)&&(!t&&o(e[r])||(e[r]=i))}function B(e){var t=new L(e);return t.search(""),t.toString()}function G(e,t){if(!("string"==typeof t||t instanceof String||t instanceof Array&&(0===t.length||"object"!==i(t[0]))))for(var r in t)if(t.hasOwnProperty(r)){var a=t[r],n=new y;n.name=r,n.value=a,G(n,a),e.items.push(n)}}function W(e){if(e._allLayersInLayersData&&e._allLayersInLayersData.length>0){for(var t=[],r=0;r<e._allLayersInLayersData.length;++r)o(e._allLayersInLayersData[r])&&o(e._allLayersInLayersData[r].id)&&t.push(e._allLayersInLayersData[r].id.toString());return t.join(",")}return e.layers}M.prototype.updateFromMetadata=function(e,t,r,i,a){var n;if(!o(a)){if(a=function(e,t){if(!o(t))return e;return t.split(",").map(function(t){return function(e,t){for(var r,i=(t=t.toString()).toLowerCase(),a=0;a<e.length;++a){var n=e[a];if(n.id.toString()===t)return n;n.name.toLowerCase()===i&&(r=n)}return r}(e,t)})}(t.layers,this.layers),!o(a))return;if(o(this.layers)){var s=this.layers.split(",");for(n=0;n<a.length;++n)o(a[n])||(console.log('A layer with the name or ID "'+s[n]+'" does not exist on the ArcGIS MapServer - ignoring it.'),a.splice(n,1),s.splice(n,1),--n)}if(0===a.length)return}this._mapServerData=e,this._layersData=t,this._legendData=r,Array.isArray(a)?(this._thisLayerInLayersData=a[0],this._allLayersInLayersData=a,a=this._thisLayerInLayersData):(this._thisLayerInLayersData=a,this._allLayersInLayersData=[a]),V(this,i,"dataCustodian",function(e){if(e&&e.documentInfo&&e.documentInfo.Author&&e.documentInfo.Author.length>0)return e.documentInfo.Author;return}(e)),V(this,i,"rectangle",function(e){if(!Array.isArray(e))return R(e);return k(e.map(function(e){return R(e)}))}(this._allLayersInLayersData));var l=Number.MAX_VALUE,u=Number.MAX_VALUE;for(n=0;n<this._allLayersInLayersData.length;++n){var c=this._allLayersInLayersData[n];c.maxScale<l&&(l=c.maxScale),!O.test(c.name)&&c.maxScale<u&&(u=c.maxScale)}l!==Number.MAX_VALUE&&V(this,i,"maximumScale",l),u!==l&&V(this,i,"maximumScaleBeforeMessage",u),U(this,i,"Data Description",a.description),U(this,i,"Service Description",e.serviceDescription),U(this,i,"Service Description",e.description),U(this,i,"Copyright Text",o(a.copyrightText)&&a.copyrightText.length>0?a.copyrightText:e.copyrightText)};var z=/_Labels$/;M.prototype.loadLegendFromJson=function(e){var t={title:""},r=o(this.layers)?this.layers.toLowerCase().split(","):[],i=[],a={};e.layers.forEach(function(e){O.test(e.layerName)||z.test(e.layerName)||o(this.layers)&&r.indexOf(String(e.layerId))<0&&r.indexOf(e.layerName.toLowerCase())<0||(t.title=x(e.layerName),e.legend.forEach(function(t){if(!a[t.label+t.imageData]){a[t.label+t.imageData]=!0;var r=""!==t.label?t.label:e.layerName;i.push(function(e,t){var r=new Image;r.src=t;var i=T.defer();return r.onload=i.resolve,i.promise.then(function(){return{title:e,image:r,imageUrl:t,imageWidth:r.width,imageHeight:r.height}})}(x(r),"data:"+t.contentType+";base64,"+t.imageData))}},this))},this);var n=this;if(0!==i.length)return T.all(i).then(function(e){return e.reverse(),t.items=e,n._generatedLegendUrl=new h(t).getLegendUrl()}).otherwise(function(e){throw e})},e.exports=M},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addMarker=function(e,t){e.locationMarker||(e.locationMarker=new i.default(h));e.dataSources.contains(e.locationMarker)||e.dataSources.add(e.locationMarker);e.locationMarker.entities.removeAll();var r=s.default.fromDegrees(t.location.longitude,t.location.latitude),a=(0,d.default)(t.location.longitude,t.location.latitude,{digits:5}),f=new n.default({name:t.name,position:o.default.WGS84.cartographicToCartesian(r),description:"<table><tr><td>Lat / Lon</td><td>".concat(a.latitude,", ").concat(a.longitude,"</td></tr></table>"),billboard:{image:p.default,scale:.5,eyeOffset:new l.default(0,0,50),verticalOrigin:u.default.BOTTOM}});e.cesium&&e.cesium.scene&&e.cesium.scene.globe&&e.cesium.scene.globe.terrainProvider&&function e(t,r,i,a){(0,c.default)(i,a,[r]).then(function(n){void 0!==n[0].height?t.position=o.default.WGS84.cartographicToCartesian(n[0]):a>0&&e(t,r,i,a-1)})}(f,r,e.cesium.scene.globe.terrainProvider,15);e.locationMarker.entities.add(f)},t.removeMarker=function(e){e.dataSources.remove(e.locationMarker),e.locationMarker=void 0},t.markerVisible=function(e){return(0,a.default)(e.locationMarker)},t.LOCATION_MARKER_DATA_SOURCE_NAME=void 0;var i=f(r(215)),a=f(r(8)),n=f(r(143)),o=f(r(26)),s=f(r(32)),l=f(r(12)),u=f(r(152)),c=f(r(331)),d=f(r(337)),p=f(r(1263));function f(e){return e&&e.__esModule?e:{default:e}}var h="TerriaJS Location Marker Points";t.LOCATION_MARKER_DATA_SOURCE_NAME=h},,,,,,,,function(e,t,r){"use strict";var i=r(254),a=r(92),n=r(287),o=r(41),s=r(138),l=r(8),u=r(10),c=r(11),d=r(17),p=r(27),f=r(23),h=r(139),m=r(18),g=function(e){n.call(this,e),this._loadingPromise=void 0,this._lastLoadInfluencingValues=void 0,this._parameters=[],this.isLoading=!1,this.contextItem=void 0,f.track(this,["isLoading"])};p(n,g),u(g.prototype,{showsInfo:{get:function(){return!0}},parameters:{get:function(){throw new c("parameters must be implemented in the derived class.")}},metadata:{get:function(){return a.defaultMetadata}},updaters:{get:function(){return g.defaultUpdaters}},serializers:{get:function(){return g.defaultSerializers}},propertiesForSharing:{get:function(){return g.defaultPropertiesForSharing}}}),(g.defaultUpdaters=o(n.defaultUpdaters)).contextItem=function(e,t,r,i){var a=t[r];return(e.contextItem=s(a.type,e.terria)).updateFromJson(a,i)},d(g.defaultUpdaters),(g.defaultSerializers=o(n.defaultSerializers)).contextItem=function(e,t,r,i){l(e.contextItem)&&(t[r]=e.contextItem.serializeToJson(i))},d(g.defaultSerializers),g.defaultPropertiesForSharing=o(n.defaultPropertiesForSharing),g.prototype.load=function(){if(l(this._loadingPromise))return this._loadingPromise;var e=[];if(l(this._getValuesThatInfluenceLoad)&&(e=this._getValuesThatInfluenceLoad()),!i(e,this._lastLoadInfluencingValues)){this.isLoading=!0;var t=this;return this._loadingPromise=h(function(){return t._lastLoadInfluencingValues=[],l(t._getValuesThatInfluenceLoad)&&(t._lastLoadInfluencingValues=t._getValuesThatInfluenceLoad()),m(t._load()).then(function(e){return m.all(t.parameters.map(function(e){return e.load()})).then(function(){return e})})}).then(function(){t._loadingPromise=void 0,t.isLoading=!1}).otherwise(function(e){throw t._lastLoadInfluencingValues=void 0,t._loadingPromise=void 0,t.isLoading=!1,e}),this._loadingPromise}},g.prototype.invoke=function(){throw new c("invoke must be implemented in the derived class.")},g.prototype.getParameterValues=function(){var e={};return this.parameters.forEach(function(t){e[t.id]=t.value}),e},g.prototype.setParameterValues=function(e){Object.keys(e).forEach(function(t){var r=this.parameters.filter(function(e){return e.id===t})[0];l(r)&&(r.value=e[t])})},e.exports=g},function(e,t,r){"use strict";var i=r(8);e.exports=function(e,t){if(e===t)return!0;if(!i(e)||!i(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}},function(e,t,r){"use strict";var i=r(9),a=r(8),n=r(18);function o(e,t,r){return void 0!==r[t]&&t.length>0&&"_"!==t[0]&&("id"!==t||!a(e.id))}e.exports=function(e,t,r){r=i(r,i.EMPTY_OBJECT);var a=[];for(var s in e)e.hasOwnProperty(s)&&o(e,s,t)&&(e.updaters&&e.updaters[s]?a.push(e.updaters[s](e,t,s,r)):e[s]=t[s]);return n.all(a)}},function(e,t,r){"use strict";var i=r(8),a=r(11),n=r(137);e.exports=function(e,t){if(!i(e))throw new a("terria is required.");if(i(t))return t.otherwise(function(t){n(e,t)})}},function(e,t,r){"use strict";var i=r(41),a=r(9),n=r(8),o=r(10),s=r(11),l=r(17),u=r(140),c=r(42),d=r(23),p=r(18),f=r(127),h=r(92),m=r(368),g=r(27),v=r(118),y=r(522),b=r(369),_=r(398),w=r(1047),S=r(269),C=r(36),x=r(157),E=r(128),I="id",k=function(e,t,r){h.call(this,e),r=a(r,a.EMPTY_OBJECT),this._tableStructure=void 0,n(r.tableStyle)?r.tableStyle instanceof S?this._tableStyle=r.tableStyle:this._tableStyle=new S(r.tableStyle):this._tableStyle=new S,this._dataSource=void 0,this._regionMapping=void 0,this._rectangle=void 0,this._pollTimeout=void 0,this.url=t,this.data=void 0,this.dataSourceUrl=void 0,this.opacity=.8,this.keepOnTop=!1,this.polling=new y,this.showWarnings=!0,this.colors=_.modifiedBrewer8ClassSet2,this.idColumns=r.idColumns,this.isSampled=a(r.isSampled,!0),this.splitDirection=u.NONE,d.track(this,["data","dataSourceUrl","opacity","keepOnTop","showWarnings","_tableStructure","_dataSource","_regionMapping","splitDirection"]),d.getObservable(this,"opacity").subscribe(function(e){n(this._regionMapping)&&n(this._regionMapping.updateOpacity)&&(this._regionMapping.updateOpacity(e),this.terria.currentViewer.notifyRepaintRequired())},this),d.defineProperty(this,"concepts",{get:function(){return n(this._tableStructure)?[this._tableStructure]:[]}}),d.defineProperty(this,"tableStyle",{get:function(){return this._tableStyle}}),d.defineProperty(this,"allVariablesUnactiveFromTableStructure",{get:function(){return n(this._tableStructure)&&this._tableStructure.activeItems&&0===this._tableStructure.activeItems.length}}),d.defineProperty(this,"dataViewId",{get:function(){}}),d.defineProperty(this,"availableDates",{get:function(){if(n(this.intervals)){for(var e=[],t=0;t<this.intervals.length;t++)e.push(c.toDate(this.intervals.get(t).start,3));return e}return[]}},this),d.defineProperty(this,"intervals",{get:function(){if(n(this.tableStructure)&&n(this.tableStructure.activeTimeColumn)&&n(this.tableStructure.activeTimeColumn.timeIntervals))return this.tableStructure.activeTimeColumn.timeIntervals.reduce(function(e,t){return n(t)&&e.addInterval(t),e},new f)}}),v(this,"clock",{get:function(){var e=this.timeColumn;if(this.isMappable&&n(e))return e.clock}}),v(this,"legendUrl",{get:function(){return n(this._dataSource)?this._dataSource.legendUrl:n(this._regionMapping)?this._regionMapping.legendUrl:void 0}}),v(this,"rectangle",{get:function(){return n(this._rectangle)?this._rectangle:(n(this._dataSource)?e=this._dataSource.extent:n(this._regionMapping)&&(e=this._regionMapping.extent),function(e,t){if(n(e)){var r=e.height*t,i=e.width*t;e.north=Math.min(Math.PI/2,e.north+r),e.south=Math.max(-Math.PI/2,e.south-r),e.east=Math.min(Math.PI,e.east+i),e.west=Math.max(-Math.PI,e.west-i)}return e}(e,.08));var e},set:function(e){this._rectangle=e}}),v(this,"dataUrl",{get:function(){return n(this._dataUrl)?this._dataUrl:n(this._tableStructure)?this._tableStructure.toDataUri():void 0},set:function(e){this._dataUrl=e}}),v(this,"dataUrlType",{get:function(){return n(this._dataUrlType)?this._dataUrlType:n(this._tableStructure)?"data-uri":void 0},set:function(e){this._dataUrlType=e}}),d.getObservable(this,"splitDirection").subscribe(function(){this.terria.currentViewer.updateItemForSplitter(this)},this)};function L(e,t){return e._dataSource=new w(e.terria,t,e._tableStyle,e.name,e.polling.seconds>0),e._dataSource.changedEvent.addEventListener(P.bind(null,e),e),e.activateColumnFromTableStyle(),T(t,e._tableStyle),e.startPolling(),p(!0)}function P(e){e.terria.currentViewer.notifyRepaintRequired()}function T(e,t){if(null===t.dataVariable)return e.columns[0].toggleActive(),void e.columns[0].toggleActive();if(0===e.activeItems.length){var r=e.columns.filter(function(e){return e.type===E.SCALAR}).concat(e.columns.filter(function(e){return e.type===E.ENUM}));if(r.length>0){for(var i=0;i<r.length;i++){var a=r[i];if(a.isEnum){var o=a.uniqueValues.length;if(o>2&&o<20&&o<.8*a.values.length)return void a.toggleActive()}else if(a.minimumValue<a.maximumValue)return void a.toggleActive()}r[0].toggleActive()}else e.columns[0].toggleActive(),e.columns[0].toggleActive()}else if(1===e.activeItems.length){var s=e.getColumnWithNameIdOrIndex(e.activeItems[0].name);n(s)&&(s.toggleActive(),s.toggleActive())}}function M(e){e.isEnabled&&e.isShown&&!e.isMappable&&e.terria.catalog.chartableItems.indexOf(e)<0&&(e.terria.catalog.addChartableItem(e),e.disableIncompatibleTableColumns(),e.setColorOnActiveColumns())}function A(e){e.terria.catalog.removeChartableItem(e)}g(h,k),o(k.prototype,{timeColumn:{get:function(){return this._tableStructure&&this._tableStructure.activeTimeColumn}},xAxis:{get:function(){if(!this.isMappable&&this._tableStructure)return n(this._tableStyle.xAxis)?this._tableStructure.getColumnWithNameOrId(this._tableStyle.xAxis):this.timeColumn||this._tableStructure.columnsByType[E.SCALAR][0]}},supportsReordering:{get:function(){return n(this._regionMapping)&&n(this._regionMapping.regionDetails)&&!this.keepOnTop}},supportsOpacity:{get:function(){return n(this._regionMapping)&&n(this._regionMapping.regionDetails)}},supportsSplitting:{get:function(){return n(this._regionMapping)&&n(this._regionMapping.regionDetails)}},tableStructure:{get:function(){return this._tableStructure}},dataSource:{get:function(){return this._dataSource}},regionMapping:{get:function(){return this._regionMapping}},imageryLayer:{get:function(){return this._regionMapping&&this._regionMapping.imageryLayer}},propertiesForSharing:{get:function(){return k.defaultPropertiesForSharing}},updaters:{get:function(){return k.defaultUpdaters}},serializers:{get:function(){return k.defaultSerializers}}}),(k.defaultUpdaters=i(h.defaultUpdaters)).tableStyle=function(e,t,r,i){e._tableStyle.updateFromJson(t[r],i),n(e._tableStyle)&&n(e.tableStructure)&&n(e._tableStyle.columns)&&0!==Object.keys(e._tableStyle.columns).length&&e.applyTableStyleColumnsToStructure(e._tableStyle,e.tableStructure),!n(e.tableStructure)||n(t[r].allVariablesUnactive)&&t[r].allVariablesUnactive?n(e.tableStructure)&&n(t[r].allVariablesUnactive)&&t[r].allVariablesUnactive&&e.syncAllVariablesUnactiveOnUpdate():e.activateColumnFromTableStyle()},k.defaultUpdaters.polling=function(e,t,r,i){return e[r].updateFromJson(t[r],i)},k.defaultUpdaters.concepts=function(){},k.defaultUpdaters.dataViewId=function(){},k.defaultUpdaters.availableDates=function(){},k.defaultUpdaters.intervals=function(){},l(k.defaultUpdaters),(k.defaultSerializers=i(h.defaultSerializers)).tableStyle=function(e,t,r,i){"csv"===e.type&&(n(e.url)||n(e.dataUrl))&&n(e.tableStyle)&&n(e._tableStructure)&&(t.tableStyle=e.syncActiveColumns(e.tableStyle,e.tableStructure)),t[r]=e[r].serializeToJson(i),e.allVariablesUnactiveFromTableStructure?(t[r].dataVariable=void 0,t[r].allVariablesUnactive=!0):n(e._tableStructure)&&e._tableStructure.activeItems[0]&&(t[r].dataVariable=e._tableStructure.activeItems[0].name,t[r].allVariablesUnactive=void 0)},k.defaultSerializers.polling=function(e,t,r,i){t[r]=e[r].serializeToJson(i)},k.defaultSerializers.legendUrl=function(){},k.defaultSerializers.concepts=function(){},k.defaultSerializers.dataViewId=function(){},k.defaultSerializers.allVariablesUnactiveFromTableStructure=function(){},k.defaultSerializers.dataUrl=function(e,t){t.dataUrl=e._dataUrl,e.isCsvForCharting&&!n(e.url)&&(t.dataUrl=e.dataUrl)},k.defaultSerializers.clock=function(){},k.defaultSerializers.availableDates=function(){},k.defaultSerializers.intervals=function(){},l(k.defaultSerializers),(k.defaultPropertiesForSharing=i(h.defaultPropertiesForSharing)).push("keepOnTop"),k.defaultPropertiesForSharing.push("opacity"),k.defaultPropertiesForSharing.push("tableStyle"),k.defaultPropertiesForSharing.push("splitDirection"),k.defaultPropertiesForSharing.push("url"),l(k.defaultPropertiesForSharing),k.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.data]},k.prototype.applyTableStyleColumnsToStructure=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyActiveColumns:!1};if(n(t)){if(n(e.columns))for(var i in e.columns)if(e.columns.hasOwnProperty(i)){var a=e.columns[i],o=t.getColumnWithNameIdOrIndex(i);n(o)&&(r.onlyActiveColumns?n(a.active)&&(o.isActive=a.active):(n(a.units)&&(o.units=a.units),n(a.type)&&(o.type=a.type),n(a.name)&&(o.name=a.name),n(a.active)&&(o.isActive=a.active)))}return this}console.warn("table structure does not exist")},k.prototype.syncAllVariablesUnactiveOnUpdate=function(){var e=this._tableStyle,t=this._tableStructure;if(!n(e))throw new s("syncAllVariablesUnactiveOnUpdate was called without a tableStyle?");if(!n(t))throw new s("syncAllVariablesUnactiveOnUpdate was called without a tableStructure?");if(!(t instanceof x))throw new s("table structure passed in to syncAllVariablesUnactiveOnUpdate isn't a TableStructure");e.allVariablesUnactive&&t.items.map(function(e){e.isActive&&e.toggleActive()})},k.prototype.syncActiveColumns=function(e,t){if(!n(e))throw new s("syncActiveColumns was called without a tableStyle?");if(!n(t))throw new s("syncActiveColumns was called without a tableStructure?");if(!(t instanceof x))throw new s("table structure passed in to syncActiveColumns isn't a TableStructure");if(n(e.columns)&&n(t.getColumnWithNameIdOrIndex)){for(var r in e.columns)if(e.columns.hasOwnProperty(r)){var i=e.columns[r],a=t.getColumnWithNameIdOrIndex(r);n(a)&&(i.active=a.isActive)}}else if(t.allowMultiple&&!n(e.columns)&&n(t.getColumnWithNameIdOrIndex)){var o=t.items.reduce(function(e,t,r){return e[r]={name:t.name,units:t.units,format:t.format,active:t.isActive,chartLineColor:t.color,yAxisMin:t.yAxisMin,yAxisMax:t.yAxisMax},e},{});e.columns=o}},k.prototype.initializeFromTableStructure=function(e){var t=this,r=t._tableStyle;function i(){e.name="",e.allowMultiple=!0,t.activateColumnFromTableStyle(),t.setChartable(),t.startPolling()}if(function(e,t){void 0===e.idColumns&&!n(t.idColumnNames)&&n(t.columnsByType[E.TIME].length>0)&&t.getColumnNames().indexOf(I)>=0&&(e.idColumns=[I],t.idColumnNames=e.idColumns)}(t,e),e.setActiveTimeColumn(r.timeColumn),t._tableStructure=e,t.isMappable){if(!e.hasLatitudeAndLongitude&&e.hasAddress&&n(t.terria.batchGeocoder))return t.terria.batchGeocoder.bulkConvertAddresses(e,t.terria.corsProxy).then(function(r){var i=c.secondsDifference(c.now(),r.startTime),a="Bulk geocode of "+r.numberOfAddressesConverted+" addresses took "+i.toFixed(2)+" seconds, which is "+(r.numberOfAddressesConverted/i).toFixed(2)+" addresses/s, or "+(i/r.numberOfAddressesConverted).toFixed(2)+" s/address.\n";console.log(a);var n="";return(r.missingAddresses.length>0||r.nullAddresses>0)&&(r.missingAddresses.length>0&&(n="\nThe CSV contains addresses, but "+r.missingAddresses.length+" can't be located on the map:\n"+r.missingAddresses.join(", ")+".<br/><br/>"),r.nullAddresses>0&&(n+=r.nullAddresses+" addresses are missing from the CSV."),t.terria.error.raiseEvent(new C({sender:this,title:"Bulk Geocoder Information",message:n}))),L(t,e)}).otherwise(function(e){t.terria.error.raiseEvent(new C({sender:this,title:"Bulk Geocoder Error",message:"Unable to map addresses to lat-long coordinates, as an error occurred while retrieving address coordinates. Please check your internet connection or try again later."})),console.log("Unable to map addresses to lat-long coordinates.",e)});if(e.hasLatitudeAndLongitude)return L(t,e);var a=new b(t,e,t._tableStyle);return a.loadRegionDetails().then(function(n){return n?(t._regionMapping=a,t._regionMapping.changedEvent.addEventListener(P.bind(null,t),t),t._regionMapping.setRegionColumnType(),t.activateColumnFromTableStyle(),T(e,r),t.startPolling(),p(!0)):(i(),p(!0))})}i()},k.prototype.setChartable=function(){var e=this._tableStructure;e.allowMultiple=!0,e.requireSomeActive=!1,this.isMappable=!1,n(e.getColorCallback)||(e.getColorCallback=this.getNextColor.bind(this)),e.toggleActiveCallback=this.disableIncompatibleTableColumns.bind(this);var t=this.xAxis;e.columns.forEach(function(e){[E.ALT,E.LON,E.LAT].indexOf(e.type)>=0&&(e.type=E.SCALAR),e.isVisible=e!==t&&e.type===E.SCALAR}),n(this.tableStyle.allVariablesUnactive)&&this.tableStyle.allVariablesUnactive||function(e){var t=e._tableStructure;if(0===t.activeItems.length){var r=t.columnsByType[E.SCALAR];r.length>1&&0===t.columnsByType[E.TIME].length?r[1].toggleActive():r.length>0&&r[0].toggleActive()}else e.setColorOnActiveColumns()}(this),M(this)},k.prototype.setColorOnActiveColumns=function(){var e=this._tableStructure;e.columns.filter(function(e){return e.isActive&&!n(e.color)}).forEach(function(t){t.color=e.getColorCallback(e.getColumnIndex(t.id))})},k.prototype.activateColumnFromTableStyle=function(){var e=this._tableStyle;if(n(e)&&n(e.dataVariable)){var t=this._tableStructure.getColumnWithNameOrId(e.dataVariable);t&&!t.isActive&&t.toggleActive()}n(e)&&n(e.columns)&&this.applyTableStyleColumnsToStructure(e,this.tableStructure,{onlyActiveColumns:!0})},k.prototype.startPolling=function(){var e=this.polling;if(n(e.seconds)&&e.seconds>0)throw new s("Polling is not available on this dataset.")},k.prototype._load=function(){throw new s("_load must be implemented in the derived class.")},k.prototype._enable=function(e){n(this._regionMapping)&&this._regionMapping.enable(e),M(this),this.terria.currentViewer.updateItemForSplitter(this)},k.prototype._disable=function(){n(this._regionMapping)&&this._regionMapping.disable(),A(this)},k.prototype._show=function(){if(n(this._dataSource)){var e=this.terria.dataSources;if(e.contains(this._dataSource))return void(console&&console.log&&console.log(new Error("This data source is already shown.")));e.add(this._dataSource)}n(this._regionMapping)&&this._regionMapping.show(),n(this._tableStyle)&&n(this.tableStructure)&&n(this._tableStyle.allVariablesUnactive)&&this.syncAllVariablesUnactiveOnUpdate(),M(this)},k.prototype._hide=function(){if(n(this._dataSource)){var e=this.terria.dataSources;if(!e.contains(this._dataSource))throw new s("This data source is not shown.");e.remove(this._dataSource,!1)}n(this._regionMapping)&&this._regionMapping.hide(),A(this)},k.prototype.getNextColor=function(){var e=this._terria.catalog;if(n(e)&&n(this.colors)&&0!==this.colors.length&&this.isEnabled){var t=this.colors.slice(),r=e.chartableItems.map(function(e){return e.tableStructure?e.tableStructure.columns.map(function(e){return e.color}).filter(function(e){return n(e)}):[]});r=r.reduce(function(e,t){return e.concat(t)},[]);for(var i=0;i<r.length;i++){var a=t.indexOf(r[i]);a>-1&&t.splice(a,1),0===t.length&&(t=this.colors.slice())}return t[0]}},k.prototype.chartData=function(){var e=this,t=this;if(n(t.tableStructure)){var r=t.xAxis,i=t.tableStructure.columnsByType[E.SCALAR].filter(function(e){return e.isActive});if(i.length>0){var a=i.map(function(e){return t.tableStructure.columns.indexOf(e)});return t.tableStructure.toPointArrays(r,i).map(function(r,n){return new m(r,{id:t.uniqueId+"-"+a[n],name:i[n].name,categoryName:t.name,units:i[n].units,color:i[n].color||e.colors[0],yAxisMin:i[n].yAxisMin,yAxisMax:i[n].yAxisMax})})}}},k.prototype.disableIncompatibleTableColumns=function(){if(this.isEnabled&&this.isShown){var e=this._tableStructure,t=this.xAxis;if(0===e.activeItems.length)return;this._terria.catalog.chartableItems.forEach(function(r){n(r.tableStructure)&&r.tableStructure!==e&&r.xAxis.type!==t.type&&r.tableStructure.columns.forEach(function(e){e.isActive=!1})})}},k.prototype.showOnSeparateMap=function(e){var t,r=this._dataSource;return n(this._regionMapping)&&(t=this._regionMapping.showOnSeparateMap(e)),n(r)&&e.addDataSource({dataSource:r}),function(){n(t)&&t(),n(r)&&e.removeDataSource({dataSource:r})}},e.exports=k},function(e,t,r){"use strict";var i=function(){return this.childNodes};e.exports=function(e,t,r,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;e.selectAll(i).filter(function(e,t,i){return i[t].tagName!==r}).each(function(){this.parentElement.appendChild(this)});var o=e.selectAll(i).data(t,function(e){return e?e.id||e:this.id}),s=o.enter().append(r),l=o.exit();if(n){l.transition(n).style("opacity",.01).remove();var u=a(s,!0);u&&u.style("opacity",0).transition(n).style("opacity",1),a(o.transition(n).style("opacity",1),!1)}else l.remove(),a(s,!0),a(o,!1)}},,,,,function(e,t,r){"use strict";var i=r(9),a=r(8),n=r(10),o=r(20),s=r(11),l=r(42),u=r(23),c=r(260),d=r(295),p=r(27),f=r(128),h=r(532),m=r(296),g=[{hint:/^(lon|long|longitude|lng)$/i,type:f.LON},{hint:/^(lat|latitude)$/i,type:f.LAT},{hint:/^(address|addr)$/i,type:f.ADDR},{hint:/^(.*[_ ])?(depth|height|elevation)$/i,type:f.ALT},{hint:/^(.*[_ ])?(time|date)/i,type:f.TIME},{hint:/^(year)$/i,type:f.TIME},{hint:/^postcode|poa|(.*_code)$/i,type:f.ENUM}],v=[{hint:/^(.*[_ ])?end[\s_]?(time|date)/i,type:!0}],y=[{hint:/^(.*[_ ])?(year)/i,type:h.YEAR}],b=["na","NA","-"],_=[],w=function(e,t,r){this.options=i(r,i.EMPTY_OBJECT),m.call(this,e,{parent:this.options.tableStructure,active:this.options.active,color:this.options.chartLineColor}),this.id=i(this.options.id,this.id),this.format=this.options.format,this.units=this.options.units,this._rawValues=t,this._unallowedTypes=i(this.options.unallowedTypes,[]),this._replaceWithZeroValues=i(this.options.replaceWithZeroValues,_),this._replaceWithNullValues=i(this.options.replaceWithNullValues,b),this._type=this.options.type,this._subtype=this.options.subtype,this._isEndDate=this.options.isEndDate,a(this._type)||this.setTypeAndSubTypeFromName();var n=function(e){return"number"==typeof e};this._type===f.SCALAR&&t.some(n)?this._values=S(t,this._replaceWithZeroValues,this._replaceWithNullValues):this._values=t,this._numericalValues=this._values&&this._values.filter(n);var o,s=this._values.filter(function(e){return null!==e});if(this._minimumValue=Math.min.apply(null,s),this._maximumValue=Math.max.apply(null,s),this.yAxisMin=this.options.yAxisMin,this.yAxisMax=this.options.yAxisMax,this._uniqueValues=void 0,this._indicesIntoUniqueValues=void 0,this.displayDuration=this.options.displayDuration,this.dates=void 0,this.julianDates=void 0,this.finishJulianDates=void 0,this._timeIntervals=void 0,this._clock=void 0,a(t)&&this._type===f.TIME){var l=E(this);this.dates=l.jsDates,this.julianDates=l.julianDates,0===this.dates.length?this._type=f.SCALAR:this._subtype=l.subtype}isNaN(this._minimumValue)&&this._type===f.SCALAR&&(this._type=f.ENUM),this._type===f.ENUM&&function(e){for(var t=e.length-1;t>=0;t--){var r=e[t];if(null!==r){if(!a(r)||!a(r.indexOf))return!1;if("<"!==r[0]||">"!==r[r.length-1]||r.length<5)return!1;if("/"!==r[r.length-2]&&!(r.indexOf("=")>=0)){var i=r.substr(2,r.length-4);if(!(i.indexOf("<")>0&&i.indexOf(">")>=0))return!1}}}return!0}(this.values)&&(this._type=f.TAG),C(this),this._formattedValues=(o=this).type===f.SCALAR?o._rawValues.map(function(e){return isNaN(e)?e:d(e,o.format)}):o.type===f.TIME?o.dates.map(function(e,t){var r=o._values[t];if(("string"==typeof r||r instanceof String)&&r.indexOf("T")>=0){var i=r.split("T")[1];return i.indexOf("+")>=0||i.indexOf("-")>=0||i.indexOf("Z")>=0?e.toString():e.toDateString()+" "+e.toTimeString().split(" ")[0]}return a(r)?r:""}):o._values.map(function(e){return null===e?"":e}),u.track(this,["_type","_values","units","_timeIntervals"])};function S(e,t,r){return e.map(function(e){return t.indexOf(e)>=0?0:r.indexOf(e)>=0?null:e})}function C(e){e._uniqueValues=void 0,e._indicesIntoUniqueValues=void 0,e._displayVariableTypes=e.options.displayVariableTypes,a(e._displayVariableTypes)&&(e.isVisible=e._displayVariableTypes.indexOf(e._type)>=0)}function x(e){var t="";if(!a(e.indexOf))return e;var r=e.indexOf("T");if(r>=0){var i=e.substr(r+1).split(":");i&&i.length>1&&(t=" "+i[0]+":"+i[1]),i.length>2&&(t=t+":"+parseInt(i[2],10)),e=e.substr(0,r)}var n=e.split(/-/);return 3===n.length&&(e=n[0]+"/"+n[1]+"/"+n[2]),e+t}function E(e){var t=S(e._values,[],e._replaceWithNullValues.concat(e._replaceWithZeroValues));return w.convertToDates(t,e.subtype)}function I(e,t,r){for(var i in e)if(e[i].hint.test(t)){var a=e[i].type;if(-1===r.indexOf(a))return a}}p(m,w),n(w.prototype,{type:{get:function(){return this._type},set:function(e){this._type=e,C(this)}},subtype:{get:function(){return this._subtype},set:function(e){this._subtype=e}},values:{get:function(){return this._values}},numericalValues:{get:function(){return this._numericalValues}},isEnum:{get:function(){return this._type===f.ENUM}},formattedValues:{get:function(){return this._formattedValues}},minimumValue:{get:function(){return this._minimumValue}},maximumValue:{get:function(){return this._maximumValue}},uniqueValues:{get:function(){var e,t,r;return this.isEnum&&!a(this._uniqueValues)&&(this._uniqueValues=c(this._values).filter(function(e){return null!==e}),e=this._values,t=this._uniqueValues,r=e.reduce(function(e,t){return a(e[t])?e[t]+=1:e[t]=1,e},{}),t.sort(function(e,t){return r[t]-r[e]||(e<t?-1:e>t?1:0)})),this._uniqueValues}},julianDatesOrValues:{get:function(){return this.type===f.TIME?this.julianDates:this._values}},timeIntervals:{get:function(){return this._timeIntervals}},clock:{get:function(){return this._clock}}}),w.prototype.getFullOptions=function(){return{tableStructure:this.parent,active:this.isActive,id:this.id,format:this.format,units:this.units,unallowedTypes:this._unallowedTypes,replaceWithZeroValues:this._replaceWithZeroValues,replaceWithNullValues:this._replaceWithNullValues,type:this._type,subtype:this._subtype,isEndDate:this._isEndDate,displayDuration:this.displayDuration,displayVariableTypes:this._displayVariableTypes,chartLineColor:this.color,yAxisMin:this.yAxisMin,yAxisMax:this.yAxisMax}},w.convertToDates=function(e,t){var r,i=0;e.forEach(function(e){var t=parseInt(e,10);t>i&&(i=t)}),t===h.YEAR||i<9999&&e.every(function(e){return function(e){return!isNaN(e)&&parseInt(Number(e),10)===+e&&!isNaN(parseInt(e,10))}(e)||!a(e)})?(t=h.YEAR,r=function(e){var t=new Date(e+"/01/01");return[t,l.fromDate(t)]}):r=i<9999&&e.every(function(e){return!a(e)||4===(a(e.indexOf)&&e.indexOf("-Q"))})?function(e){var t,r=e.slice(0,4),i=e.slice(6);if("1"===i)t="01/01";else if("2"===i)t="04/01";else if("3"===i)t="07/01";else{if("4"!==i)return[void 0,void 0];t="10/01"}var a=new Date(r+"/"+t);return[a,l.fromDate(a)]}:i>31?function(e){if(e.indexOf(" ")>0&&e.indexOf(":")>0){var t=new Date(x(e));return[t,l.fromDate(t)]}var r=l.fromIso8601(e);return[l.toDate(r),r]}:i>12?function(e){var t=new Date(function(e){var t=e.split(/[\/-]/);return 3===t.length&&(e=t[1]+"/"+t[0]+"/"+t[2]),e}(e));return[t,l.fromDate(t)]}:function(e){var t=new Date(x(e));return[t,l.fromDate(t)]};var n=[];try{n=e.map(function(e){if(a(e)){var t=r(e);return isFinite(t[0])&&a(t[1])&&isFinite(t[1].dayNumber)&&isFinite(t[1].secondsOfDay)?t:[void 0,void 0]}return[void 0,void 0]})}catch(t){try{for(var o=0;o<e.length;o++)r(e[o])}catch(t){console.log("Unable to parse date:",e[o],t)}}return{subtype:t,jsDates:n.map(function(e){return e[0]}),julianDates:n.map(function(e){return e[1]})}},w.sumValues=function(){var e,t=(1===arguments.length?arguments[0]:Array.prototype.slice.call(arguments)).map(function(e){return e.values});return(e=t)[0].map(function(t,r){return e.map(function(t,i){return e[i][r]})}).map(function(e){return e.reduce(function(e,t){return null===e&&null===t?null:null===e?+t:null===t?+e:+e+ +t})})},w.divideValues=function(e,t,r){return t.values.map(function(t,i){return 0===t&&a(r)?r:+e.values[i]/+t})},w.prototype.setTypeAndSubTypeFromName=function(){var e=I(g,this.name,this._unallowedTypes);if(!a(e)&&(e=f.SCALAR,this._unallowedTypes.indexOf(f.SCALAR)>=0))throw new s("No suitable variable type found.");this._type=e,this._subtype=I(y,this.name,[]),this._isEndDate=I(v,this.name,[])},w.prototype.toArrayWithName=function(){return[this.name].concat(this.values)},w.prototype.destroy=function(){return o(this)},e.exports=w},,,,,,function(e,t,r){"use strict";var i=r(41),a=r(9),n=r(8),o=r(17),s=r(18),l=r(27),u=r(1043),c=r(255),d=function(e){e=a(e,a.EMPTY_OBJECT),u.call(this,e),this.regionVariable=e.regionVariable,this.regionType=e.regionType,this.dataVariable=e.dataVariable,this.allVariablesUnactive=e.allVariablesUnactive,this.timeColumn=e.timeColumn,this.xAxis=e.xAxis,this.columns=p(e,[])};function p(e,t,r){if(n(e.columns)){var i={};for(var a in e.columns)if(e.columns.hasOwnProperty(a)){i[a]=new u;var o=i[a].updateFromJson(e.columns[a],r);n(o)&&t.push(o)}return i}}l(u,d),d.prototype.updateFromJson=function(e,t){var r=[c(this,e,t)];return this.columns=p(e,r,t),s.all(r)},d.prototype.updaters=i(d.prototype.updaters),d.prototype.updaters.columns=function(e,t,r){},o(d.prototype.updaters),e.exports=d},,,,,,,,,function(e,t,r){"use strict";var i=r(13),a=r(1322),n=r(58),o=r(8),s=r(462),l=r(335),u=new a.Parser({decodeEntities:!0}),c=new a.ProcessNodeDefinitions(i),d=function(){return!0},p=function(e){return"text"!==e.type||e.data.trim()},f=0;e.exports=function(e,t){return o(e)&&0!==e.length?u.parseWithInstructions(e,d,function(e){function t(t){return{shouldProcessNode:t.shouldProcessNode,processNode:t.processNode.bind(null,e)}}for(var r=[],i=l.values(),a=function(a){var n=i[a];r.push({shouldProcessNode:function(e){return e.name===n.name},processNode:n.processNode.bind(null,e)});var s=n.furtherProcessing;o(s)&&(r=r.concat(s.map(t)))},u=0;u<i.length;u++)a(u);return r.push({shouldProcessNode:function(e){return"a"===e.name},processNode:function(e,t,r){var i={key:"anchor-"+f++,target:"_blank",rel:"noreferrer noopener"};return e.attribs=n(e.attribs,i),s.createElement(e,r,e.data,t)}}),r.push({shouldProcessNode:p,processNode:c.processDefaultNode}),r}(t||{})):e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=n,t.formatTime=o,t.formatDateTime=function(e,t){return n(e,t)+", "+o(e,t)};var i,a=(i=r(8))&&i.__esModule?i:{default:i};function n(e,t){return(0,a.default)(t)?e.toLocaleDateString(t):[s(e.getDate()),s(e.getMonth()+1),e.getFullYear()].join("/")}function o(e,t){return(0,a.default)(t)?e.toLocaleTimeString(t):[s(e.getHours()),s(e.getMinutes()),s(e.getSeconds())].join(":")}function s(e){return e<10?"0"+e:"".concat(e)}},,,,,,,,function(e,t,r){"use strict";var i=r(9),a=r(8),n=r(10),o=r(11),s=r(17),l=r(18),u=r(23),c=r(288),d=r(255),p=r(139),f=r(254),h=function(e){if(!a(e))throw new o("terria is required");this._terria=e,this.name="Unnamed Item",this.description="",this.info=[],this.infoSectionOrder=void 0,this.isUserSupplied=!0,this.isPromoted=!1,this.isHidden=!1,this.initialMessage=void 0,this.cacheDuration=void 0,this.forceProxy=!1,this.customProperties={},this.id=void 0,this.shareKeys=void 0,this.parent=void 0,this.shortReport=void 0,this.shortReportSections=[],this.isLoading=!1,this.isWaitingForDisclaimer=!1,this.hideSource=!1,this._sourceInfoItemNames=[],this._nameInCatalog=void 0,this._loadingPromise=void 0,this._memoizedInfoItemsSourceLookup=void 0,u.track(this,["name","info","infoSectionOrder","description","isUserSupplied","isPromoted","initialMessage","isHidden","cacheDuration","customProperties","shortReport","shortReportSections","isLoading","isWaitingForDisclaimer","_nameInCatalog"]),u.defineProperty(this,"nameSortKey",{get:function(){return this.nameInCatalog.split(/(\d+)/).map(function(e){var t=parseInt(e,10);return t==t?t:e.trim().toLowerCase()})}}),u.defineProperty(this,"nameInCatalog",{get:function(){return i(this._nameInCatalog,this.name)},set:function(e){this._nameInCatalog=e}})},m=/description/i;n(h.prototype,{type:{get:function(){throw new o('Types derived from CatalogMember must implement a "type" property.')}},typeName:{get:function(){throw new o('Types derived from CatalogMember must implement a "typeName" property.')}},isGroup:{get:function(){return!1}},terria:{get:function(){return this._terria}},updaters:{get:function(){return h.defaultUpdaters}},serializers:{get:function(){return h.defaultSerializers}},propertiesForSharing:{get:function(){return h.defaultPropertiesForSharing}},hasDescription:{get:function(){return this.description||this.info&&this.info.some(function(e){return m.test(e.name)})}},uniqueId:{get:function(){return this.id?this.id:(this.parent?this.parent.uniqueId+"/":"")+this.name}},allShareKeys:{get:function(){var e=[this.uniqueId];return this.shareKeys?e.concat(this.shareKeys):e}},needsDisclaimerShown:{get:function(){return a(this.initialMessage)&&(!a(this.initialMessage.key)||!this.terria.getLocalProperty(this.initialMessage.key))}},infoWithoutSources:{get:function(){return i(this.info,[]).filter(function(e){return!a(this._infoItemsWithSourceInfoLookup[e.name])}.bind(this))}},_infoItemsWithSourceInfoLookup:{get:function(){return a(this._memoizedInfoItemsSourceLookup)||(this._memoizedInfoItemsSourceLookup=this._sourceInfoItemNames.reduce(function(e,t){return e[t]=!0,e},{})),this._memoizedInfoItemsSourceLookup}}}),s(h.defaultUpdaters={nameSortKey:function(){},info:function(e,t,r){a(t.info)&&t.info.forEach(function(t){var r=e.info.filter(function(e){return e.name===t.name})[0];if(a(r)){var i=e.info.indexOf(r);e.info.splice(i,1,t)}else e.info.push(t)})}}),s(h.defaultSerializers={nameSortKey:function(){}}),s(h.defaultPropertiesForSharing=["name"]),h.prototype.updateFromJson=function(e,t){a(t)&&a(t.isUserSupplied)&&(this.isUserSupplied=t.isUserSupplied);var r=d(this,e,t);return this.isLoading?l.all([r,this.load()]):r},h.prototype.serializeToJson=function(e){e=i(e,i.EMPTY_OBJECT);var t=c(this,e.propertyFilter,e);return t.type=this.type,t.id=this.uniqueId,a(this.parent)&&(t.parents=function e(t,r){r=i(r,[]);if(a(t.parent))return e(t.parent,r.concat([t.uniqueId]));return r}(this.parent).reverse()),t},h.prototype.findInfoSection=function(e){for(var t=0;t<this.info.length;++t)if(this.info[t].name===e)return this.info[t]},h.prototype.connectsWithRoot=function(){for(var e=this;e.parent;)e=e.parent;return e===this.terria.catalog.group},h.prototype.enableWithParents=function(){throw new o('Types derived from CatalogMember must implement a "enableWithParents" function.')},h.prototype.waitForDisclaimerIfNeeded=function(){if(this.needsDisclaimerShown){this.isWaitingForDisclaimer=!0;var e=l.defer();return this.terria.disclaimerListener(this,function(){this.isWaitingForDisclaimer=!1,e.resolve()}.bind(this)),e.promise}return l()},h.prototype.load=function(){if(a(this._loadingPromise))return this._loadingPromise;var e=[];if(a(this._getValuesThatInfluenceLoad)&&(e=this._getValuesThatInfluenceLoad()),!f(e,this._lastLoadInfluencingValues)){this.isLoading=!0;var t=this;return this._loadingPromise=p(function(){return t._lastLoadInfluencingValues=[],a(t._getValuesThatInfluenceLoad)&&(t._lastLoadInfluencingValues=t._getValuesThatInfluenceLoad()),t._load()}).then(function(e){return t._loadingPromise=void 0,t.isLoading=!1,e}).otherwise(function(e){throw t._lastLoadInfluencingValues=void 0,t._loadingPromise=void 0,t.isLoading=!1,e}),this._loadingPromise}},h.itemFilters={userSuppliedOnly:function(e){return e.isUserSupplied},enabled:function(e){return!a(e.isEnabled)||e.isEnabled},noLocalData:function(e){return!a(e.data)},isCsvForCharting:function(e){return e.isCsvForCharting}},h.propertyFilters={sharedOnly:function(e,t){return t.propertiesForSharing.indexOf(e)>=0}},e.exports=h},function(e,t,r){"use strict";var i=r(9);e.exports=function(e,t,r){r=i(r,i.EMPTY_OBJECT),t=i(t,function(){return!0});var a={};for(var n in e)e.hasOwnProperty(n)&&n.length>0&&"_"!==n[0]&&"parent"!==n&&t(n,e)&&(e.serializers&&e.serializers[n]?e.serializers[n](e,a,n,r):a[n]=e[n]);return a}},,,function(e,t,r){"use strict";var i=r(10),a=r(23),n=function(e,t){this.name=e,this.value=t,this.items=[],this.isOpen=!0,a.track(this,["name","value","items","isOpen"])};i(n.prototype,{hasChildren:{get:function(){return this.items.length>0}},valueIsArray:{get:function(){return this.value instanceof Array}}}),n.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},e.exports=n},function(e,t,r){"use strict";var i,a=(i=r(36))&&i.__esModule?i:{default:i};function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null}var t,r,i;return t=e,(r=[{key:"render",value:function(e,t,r){throw new a.default("Not implemented")}},{key:"getXpadding",value:function(e,t){return 0}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=o},,,function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(9),n=r(8),o=",",s=".";if("object"===("undefined"==typeof Intl?"undefined":i(Intl))&&"function"==typeof Intl.NumberFormat){var l=Intl.NumberFormat().format(1e3);5===l.length&&(o=l[1]);var u=Intl.NumberFormat().format(.5);2===u.length&&(s=u[1])}e.exports=function(e,t){if(!n(e))return"";if(isNaN(e))return e;(t=a(t,{})).useGrouping=a(t.useGrouping,!1),t.maximumFractionDigits=a(t.maximumFractionDigits,20),t.minimumFractionDigits=a(t.minimumFractionDigits,0);var r="";"percent"===t.style&&(e*=100,r="%");var i=e.toString(),l="";function u(e,t){var r=(i=(+e).toFixed(t)).indexOf(".");l="",-1!==r&&(l=s+i.substring(r+1),i=i.substring(0,r))}var c=i.indexOf(".");return-1!==c?(l=s+i.substring(c+1)).length>t.maximumFractionDigits+1?u(e,t.maximumFractionDigits):l.length<t.minimumFractionDigits+1?u(e,t.minimumFractionDigits):i=i.substring(0,c):t.minimumFractionDigits>0&&u(e,t.minimumFractionDigits),i.length<5||!t.useGrouping?i+l+r:i.replace(/\B(?=(\d{3})+(?!\d))/g,o)+l+r}},function(e,t,r){"use strict";var i=r(9),a=r(8),n=r(23),o=r(27),s=r(376),l=function(e,t){s.call(this,e),t=i(t,i.EMPTY_OBJECT),this.parent=t.parent,this.isActive=i(t.active,!1),this.isSelectable=!0,this.color=t.color,a(t.id)&&(this.id=t.id),n.track(this,["isActive","parent"]),n.getObservable(this,"isActive").subscribe(function(e){e&&a(this.parent)&&!a(this.color)&&a(this.parent.getColorCallback)&&(this.color=this.parent.getColorCallback(this.parent.getColumnIndex(this.id)))},this)};o(s,l),l.prototype.toggleActive=function(){a(this.parent)&&a(this.parent.toggleActiveItem)?this.parent.toggleActiveItem(this):this.isActive=!this.isActive},e.exports=l},,,,,,function(e,t,r){"use strict";var i=r(547),a=r(109),n=r(29),o=r(25),s=r(8),l=r(837).VectorTile,u=r(839),c=r(382),d=r(550),p=r(9),f=r(11),h=r(840),m=r(10),g=r(32),v=r(24),y=r(62),b=r(93),_=r(142),w=function(e){if(this._uriTemplate=new h(e.url),"string"!=typeof e.layerName)throw new f("MapboxVectorTileImageryProvider requires a layer name passed as options.layerName");if(this._layerName=e.layerName,this._subdomains=p(e.subdomains,[]),!(e.styleFunc instanceof Function))throw new f("MapboxVectorTileImageryProvider requires a styling function passed as options.styleFunc");this._styleFunc=e.styleFunc,this._tilingScheme=new a,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=p(e.minimumZoom,0),this._maximumLevel=p(e.maximumZoom,1/0),this._maximumNativeLevel=p(e.maximumNativeZoom,this._maximumLevel),this._rectangle=s(e.rectangle)?n.intersection(e.rectangle,this._tilingScheme.rectangle):this._tilingScheme.rectangle,this._uniqueIdProp=e.uniqueIdProp,this._featureInfoFunc=e.featureInfoFunc;var t=this._tilingScheme.positionToTileXY(n.southwest(this._rectangle),this._minimumLevel),r=this._tilingScheme.positionToTileXY(n.northeast(this._rectangle),this._minimumLevel),i=(Math.abs(r.x-t.x)+1)*(Math.abs(r.y-t.y)+1);if(i>4)throw new f("The imagery provider's rectangle and minimumLevel indicate that there are "+i+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");this._errorEvent=new o,this._ready=!0};function S(e,t,r,i){var a=i.level-t.level;if(0===a)return e;for(var n=[],o=r*(i.x-(t.x<<a)),s=r*(i.y-(t.y<<a)),l=0;l<e.length;l++){for(var u=[],d=0;d<e[l].length;d++)u.push(e[l][d].sub(new c(o,s)));n.push(u)}return n}function C(e,t){for(var r=e.x,i=e.y,a=!1,n=0,o=t.length-1;n<t.length;o=n++){var s=t[n].x,l=t[n].y,u=t[o].x,c=t[o].y;l>i!=c>i&&r<(u-s)*(i-l)/(c-l)+s&&(a=!a)}return a}function x(e,t){for(var r=0;r<e.length;r++)if(C(t,e[r])){for(var a=!1;r+1<e.length&&(n=e[r+1],i(n)!==_.COUNTER_CLOCKWISE);)r++,!a&&C(t,e[r])&&(a=!0);if(!a)return!0}var n;return!1}m(w.prototype,{url:{get:function(){return this._uriTemplate.expression}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return this._minimumLevel}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._rectangle}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},hasAlphaChannel:{get:function(){return!0}}}),w.prototype._getSubdomain=function(e,t,r){if(0!==this._subdomains.length){var i=(e+t+r)%this._subdomains.length;return this._subdomains[i]}},w.prototype._buildImageUrl=function(e,t,r){return this._uriTemplate.expand({z:r,x:e,y:t,s:this._getSubdomain(e,t,r)})},w.prototype.requestImage=function(e,t,r){var i=document.createElement("canvas");return i.width=this._tileWidth,i.height=this._tileHeight,this._requestImage(e,t,r,i)},w.prototype._requestImage=function(e,t,r,i){var a,n={x:e,y:t,level:r};if(r>this._maximumNativeLevel){var o=r-this._maximumNativeLevel;a={x:e>>o,y:t>>o,level:this._maximumNativeLevel}}else a=n;var s=this,c=this._buildImageUrl(a.x,a.y,a.level);return d(c).then(function(e){return s._drawTile(n,a,new l(new u(e)),i)})},w.prototype._drawTile=function(e,t,r,i){var a=r.layers[this._layerName];if(!s(a))return i;var n,o=i.getContext("2d");o.strokeStyle="black",o.lineWidth=1;for(var l=i.width/a.extent,u=0;u<a.length;u++){var c=a.feature(u);if(3===c.type){var d,p=this._styleFunc(c.properties[this._uniqueIdProp]);if(!p)continue;if(o.fillStyle=p.fillStyle,o.strokeStyle=p.strokeStyle,o.lineWidth=p.lineWidth,o.lineJoin=p.lineJoin,o.beginPath(),t.level!==e.level){var h=c.bbox(),m=new y(h[0],h[1],h[2]-h[0],h[3]-h[1]),g=e.level-t.level,v=a.extent>>g;if(v<16)throw new f("Maximum level too high for data set");var _=v*(e.x-(t.x<<g)),w=v*(e.y-(t.y<<g)),C=new y(_,w,v,v);if(y.intersect(m,C)===b.OUTSIDE)continue;l=i.width/v,d=S(c.loadGeometry(),t,v,e)}else d=c.loadGeometry();for(var x=0;x<d.length;x++){n=d[x][0],o.moveTo(n.x*l,n.y*l);for(var E=1;E<d[x].length;E++)n=d[x][E],o.lineTo(n.x*l,n.y*l)}o.stroke(),o.fill()}else console.log("Unexpected geometry type: "+c.type+" in region map on tile "+[e.level,e.x,e.y].join("/"))}return i},w.prototype.pickFeatures=function(e,t,r,i,a){var n,o,p={x:e,y:t,level:r};r>this._maximumNativeLevel?(o=r-this._maximumNativeLevel,n={x:e>>o,y:t>>o,level:this._maximumNativeLevel}):n={x:e,y:t,level:r};var f=this,h=this._buildImageUrl(n.x,n.y,n.level);return d(h).then(function(d){var h=new l(new u(d)).layers[f._layerName];if(!s(h))return[];var m=[0,(h.extent>>o)-1],y=f._tilingScheme.tileXYToNativeRectangle(e,t,r),b=[y.west,y.east],_=[y.north,y.south],w=v.fromCartesian3(f._tilingScheme.projection.project(new g(i,a)));w=function(e,t,r,i,a){var n=new v;v.subtract(e,new v(t[0],r[0]),n);var o=new v((i[1]-i[0])/(t[1]-t[0]),(a[1]-a[0])/(r[1]-r[0]));return v.add(v.multiplyComponents(n,o,new v),new v(i[0],a[0]),new v)}(w,b,_,m,m);for(var C=new c(w.x,w.y),E=[],I=0;I<h.length;I++){var k=h.feature(I);if(3===k.type&&x(S(k.loadGeometry(),n,h.extent>>o,p),C)){var L=f._featureInfoFunc(k);s(L)&&E.push(L)}}return E})},w.prototype.createHighlightImageryProvider=function(e){var t=this,r=new w({url:this._uriTemplate.expression,layerName:this._layerName,subdomains:this._subdomains,rectangle:this._rectangle,minimumZoom:this._minimumLevel,maximumNativeZoom:this._maximumNativeLevel,maximumZoom:this._maximumLevel,uniqueIdProp:this._uniqueIdProp,styleFunc:function(r){if(e===r){var i=t._styleFunc(r);if(s(i))return i.fillStyle="rgba(0,0,0,0)",i.lineJoin="round",i.lineWidth=Math.floor(1.5*p(i.lineWidth,1)+1),i}}});return r.pickFeatures=function(){},r},e.exports=w},,,,,,,,,,,,function(e,t,r){"use strict";function i(e,t,r){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var n=new(Function.bind.apply(e,i));return r&&a(n,r.prototype),n}).apply(null,arguments)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=r(547),s=r(8),l=r(1033),u=r(382),c=r(142);function d(e){if(s(e))for(var t=0;t<d.supportedFormats.length;++t){var r=d.supportedFormats[t].converter(e);if(s(r))return r}}function p(e){if(s(e))return 102100===e.wkid?{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::3857"}}:s(e.wkid)?{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+e.wkid}}:void 0}d.supportedFormats=[{name:"GeoJSON",converter:function(e){if("Feature"===e.type&&s(e.geometry)||"FeatureCollection"===e.type&&s(e.features))return e}},{name:"Esri",converter:function(e){return function e(t,r,a){if(s(t.features))return{type:"FeatureCollection",crs:p(t.spatialReference),features:t.features.map(function(t){return e(t,r)})};var d={type:"Feature",geometry:void 0,properties:t.attributes};s(a)&&(d.crs=p(a));if("esriGeometryPolygon"===r){var f=[],h=[];t.geometry.rings.forEach(function(e){o(e.map(function(e){return i(u,n(e))}))===c.CLOCKWISE?f.push(e):h.push(e),e.reverse()}),0===f.length&&h.length>0&&(h.forEach(function(e){e.reverse()}),f.push.apply(f,h),h.length=0),1===f.length?d.geometry={type:"Polygon",coordinates:[f[0]].concat(h)}:d.geometry={type:"MultiPolygon",coordinates:f.map(function(e){return[e].concat(n(function(e,t){return t.filter(function(t){return t.every(function(t){return l(t,e)})})}(e,h)))})}}else if("esriGeometryPoint"===r)d.geometry={type:"Point",coordinates:[t.geometry.x,t.geometry.y]};else{if("esriGeometryPolyline"!==r)return;d.geometry={type:"MultiLineString",coordinates:t.geometry.paths}}return d}(e,e.geometryType,e.geometry&&e.geometry.spatialReference)}}],e.exports=d},function(e,t,r){"use strict";var i=r(11),a=r(18);e.exports=function(e){if(void 0===e)throw new i("file is required");var t=new FileReader;t.readAsText(e);var r=a.defer();return t.onload=function(e){var t=e.target.result;r.resolve(t)},t.onerror=function(e){r.reject(e)},r.promise}},,,function(e,t,r){"use strict";var i=r(8),a=r(9),n=r(23),o=r(594),s=r(27),l=r(296),u=function(e,t){var r=this;e=a(e,"Display Variable"),t=a(t,a.EMPTY_OBJECT),l.call(this,e,t),this.allowMultiple=a(t.allowMultiple,!1),this.requireSomeActive=a(t.requireSomeActive,!1),this.getColorCallback=t.getColorCallback,this.items=a(t.items,[]),this.items.forEach(function(e){e.parent=r}),this.isOpen=a(t.isOpen,!0),this.isSelectable=a(t.isSelectable,!1),this.exclusiveChildIds=a(t.exclusiveChildIds,[]),this.toggleActiveCallback=void 0,n.track(this,["items","isOpen","allowMultiple","requireSomeActive"]),n.defineProperty(this,"activeItems",{get:function(){return this.items.filter(function(e){return e.isActive})}})};s(l,u),u.prototype.getNodes=function(e){return o(function e(t,r){if(r(t))return t;if(!t.items)return[];return t.items.map(function(t){return e(t,r)})}(this,e))},u.prototype.toggleActiveItem=function(e){var t=e.isActive;if(!(t&&this.requireSomeActive&&this.items.every(function(t){return t===e?t.isActive:!t.isActive}))){if(!t&&!this.allowMultiple||function(e,t){if(e.exclusiveChildIds.indexOf(t)>=0)return!0;return e.activeItems.map(function(e){return e.id}).filter(function(t){return e.exclusiveChildIds.indexOf(t)>=0}).length>0}(this,e.id))for(var r=0;r<this.items.length;r++){var a=this.items[r]===e;this.items[r].isActive!==a&&(this.items[r].isActive=a)}else e.isActive=!e.isActive;i(this.toggleActiveCallback&&"function"==typeof this.toggleActiveCallback)&&this.toggleActiveCallback(e)}},e.exports=u},,function(e,t,r){"use strict";e.exports=function(e){return"string"==typeof e||e instanceof String?e.replace(/_/g," "):e}},function(e,t,r){"use strict";var i=r(51),a=r(8),n=r(10),o=r(22),s=r(71),l=r(24),u=r(70),c=r(92),d=r(314),p=r(79),f=r(27),h=r(46),m=function(e){c.call(this,e),this._geoJsonItem=void 0,this.layerDef="1=1",this.useStyleInformationFromService=!1,this.clampToGround=!1};function g(e,t,r){function i(e){return new o.fromBytes(e[0],e[1],e[2],e[3])}if(a(e.point)&&a(t.imageData)){if(e.billboard={image:h(r,"data:".concat(t.contentType,";base64,").concat(t.imageData)),heightReference:r.clampToGround?s.RELATIVE_TO_GROUND:null,width:t.width,height:t.height,rotation:t.angle},a(t.xoffset)||a(t.yoffset)){var n=a(t.xoffset)?t.xoffset:0,u=a(t.yoffset)?t.yoffset:0;e.billboard.pixelOffset=new l(n,u)}e.point=void 0}a(e.polyline)&&(e.polyline.material=i(t.color),e.polyline.width=t.width),a(e.point)&&(e.point.color=i(t.color),e.point.pixelSize=t.size,a(t.outline)&&(e.point.outlineColor=i(t.outline.color),e.point.outlineWidth=t.outline.width)),a(e.polygon)&&(e.polygon.material=i(t.color),a(t.outline)&&(e.polygon.outlineColor=i(t.outline.color),e.polygon.outlineWidth=t.outline.width))}f(c,m),n(m.prototype,{type:{get:function(){return"esri-featureServer"}},typeName:{get:function(){return"ArcGIS Feature Server"}},updaters:{get:function(){return m.defaultUpdaters}},serializers:{get:function(){return m.defaultSerializers}},dataSource:{get:function(){return a(this._geoJsonItem)?this._geoJsonItem.dataSource:void 0}}}),m.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.layerDef]},m.prototype._load=function(){var e=this;return this._geoJsonItem=new p(this.terria),this._geoJsonItem.clampToGround=this.clampToGround,e._geoJsonItem.data=u(function(e){var t=function(e){var t=e.match(/^(.*)\/(\d+)$/);return a(t)&&t.length>2?{layerId:t[2],urlWithoutLayerId:t[1]}:{urlWithoutLayerId:e}}(function(e,t){return h(e,function(e){var t=new i(e);return t.search(""),t.toString()}(t))}(e,e.url));return new i(t.urlWithoutLayerId).segment("query").addQuery("f","json").addQuery("layerDefs","{"+(t.layerId||0)+':"'+e.layerDef+'"}').toString()}(e)).then(function(e){return d(e.layers[0])}),this.useStyleInformationFromService?function(e){var t=(r=e,h(r,new i(r.url).addQuery("f","json").toString()));var r;return u(t).then(function(e){return e})}(this).then(function(t){e._metadata=t;var r=e._metadata.drawingInfo.renderer;return e._geoJsonItem.load().then(function(){e.rectangle=e._geoJsonItem.rectangle;var t=e.dataSource.entities;if(t.suspendEvents(),"simple"===r.type)t.values.forEach(function(t){g(t,r.symbol,e)});else if("uniqueValue"===r.type){var i=function(e){for(var t={},r=0;r<e.uniqueValueInfos.length;r++){var i=e.uniqueValueInfos[r].value;t[i]=e.uniqueValueInfos[r]}return t}(r),a=r.field1;t.values.forEach(function(t){var n=t.properties[a].getValue();if(r.fieldDelimiter&&r.field2){var o=t.properties[r.field2].getValue();if(o){n+=r.fieldDelimiter+o;var s=t.properties[r.field3].getValue();s&&(n+=r.fieldDelimiter+s)}}var l=i[n];null===l&&(l=e._metadata.drawingInfo.renderer.defaultSymbol),g(t,l.symbol,e)})}t.resumeEvents()})}):e._geoJsonItem.load().then(function(){e.rectangle=e._geoJsonItem.rectangle})},m.prototype._enable=function(){a(this._geoJsonItem)&&this._geoJsonItem._enable()},m.prototype._disable=function(){a(this._geoJsonItem)&&this._geoJsonItem._disable()},m.prototype._show=function(){a(this._geoJsonItem)&&this._geoJsonItem._show()},m.prototype._hide=function(){a(this._geoJsonItem)&&this._geoJsonItem._hide()},m.prototype.showOnSeparateMap=function(e){if(a(this._geoJsonItem))return this._geoJsonItem.showOnSeparateMap(e)},e.exports=m},,,,,,,,,function(e,t,r){"use strict";var i=r(8),a=r(10),n=r(26),o=r(23),s=r(188),l=r(331),u=r(18),c=r(397),d=r(117),p=r(36),f=r(27),h=r(401),m=r(46),g=r(1138),v=function(e,t){c.call(this,e),this._dataSource=void 0,this.url=t,this.data=void 0,this.dataSourceUrl=void 0,o.track(this,["data","dataSourceUrl"])};f(c,v),a(v.prototype,{type:{get:function(){return"kml"}},typeName:{get:function(){return"KML or KMZ"}},metadata:{get:function(){var e=new d;return e.isLoading=!1,e.dataSourceErrorMessage="This data source does not have any details available.",e.serviceErrorMessage="This service does not have any details available.",e}},dataSource:{get:function(){return this._dataSource}}}),v.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.data]};var y=/\.kmz$/i;function b(e){var t=e._dataSource;if(e.clock=t.clock,i(e.terria.cesium)){for(var r=[],a=[],o=t.entities.values,u=0;u<o.length;++u){var c=o[u].polygon;if(i(c))c.perPositionHeight=!0,_(c.hierarchy.getValue(),r,a)}var d=e.terria.cesium.scene.globe.terrainProvider;l(d,11,r).then(function(){var e;for(e=0;e<r.length;++e){var t=r[e];i(t.height)&&n.WGS84.cartographicToCartesian(t,a[e])}for(e=0;e<o.length;++e){var l=o[e].polygon;if(i(l)){var u=l.hierarchy.getValue();l.hierarchy=new s(u.positions,u.holes)}}})}}function _(e,t,r){var i,a=e.positions;for(i=0;i<a.length;++i){var o=a[i];r.push(o),t.push(n.WGS84.cartesianToCartographic(o))}var s=e.holes;for(i=0;i<s.length;++i)_(s[i],t,r)}function w(e){var t=e.terria;throw new p({sender:e,title:"Error loading KML or KMZ",message:"An error occurred while loading a KML or KMZ file.  This may indicate that the file is invalid or that it is not supported by "+t.appName+'.  If you would like assistance or further information, please email us at <a href="mailto:'+t.supportEmail+'">'+t.supportEmail+"</a>."})}v.prototype._load=function(){var e=u.defer(),t=this;return Promise.all([r.e(6),r.e(2)]).then(function(){var a=r(742);h(e,function(){var e=!1;i(t._dataSource)&&(e=t.terria.dataSources.remove(t._dataSource,!0));var r=new a({proxy:{getURL:function(e){return t.terria.corsProxy.getURLProxyIfNecessary(e,"0d")}}});return t._dataSource=r,e&&t.terria.dataSources.add(t._dataSource),i(t.data)?u(t.data,function(e){if(e instanceof Document)return r.load(e,m(t,t.dataSourceUrl,"1d")).then(function(){b(t)}).otherwise(function(){w(t)});if("undefined"!=typeof Blob&&e instanceof Blob)return t.dataSourceUrl&&t.dataSourceUrl.match(y)?r.load(e,m(t,t.dataSourceUrl,"1d")).then(function(){b(t)}).otherwise(function(){w(t)}):g(e).then(function(e){return r.load(e,m(t,t.dataSourceUrl,"1d")).then(function(){b(t)})}).otherwise(function(){w(t)});if(e instanceof String||"string"==typeof e){var i,a=new DOMParser;try{i=a.parseFromString(e,"text/xml")}catch(e){}return(!i||!i.documentElement||i.getElementsByTagName("parsererror").length>0)&&w(t),r.load(i,m(t,t.dataSourceUrl,"1d")).then(function(){b(t)}).otherwise(function(){w(t)})}throw new p({sender:t,title:"Unexpected type of KML data",message:"KmlCatalogItem.data is expected to be an XML Document, Blob, or File, but it was none of these. This may indicate a bug in "+t.terria.appName+" or incorrect use of the "+t.terria.appName+" API. If you believe it is a bug in "+t.terria.appName+', please report it by emailing <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>."})}):r.load(m(t,t.url,"1d")).then(function(){b(t)}).otherwise(function(){w(t)})})}.bind(null,r)).catch(r.oe),e.promise},e.exports=v},,function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(51),n=r(41),o=r(8),s=r(10),l=r(17),u=r(23),c=r(158),d=r(36),p=r(104),f=r(27),h=r(46),m=r(172),g=r(151),v=function(e){p.call(this,e,"wms-getCapabilities"),this.url="",this.urlAuth="",this.dataCustodian=void 0,this.parameters=void 0,this.blacklist=void 0,this.titleField="title",this.itemProperties=void 0,this.flatten=!1,u.defineProperty(this,"url",{get:function(){return this._url},set:function(e){e.includes("apikey=")&&(this.urlAuth="apikey="+e.split("apikey=")[1].split("&")[0]),this._url=e}}),u.track(this,["url","dataCustodian","parameters","blacklist","titleField","itemProperties","flatten"])};function y(e,t){return"name"===e.titleField?t.Name:"abstract"===e.titleField?t.Abstract:t.Title}function b(e,t,r,a){var n=new m(e.terria);return n.name=y(e,r),n.layers=r.Name,n.url=e.url,n.urlAuth=e.urlAuth,n.updateFromCapabilities(t,!1,r,a),"object"===i(e.itemProperties)&&n.updateFromJson(e.itemProperties),n}function _(e,t){var r=new p(e.terria);return"name"===e.titleField?r.name=t.Name:"abstract"===e.titleField?r.name=t.Abstract:r.name=t.Title,r}f(p,v),s(v.prototype,{type:{get:function(){return"wms-getCapabilities"}},typeName:{get:function(){return"Web Map Service (WMS) Server"}},serializers:{get:function(){return v.defaultSerializers}}}),(v.defaultSerializers=n(p.defaultSerializers)).items=p.enabledShareableItemsSerializer,v.defaultSerializers.isLoading=function(e,t,r,i){},l(v.defaultSerializers),v.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.blacklist,this.titleField]},v.prototype._load=function(){var e=function(e,t){var r=new a(t);r.search("");var i=r.toString();return h(e,i,"1d")}(this,this.url)+"?service=WMS&request=GetCapabilities&version=1.3.0&tiled=true&"+this.urlAuth,t=this;return c(e).then(function(e){if(!e||!e.documentElement||"WMS_Capabilities"!==e.documentElement.localName&&"WMT_MS_Capabilities"!==e.documentElement.localName)throw new d({title:"Invalid WMS server",message:"An error occurred while invoking GetCapabilities on the WMS server.  The server's response does not appear to be a valid GetCapabilities document.  <p>If you entered the link manually, please verify that the link is correct.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href=\"mailto:"+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"});var r,i=g(e),a=i.Capability.Layer;if(a){if(a instanceof Array||(a=[a]),1===a.length&&a[0].Layer){var n=a[0];t.name===t.url&&(t.name=y(t,n)),r=n,a=n.Layer}var s={availableStyles:m.getAllAvailableStylesFromCapabilities(i),availableDimensions:m.getAllAvailableDimensionsFromCapabilities(i)};!function e(t,r,i,a,n,s){a instanceof Array||(a=[a]);for(var l=0;l<a.length;++l){var u=a[l];if(u._parent=n,t.blacklist&&t.blacklist[u.Title])console.log("Provider Feedback: Filtering out "+u.Title+" ("+u.Name+") because it is blacklisted.");else if(o(u.Layer)){var c=r;t.flatten||(c=_(t,u));var d;if(o(u.Name)&&u.Name.length>0){var p=b(t,i,u,s);t.flatten||(d=p.name,p.name="(All) "+p.name),c.add(p)}e(t,c,i,u.Layer,u,s),t.flatten||(1===c.items.length&&0===c.items[0].name.indexOf("(All)")?(c.items[0].name=d,r.add(c.items[0])):c.items.length>0&&r.add(c))}else r.add(b(t,i,u,s))}}(t,t,i,a,r,s)}}).otherwise(function(e){throw new d({sender:t,title:"Group is not available",message:'An error occurred while invoking GetCapabilities on the WMS server.  <p>If you entered the link manually, please verify that the link is correct.</p><p>This error may also indicate that the server does not support <a href="http://enable-cors.org/" target="_blank">CORS</a>.  If this is your server, verify that CORS is enabled and enable it if it is not.  If you do not control the server, please contact the administrator of the server and ask them to enable CORS.  Or, contact the '+t.terria.appName+' team by emailing <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a> and ask us to add this server to the list of non-CORS-supporting servers that may be proxied by "+t.terria.appName+' itself.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"})})},e.exports=v},function(e,t,r){"use strict";var i=r(51),a=r(58),n=r(41),o=r(8),s=r(10),l=r(17),u=r(23),c=r(70),d=r(158),p=r(79),f=r(92),h=r(27),m=r(1139),g=r(118),v=r(46),y=function(e){f.call(this,e),this._dataUrl=void 0,this._dataUrlType=void 0,this._metadataUrl=void 0,this._geoJsonItem=void 0,this.typeNames="",this.requestGeoJson=!0,this.requestGml=!0,this.parameters={},u.track(this,["_dataUrl","_dataUrlType","_metadataUrl","typeNames","requestGeoJson","requestGml"]),g(this,"dataUrl",{get:function(){var e=this._dataUrl;return o(e)||(e=this.url),"wfs"===this.dataUrlType&&(e=new i(w(e)).setQuery(a({service:"WFS",version:"1.1.0",request:"GetFeature",typeName:this.typeNames,srsName:"EPSG:4326",maxFeatures:"1000"},this.parameters)).toString()),e},set:function(e){this._dataUrl=e}}),g(this,"dataUrlType",{get:function(){return o(this._dataUrlType)?this._dataUrlType:"wfs"},set:function(e){this._dataUrlType=e}}),g(this,"metadataUrl",{get:function(){return o(this._metadataUrl)?this._metadataUrl:new i(w(this.url)).setQuery(a({service:"WFS",version:"1.1.0",request:"GetCapabilities"},this.parameters)).toString()},set:function(e){this._metadataUrl=e}})};function b(e){return d(function(e){var t=_(e,e.url);return new i(t).setQuery(a({service:"WFS",request:"GetFeature",typeName:e.typeNames,version:"1.1.0",srsName:"EPSG:4326"},e.parameters)).toString()}(e)).then(function(e){return m(e)})}function _(e,t){return v(e,w(t))}function w(e){var t=new i(e);return t.search(""),t.toString()}h(f,y),s(y.prototype,{type:{get:function(){return"wfs"}},typeName:{get:function(){return"Web Feature Service (WFS)"}},updaters:{get:function(){return y.defaultUpdaters}},serializers:{get:function(){return y.defaultSerializers}},dataSource:{get:function(){return o(this._geoJsonItem)?this._geoJsonItem.dataSource:void 0}}}),l(y.defaultUpdaters=n(f.defaultUpdaters)),(y.defaultSerializers=n(f.defaultSerializers)).dataUrl=function(e,t,r){t.dataUrl=e._dataUrl},y.defaultSerializers.dataUrlType=function(e,t,r){t.dataUrlType=e._dataUrlType},y.defaultSerializers.metadataUrl=function(e,t,r){t.metadataUrl=e._metadataUrl},l(y.defaultSerializers),y.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.typeNames,this.requestGeoJson,this.requestGml,this.parameters]},y.prototype._load=function(){var e;if(this._geoJsonItem=new p(this.terria),this.requestGeoJson)e=function(e){var t=c(function(e){var t=_(e,e.url);return new i(t).setQuery(a({service:"WFS",request:"GetFeature",typeName:e.typeNames,version:"1.1.0",outputFormat:"JSON",srsName:"EPSG:4326"},e.parameters)).toString()}(e)).then(function(e){return e});e.requestGml&&(t=t.otherwise(function(){return b(e)}));return t}(this);else{if(!this.requestGml)return;e=b(this)}this._geoJsonItem.data=e;var t=this;return t._geoJsonItem.load().then(function(){t.rectangle=t._geoJsonItem.rectangle})},y.prototype._enable=function(){o(this._geoJsonItem)&&this._geoJsonItem._enable()},y.prototype._disable=function(){o(this._geoJsonItem)&&this._geoJsonItem._disable()},y.prototype._show=function(){o(this._geoJsonItem)&&this._geoJsonItem._show()},y.prototype._hide=function(){o(this._geoJsonItem)&&this._geoJsonItem._hide()},y.prototype.showOnSeparateMap=function(e){if(o(this._geoJsonItem))return this._geoJsonItem.showOnSeparateMap(e)},e.exports=y},,function(e,t,r){"use strict";var i=o(r(13)),a=o(r(81)),n=o(r(254));function o(e){return e&&e.__esModule?e:{default:e}}var s=new a.default,l={register:function(e){s.set(e.name,e)},names:function(){return s.values.map(function(e){return e.name})},isRegistered:function(e){return this.names().indexOf(e)>=0},attributes:function(){return s.values.map(function(e){return e.attributes}).reduce(function(e,t){return e.concat(t)},[])},values:function(){return s.values},find:function e(t){if(!t)return[];var r=[];s.values.forEach(function(e){e.isCorresponding(t)&&(r=r.concat({type:e,reactComponent:t}))});i.default.isValidElement(t)&&i.default.Children.count(t.props.children)>0&&i.default.Children.forEach(t.props.children,function(t){r=r.concat(e(t))});return r},getUpdateCounter:function(e,t,r){function i(e){for(var t in r)if(r.hasOwnProperty(t))if(Array.isArray(r[t])){if(!(0,n.default)(e[t],r[t]))return!1}else if(e[t]!==r[t])return!1;return!0}if(!e)return;for(var a in e)if(e.hasOwnProperty(a)){var o=e[a],s=o.reactComponent;if(s.type===t&&i(s.props))return o.counter}}};e.exports=l},,function(e,t,r){"use strict";var i=n(r(8)),a=n(r(9));function n(e){return e&&e.__esModule?e:{default:e}}e.exports=function(e,t,r){var n={},o=(0,a.default)(r,{}),s=(0,a.default)(o.digits,5);return n.latitude=Math.abs(t).toFixed(s)+"°"+(t<0?"S":"N"),n.longitude=Math.abs(e).toFixed(s)+"°"+(e<0?"W":"E"),(0,i.default)(o.height)?n.elevation=Math.round(o.height)+((0,i.default)(o.errorBar)?"±"+Math.round(o.errorBar):"")+"m":n.elevation=void 0,n}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_ADDED_CATEGORY_NAME=t.default=void 0;var i,a=(i=r(8))&&i.__esModule?i:{default:i};var n="User-Added Data";t.USER_ADDED_CATEGORY_NAME=n;var o=function(e){for(;(0,a.default)(e.parent);){if(e.parent.name===n)return!0;e=e.parent}return!1};t.default=o},function(e,t,r){"use strict";var i=r(8);e.exports=function(e){for(var t=e.parent,r=[];i(t)&&i(t.parent);)r=[t].concat(r),t=t.parent;return r}},,function(e,t,r){"use strict";var i=r(11),a=r(23),n=function(){this.name="Unknown",this.isOpen=!0,this.searchResults=[],this.searchMessage=void 0,this.isSearching=!1,a.track(this,["name","isOpen","searchResults","searchMessage","isSearching"])};n.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},n.prototype.search=function(e){throw new i("search must be implemented in the derived class.")},e.exports=n},function(e,t,r){"use strict";var i=r(9),a=r(8),n=r(23),o=r(256),s=function(e){this.name=i(e.name,"Unknown"),this.tooltip=e.tooltip,this.isImportant=i(e.isImportant,!1),this.clickAction=e.clickAction,this.catalogItem=e.catalogItem,this.isOpen=!1,this.type="search_result",this.location=e.location,n.track(this,["name","tooltip","isImportant","clickAction","catalogItem","isOpen"])};s.prototype.toggleOpen=function(){a(this.catalogItem)&&(this.isOpen=!this.isOpen,this.isOpen&&o(this.catalogItem.terria,this.catalogItem.load()))},e.exports=s},function(e,t,r){"use strict";var i=r(183),a=r(1303),n=r(11),o=r(8),s=r(9),l=r(22),u=r(455),c=r(215),d=r(180),p=r(188),f=r(23),h=r(143),m=r(18),g=r(12),v=function(e){if(e=s(e,s.EMPTY_OBJECT),!o(e.terria))throw new n("Terria instance is required.");this.messageHeader=s(e.messageHeader,"Draw on Map"),this.allowPolygon=s(e.allowPolygon,!0),this.onPointClicked=e.onPointClicked,this.onPointMoved=e.onPointMoved,this.onCleanUp=e.onCleanUp,this.onMakeDialogMessage=e.onMakeDialogMessage,this.terria=e.terria,this.pointEntities=new c("Points"),this.otherEntities=new c("Lines and polygons"),this.polygon=void 0,this.inDrawMode=!1,this.closeLoop=!1;this.svgPoint='data:image/svg+xml,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" xml:space="preserve"><circle cx="10" cy="10" r="5" stroke="rgb(0,170,215)" stroke-width="4" fill="white" /> </svg>';var t=this;this.dragHelper=new a(e.terria,function(e){"function"==typeof t.onPointMoved&&t.onPointMoved(e),t._prepareToAddNewPoint()})};v.prototype.enterDrawMode=function(){if(this.dragHelper.setUp(),!this.inDrawMode&&!this.closeLoop){this.inDrawMode=!0,o(this.terria.cesium)?this.terria.cesium.viewer.canvas.setAttribute("style","cursor: crosshair"):o(this.terria.leaflet)&&document.getElementById("cesiumContainer").setAttribute("style","cursor: crosshair"),this.terria.pickedFeatures=void 0;var e=this;this.otherEntities.entities.add({name:"Line",polyline:{positions:new d(function(t,r){var i=e._getPointsForShape();return e.closeLoop&&i.push(i[0]),i},!1),material:new u({color:new l(0,0,0,.1),glowPower:.25}),width:20}}),this.terria.dataSources.add(this.pointEntities),this.terria.dataSources.add(this.otherEntities);var t=new i({message:this._getDialogMessage(),buttonText:this._getButtonText(),onCancel:function(){e.terria.mapInteractionModeStack.pop(),e._cleanUp()}});this.terria.mapInteractionModeStack.push(t),f.getObservable(t,"pickedFeatures").subscribe(function(t){m(t.allFeaturesAvailablePromise,function(){if(o(t.pickPosition)){var r=t.pickPosition;e._addPointToPointEntities("First Point",r),e._prepareToAddNewPoint()}})})}},v.prototype._getDialogMessage=function(){var e="<strong>"+this.messageHeader+"</strong></br>",t="";"function"==typeof this.onMakeDialogMessage&&(t=this.onMakeDialogMessage()),""!==t&&(e+=t+"</br>");var r="a";return this.pointEntities.entities.values.length>0&&(r="another"),"<div>"+(e+="<i>Click to add "+r+" point</i>")+"</div>"},v.prototype._getButtonText=function(){var e="Cancel";return this.pointEntities.entities.values.length>=2&&(e="Done"),e},v.prototype._cleanUp=function(){this.terria.dataSources.remove(this.pointEntities),this.pointEntities=new c("Points"),this.terria.dataSources.remove(this.otherEntities),this.otherEntities=new c("Lines and polygons"),this.inDrawMode=!1,this.closeLoop=!1,o(this.terria.cesium)?this.terria.cesium.viewer.canvas.setAttribute("style","cursor: auto"):o(this.terria.leaflet)&&document.getElementById("cesiumContainer").setAttribute("style","cursor: auto"),"function"==typeof this.onCleanUp&&this.onCleanUp()},v.prototype._mapInteractionModeUpdate=function(){this.terria.mapInteractionModeStack.pop();var e=this,t=new i({message:this._getDialogMessage(),buttonText:this._getButtonText(),onCancel:function(){e.terria.mapInteractionModeStack.pop(),e._cleanUp()}});return this.terria.mapInteractionModeStack.push(t),t},v.prototype._prepareToAddNewPoint=function(){var e=this._mapInteractionModeUpdate(),t=this;f.getObservable(e,"pickedFeatures").subscribe(function(e){m(e.allFeaturesAvailablePromise,function(){if(o(e.pickPosition)){var r=e.pickPosition;t.dragHelper.getDragCount()<10&&!t._clickedExistingPoint(e.features)?t._addPointToPointEntities("Another Point",r):t.dragHelper.resetDragCount(),t._prepareToAddNewPoint()}})})},v.prototype._getPointsForShape=function(){if(o(this.pointEntities.entities)){for(var e=[],t=0;t<this.pointEntities.entities.values.length;t++){var r=this.pointEntities.entities.values[t];if(o(r.position)){var i=r.position.getValue(this.terria.clock.currentTime);e.push(i)}}return e}},v.prototype._clickedExistingPoint=function(e){var t=this,r=!1;if(e.length<1)return r;var i=this;return e.forEach(function(e){for(var a=-1,n=0;n<t.pointEntities.entities.values.length;n++){if(t.pointEntities.entities.values[n].id===e.id){a=n;break}}return-1===a?void 0:0===a&&!t.closeLoop&&t.allowPolygon?(t.polygon=t.otherEntities.entities.add({name:"User polygon",polygon:{hierarchy:new d(function(e,t){return new p(i._getPointsForShape())},!1),material:new l(0,.666,.843,.25),outlineColor:new l(1,1,1,1),perPositionHeight:!0}}),t.closeLoop=!0,"function"==typeof i.onPointClicked&&i.onPointClicked(i.pointEntities),void(r=!0)):(t.pointEntities.entities.removeById(e.id),t.pointEntities.entities.values.length<2&&t.closeLoop&&(t.closeLoop=!1,t.otherEntities.entities.remove(t.polygon)),"function"==typeof i.onPointClicked&&i.onPointClicked(i.pointEntities),void(r=!0))}),r},v.prototype._addPointToPointEntities=function(e,t){var r=new h({name:e,position:t,billboard:{image:this.svgPoint,eyeOffset:new g(0,0,-50)}});this.pointEntities.entities.add(r),this.dragHelper.updateDraggableObjects(this.pointEntities),"function"==typeof this.onPointClicked&&this.onPointClicked(this.pointEntities)},e.exports=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(1312)),a=n(r(1313));function n(e){return e&&e.__esModule?e:{default:e}}var o=(0,n(r(674)).default)(i.default,a.default);t.default=o},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=b(r(35)),a=b(r(19)),n=b(r(15)),o=b(r(13)),s=b(r(8)),l=b(r(1434)),u=b(r(1435)),c=b(r(39)),d=b(r(132)),p=b(r(21)),f=b(r(345)),h=b(r(1438)),m=b(r(217)),g=r(471),v=b(r(1440)),y=b(r(1451));function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=(0,a.default)({displayName:"SharePanel",mixins:[p.default],propTypes:{terria:n.default.object,userPropWhiteList:n.default.array,advancedIsOpen:n.default.bool,shortenUrls:n.default.bool,catalogShare:n.default.bool,catalogShareWithoutText:n.default.bool,modalWidth:n.default.number,viewState:n.default.object.isRequired},getDefaultProps:function(){return{advancedIsOpen:!1,shortenUrls:!1}},getInitialState:function(){return{isOpen:!1,shortenUrls:this.props.shortenUrls&&this.props.terria.getLocalProperty("shortenShareUrls"),shareUrl:"",creatingPrintView:!1,creatingDownload:!1}},componentDidMount:function(){var e=this;if(this.props.terria.configParameters.interceptBrowserPrint){window.addEventListener("beforeprint",this.beforeBrowserPrint,!1),window.addEventListener("afterprint",this.afterBrowserPrint,!1);var t=function(t){t.matches?e.beforeBrowserPrint():e.afterBrowserPrint()};if(window.matchMedia){var r=window.matchMedia("print");r.addListener(t),this._unsubscribeFromPrintMediaChange=function(){r.removeListener(t)}}this._oldPrint=window.print,window.print=function(){e.print()}}},componentWillUnmount:function(){window.removeEventListener("beforeprint",this.beforeBrowserPrint,!1),window.removeEventListener("afterprint",this.afterBrowserPrint,!1),this._unsubscribeFromPrintMediaChange&&this._unsubscribeFromPrintMediaChange(),this._oldPrint&&(window.print=this._oldPrint)},beforeBrowserPrint:function(){this.afterBrowserPrint(),this._message=document.createElement("div"),this._message.innerText="For better printed results, please use "+this.props.terria.appName+"'s Print button instead of your web browser's print feature.",window.document.body.insertBefore(this._message,window.document.body.childNodes[0])},afterBrowserPrint:function(){this._message&&(window.document.body.removeChild(this._message),this._message=void 0),this.changeOpenState(!0)},advancedIsOpen:function(){return this.state.advancedIsOpen},toggleAdvancedOptions:function(e){this.setState(function(e){return{advancedIsOpen:!e.advancedIsOpen}})},updateForShortening:function(){var e=this;this.setState({shareUrl:""}),this.shouldShorten()?(this.setState({placeholder:"Shortening..."}),(0,g.buildShortShareLink)(this.props.terria,this.props.viewState).then(function(t){return e.setState({shareUrl:t})}).otherwise(function(){e.setUnshortenedUrl(),e.setState({errorMessage:"An error occurred while attempting to shorten the URL.  Please check your internet connection and try again."})})):this.setUnshortenedUrl()},setUnshortenedUrl:function(){this.setState({shareUrl:(0,g.buildShareLink)(this.props.terria,this.props.viewState)})},isUrlShortenable:function(){return(0,g.canShorten)(this.props.terria)},shouldShorten:function(){var e=this.props.terria.getLocalProperty("shortenShareUrls");return this.isUrlShortenable()&&(e||!(0,s.default)(e))},onShortenClicked:function(e){if(this.shouldShorten())this.props.terria.setLocalProperty("shortenShareUrls",!1);else{if(!this.isUrlShortenable())return;this.props.terria.setLocalProperty("shortenShareUrls",!0)}this.updateForShortening(),this.forceUpdate()},changeOpenState:function(e){this.setState({isOpen:e}),e&&(this.updateForShortening(),this.props.catalogShare&&(this.props.viewState.shareModalIsVisible=!0))},print:function(){this.createPrintView(!0,!0)},showPrintView:function(){this.createPrintView(!1,!1)},createPrintView:function(e,t){var r,i=this;this.setState({creatingPrintView:!0}),e&&(r=document.createElement("iframe"),document.body.appendChild(r)),v.default.create({terria:this.props.terria,viewState:this.props.viewState,printWindow:r?r.contentWindow:void 0,readyCallback:function(a){t&&(0,l.default)(a).otherwise(function(e){i.props.terria.error.raiseEvent(e)}).always(function(){r&&document.body.removeChild(r),e&&i.setState({creatingPrintView:!1})})},closeCallback:function(t){e&&i.setState({creatingPrintView:!1})}}),e||this.setState({creatingPrintView:!1})},getShareUrlInput:function(e){return o.default.createElement(h.default,{className:y.default.shareUrlfield,light:"light"===e,dark:"dark"===e,large:!0,type:"text",value:this.state.shareUrl,placeholder:this.state.placeholder,readOnly:!0,onClick:function(e){return e.target.select()},id:"share-url"})},onAddWebDataClicked:function(){this.setState({isOpen:!1}),this.props.viewState.openUserData()},renderWarning:function(){var e=(0,g.addUserAddedCatalog)(this.props.terria,[]);return e.length>0?o.default.createElement("div",{className:y.default.warning},o.default.createElement("p",{className:y.default.paragraph},o.default.createElement("strong",null,"Note:")),o.default.createElement("p",{className:y.default.paragraph},"The following data sources will NOT be shared because they include data from this local system. To share these data sources, publish their data on a web server and"," ",o.default.createElement("a",{className:y.default.warningLink,onClick:this.onAddWebDataClicked},"add them using a url"),"."),o.default.createElement("ul",{className:y.default.paragraph},e.map(function(e,t){return o.default.createElement("li",{key:t},o.default.createElement("strong",null,e.name))}))):null},renderContent:function(){return this.props.catalogShare?this.renderContentForCatalogShare():this.renderContentWithPrintAndEmbed()},renderContentForCatalogShare:function(){return""===this.state.shareUrl?o.default.createElement(d.default,{message:"Generating share URL..."}):o.default.createElement("div",{className:y.default.clipboardForCatalogShare},o.default.createElement(u.default,{theme:"light",text:this.state.shareUrl,source:this.getShareUrlInput("light"),id:"share-url"}),this.renderWarning())},renderContentWithPrintAndEmbed:function(){var e=this.state.shareUrl.length?'<iframe style="width: 720px; height: 600px; border: none;" src="'.concat(this.state.shareUrl,'" allowFullScreen mozAllowFullScreen webkitAllowFullScreen></iframe>'):"";return o.default.createElement("div",null,o.default.createElement("div",{className:m.default.section},o.default.createElement(u.default,{source:this.getShareUrlInput("dark"),id:"share-url"}),this.renderWarning()),o.default.createElement("div",{className:m.default.section},o.default.createElement("div",null,"Print Map"),o.default.createElement("div",{className:y.default.explanation},"Open a printable version of this map."),o.default.createElement("div",null,o.default.createElement("button",{className:y.default.printButton,onClick:this.print,disabled:this.state.creatingPrintView},"Print"),o.default.createElement("button",{className:y.default.printButton,onClick:this.showPrintView,disabled:this.state.creatingPrintView},"Show Print View"),o.default.createElement("div",{className:y.default.printViewLoader},this.state.creatingPrintView&&o.default.createElement(d.default,{message:"Creating print view..."})))),o.default.createElement("div",{className:(0,i.default)(m.default.section,y.default.shortenUrl)},o.default.createElement("div",{className:y.default.btnWrapper},o.default.createElement("button",{type:"button",onClick:this.toggleAdvancedOptions,className:y.default.btnAdvanced},o.default.createElement("span",null,"Advanced options"),this.advancedIsOpen()?o.default.createElement(c.default,{glyph:c.default.GLYPHS.opened}):o.default.createElement(c.default,{glyph:c.default.GLYPHS.closed}))),this.advancedIsOpen()?[o.default.createElement("div",{className:m.default.section,key:"0"},o.default.createElement("p",{className:y.default.paragraph},"To embed, copy this code to embed this map into an HTML page:"),o.default.createElement(h.default,{large:!0,dark:!0,className:y.default.field,type:"text",readOnly:!0,placeholder:this.state.placeholder,value:e,onClick:function(e){return e.target.select()}})),this.isUrlShortenable()?o.default.createElement("div",{className:(0,i.default)(m.default.section,y.default.shortenUrl),key:"1"},o.default.createElement("button",{onClick:this.onShortenClicked},this.shouldShorten()?o.default.createElement(c.default,{glyph:c.default.GLYPHS.checkboxOn}):o.default.createElement(c.default,{glyph:c.default.GLYPHS.checkboxOff}),"Shorten the share URL using a web service")):null]:null))},renderDownloadFormatButton:function(e){return o.default.createElement("button",{key:e.name,className:y.default.formatButton,onClick:this.download,disabled:this.state.creatingDownload},e.name)},render:function(){var e,t=this,r=this.props,a=r.catalogShare,n=r.catalogShareWithoutText,s=r.modalWidth,l={btn:(0,i.default)((e={},_(e,y.default.btnCatalogShare,a),_(e,y.default.btnWithoutText,n),e)),outer:(0,i.default)(y.default.sharePanel,_({},y.default.catalogShare,a)),inner:(0,i.default)(y.default.dropdownInner,_({},y.default.catalogShareInner,a)),icon:"share"},u=a?"Share":"Share / Print",c=a?"Share your catalogue with others":"Share your map with others";return o.default.createElement("div",null,o.default.createElement(f.default,{theme:l,btnText:n?null:u,viewState:this.props.viewState,btnTitle:c,isOpen:this.state.isOpen,onOpenChanged:this.changeOpenState,showDropdownAsModal:a,modalWidth:s,smallScreen:this.props.viewState.useSmallScreenInterface,onDismissed:function(){a&&(t.props.viewState.shareModalIsVisible=!1)}},this.state.isOpen?this.renderContent():null))}});t.default=w},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtraSmall=c,t.Small=d,t.Medium=p,t.Large=f,t.ExtraLarge=h;var i=o(r(13)),a=o(r(1500)),n=o(r(15));function o(e){return e&&e.__esModule?e:{default:e}}var s=768,l=992,u=1300;function c(e){return i.default.createElement(a.default,{maxWidth:s},e.children)}function d(e){return i.default.createElement(a.default,{maxWidth:s-1},e.children)}function p(e){return i.default.createElement(a.default,{minWidth:s},e.children)}function f(e){return i.default.createElement(a.default,{minWidth:l},e.children)}function h(e){return i.default.createElement(a.default,{minWidth:u},e.children)}c.propTypes={children:n.default.element},d.propTypes={children:n.default.element},p.propTypes={children:n.default.element},f.propTypes={children:n.default.element},h.propTypes={children:n.default.element}},,function(e,t,r){"use strict";e.exports=function(){try{window.dispatchEvent(new Event("resize"))}catch(t){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}}},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i,a=r(135),n=(i=r(9))&&i.__esModule?i:{default:i},o=r(521);var s=function(e,t){t=(0,n.default)(t,n.default.EMPTY_OBJECT),this.points=(0,n.default)(e,[]),this.point=void 0,this.id=t.id,this.categoryName=t.categoryName,this.name=t.name,this.units=t.units,this.color=t.color,this.yAxisMin=t.yAxisMin,this.yAxisMax=t.yAxisMax,this.type=t.type,this.onClick=t.onClick,this.showAll=(0,n.default)(t.showAll,!0),this.yAxisWidth=40,this.selectedIndex=(0,n.default)(t.selectedIndex,null),this.renderer=void 0};s.prototype.getDomain=function(){var e=this.points;if(0!==e.length)return{x:[(0,a.min)(e,function(e){return e.x}),(0,a.max)(e,function(e){return e.x})],y:[(0,a.min)(e,function(e){return e.y}),(0,a.max)(e,function(e){return e.y})]}},s.prototype.initializeRenderer=function(){(0,o.initializeChartData)(this)},e.exports=s},function(e,t,r){"use strict";var i=r(180),a=r(25),n=r(58),o=r(9),s=r(8),l=r(10),u=r(20),c=r(11),d=r(259),p=r(23),f=r(107),h=r(370),m=r(109),g=r(18),v=r(29),y=r(260),b=r(801),_=r(155),w=r(805),S=r(533),C=r(591),x=r(46),E=r(592),I=r(157),k=r(269),L=r(36),P=r(128),T=r(172),M=r(302),A=r(530),j=A.setOpacity,D=A.fixNextLayerOrder,N=function(e,t,r){if(this._tableStructure=s(t)?t:new I,s(r)&&!(r instanceof k))throw new c("Please pass a TableStyle object.");this._tableStyle=r,this._changed=new a,this._legendHelper=void 0,this._legendUrl=void 0,this._extent=void 0,this._loadingData=!1,this._catalogItem=e,this._regionMappingDefinitionsUrl=s(e)?e.terria.configParameters.regionMappingDefinitionsUrl:void 0,this._regionDetails=void 0,this._imageryLayer=void 0,this._nextImageryLayer=void 0,this._nextImageryLayerInterval=void 0,this._hadImageryAtLayerIndex=void 0,this._hasDisplayedFeedback=!1,this._constantRegionRowObjects=void 0,this._constantRegionRowDescriptions=void 0,p.track(this,["_tableStructure","_legendUrl","_regionDetails"]),p.getObservable(this._tableStructure,"activeItems").subscribe(O.bind(null,this),this),p.getObservable(this._catalogItem,"currentTime").subscribe(function(){this.hasActiveTimeColumn&&function(e){if(e._imageryLayerInterval&&f.contains(e._imageryLayerInterval,e.clock.currentTime))return;B(e)}(this)},this)};function O(e){s(e._regionDetails)?(!function(e){var t=e._tableStructure.activeItems[0],r=s(e._regionDetails)?e._regionDetails[0].regionProvider:void 0;e._legendHelper=new C(t,e._tableStyle,r,e._catalogItem.name),e._legendUrl=e._legendHelper.legendUrl()}(e),e._loadingData||((s(e._imageryLayer)||s(e._hadImageryAtLayerIndex))&&B(e),e._changed.raiseEvent(e))):(e._legendHelper=void 0,e._legendUrl=void 0)}function F(e,t,r,i){var a=e._regionDetails[0],n=e._tableStructure,o=n.getColumnWithNameIdOrIndex(a.columnName);if(s(o)){var l=o.values,u=n.activeTimeColumn,c=s(a.disambigColumnName)?n.getColumnWithNameIdOrIndex(a.disambigColumnName):void 0;return a.regionProvider.mapRegionsToIndicesInto(l,c&&c.values,r,i,s(u)?u.timeIntervals:void 0,t)}}function R(e,t,r){var a=e._tableStructure,o=a.toStringAndNumberRowObjects();if(0!==o.length){var l=a.getColumnAliases(),u=a.toRowDescriptions(e._tableStyle.featureInfoFields),c=e._regionDetails[0],p=c.regionProvider.uniqueIdProp,f=[c.columnName];s(c.disambigColumnName)&&f.push(c.disambigColumnName);var h=a.getIdMapping(f);switch(e.hasActiveTimeColumn||(e._constantRegionRowObjects=t.map(function(e){return o[e]}),e._constantRegionRowDescriptions=t.map(function(e){return u[e]})),c.regionProvider.serverType){case"MVT":return function(t){var r=new d;r.name=t.properties[c.regionProvider.nameProp];var a=t.properties[p];if(e.hasActiveTimeColumn||e.isPolled){r.description=new i(m(a),!1);var o=g(a);r.properties=new i(function(e){return n(t.properties,o(e))},!1)}else{r.description=e._constantRegionRowDescriptions[a];var u=e._constantRegionRowObjects[a];if(!s(u))return;u.string._terria_columnAliases=l,u.string._terria_numericalProperties=u.number,r.properties=n(t.properties,u.string)}return r.data={id:a},r};case"WMS":w.addPickFeaturesHook(r,function(t){if(s(t)&&0!==t.length){for(var r=0;r<t.length;++r){var a=t[r],n=a.data.properties[p];if(e.hasActiveTimeColumn||e.isPolled)a.description=new i(m(n),!1),a.properties=new i(g(n),!1);else{a.description=e._constantRegionRowDescriptions[n];var o=e._constantRegionRowObjects[n];s(o)?(o.string._terria_columnAliases=l,o.string._terria_numericalProperties=o.number,a.properties=o.string):a.properties={}}}return t.filter(function(e){return e.properties||e.description})}})}}function m(t){return function(r,i){if(!e.hasActiveTimeColumn)return e._constantRegionRowDescriptions[t]||"No data";var a=F(e,r).map(function(e){return u[e]});if(s(a[t]))return a[t];var n=F(e)[t];return s(n)?"No data for the selected date.":"No data for the selected region."}}function g(t){return function(r,i){if(!e.hasActiveTimeColumn){var n=e._constantRegionRowObjects[t];if(!s(n))return{};var u=n.string;return u._terria_columnAliases=l,u._terria_numericalProperties=n.number,u}var c=F(e,r).map(function(e){return o[e]})[t],d=c&&c.string||{};d._terria_columnAliases=l,d._terria_numericalProperties=c&&c.number||{};var p=F(e),m=a.getIdStringForRowNumber(p[t],f),g=h[m];return s(g)&&(d._terria_getChartDetails=function(){return a.getChartDetailsForRowNumbers(g)}),d}}}function U(e,t,r){if(s(e._tableStructure.activeTimeColumn)){var i=e._catalogItem,a=i.currentTime,n=b(e._tableStructure.activeTimeColumn,a,i.terria.clock.multiplier>=0),o=n.nextInterval,l=n.currentInterval;if(l===e._imageryLayerInterval&&o===e._nextImageryLayerInterval)return;l!==e._imageryLayerInterval&&(e._nextImageryLayerInterval&&f.contains(e._nextImageryLayerInterval,a)?(j(i,e._nextImageryLayer,i.opacity),D(i,e._imageryLayer,e._nextImageryLayer),_.disableLayer(i,e._imageryLayer),e._imageryLayer=e._nextImageryLayer,e._imageryLayerInterval=e._nextImageryLayerInterval,e._nextImageryLayer=void 0,e._nextImageryLayerInterval=null):(_.disableLayer(i,e._imageryLayer),e._imageryLayer=V(e,t,r),e._imageryLayerInterval=l)),o!==e._nextImageryLayerInterval&&(_.disableLayer(i,e._nextImageryLayer),o?(e._nextImageryLayer=V(e,t,void 0,void 0,o.start,0),_.showLayer(i,e._nextImageryLayer)):e._nextImageryLayer=void 0,e._nextImageryLayerInterval=o)}else e._imageryLayer=V(e,t,r)}function V(e,t,r,i,a,n){var l=e._catalogItem,u=o(n,l.opacity);i=o(i,l.terria.currentViewer),a=o(a,l.currentTime);var c=e._regionDetails[0],d=e._legendHelper;if(s(d)){var p,f,g=e._tableStructure;if(s(r)||(r=F(e,a,p=[],f=[]),!e._hasDisplayedFeedback&&l.showWarnings&&(e._hasDisplayedFeedback=!0,function(e,t,r){var i="",a=e._regionDetails[0],n=e._tableStructure.getColumnWithNameIdOrIndex(a.columnName).values,o=e._tableStructure.activeTimeColumn;if(t.length>0){var l=t.map(function(e){return n[e]});i+='These region names were <span class="warning-text">not recognised</span>: <br><br/><samp>'+l.join("</samp>, <samp>")+"</samp><br/><br/>"}if(r.length>0&&!s(o)){var u=r.map(function(e){return n[e]});i+='These regions had <span class="warning-text">more than one value</span>: <br/><br/><samp>'+y(u).join("</samp>, <samp>")+"</samp><br/><br/>"}if(i){i+='Consult the <a href="https://github.com/TerriaJS/nationalmap/wiki/csv-geo-au">CSV-geo-au specification</a> to see how to format the file.';var c=new L({title:"Issues loading "+e._catalogItem.name.slice(0,20),message:"<div>"+i+"</div>"});if(t.length===n.length)throw c;e._catalogItem.terria.error.raiseEvent(c)}}(e,p,f))),s(r)){var b=function(e,t){var r=e;if(t.activeItems.length>0){var i=t.activeItems[0];r=e.map(function(e){return i.values[e]})}return r}(r,g);if(s(b)){var C,E,I=c.regionProvider.getColorLookupFunc(b,d.getColorArrayFromValue.bind(d));switch(l.treat404AsError=!1,c.regionProvider.serverType){case"MVT":var k=i.terria;if("undefined"==typeof ArrayBuffer)throw new L({sender:l,title:k.configParameters.oldBrowserRegionMappingTitle||"Outdated Web Browser",message:k.configParameters.oldBrowserRegionMappingMessage||'You are using a very old web browser that cannot display "region mapped" datasets such as this one.  Please upgrade to the latest version of Google Chrome, Mozilla Firefox, Microsoft Edge, Microsoft Internet Explorer 11, or Apple Safari as soon as possible.  Please contact us at <a href="mailto:'+k.supportEmail+'">'+k.supportEmail+"</a> if you have any concerns."});C=new M({url:c.regionProvider.server,layerName:c.regionProvider.layerName,styleFunc:function(e){var t=l.terria,r=I(e);return r?{fillStyle:"rgba("+Array.prototype.join.call(r,",")+")",strokeStyle:t.baseMapContrastColor,lineWidth:1}:void 0},subdomains:c.regionProvider.serverSubdomains,rectangle:v.fromDegrees.apply(null,c.regionProvider.bbox),minimumZoom:c.regionProvider.serverMinZoom,maximumNativeZoom:c.regionProvider.serverMaxNativeZoom,maximumZoom:c.regionProvider.serverMaxZoom,uniqueIdProp:c.regionProvider.uniqueIdProp,featureInfoFunc:R(e,r,C)}),E=_.enableLayer(l,C,u,t,i,void 0);break;case"WMS":R(e,r,C=new h({url:x(l,c.regionProvider.server),layers:c.regionProvider.layerName,parameters:T.defaultParameters,getFeatureInfoParameters:T.defaultParameters,tilingScheme:new m})),w.addRecolorFunc(C,I),E=_.enableLayer(l,C,u,t,i,void 0),i instanceof S&&I&&(E.options.crossOrigin=!0,E.on("tileload",function(e){if(!e.tile._recolored){
/*
                @preserve Leaflet Tile Filters, a JavaScript plugin for applying image filters to tile images
                (c) 2014, Scott Fairgrieve, HumanGeo
                */
var t;e.tile.canvasContext||((t=document.createElement("canvas")).width=t.height=256,e.tile.canvasContext=t.getContext("2d"));var r=e.tile.canvasContext;if(r){r.drawImage(e.tile,0,0);var i=r.getImageData(0,0,256,256);i=w.recolorImage(i,I),r.putImageData(i,0,0),e.tile.onload=null,e.tile.src=r.canvas.toDataURL(),e.tile._recolored=!0}}}));break;default:throw new L({title:"Invalid serverType "+c.regionProvider.serverType+" in regionMapping.json",message:'<div>Expected serverType to be "WMS" or "vector" but got "'+c.regionProvider.serverType+'"</div>'})}return E}}}}function B(e,t){s(e._regionDetails)&&(e.hideImageryLayer(),U(e,e._hadImageryAtLayerIndex,t),e._catalogItem.isShown&&_.showLayer(e._catalogItem,e._imageryLayer),e._catalogItem.terria.currentViewer.updateItemForSplitter(e._catalogItem))}l(N.prototype,{clock:{get:function(){if(s(this._tableStructure))return this._tableStructure.clock}},changedEvent:{get:function(){return this._changed}},isLoading:{get:function(){return this._loadingData},set:function(e){this._loadingData=e,e||O(this)}},tableStructure:{get:function(){return this._tableStructure}},tableStyle:{get:function(){return this._tableStyle}},extent:{get:function(){return this._extent}},legendUrl:{get:function(){return this._legendUrl}},regionDetails:{get:function(){return this._regionDetails}},imageryLayer:{get:function(){return this._imageryLayer}},hasActiveTimeColumn:{get:function(){var e=this._tableStructure.activeTimeColumn;return s(e)&&s(e._clock)}},isPolled:{get:function(){return s(this._catalogItem.polling&&this._catalogItem.polling.seconds)}}}),N.prototype.setRegionColumnType=function(e){s(e)||(e=0);var t=this._regionDetails[e];console.log("Found region match based on "+t.columnName+(s(t.disambigColumnName)?" and "+t.disambigColumnName:"")),this._tableStructure.getColumnWithNameIdOrIndex(t.columnName).type=P.REGION,s(t.disambigColumnName)&&(this._tableStructure.getColumnWithNameIdOrIndex(t.disambigColumnName).type=P.REGION)},N.prototype.hideImageryLayer=function(){s(this._imageryLayer)&&(this._hadImageryAtLayerIndex=this._imageryLayer._layerIndex,s(this._hadImageryAtLayerIndex)||(this._hadImageryAtLayerIndex=!0),_.hideLayer(this._catalogItem,this._imageryLayer),_.disableLayer(this._catalogItem,this._imageryLayer),this._imageryLayer=void 0)},N.prototype.showOnSeparateMap=function(e){if(s(this._regionDetails)){var t=V(this,0,void 0,e,e.terria.clock.currentTime);_.showLayer(this._catalogItem,t,e);var r=this;return function(){_.hideLayer(r._catalogItem,t,e),_.disableLayer(r._catalogItem,t,e)}}},N.prototype.enable=function(e){s(this._regionDetails)&&U(this,e)},N.prototype.disable=function(){s(this._regionDetails)&&(_.disableLayer(this._catalogItem,this._imageryLayer),this._imageryLayer=void 0)},N.prototype.show=function(){s(this._regionDetails)&&_.showLayer(this._catalogItem,this._imageryLayer)},N.prototype.hide=function(){s(this._regionDetails)&&_.hideLayer(this._catalogItem,this._imageryLayer)},N.prototype.updateOpacity=function(e){s(this._imageryLayer)&&(s(this._imageryLayer.alpha)&&(this._imageryLayer.alpha=e),s(this._imageryLayer.setOpacity)&&this._imageryLayer.setOpacity(e))},N.prototype.loadRegionDetails=function(){var e=this;return e._regionMappingDefinitionsUrl?E.fromUrl(e._regionMappingDefinitionsUrl,this._catalogItem.terria.corsProxy).then(function(t){var r,i;s(e._tableStyle)&&(r=e._tableStyle.regionVariable,i=e._tableStyle.regionType);var a=t.getRegionDetails(e._tableStructure.getColumnNames(),r,i);return a.length>0?function(e,t){var r=t.map(function(e){return e.regionProvider.loadRegionIDs()});return g.all(r).then(function(){return e._regionDetails=t.map(function(e){return{regionProvider:e.regionProvider,columnName:e.variableName,disambigColumnName:e.disambigVariableName}}),e._regionDetails}).otherwise(function(e){console.log("error loading region ids",e)})}(e,a):g()}):g()},N.prototype.destroy=function(){return u(this)},e.exports=N},,,,,function(e,t,r){"use strict";var i=r(41),a=r(9),n=r(8),o=r(10),s=r(17),l=r(23),u=r(40),c=r(18),d=r(27),p=r(118),f=r(92),h=r(138),m=function(e,t){f.call(this,e),this.items=n(t)?t.slice():[],l.track(this,["items"]),p(this,"legendUrls",{get:function(){if(!n(this._legendUrls)||0===this._legendUrls.length){this._legendUrls=[];for(var e=0;e<this.items.length;++e)this.items[e].legendUrls&&(this._legendUrls=this._legendUrls.concat(this.items[e].legendUrls))}return this._legendUrls}}),l.getObservable(this,"items").subscribe(function(){for(var e=0;e<this.items.length;++e)this.items[e].showInNowViewingWhenEnabled=!1},this)};d(f,m),o(m.prototype,{type:{get:function(){return"composite"}},typeName:{get:function(){return"Composite"}},updaters:{get:function(){return m.defaultUpdaters}},serializers:{get:function(){return m.defaultSerializers}},propertiesForSharing:{get:function(){return m.defaultPropertiesForSharing}},supportsReordering:{get:function(){for(var e=!0,t=0;t<this.items.length;++t){var r=this.items[t];e=e&&r.supportsReordering}return e}}}),(m.defaultUpdaters=i(f.defaultUpdaters)).items=function(e,t,r,i){return c(e.load(),function(){var r=[];i=a(i,a.EMPTY_OBJECT);for(var o=t.items,s=0;s<o.length;++s){var l=o[s];if(!n(l.type))throw new u("Each item must have a type.");if("composite"===l.type)throw new u("Composites cannot include composite items.");var d=h(l.type,e.terria);e.add(d),r.push(d.updateFromJson(l,i))}return c.all(r)})},m.defaultUpdaters.isLoading=function(e,t,r){},s(m.defaultUpdaters),(m.defaultSerializers=i(f.defaultSerializers)).items=function(e,t,r,i){for(var a=t.items=[],o=0;o<e.items.length;++o){var s=e.items[o].serializeToJson(i);n(s)&&a.push(s)}},m.defaultSerializers.isLoading=function(e,t,r,i){},s(m.defaultSerializers),(m.defaultPropertiesForSharing=i(f.defaultPropertiesForSharing)).push("items"),s(m.defaultPropertiesForSharing),m.prototype._load=function(){return c.all(this.items.map(function(e){return e.load()}))},m.prototype._getValuesThatInfluenceLoad=function(){for(var e=[],t=0;t<this.items.length;++t)e.push.apply(e,this.items[t]._getValuesThatInfluenceLoad());return e},m.prototype._enable=function(){var e;try{for(e=0;e<this.items.length;++e)this.items[e]._enable()}catch(r){for(var t=0;t<e;++t)this.items[t]._disable();throw this.isEnabled=!1,r}},m.prototype._disable=function(){for(var e=0;e<this.items.length;++e)this.items[e]._disable()},m.prototype._show=function(){var e;try{for(e=0;e<this.items.length;++e)this.items[e]._show()}catch(r){for(var t=0;t<e;++t)this.items[t]._hide();throw this.isShown=!1,r}},m.prototype._hide=function(){for(var e=0;e<this.items.length;++e)this.items[e]._hide()},m.prototype.add=function(e){this.items.push(e)},e.exports=m},,function(e,t,r){"use strict";var i=r(10),a=r(23),n=function(e){this.id=e,this.name=e,this.isSelectable=void 0,this.items=void 0,this.isOpen=void 0,this.isActive=void 0,this.isVisible=!0,this.color=void 0,a.track(this,["name","isSelectable","isVisible","color"])};i(n.prototype,{hasChildren:{get:function(){return this.items&&this.items.some(function(e){return e.isVisible})}}}),n.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},n.prototype.toggleActive=function(){this.isActive=!this.isActive},e.exports=n},,,,,function(e,t,r){"use strict";var i=r(9),a=r(111),n=r(18);e.exports=function(e,t){t=i(t,i.EMPTY_OBJECT);var r=i(t.pollInterval,1),o=i(t.timeout,5e3),s=n.defer(),l=a()+o;return function t(){e()?s.resolve():a()>l?s.reject():setTimeout(t,r)}(),s.promise}},,,,,,,,,,,,,,,function(e,t,r){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=r(22),n=r(8),o=r(11),s=r(26),l=r(314),u=r(41),c=r(302),d=r(546),p=r(79),f=r(232),h=r(316),m=r(589);r(1040);var g=function(e){this.terria=e,this.canShowSplitter=!1,this._tilesLoadingCountMax=0,this._removeHighlightCallback=void 0,this._highlightPromise=void 0};g._featureHighlightName="___$FeatureHighlight&__",g.prototype._createFeatureFromImageryLayerFeature=function(e){var t=new f({id:e.name});return t.name=e.name,t.description=e.description,t.properties=e.properties,t.data=e.data,t.imageryLayer=e.imageryLayer,t.position=s.WGS84.cartographicToCartesian(e.position),t.coords=e.coords,t},g.prototype.updateTilesLoadingCount=function(e){e>this._tilesLoadingCountMax?this._tilesLoadingCountMax=e:0===e&&(this._tilesLoadingCountMax=0),this.terria.tileLoadProgressEvent.raiseEvent(e,this._tilesLoadingCountMax)},g.prototype.isDestroyed=function(){return!1},g.prototype.pickFromLocation=function(e,t,r){throw new o("pickFromLocation must be implemented in the derived class.")},g.prototype.destroy=function(){throw new o("destroy must be implemented in the derived class.")},g.prototype.getCurrentExtent=function(){throw new o("getCurrentExtent must be implemented in the derived class.")},g.prototype.getContainer=function(){throw new o("getContainer must be implemented in the derived class.")},g.prototype.zoomTo=function(e,t){throw new o("zoomTo must be implemented in the derived class.")},g.prototype.captureScreenshot=function(){throw new o("captureScreenshot must be implemented in the derived class.")},g.prototype.notifyRepaintRequired=function(){throw new o("notifyRepaintRequired must be implemented in the derived class.")},g.prototype.computePositionOnScreen=function(e,t){throw new o("computePositionOnScreen must be implemented in the derived class.")},g.prototype.addAttribution=function(e){throw new o("addAttribution must be implemented in the derived class.")},g.prototype.removeAttribution=function(e){throw new o("removeAttribution must be implemented in the derived class.")},g.prototype.getAllAttribution=function(){return[]},g.prototype.updateLayerOrderAfterReorder=function(){throw new o("updateLayerOrderAfterReorder must be implemented in the derived class.")},g.prototype.raise=function(e){throw new o("raise must be implemented in the derived class.")},g.prototype.lower=function(e){throw new o("lower must be implemented in the derived class.")},g.prototype.lowerToBottom=function(e){throw new o("lowerToBottom must be implemented in the derived class.")},g.prototype._highlightFeature=function(e){if(n(this._removeHighlightCallback)&&(this._removeHighlightCallback(),this._removeHighlightCallback=void 0,this._highlightPromise=void 0),n(e)){var t=!1;if(n(e.polygon)){t=!0;var r=e.cesiumEntity||e,o=r.polygon.outline,s=r.polygon.outlineColor,f=r.polygon.material;r.polygon.outline=!0,r.polygon.outlineColor=a.fromCssColorString(this.terria.baseMapContrastColor),r.polygon.material=a.fromCssColorString(this.terria.baseMapContrastColor).withAlpha(.75),this._removeHighlightCallback=function(){r.polygon.outline=o,r.polygon.outlineColor=s,r.polygon.material=f}}if(n(e.polyline)){t=!0;var v=e.cesiumEntity||e,y=v.polyline.material,b=v.polyline.width;v.polyline.material=a.fromCssColorString(this.terria.baseMapContrastColor),v.polyline.width=2,this._removeHighlightCallback=function(){v.polyline.material=y,v.polyline.width=b}}if(!t)if(e.imageryLayer&&e.imageryLayer.imageryProvider instanceof c){if(n(this.terria.cesium)){var _=new h(e.imageryLayer.imageryProvider.createHighlightImageryProvider(e.data.id),{show:!0,alpha:1}),w=this.terria.cesium.scene;w.imageryLayers.add(_),this._removeHighlightCallback=function(){w.imageryLayers.remove(_)}}else if(n(this.terria.leaflet)){var S=this.terria.leaflet.map,C={async:!0,opacity:1,bounds:m(e.imageryLayer.imageryProvider.rectangle)};n(S.options.maxZoom)&&(C.maxZoom=S.options.maxZoom);var x=new d(e.imageryLayer.imageryProvider.createHighlightImageryProvider(e.data.id),C);x.addTo(S),x.bringToFront(),this._removeHighlightCallback=function(){S.removeLayer(x)}}}else if(!n(this.supportsPolylinesOnTerrain)||this.supportsPolylinesOnTerrain){var E=l(e.data);if(E&&E.geometry&&"Point"!==E.geometry.type){if("Polygon"===E.geometry.type||"MultiPolygon"===E.geometry.type){if((E=u(E)).geometry=u(E.geometry),"MultiPolygon"===E.geometry.type){var I=[];E.geometry.coordinates.forEach(function(e){I.push.apply(I,i(e))}),E.geometry.coordinates=I}E.geometry.type="MultiLineString"}var k=new p(this.terria);k.name=g._featureHighlightName,k.data=E,k.clampToGround=!0,k.style={"stroke-width":2,stroke:this.terria.baseMapContrastColor,"fill-opacity":0,"marker-color":this.terria.baseMapContrastColor};var L=this,P=this._removeHighlightCallback=function(){L._highlightPromise.then(function(){P===L._removeHighlightCallback&&(k._hide(),k._disable())}).otherwise(function(){})};L._highlightPromise=k.load().then(function(){P===L._removeHighlightCallback&&(k._enable(),k._show())})}}}},g.prototype.addImageryProvider=function(e){throw new o("addImageryProvider must be implemented in the derived class.")},g.prototype.removeImageryLayer=function(e){throw new o("removeImageryLayer must be implemented in the derived class.")},g.prototype.showImageryLayer=function(e){throw new o("showImageryLayer must be implemented in the derived class.")},g.prototype.hideImageryLayer=function(e){throw new o("hideImageryLayer must be implemented in the derived class.")},g.prototype.isImageryLayerShown=function(e){throw new o("isImageryLayerShown must be implemented in the derived class.")},g.prototype.addDataSource=function(e){this.terria.dataSources.add(e.dataSource)},g.prototype.removeDataSource=function(e){this.terria.dataSources.remove(e.dataSource,!1)},g.prototype.updateAllItemsForSplitter=function(){var e=this;this.terria.nowViewing.items.forEach(function(t){e.updateItemForSplitter(t)}),this.notifyRepaintRequired()},g.prototype.updateItemForSplitter=function(e){},g.prototype.pauseMapInteraction=function(){},g.prototype.resumeMapInteraction=function(){},g.disposeCommonListeners=function(e){n(e._removeHighlightCallback)&&(e._removeHighlightCallback(),e._removeHighlightCallback=void 0,e._highlightPromise=void 0),n(e._disclaimerShiftSubscription)&&(e._disclaimerShiftSubscription.dispose(),e._disclaimerShiftSubscription=void 0)},e.exports=g},function(e,t,r){"use strict";var i=r(8),a=r(10),n=r(11),o=r(18),s=r(92),l=function(e){s.call(this,e)};r(27)(s,l),a(l.prototype,{canZoomTo:{get:function(){return!0}},dataSource:{get:function(){throw new n('Types derived from DataSourceCatalogItem must implement a "dataSource" property.')}}}),l.prototype._enable=function(){},l.prototype._disable=function(){},l.prototype._show=function(){if(!i(this.dataSource))throw new n("This data source is not loaded.");var e=this.terria.dataSources;e.contains(this.dataSource)||e.add(this.dataSource)},l.prototype._hide=function(){if(!i(this.dataSource))throw new n("This data source is not loaded.");var e=this.terria.dataSources;e.contains(this.dataSource)&&e.remove(this.dataSource,!1)},l.prototype.showOnSeparateMap=function(e){var t=this.dataSource;return e.addDataSource({dataSource:t}),function(){e.removeDataSource({dataSource:t})}},l.prototype.zoomTo=function(){var e=this;return o(this.load(),function(){return i(e.nowViewingCatalogItem)?e.nowViewingCatalogItem.zoomTo():i(e.rectangle)?s.prototype.zoomTo.call(e):i(e.dataSource)?e.terria.currentViewer.zoomTo(e.dataSource):void 0})},e.exports=l},function(e,t,r){"use strict";e.exports={highContrast:["#F2F3F4","#FFB300","#803E75","#FF6800","#A6BDD7","#C10020","#CEA262","#817066","#007D34","#F6768E","#00538A","#FF7A5C","#53377A","#FF8E00","#B32851","#F4C800","#7F180D","#93AA00","#593315","#F13A13","#232C16"],brewer9ClassSet1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],modifiedBrewer8ClassSet2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#f44a4c","#b3b3b3"]}},,function(e,t,r){"use strict";e.exports=function(e){return Math.abs(e.split("").reduce(function(e,t){return(e<<5)-e+t.charCodeAt(0)},0))}},function(e,t,r){"use strict";e.exports=function(e,t,r){try{e.resolve(t.apply(void 0,r))}catch(t){e.reject(t)}}},function(e,t,r){"use strict";var i=r(586),a=r(315),n=r(18);e.exports=function(e){return n(a(e),function(e){try{return JSON.parse(e)}catch(t){if(t instanceof SyntaxError)return i.parse(e);throw t}},function(e){throw e})}},function(e,t,r){"use strict";var i=r(503).default,a=r(234),n=r(8),o=r(588),s=r(51),l=r(18),u={TERRIA_CRS:"EPSG:4326",crsStringToCode:function(e){var t,r=e.toLowerCase();return 0===r.indexOf("epsg:")?t=e.toUpperCase():0===r.indexOf("urn:ogc:def:crs:epsg::")?t="EPSG:"+e.substring("urn:ogc:def:crs:EPSG::".length):0===r.indexOf("urn:ogc:def:crs:epsg")?t="EPSG:"+e.substring("urn:ogc:def:crs:EPSG::x.x".length):-1!==r.indexOf("crs84")&&(t=this.TERRIA_CRS),t},willNeedReprojecting:function(e){return!(!n(e)||e===this.TERRIA_CRS||"EPSG:4283"===e)},reprojectPoint:function(e,t,r){var a=new i.Proj(o[t]),n=new i.Proj(o[r]);return i(a,n,e)},checkProjection:function(e,t){if(o.hasOwnProperty(t))return!0;var r=new s(e).segment(t).toString();return l(a(r),function(e){return o[t]=e,console.log("Added new string for",t,"=",e),!0},function(e){return!1})}};e.exports=u},,function(e,t,r){"use strict";var i=r(23);e.exports=function(){this.allFeaturesAvailablePromise=void 0,this.isLoading=!0,this.pickPosition=void 0,this.features=[],this.error=void 0,this.providerCoords=void 0,i.track(this,["isLoading","features","error"])}},function(e,t,r){"use strict";var i=r(9),a=r(10),n=r(8),o=r(229),s=function(e){e=i(e,{}),this.title=e.title,this.items=i(e.items,[]),this.gradientColorMap=e.gradientColorMap,this.barHeightMax=i(e.barHeightMax,130),this.barHeightMin=i(e.barHeightMax,30),this.itemWidth=i(e.itemWidth,30),this.itemHeightMin=i(e.itemHeightMin,12),this.itemHeight=e.itemHeight,this.itemSpacing=i(e.itemSpacing,0),this.barLeft=i(e.barLeft,5),this.barTop=i(e.barTop,5),this.width=i(e.width,315),this.variableNameLeft=i(e.variableNameLeft,5),this.variableNameTop=i(e.variableNameTop,17),this.cssClass=i(e.cssClass,"tjs-legend__legend"),this._svg=void 0};function l(e,t,r,i,a){return e._svg.appendChild(u(e,t,r,i,a))}function u(e,t,r,i,a){var o=document.createElementNS(e._svgns,t);return Object.keys(r).forEach(function(e){0===e.indexOf("xlink:")?o.setAttributeNS("http://www.w3.org/1999/xlink",e.substring("xlink:".length),r[e]):o.setAttribute(e,r[e])}),n(a)&&(o.textContent=a),n(i)&&o.setAttribute("class",i),o}a(s.prototype,{computedItemHeight:{get:function(){return i(this.itemHeight,Math.max(Math.min(this.barHeightMax/this.items.length,30),this.itemHeightMin))},set:function(e){this.itemHeight=e}}});var c=0;function d(e,t){var r=e.items.slice(t).reduce(function(e,t){return e+(t.spacingAbove||0)},0);return(e.items.length-t-1)*(e.computedItemHeight+e.itemSpacing)+r}s.prototype.drawSvg=function(){var e;(e=this)._svgns="http://www.w3.org/2000/svg",e._svg=document.createElementNS(e._svgns,"svg"),e._svg.setAttribute("version","1.1"),e._svg.setAttribute("width",e.width),e._svg.setAttribute("class","generated-legend now-viewing-legend-image-background");var t=function(e){return l(e,"rect",{x:0,y:0,width:e.width,height:1},"background")}(this),r=function(e){var t=document.createElement("span");t.className=e.cssClass,t.style.opacity=0,t.style.position="fixed",document.body.appendChild(t);for(var r=(e.title||"").split(" "),i=0,a=r.length,n=e.variableNameTop;i<r.length;){var o=r.slice(i,a).join(" ");t.textContent=o;var s=t.getBoundingClientRect();s.width<=e.width||i===a-1?(l(e,"text",{x:e.variableNameLeft,y:n},"variable-label",o),n+=s.height,i=a,a=r.length):--a}return document.body.removeChild(t),n}(this),i=l(this,"g",{transform:"translate("+this.barLeft+","+(r+this.barTop)+")"},"legend-bar-group"),a=r+this.barTop,o=r+this.barTop;return n(this.gradientColorMap)&&(a+=function(e,t,r){var i="terriajs-legend-gradient"+ ++c,a=l(e,"defs",{}),o=u(e,"linearGradient",{x1:"0",x2:"0",y1:"1",y2:"0",id:i});e.gradientColorMap.forEach(function(t,r){o.appendChild(u(e,"stop",{offset:t.offset,"stop-color":t.color}))}),a.appendChild(o);var s=e.items.filter(function(e){return!n(e.color)}),d=s.reduce(function(e,t){return e+(t.spacingAbove||0)},0),p=Math.max((e.computedItemHeight+e.itemSpacing)*s.length+d,e.barHeightMin);return l(e,"rect",{x:e.barLeft,y:r,width:e.itemWidth,height:p,fill:"url(#"+i+")"},"gradient-bar"),p}(this,0,a)),this.items.length>0&&(!function(e,t){e.items.forEach(function(r,i){var a=d(e,i);if(n(r.imageUrl))t.appendChild(u(e,"image",{"xlink:href":r.imageUrl,x:0,y:a,width:Math.min(r.imageWidth,e.itemWidth+4),height:Math.min(r.imageHeight,e.computedItemHeight+4)},"item-icon"));else if(n(r.multipleColors))for(var o=0|Math.sqrt(r.multipleColors.length),s=0|Math.ceil(r.multipleColors.length/o),l=r.multipleColors.length,c=0,p=a,f=0;c<l&&f<s;++f){for(var h=f===s-1?e.computedItemHeight-(p-a):e.computedItemHeight/s,m=0,g=0;c<l&&g<o;++g){var v=r.multipleColors[c++],y=g===o-1?e.itemWidth-m:e.itemWidth/o;t.appendChild(u(e,"rect",{fill:v,x:m,y:p,width:y,height:h},"item-box")),m+=y}p+=h}else if(n(r.color)){var b={fill:r.color,x:0,y:a,width:e.itemWidth,height:e.computedItemHeight};n(r.lineColor)&&(b.stroke=r.lineColor),t.appendChild(u(e,"rect",b,"item-box"))}})}(this,i),o+=function(e,t){function r(r){t.appendChild(u(e,"line",{x1:e.itemWidth,x2:e.itemWidth+5,y1:r,y2:r},"tick-mark"))}function i(r,i){t.appendChild(u(e,"text",{x:e.itemWidth+7,y:r+3},"item-label"+(e.items.length>6?"-small":""),i))}return e.items.forEach(function(t,a){var o=d(e,a);n(t.titleAbove)&&(i(o,t.titleAbove),r(o)),n(t.title)&&i(o+e.computedItemHeight/2,t.title),n(t.titleBelow)&&(i(o+e.computedItemHeight,t.titleBelow),r(o+e.computedItemHeight))}),d(e,-1)}(this,i)),function(e,t,r){t.setAttribute("height",r),e._svg.setAttribute("height",r),e._svg.setAttribute("style","height: "+r+"px");var i=document.createElement("div"),a=e._svg.cloneNode(!0);return i.appendChild(a),i.innerHTML}(this,t,(r=Math.max(a,o))+this.computedItemHeight/2)},s.prototype.asSvgUrl=function(){return"data:image/svg+xml,"+this.drawSvg()},s.prototype.getLegendUrl=function(){var e=this.drawSvg(),t=new o("data:image/svg+xml,"+e,"image/svg+xml");return t.safeSvgContent=e,t},e.exports=s},function(e,t,r){"use strict";var i=r(8),a=r(48),n=r(36),o=!(a.isInternetExplorer()||/Edge/.exec(navigator.userAgent)),s={make:function(e,t){if(t)return"data:attachment/"+e+","+encodeURIComponent(t)},checkCompatibility:function(e,t,r){return!(!o||r)||(i(e)&&e.raiseEvent(new n({title:"Browser Does Not Support Data Download",message:"Unfortunately Microsoft browsers (including all versions of Internet Explorer and Edge) do not support the data uri functionality needed to download data as a file. To download, copy the following uri into another browser such as Chrome, Firefox or Safari: "+t})),!1)}};e.exports=s},,,,,,,,,,,,function(e,t,r){"use strict";var i=r(235),a=r(8),n=r(42),o=r(154),s=r(70),l=r(36),u=r(139),c=1e3;e.exports=function(e,t,r,d){var p=new i(e);p.name=t;var f=n.now(),h=o({url:r,method:"POST",data:JSON.stringify(d)}).then(function(e){return function e(t,r,i){return s(t.status_uri).then(function(o){if("finished"!==o.queueing_status){if(a(o.stage_description)&&(r.loadingMessage=o.stage_description),"failed"===o.queueing_status)throw new l({title:"Service invocation failed",message:'An error occurred on the server while computing "'+r.name+'".'});if(r.isEnabled)return u(e.bind(void 0,t,r,i),c)}return s(t.uri).then(function(e){return r.isEnabled=!1,{startDate:i,finishDate:n.now(),url:t.uri,result:e}})})}(JSON.parse(e),p,f)});return p.loadPromise=h,p.isEnabled=!0,h}},function(e,t,r){"use strict";var i=r(9),a=r(8),n=r(10),o=r(11),s=r(116),l=r(27),u=r(23),c=r(1057),d=r(238),p=function(e){if(!a(e)||!a(e.regionProvider))throw new o("options.regionProvider is required.");s.call(this,e),this._regionProvider=e.regionProvider,this.singleSelect=i(e.singleSelect,!1),u.track(this,["_regionProvider"])};l(s,p),n(p.prototype,{type:{get:function(){return"regionData"}},regionProvider:{get:function(){return d.resolveRegionProvider(this._regionProvider)}}}),p.prototype.getEnabledItemsWithMatchingRegionType=function(){for(var e=[],t=this.terria.nowViewing.items,r=this.regionProvider,i=0;i<t.length;++i){var n=t[i];a(n.regionMapping)&&a(n.regionMapping.regionDetails)&&n.regionMapping.regionDetails.length>0&&n.regionMapping.regionDetails[0].regionProvider===r&&e.push(n)}return e},p.prototype.getRegionDataValue=function(){var e,t,r,i,n,o,s,l,u=this.regionProvider,d=[],p={},f=[],h=this.value;for(var m in h)if(h.hasOwnProperty(m)){if(!(e=h[m])||e.regionProvider!==u)continue;f.push(m),r=e.regionColumn.values;for(var g=0;g<r.length;++g)t=p[r[g]],a(t)||(t=p[r[g]]=d.length,d.push(r[g]))}if(this.singleSelect){for(n=[],o=0;o<f.length;++o)if((e=h[f[o]])&&e.regionProvider===u)for(r=e.regionColumn.values,l=e.valueColumn.values,s=0;s<d.length;++s)n[t=p[r[s]]]=l[s]||0}else for(i=[],o=0;o<f.length;++o)if(e=h[f[o]])for(r=e.regionColumn.values,l=e.valueColumn.values,s=0;s<d.length;++s){var v=i[t=p[r[s]]];a(v)||(v=i[t]=[]),v[o]=l[s]||0}return new c(d,f,i,n)},e.exports=p},function(e,t,r){"use strict";var i=r(8),a=r(10),n=r(11),o=r(116),s=r(27),l=r(238),u=function(e){if(!i(e)||!i(e.regionProvider))throw new n("options.regionProvider is required.");o.call(this,e),this._regionProvider=e.regionProvider};s(o,u),a(u.prototype,{type:{get:function(){return"region"}},value:{get:o.defaultValueGetter,set:function(e){"string"!=typeof e&&"number"!=typeof e||(e=this.findRegionByID(e)),o.defaultValueSetter.call(this,e)}},regionProvider:{get:function(){return l.resolveRegionProvider(this._regionProvider)}},regionTypeParameter:{get:function(){if(this._regionProvider instanceof l)return this._regionProvider}}}),u.prototype.findRegionByID=function(e){var t=this.regionProvider;if("string"==typeof e&&t.regions[0]&&"number"==typeof t.regions[0].id)e=parseInt(e,10);else if("string"==typeof e){e=e.toLowerCase();var r=t._appliedReplacements.serverReplacements[e];i(r)&&(e=r)}return t.regions.filter(function(t){return t.id===e})[0]},e.exports=u},function(e,t,r){"use strict";var i=r(10),a=r(116),n=function(e){a.call(this,e),this.trueName=e.trueName,this.trueDescription=e.trueDescription,this.falseName=e.falseName,this.falseDescription=e.falseDescription};r(27)(a,n),i(n.prototype,{type:{get:function(){return"boolean"}},hasNamedStates:{get:function(){return this.trueName&&this.falseName}}}),e.exports=n},,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(8);e.exports=function(e){return function(t,r,a,n){i(r[e])&&(t[e]=new RegExp(r[e],"i"))}}},function(e,t,r){"use strict";var i=r(8);e.exports=function(e){return function(t,r,a,n){i(t[e])&&(r[e]=t[e].source)}}},function(e,t,r){"use strict";var i=r(8),a=r(10),n=r(23),o=r(18),s=r(397),l=r(117),u=r(36),c=r(27),d=r(401),p=r(46),f=r(402),h=function(e,t){s.call(this,e),this._dataSource=void 0,this.url=t,this.data=void 0,this.dataSourceUrl=void 0,n.track(this,["data","dataSourceUrl"])};function m(e){e.clock=e._dataSource.clock,e.terria.currentViewer.notifyRepaintRequired()}function g(e){var t=e.terria;throw new u({sender:e,title:"Error loading CZML",message:"An error occurred while loading a CZML file.  This may indicate that the file is invalid or that it is not supported by "+t.appName+'.  If you would like assistance or further information, please email us at <a href="mailto:'+t.supportEmail+'">'+t.supportEmail+"</a>."})}c(s,h),a(h.prototype,{type:{get:function(){return"czml"}},typeName:{get:function(){return"Cesium Language (CZML)"}},metadata:{get:function(){var e=new l;return e.isLoading=!1,e.dataSourceErrorMessage="This data source does not have any details available.",e.serviceErrorMessage="This service does not have any details available.",e}},dataSource:{get:function(){return this._dataSource}}}),h.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.data]},h.prototype._load=function(){var e=o.defer(),t=this;return Promise.all([r.e(6),r.e(2)]).then(function(){var a=r(738);d(e,function(){var e=!1;i(t._dataSource)&&(e=t.terria.dataSources.remove(t._dataSource,!0));var r=new a;return t._dataSource=r,e&&t.terria.dataSources.add(t._dataSource),i(t.data)?o(t.data,function(e){return"undefined"!=typeof Blob&&e instanceof Blob?f(e).then(function(e){return r.load(e,p(t,t.dataSourceUrl,"1d")).then(function(){m(t)})}).otherwise(function(){g(t)}):e instanceof String||"string"==typeof e?r.load(JSON.parse(e),p(t,t.dataSourceUrl,"1d")).then(function(){m(t)}):r.load(e,p(t,t.dataSourceUrl,"1d")).then(function(){m(t)})}).otherwise(function(){g(t)}):r.load(p(t,t.url,"1d")).then(function(){m(t)}).otherwise(function(){g(t)})})}.bind(null,r)).catch(r.oe),e.promise},e.exports=h},function(e,t,r){"use strict";var i=r(51),a=r(41),n=r(8),o=r(10),s=r(17),l=r(23),u=r(158),c=r(29),d=r(36),p=r(104),f=r(27),h=r(46),m=r(598),g=r(333),v=r(151),y=function(e){p.call(this,e,"wfs-getCapabilities"),this.url="",this.dataCustodian=void 0,this.blacklist=void 0,l.track(this,["url","dataCustodian","blacklist"])};function b(e,t){if(n(e))for(var r=0;r<e.length;++r)if(e[r].name===t)return e[r]}function _(e,t,r,i){var a=new g(e.terria);a.name=t.Title,a.description=n(t.Abstract)&&t.Abstract.length>0?t.Abstract:e.description,a.dataCustodian=i,a.url=e.url,a.typeNames=t.Name,a.description="";var o=n(e.description)&&e.description.length>0,s=n(t.Abstract)&&t.Abstract.length>0;o&&(a.description+=e.description),o&&s&&(a.description+="<br/>"),s&&(a.description+=t.Abstract),a.requestGeoJson=r,a.requestGml=!0;var l,u=t.WGS84BoundingBox;if(u instanceof Array){l=w(u[0]);for(var d=1;d<u.length;++d)l=m(l,w(u[d]))}else l=n(u)?w(u):c.MAX_VALUE;return a.rectangle=l,a}function w(e){if(!n(e))return c.MAX_VALUE;var t=e.LowerCorner,r=e.UpperCorner;if(!n(t)||!n(r))return c.MAX_VALUE;var i=t.split(" "),a=r.split(" ");return 2!==i.length||2!==a.length?c.MAX_VALUE:c.fromDegrees(i[0],i[1],a[0],a[1])}f(p,y),o(y.prototype,{type:{get:function(){return"wfs-getCapabilities"}},typeName:{get:function(){return"Web Feature Service (WFS) Server"}},serializers:{get:function(){return y.defaultSerializers}}}),(y.defaultSerializers=a(p.defaultSerializers)).items=p.enabledShareableItemsSerializer,y.defaultSerializers.isLoading=function(e,t,r,i){},s(y.defaultSerializers),y.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.blacklist]},y.prototype._load=function(){var e=function(e,t){var r=new i(t);r.search("");var a=r.toString();return h(e,a,"1d")}(this,this.url)+"?service=WFS&version=1.1.0&request=GetCapabilities",t=this;return u(e).then(function(e){if(!e||!e.documentElement||"WFS_Capabilities"!==e.documentElement.localName)throw new d({title:"Invalid WFS server",message:"An error occurred while invoking GetCapabilities on the WFS server.  The server's response does not appear to be a valid GetCapabilities document.  <p>If you entered the link manually, please verify that the link is correct.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href=\"mailto:"+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"});var r=v(e),i=!1;if(n(r.OperationsMetadata)){var a=b(r.OperationsMetadata.Operation,"GetFeature");if(n(a)){var o=b(a.Parameter,"outputFormat");n(o)&&n(o.Value)&&(i=o.Value.indexOf("json")>=0||o.Value.indexOf("JSON")>=0||o.Value.indexOf("application/json")>=0)}}var s=t.dataCustodian;!n(s)&&n(r.ServiceProvider)&&n(r.ServiceProvider.ProviderName)&&(s=r.ServiceProvider.ProviderName,n(r.ServiceProvider.ProviderSite)&&n(r.ServiceProvider.ProviderSite.href)&&(s="["+s+"]("+r.ServiceProvider.ProviderSite.href+")"),n(r.ServiceProvider.ServiceContact)&&n(r.ServiceProvider.ServiceContact.Address)&&n(r.ServiceProvider.ServiceContact.Address.ElectronicMailAddress)&&(s+="<br/>",s+="["+r.ServiceProvider.ServiceContact.Address.ElectronicMailAddress+"](mailto:"+r.ServiceProvider.ServiceContact.Address.ElectronicMailAddress+")<br/>")),n(r.FeatureTypeList)&&function(e,t,r,i,a,o){if(!n(t))return;t instanceof Array||(t=[t]);for(var s=0;s<t.length;++s){var l=t[s];e.blacklist&&e.blacklist[l.Title]?console.log("Provider Feedback: Filtering out "+l.Title+" ("+l.Name+") because it is blacklisted."):e.add(_(e,l,a,o))}}(t,r.FeatureTypeList.FeatureType,t.items,0,i,s)}).otherwise(function(e){throw new d({title:"Group is not available",message:'An error occurred while invoking GetCapabilities on the WFS server.  <p>If you entered the link manually, please verify that the link is correct.</p><p>This error may also indicate that the server does not support <a href="http://enable-cors.org/" target="_blank">CORS</a>.  If this is your server, verify that CORS is enabled and enable it if it is not.  If you do not control the server, please contact the administrator of the server and ask them to enable CORS.  Or, contact the '+t.terria.appName+' Map team by emailing <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a> and ask us to add this server to the list of non-CORS-supporting servers that may be proxied by "+t.terria.appName+' itself.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"})})},e.exports=y},function(e,t,r){"use strict";var i=r(10),a=r(8),n=r(116),o=r(27),s=r(9),l=function(e){n.call(this,e)};o(n,l),i(l.prototype,{type:{get:function(){return"polygon"}}}),l.prototype.formatValueAsString=function(e){if(e=s(e,this.value),!a(e))return"-";for(var t=e[0],r="",i=0;i<t.length;i++)r+="["+t[i][0].toFixed(3)+", "+t[i][1].toFixed(3)+"]",i!==t.length-1&&(r+=", ");return r.length>0?"["+r+"]":""},l.prototype.getGeoJsonFeature=function(e){return{type:"Feature",geometry:{type:"Polygon",coordinates:e=s(e,this.value)}}},l.formatValueForUrl=function(e){return JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:e}}]})},l.formatValueAsString=l.prototype.formatValueAsString,l.getGeoJsonFeature=l.prototype.getGeoJsonFeature,e.exports=l},function(e,t,r){"use strict";var i=r(14),a=r(8),n=r(10),o=r(116),s=r(27),l=r(9),u=function(e){o.call(this,e)};function c(e){var t=i.toDegrees(e.longitude),r=i.toDegrees(e.latitude);return"".concat(t,",").concat(r)}s(o,u),n(u.prototype,{type:{get:function(){return"point"}}}),u.prototype.formatValueAsString=function(e){return e=l(e,this.value),a(e)?Math.abs(i.toDegrees(e.latitude))+"°"+(e.latitude<0?"S ":"N ")+Math.abs(i.toDegrees(e.longitude))+"°"+(e.longitude<0?"W":"E"):"-"},u.prototype.getGeoJsonFeature=function(e){if(e=l(e,this.value),a(e)&&""!==e){var t=[i.toDegrees(e.longitude),i.toDegrees(e.latitude)];return a(e.height)&&t.push(e.height),{type:"Feature",geometry:{type:"Point",coordinates:t}}}},u.formatValueAsString=u.prototype.formatValueAsString,u.getGeoJsonFeature=u.prototype.getGeoJsonFeature,u.formatValueForUrl=function(e){return JSON.stringify({type:"FeatureCollection",features:[u.getGeoJsonFeature(e)]})},u.AvailableFormatters={default:c,longitudeCommaLatitude:c,latitudeCommaLongitude:function(e){var t=i.toDegrees(e.longitude),r=i.toDegrees(e.latitude);return"".concat(r,",").concat(t)},geoJsonFeature:function(e){return JSON.stringify(u.getGeoJsonFeature(e))},geoJsonFeatureCollection:u.formatValueForUrl},e.exports=u},function(e,t,r){"use strict";var i=r(10),a=r(8),n=r(116),o=r(27),s=r(447),l=r(446),u=r(1145),c=function(e){n.call(this,e),this.regionParameter=e.regionParameter,this.value="",this._subtype=void 0};o(n,c),i(c.prototype,{type:{get:function(){return"geojson"}},regionTypeParameter:{get:function(){return this.regionParameter.regionTypeParameter}},regionProvider:{get:function(){return this.regionParameter.regionProvider}},subType:{get:function(){return this._subtype},set:function(e){this._subtype=e}}}),c.prototype.findRegionByID=function(e){return this.regionParameter.findRegionByID(e)},c.prototype._load=function(){return this.regionParameter.regionTypeParameter._load()},c.prototype.formatValueAsString=function(e){if(!a(e)||""===e)return"-";if(this.subtype===c.PointType)return s.formatValueAsString(e);if(this.subtype===c.SelectAPolygonType)return u.formatValueAsString(e);if(this.subtype===c.PolygonType)return l.formatValueAsString(e);var t=this.regionParameter.regionProvider.regions.indexOf(e);return e=t>=0&&this.regionParameter.regionProvider.regionNames[t]?this.regionParameter.regionProvider.regionNames[t]:e.id,this.regionParameter.regionProvider.regionType+": "+e},c.prototype.getGeoJsonFeature=function(e){return this.subtype===c.PointType?s.getGeoJsonFeature(e):this.subtype===c.SelectAPolygonType?u.getGeoJsonFeature(e):this.subtype===c.PolygonType?l.getGeoJsonFeature(e):this.regionParameter.regionProvider.getRegionFeature(this._terria,e,void 0).then(function(e){return{type:"Feature",geometry:e.geometry}})},c.prototype.getProcessedValue=function(e){return this.subtype===c.PointType?{inputType:"ComplexData",inputValue:s.formatValueForUrl(e,this)}:this.subtype===c.SelectAPolygonType?{inputType:"ComplexData",inputValue:u.formatValueForUrl(e,this)}:this.subtype===c.PolygonType?{inputType:"ComplexData",inputValue:l.formatValueForUrl(e,this)}:{inputType:"ComplexData",inputValue:this.regionParameter.regionProvider.getRegionFeature(this._terria,e,void 0).then(function(e){return JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",geometry:e.geometry}]})})}},c.PointType="point",c.PolygonType="polygon",c.RegionType="region",c.SelectAPolygonType="selectAPolygon",e.exports=c},function(e,t,r){"use strict";var i=r(51),a=r(8),n=r(181),o=r(10),s=r(23),l=r(155),u=r(27),c=r(46),d=r(109),p=function(e){l.call(this,e),this.fileExtension="png",this.maximumLevel=25,this.attribution=void 0,this.subdomains=void 0,s.track(this,["fileExtension","maximumLevel","attribution"])};function f(e){var t=new i(e);return t.search(""),t.toString()}u(l,p),o(p.prototype,{type:{get:function(){return"open-street-map"}},typeName:{get:function(){return"Open Street Map"}}}),p.prototype._createImageryProvider=function(){var e=new i(this.url);a(this.subdomains)&&this.url.indexOf("{s}")<0&&e.hostname("{s}."+e.hostname());var t,r,o=e.toString();return"/"!==o[o.length-1]&&(o+="/"),o+="{z}/{x}/{y}."+this.fileExtension,new n({url:(t=this,r=o,c(t,f(r))),credit:this.attribution,tilingScheme:new d,tileWidth:256,tileHeight:256,minimumLevel:0,maximumLevel:this.maximumLevel,rectangle:this.clipToRectangle?this.rectangle:void 0,subdomains:this.subdomains})},e.exports=p},function(e,t,r){"use strict";var i=v(r(13)),a=v(r(15)),n=v(r(19)),o=v(r(8)),s=v(r(9)),l=v(r(11)),u=v(r(234)),c=v(r(18)),d=v(r(368)),p=v(r(1178)),f=v(r(46)),h=v(r(157)),m=v(r(128)),g=v(r(1182));function v(e){return e&&e.__esModule?e:{default:e}}var y=(0,n.default)({displayName:"Chart",_element:void 0,_promise:void 0,_tooltipId:void 0,propTypes:{domain:a.default.object,styling:a.default.string,height:a.default.number,axisLabel:a.default.object,catalogItem:a.default.object,transitionDuration:a.default.number,highlightX:a.default.oneOfType([a.default.string,a.default.number]),updateCounter:a.default.any,pollSeconds:a.default.any,data:a.default.array,url:a.default.string,xColumn:a.default.oneOfType([a.default.string,a.default.number]),yColumns:a.default.array,colors:a.default.array,pollUrl:a.default.string,tableStructure:a.default.object},chartDataArrayFromTableStructure:function(e){var t=e.getColumnWithNameIdOrIndex(this.props.xColumn||0),r=[];if((0,o.default)(this.props.yColumns))r=this.props.yColumns.map(function(t){return e.getColumnWithNameIdOrIndex(t)});else{if(!((r=e.columns.filter(function(e){return e!==t&&e.type===m.default.SCALAR})).length>0))throw new l.default("No y-column available.");r=[r[0]]}var i=e.toPointArrays(t,r),a=this.props.colors;return 0===i[0].length?[]:i.map(function(e,t){return new d.default(e,{id:t,name:r[t].name,units:r[t].units,color:a&&a.length>0?a[t%a.length]:void 0})})},getChartDataPromise:function(e,t,r){return(0,o.default)(e)?(0,c.default)(e):(0,o.default)(t)?function(e,t){if((0,o.default)(e)&&(0,o.default)(e.loadIntoTableStructure))return e.loadIntoTableStructure(t);var r=new h.default("feature info");return t=(0,f.default)(e,t,"0d"),(0,u.default)(t).then(r.loadFromCsv.bind(r))}(r,t).then(this.chartDataArrayFromTableStructure).otherwise(function(e){return[]}):void 0},componentDidMount:function(){var e=this,t=e.getChartParameters(),r=e.getChartDataPromise(t.data,e.props.url,e.props.catalogItem);(0,o.default)(r)&&(r.then(function(r){t.data=r,p.default.create(e._element,t)}),e._promise=r.then(function(){var r=function(){if(!e._element)throw new l.default("Missing chart DOM element "+e.url);var r=e.getChartParameters();(0,o.default)(t.data)&&(r.transitionDuration=1,p.default.update(e._element,r))};return window.addEventListener("resize",r),r}))},shouldComponentUpdate:function(e){if(!(0,o.default)(e.data)||!(0,o.default)(this.props.data))return!0;if(e.data.length!==this.props.data.length)return!0;for(var t=0;t<e.data.length;t++)if(e.data[t].points.length!==this.props.data[t].points.length||e.data[t].color!==this.props.data[t].color)return!0;return e.axisLabel.x!==this.props.axisLabel.x},componentDidUpdate:function(e){var t=this._element,r=this.getChartParameters();if((0,o.default)(r.data))p.default.update(t,r);else if(this.props.updateCounter>0){var i=this.props.pollUrl||this.props.url;this.getChartDataPromise(r.data,i,this.props.catalogItem).then(function(e){r.data=e,0===e[0].points.length&&(r.data=[]),p.default.update(t,r)})}p.default.update(t,r)},componentWillUnmount:function(){var e=this;(0,o.default)(this._promise)&&(this._promise.then(function(t){window.removeEventListener("resize",t),p.default.destroy(e._element,e.getChartParameters()),e._element=void 0}),this._promise=void 0)},getChartParameters:function(){var e,t,r,i,a;return"feature-info"!==this.props.styling&&((0,o.default)(this._tooltipId)||(this._tooltipId="d3-tooltip-"+Math.random().toString().substr(2)),t={className:g.default.toolTip,id:this._tooltipId,align:"prefer-right",offset:{top:45,left:33,right:50,bottom:5}},"histogram"===this.props.styling?(r=void 0,e={top:0,right:0,bottom:0,left:0}):(e={top:8,right:16,bottom:20,left:0},r={type:"legend",height:30}),i={x:!0,y:!0}),(0,o.default)(this.props.highlightX)&&(t=void 0),(0,o.default)(this.props.data)?a=this.props.data:(0,o.default)(this.props.tableStructure)&&(a=this.chartDataArrayFromTableStructure(this.props.tableStructure)),(0,o.default)(a)&&a.length>1&&(a=a.slice().sort(function(e,t){return(0,o.default)(e.units)-(0,o.default)(t.units)})),{data:a,domain:this.props.domain,width:"100%",height:(0,s.default)(this.props.height,100),axisLabel:this.props.axisLabel,mini:"feature-info"===this.props.styling,transitionDuration:this.props.transitionDuration,margin:e,tooltipSettings:t,titleSettings:r,grid:i,highlightX:this.props.highlightX,supportsZooming:"feature-info"!==this.props.styling}},render:function(){var e=this;return i.default.createElement("div",{className:g.default.chart},i.default.createElement("div",{className:g.default.chartInner,ref:function(t){e._element=t}}))}});e.exports=y},function(e,t,r){"use strict";var i=u(r(13)),a=u(r(15)),n=u(r(19)),o=u(r(8)),s=u(r(35)),l=u(r(1184));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=(0,n.default)({displayName:"Dropdown",propTypes:{theme:a.default.object,options:a.default.array,selected:a.default.object,selectOption:a.default.func,textProperty:a.default.string,matchWidth:a.default.bool,children:a.default.any,disabled:a.default.bool},getDefaultProps:function(){return{options:[],selected:void 0,textProperty:"name",align:"left",disabled:!1,theme:{}}},getInitialState:function(){return{isOpen:!1}},UNSAFE_componentWillMount:function(){this.buttonElement=void 0},componentWillUnmount:function(){this.removeListeners(),this.dismounted=!0},hideList:function(){this.setState({isOpen:!1}),this.removeListeners()},removeListeners:function(){var e=this;document.body.removeEventListener("click",this.hideList),this.buttonElement.removeEventListener("click",this.nativeButtonListener),this.nativeButtonListener=void 0,(this.scrollListeners||[]).forEach(function(t){return t.removeEventListener("scroll",e.hideList)}),this.scrollListeners=void 0},showList:function(){var e=this;this.scrollListeners=function t(r,i){return r.scrollHeight>r.clientHeight&&(r.addEventListener("scroll",e.hideList),i.push(r)),r!==document.body?t(r.parentNode,i):i}(this.buttonElement,[]),this.setState({isOpen:!0}),document.body.addEventListener("click",this.hideList),this.nativeButtonListener=function(t){t.stopPropagation(),e.hideList()},this.buttonElement.addEventListener("click",this.nativeButtonListener)},select:function(e,t){this.props.selectOption(e,t),this.hideList()},onButtonClicked:function(){this.state.isOpen?this.hideList():this.showList()},render:function(){var e=this,t=l.default.isOpen+" "+(this.props.theme.isOpen||"");return i.default.createElement("div",{className:(0,s.default)(l.default.dropdown,this.props.theme.dropdown)},i.default.createElement("button",{type:"button",onClick:this.onButtonClicked,className:(0,s.default)(this.props.theme.button,l.default.btnDropdown),ref:function(t){e.buttonElement=t},disabled:this.props.disabled},(0,o.default)(this.props.selected)?this.props.selected[this.props.textProperty]:this.props.children,(0,o.default)(this.props.theme.icon)?this.props.theme.icon:null),i.default.createElement("ul",{className:(0,s.default)(l.default.list,this.props.theme.list,c({},t,this.state.isOpen))},this.props.options.map(function(e,t){var r=this;return i.default.createElement("li",{key:e[this.props.textProperty]},e.href?i.default.createElement("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:(0,s.default)(l.default.btnOption,this.props.theme.btnOption||"",c({},l.default.isSelected,e===this.props.selected)),download:e.download},e[this.props.textProperty]):i.default.createElement("button",{type:"button",className:(0,s.default)(l.default.btnOption,this.props.theme.btnOption||"",c({},l.default.isSelected,e===this.props.selected)),onClick:function(){return r.select(e,t)}},e[this.props.textProperty]))},this)))}});e.exports=d},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(51),n=r(110),o=r(25),s=r(58),l=r(1262),u=r(9),c=r(8),d=r(11),p=r(140),f=r(23),h=r(286),m=r(29),g=r(18),v=r(245).addMarker,y=r(1264),b=r(1265),_=r(1266),w=r(666),S=r(1267),C=r(232),x=r(507),E=r(667),I=r(1268),k=r(1269),L=r(669),P=r(1270),T=r(139),M=r(1271),A=r(1272),j=r(1273),D=r(177),N=r(1274),O={defaultMaximumShownFeatureInfos:100,regionMappingDefinitionsUrl:"build/TerriaJS/data/regionMapping.json",conversionServiceBaseUrl:"convert/",proj4ServiceBaseUrl:"proj4/",corsProxyBaseUrl:"proxy/",proxyableDomainsUrl:"proxyabledomains/",shareUrl:"share",feedbackUrl:void 0,initFragmentPaths:["init/"],storyEnabled:!0,interceptBrowserPrint:!0,useCesiumIonTerrain:!0,useCesiumIonBingImagery:void 0,cesiumIonAccessToken:void 0,cesiumTerrainUrl:void 0},F=["baseMapName","fogSettings","splitPosition"],R=function(e){if(!c(e)||!c(e.baseUrl))throw new d("options.baseUrl is required.");this.baseUrl=u(e.baseUrl,"build/TerriaJS/"),this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&(this.baseUrl+="/");var t=u(e.cesiumBaseUrl,this.baseUrl+"build/Cesium/build/");t.lastIndexOf("/")!==t.length-1&&(t+="/"),this.cesiumBaseUrl=t,n.setBaseUrl(t),this.analytics=e.analytics,c(this.analytics)||("undefined"!=typeof window&&c(window.ga)?this.analytics=new x:this.analytics=new w),this.appName=u(e.appName,"TerriaJS App"),this.supportEmail=u(e.supportEmail,"support@terria.io"),this.autoPlay=!1,this.batchGeocoder=e.batchGeocoder,this.error=new o,this.viewerMode=u(e.viewerMode,D.CesiumTerrain),this.baseMap=void 0,this.fogSettings=void 0,this.baseMapName=void 0,this.baseMapContrastColor="#ffffff",this.beforeViewerChanged=new o,this.afterViewerChanged=new o,this.dataSources=new l,this.clock=new _({shouldAnimate:!1}),this.timeSeriesStack=new j(this.clock),this._initialView=void 0,this.homeView=new y(m.MAX_VALUE),this.zoomWhenInitialViewChanges=!0,this.corsProxy=new S,this.cesium=void 0,this.leaflet=void 0,this._noViewer=new L(this),this.currentViewer=this._noViewer,this.userProperties={},this.initSources=[],this.locationMarker=void 0,this.pickedFeatures=void 0,this.mapInteractionModeStack=[],this.catalog=new b(this),this.services=new A(this),this.nowViewing=new P(this),this.selectedFeature=void 0,this.configParameters=O,this.urlShortener=void 0,this.shareDataService=void 0,this.serverConfig=void 0,this.tileLoadProgressEvent=new o,this.disclaimerListener=function(e,t){window.alert(e.initialMessage.content),t()},this.selectBox=!1,this.filterStartDataCallback=void 0,this.showSplitter=!1,this.sharedFromExplorerPanel=!1,this.previewedItemId=void 0,this.splitPosition=.5,this.splitPositionVertical=.5,this.stories=[],this.baseMaximumScreenSpaceError=2,this.useNativeResolution=!1,f.track(this,["baseMaximumScreenSpaceError","useNativeResolution","viewerMode","baseMap","baseMapName","fogSettings","_initialView","homeView","locationMarker","pickedFeatures","selectedFeature","mapInteractionModeStack","configParameters","catalog","selectBox","currentViewer","showSplitter","splitPosition","splitPositionVertical","baseMapContrastColor","sharedFromExplorerPanel","previewedItemId","stories"]),f.defineProperty(this,"initialView",{get:function(){return this._initialView?this._initialView:this.homeView},set:function(e){this._initialView=e}}),f.getObservable(this,"initialView").subscribe(function(){this.zoomWhenInitialViewChanges&&c(this.currentViewer)&&this.currentViewer.zoomTo(this.initialView,2)},this)};R.prototype.start=function(e){function t(e){return e&&"/"!==e[e.length-1]?e+"/":e}this.catalog.isLoading=!0;var r=u(e.applicationUrl,"");this.urlShortener=e.urlShortener,this.shareDataService=e.shareDataService;var a=this;return k(e.configUrl).then(function(n){c(n.parameters)&&(a.configParameters=s(n.parameters,a.configParameters));var o=a.configParameters;o.conversionServiceBaseUrl=t(o.conversionServiceBaseUrl),o.proj4ServiceBaseUrl=t(o.proj4ServiceBaseUrl),o.corsProxyBaseUrl=t(o.corsProxyBaseUrl),a.appName=u(o.appName,u(e.appName,a.appName)),a.supportEmail=u(o.supportEmail,u(e.supportEmail,a.supportEmail)),c(o.autoPlay)&&(a.autoPlay=o.autoPlay),a.analytics.start(a.configParameters),a.analytics.logEvent("launch","url",c(r.href)?r.href:"empty");var l,d=n.initializationUrls;if(c(d))for(var p=0;p<d.length;p++)a.initSources.push(G(d[p]));return function(e,t,r){if(c(e.configParameters.globalDisclaimer)&&c(t)){var i=e.configParameters.globalDisclaimer,a=window.location.hostname,n=!c(i.enabled)||i.enabled;if(n&&(i.enableOnLocalhost||-1===a.indexOf("localhost"))){var o="";c(r)&&(c(i.devHostRegex)&&a.match(i.devHostRegex)||c(i.prodHostRegex)&&!a.match(i.prodHostRegex))&&(o+=r),o+=t;var s={title:void 0!==i.title?i.title:"Disclaimer",confirmText:i.buttonTitle||"I Agree",width:i.width||600,height:i.height||550,message:o,hideUi:i.hideUi,type:"disclaimer"};e.error.raiseEvent(s)}}}(a,e.globalDisclaimerHtml,e.developmentDisclaimerPreambleHtml),a.serverConfig=new M,a.serverConfig.init(o.serverConfigUrl).then(function(){var e=a.configParameters.proxyableDomainsUrl;if(e)return k(e)}).then(function(e){e&&(e.allowProxyFor=e.allowProxyFor||e.proxyableDomains),"object"===i(a.serverConfig)&&(l=a.serverConfig.config),a.shareDataService&&a.shareDataService.init(l),a.corsProxy.init(e||l,o.corsProxyBaseUrl,n.proxyDomains)}).otherwise(function(e){console.error(e),a.error.raiseEvent({title:"Failed to initialize services",message:"A problem occurred with the Terria server. This may cause some layers or the conversion service to be unavailable."})}).then(function(){return a.updateApplicationUrl(r,a.urlShortener)}).then(function(){if(u(e.persistViewerMode,!0)&&c(a.getLocalProperty("viewermode")))a.viewerMode=parseInt(a.getLocalProperty("viewermode"),10);else{if(I()&&!c(a.userProperties.map)&&(a.viewerMode=D.Leaflet,c(a.configParameters.mobileDefaultViewerMode)&&"string"==typeof a.configParameters.mobileDefaultViewerMode)){var t=a.configParameters.mobileDefaultViewerMode.toLowerCase();"3dterrain"===t?a.viewerMode=D.CesiumTerrain:"3dsmooth"===t?a.viewerMode=D.CesiumEllipsoid:"2d"===t&&(a.viewerMode=D.Leaflet)}e.defaultTo2D&&!c(a.userProperties.map)&&(a.viewerMode=D.Leaflet)}a.catalog.isLoading=!1}).otherwise(function(e){console.error("Error from updateApplicationUrl: ",e),a.error.raiseEvent({title:"Problem loading URL",message:"A problem occurred while initialising Terria with URL parameters."})})})},R.prototype.updateApplicationUrl=function(e){var t=new a(e).fragment(),r=h(t),i=this.initSources.slice(),n=function(e,t,r,i,n){var o;c(t.share)&&(c(e.shareDataService)?o=e.shareDataService.resolveData(t.share):c(e.urlShortener)&&(o=e.urlShortener.expand(t.share).then(function(e){return e&&h(new a(e).fragment())})));return g(o,function(a){Object.keys(t).forEach(function(a){var o=t[a];if("clean"===a)i.length=0,n.length=0;else if("start"===a){var s=JSON.parse(o);V(e,s,i,n)}else if(c(o)&&o.length>0)r[a]=o,f.track(r,[a]);else{var l=G(a);i.push(l),n.push(l)}}),a&&V(e,a,i,n)})}(this,r,this.userProperties,this.initSources,i),o=this;return g(n).then(function(){var e=(o.userProperties.map||"").toLowerCase();return"2d"===e?o.viewerMode=D.Leaflet:"3d"===e?o.viewerMode=D.CesiumTerrain:"3dsmooth"===e&&(o.viewerMode=D.CesiumEllipsoid),W(o,i)})},R.prototype.updateFromStartData=function(e){var t=this.initSources.slice();return V(this,e,this.initSources,t),W(this,t)},R.prototype.getUserProperty=function(e){return f.getObservable(this.userProperties,e)||(this.userProperties[e]=void 0,f.track(this.userProperties,[e])),this.userProperties[e]},R.prototype.addInitSource=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=g(),a=this;if(c(e.corsDomains)&&this.corsProxy.corsDomains.push.apply(this.corsProxy.corsDomains,e.corsDomains),c(e.homeCamera)&&(this.homeView=y.fromJson(e.homeCamera)),c(e.initialCamera)&&(this.initialView=y.fromJson(e.initialCamera)),F.forEach(function(t){"baseMapName"===t&&c(e[t])&&c(a.baseMap)&&a.baseMap.name===e[t]||c(e[t])&&e[t]!==a[t]&&(a[t]=e[t])}),c(e.sharedFromExplorerPanel)&&e.sharedFromExplorerPanel&&(a.sharedFromExplorerPanel=!0),c(e.previewedItemId)&&(a.previewedItemId=e.previewedItemId),c(e.showSplitter)&&T(function(){a.showSplitter=e.showSplitter}),!0===r&&(t=this.afterViewerChanged.addEventListener(function(){a.currentViewer.zoomTo(a.initialView,0),c(t)&&t()})),c(e.viewerMode)&&!c(this.userProperties.map)){var n=(e.viewerMode||"").toLowerCase();if("2d"===n){if(r&&this.viewerMode===D.Leaflet)return;this.viewerMode=D.Leaflet}else if("3d"===n){if(r&&this.viewerMode===D.CesiumTerrain)return;this.viewerMode=D.CesiumTerrain}else if("3dsmooth"===n){if(r&&this.viewerMode===D.CesiumEllipsoid)return;this.viewerMode=D.CesiumEllipsoid}}if(!c(e.timeline)&&c(e.currentTime)){this.autoPlay=!1;var o=e.currentTime;this.clock.currentTime.dayNumber=parseInt(o.dayNumber,10),this.clock.currentTime.secondsOfDay=parseInt(o.secondsOfDay,10)}if(c(e.timeline)){this.clock.shouldAnimate=e.timeline.shouldAnimate,this.clock.multiplier=e.timeline.multiplier;var s=e.timeline.currentTime;this.clock.currentTime.dayNumber=parseInt(s.dayNumber,10),this.clock.currentTime.secondsOfDay=parseInt(s.secondsOfDay,10)}if(c(e.services)&&this.services.services.push.apply(this.services,e.services),c(e.catalog)){var l=!e.isFromExternalFile;i=i.then(this.catalog.updateFromJson.bind(this.catalog,e.catalog,{isUserSupplied:l}))}if(c(e.sharedCatalogMembers)&&(i=i.then(this.catalog.updateByShareKeys.bind(this.catalog,e.sharedCatalogMembers))),c(e.locationMarker)){var d={name:e.locationMarker.name,location:{latitude:e.locationMarker.latitude,longitude:e.locationMarker.longitude}};v(this,d)}return c(e.pickedFeatures)&&i.then(function(){var t,r=function(){var r;c(t)&&t();var i={},n=e.pickedFeatures.entities;n&&(a.nowViewing.items.filter(function(e){return e.isEnabled&&e.isShown&&c(e.dataSource)&&c(e.dataSource.entities)}).forEach(function(e){(e.dataSource.entities.values||[]).forEach(function(e){var t=E(e,a.clock),r=C.fromEntityCollectionOrEntity(e);i[t]=i[t]?i[t].concat([r]):[r]})}),r=n.map(function(e){var t=u(i[e.hash],[]).filter(function(t){return t.name===e.name});return t.length&&t[0]}).filter(function(e){return c(e)}));a.currentViewer.pickFromLocation(e.pickedFeatures.pickCoords,e.pickedFeatures.providerCoords,r),a.pickedFeatures.allFeaturesAvailablePromise.then(function(){if(a.pickedFeatures.features.forEach(function(e){var t=E(e,a.clock),r=e;i[t]=i[t]?i[t].concat([r]):[r]}),c(e.pickedFeatures.current)){var t=u(i[e.pickedFeatures.current.hash],[]).filter(function(t){return t.name===e.pickedFeatures.current.name});a.selectedFeature=t.length&&t[0]}})};a.currentViewer!==a._noViewer?r():t=a.afterViewerChanged.addEventListener(r)}),i},R.prototype.getLocalProperty=function(e){try{if(!c(window.localStorage))return}catch(e){return}var t=window.localStorage.getItem(this.appName+"."+e);return"true"===t||"false"!==t&&t},R.prototype.setLocalProperty=function(e,t){try{if(!c(window.localStorage))return}catch(e){return}return window.localStorage.setItem(this.appName+"."+e,t),!0},R.prototype.getSplitterSideForScreenPosition=function(e){var t=this.currentViewer.getContainer().clientWidth*this.splitPosition;return e.x<=t?p.LEFT:p.RIGHT};var U="0.0.05";function V(e,t,r,i){if(c(t.version)&&t.version!==U&&function(e){if("0.0.03"===e.version)for(var t=0;t<e.initSources.length;++t)c(e.initSources[t].camera)&&(e.initSources[t].initialCamera=e.initSources[t].camera,e.initSources[t].camera=void 0)}(t),c(e.filterStartDataCallback)&&(t=e.filterStartDataCallback(t)||t),c(t.initSources))for(var a=0;a<t.initSources.length;++a){var n=t.initSources[a];i.indexOf(n)<0&&!B(i,n)&&(i.push(n),"string"==typeof n&&r.indexOf(n)<0&&r.push(n))}}function B(e,t){return!!(t.initFragment&&"string"==typeof t.initFragment&&N(e,function(e){return e.initFragment===t.initFragment})>=0)}function G(e){return".json"!==e.toLowerCase().substring(e.length-5)?{initFragment:e}:e}function W(e,t){return t.reduce(function(t,r){return t.then(function(e,t){c(t.stories)&&(e.stories=t.stories);var r,a;if("string"==typeof t)r=t,a=k(e.corsProxy.getURLProxyIfNecessary(t));else if("object"===i(t)&&"string"==typeof t.initFragment){var n=function(){var i=t.initFragment,n=e.configParameters.initFragmentPaths;if(0===n.length)return e.error.raiseEvent({title:"Error loading initialization source",message:"Could not load initialization information from "+i+" because no initFragmentPaths are defined."}),{v:void 0};r=n.map(function(e){return z(e,i)}).join(", "),a=k(e.corsProxy.getURLProxyIfNecessary(z(n[0],i)));for(var o=function(t){a=a.otherwise(function(){return k(e.corsProxy.getURLProxyIfNecessary(z(n[t],i)))})},s=1;s<n.length;++s)o(s)}();if("object"===i(n))return n.v}return a?a.then(function(e){return e.isFromExternalFile=!0,e}).otherwise(function(){e.error.raiseEvent({title:"Error loading initialization source",message:"An error occurred while loading initialization information from "+r+".  This may indicate that you followed an invalid link or that there is a problem with your Internet connection."})}):t}.bind(void 0,e,r)).then(function(t){if(c(t))return e.addInitSource(t)})},g())}function z(e,t){return e+t+".json"}e.exports=R},,function(e,t,r){e.exports={btn:"tjs-tool_button__btn tjs-_buttons__btn","btn-primary":"tjs-tool_button__btn-primary tjs-_buttons__btn",btnPrimary:"tjs-tool_button__btn-primary tjs-_buttons__btn","btn-blink":"tjs-tool_button__btn-blink tjs-_buttons__btn",btnBlink:"tjs-tool_button__btn-blink tjs-_buttons__btn","btn-primary--hover":"tjs-tool_button__btn-primary--hover",btnPrimaryHover:"tjs-tool_button__btn-primary--hover",blinker:"tjs-tool_button__blinker",toolButton:"tjs-tool_button__toolButton"}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=s(r(13)),a=s(r(39)),n=s(r(15)),o=s(r(1310));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return i.default.createElement("div",{className:o.default.root},e.href?i.default.createElement("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",onClick:e.onClick,className:o.default.link},e.caption,"#"!==e.href&&i.default.createElement(a.default,{glyph:a.default.GLYPHS.externalLink})):i.default.createElement("button",{onClick:e.onClick,className:o.default.link},e.caption))}l.propTypes={href:n.default.string,onClick:n.default.func,caption:n.default.string},l.defaultProps={onClick:function(){}}},,,,,,,function(e,t,r){"use strict";var i=r(9),a=r(8),n=r(18),o=r(36);e.exports=function(e,t,r){return r=i(r,i.EMPTY_OBJECT),n(t,function(t){if(a(t))return t.isUserSupplied=!0,e.catalog.userAddedDataGroup.add(t),i(r.open,!0)&&a(t.isOpen)&&(t.isOpen=!0),i(r.enable,!0)&&a(t.isEnabled)&&(t.isEnabled=!0),i(r.zoomTo,!0)&&a(t.zoomToAndUseClock)&&t.zoomToAndUseClock(),e.catalog.userAddedDataGroup.isOpen=!0,t}).otherwise(function(t){return t instanceof o||(t=new o({title:"Data could not be added",message:"The specified data could not be added because it is invalid or does not have the expected format."})),e.error.raiseEvent(t),t})}},function(e,t,r){"use strict";var i=d(r(13)),a=d(r(19)),n=d(r(15)),o=d(r(8)),s=d(r(689)),l=d(r(21)),u=d(r(693)),c=d(r(1376));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,a.default)({displayName:"DataCatalog",mixins:[l.default],propTypes:{terria:n.default.object,viewState:n.default.object,items:n.default.array,removable:n.default.bool},render:function(){var e=this.props.viewState.searchState,t=e.catalogSearchText.length>0,r=(t?e.catalogSearchProvider.searchResults.map(function(e){return e.catalogItem}):this.props.items).filter(o.default);return i.default.createElement("ul",{className:c.default.dataCatalog},t?[i.default.createElement("label",{className:c.default.label,key:"0"},"Search results"),i.default.createElement(u.default,{searchProvider:e.catalogSearchProvider,isWaitingForSearchToStart:e.isWaitingToStartCatalogSearch,key:"1"})]:null,r.map(function(e,r){return e!==this.props.terria.catalog.userAddedDataGroup&&i.default.createElement(s.default,{viewState:this.props.viewState,member:e,manageIsOpenLocally:t,key:e.uniqueId,removable:this.props.removable,terria:this.props.terria})},this))}});e.exports=p},function(e,t,r){"use strict";var i=f(r(450)),a=f(r(466)),n=f(r(1432)),o=f(r(1452)),s=f(r(1466)),l=f(r(21)),u=f(r(13)),c=f(r(19)),d=f(r(15)),p=f(r(469));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,c.default)({displayName:"DataPreview",mixins:[l.default],propTypes:{terria:d.default.object.isRequired,viewState:d.default.object,previewed:d.default.object},backToMap:function(){this.props.viewState.explorerPanelIsVisible=!1},render:function(){var e,t=this.props.previewed;return t&&!t.isMappable&&t.tableStructure&&(e=t.chartData()),u.default.createElement("div",{className:p.default.preview},t&&t.isMappable?u.default.createElement("div",{className:p.default.previewInner},u.default.createElement(s.default,{previewed:t,terria:this.props.terria,viewState:this.props.viewState})):e?u.default.createElement("div",{className:p.default.previewInner},u.default.createElement("h3",{className:p.default.h3},t.name),u.default.createElement("p",null,"This file does not contain geospatial data."),u.default.createElement("div",{className:p.default.previewChart},u.default.createElement(i.default,{data:e,axisLabel:{x:t.xAxis.units,y:void 0},height:216})),u.default.createElement(a.default,{item:t})):t&&void 0!==t.invoke?u.default.createElement(o.default,{previewed:t,terria:this.props.terria,viewState:this.props.viewState}):t&&t.isGroup?u.default.createElement("div",{className:p.default.previewInner},u.default.createElement(n.default,{previewed:t,terria:this.props.terria,viewState:this.props.viewState})):u.default.createElement("div",{className:p.default.placeholder},u.default.createElement("p",null,"Select a dataset to see a preview"),u.default.createElement("p",null,"- OR -"),u.default.createElement("button",{className:p.default.btnBackToMap,onClick:this.backToMap},"Go to the map")))}});e.exports=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=h(r(13)),a=h(r(19)),n=h(r(15)),o=h(r(8)),s=h(r(664)),l=h(r(694)),u=h(r(407)),c=h(r(1430)),d=h(r(21)),p=h(r(192)),f=h(r(470));function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,a.default)({displayName:"Description",mixins:[d.default],propTypes:{item:n.default.object.isRequired,printView:n.default.bool},render:function(){var e,t,r,a=this.props.item,n=a.dataUrlType;return"data-uri"!==n&&"local"!==n||(e=u.default.checkCompatibility())&&(t=a.dataUrl)&&(r=function(e){if((0,o.default)(e)){var t=e.indexOf("/"),r=e.indexOf(",");if(t<r&&r<40)return e.slice(t+1,r)}}(t)),i.default.createElement("div",{className:f.default.description},a.description&&a.description.length>0?i.default.createElement("div",null,i.default.createElement("h4",{className:f.default.h4},"Description"),(0,p.default)(a.description,{catalogItem:a})):null,"local"===a.dataUrlType?i.default.createElement("p",null,"This file only exists in your browser. To share it, you must load it onto a public web server."):null,"local"===a.dataUrlType||a.hasDescription?null:i.default.createElement("p",null,"Please contact the provider of this data for more information, including information about usage rights and constraints."),i.default.createElement(l.default,{metadataItem:a}),a.dataCustodian&&a.dataCustodian.length>0?i.default.createElement("div",null,i.default.createElement("h4",{className:f.default.h4},"Data Custodian"),(0,p.default)(a.dataCustodian,{catalogItem:a})):null,a.hideSource?null:[a.url?[i.default.createElement("h4",{className:f.default.h4,key:"0-0"},a.typeName," URL"),"wms"===a.type?i.default.createElement("p",{key:"wms-description"},"This is a"," ",i.default.createElement("a",{href:"https://en.wikipedia.org/wiki/Web_Map_Service",target:"_blank",rel:"noopener noreferrer"},"WMS service"),", which generates map images on request. It can be used in GIS software with this URL:"):"wfs"===a.type?i.default.createElement("p",{key:"wfs-description"},"This is a"," ",i.default.createElement("a",{href:"https://en.wikipedia.org/wiki/Web_Feature_Service",target:"_blank",rel:"noopener noreferrer"},"WFS service"),", which transfers raw spatial data on request. It can be used in GIS software with this URL:"):null,this.props.printView?i.default.createElement("code",{key:"0-2"},a.url):i.default.createElement("input",{readOnly:!0,className:f.default.field,type:"text",value:a.url,onClick:function(e){return e.target.select()},key:"0-2"}),"wms"===a.type||"esri-mapServer"===a.type&&(0,o.default)(a.layers)?i.default.createElement("p",{key:"wms-layers"},"Layer name",a.layers.split(",").length>1?"s":"",":"," ",a.layers):"wfs"===a.type?i.default.createElement("p",{key:"wfs-typeNames"},"Type name",a.typeNames.split(",").length>1?"s":"",":"," ",a.typeNames):null]:null,a.metadataUrl?[i.default.createElement("h4",{className:f.default.h4,key:"1-0"},"Metadata URL"),i.default.createElement("p",{key:"1-1"},i.default.createElement("a",{href:a.metadataUrl,target:"_blank",rel:"noopener noreferrer",className:f.default.link},a.metadataUrl))]:null,a.dataUrlType&&"none"!==a.dataUrlType&&a.dataUrl?[i.default.createElement("h4",{className:f.default.h4,key:"2-0"},"Data URL"),i.default.createElement("p",{key:"2-1"},0===a.dataUrlType.indexOf("wfs")||0===a.dataUrlType.indexOf("wcs")?["Use the link below to download the data. See the"," ",0===a.dataUrlType.indexOf("wfs")&&i.default.createElement("a",{href:"http://docs.geoserver.org/latest/en/user/services/wfs/reference.html",target:"_blank",rel:"noopener noreferrer",key:"wfs"},"Web Feature Service (WFS) documentation"),0===a.dataUrlType.indexOf("wcs")&&i.default.createElement("a",{href:"http://docs.geoserver.org/latest/en/user/services/wcs/reference.html",target:"_blank",rel:"noopener noreferrer",key:"wms"},"Web Coverage Service (WCS) documentation")," ","for more information on customising URL query parameters.",i.default.createElement("br",{key:"6"}),i.default.createElement(v,{url:a.dataUrl,text:a.dataUrl,key:"7"})]:"data-uri"===n||"local"===n?[e?i.default.createElement(v,{url:t,text:"Download the currently selected data in "+r.toUpperCase()+" format",download:g(n,a.name,r),key:"0"}):null,e?null:"Unfortunately your browser does not support the functionality needed to download this data as a file. Please use Chrome, Firefox or Safari to download this data."]:["Use the link below to download the data directly.",i.default.createElement("br",{key:"1"}),a.dataUrl.startsWith("data:")&&i.default.createElement(v,{url:a.dataUrl,text:"Download Data"}),!a.dataUrl.startsWith("data:")&&i.default.createElement(v,{url:a.dataUrl,text:a.dataUrl})])]:null,!this.props.printView&&(0,o.default)(a.metadata)?[(0,o.default)(a.metadata.dataSourceMetadata)&&a.metadata.dataSourceMetadata.items.length>0?i.default.createElement("div",{className:f.default.metadata,key:"3-0"},i.default.createElement(s.default,{title:"Data Source Details",isInverse:!0},i.default.createElement(c.default,{metadataItem:a.metadata.dataSourceMetadata}))):null,(0,o.default)(a.metadata.dataSourceMetadata)&&a.metadata.dataSourceMetadata.items.length>0?i.default.createElement("div",{className:f.default.metadata,key:"3-1"},i.default.createElement(s.default,{title:"Data Service Details",isInverse:!0},i.default.createElement(c.default,{metadataItem:a.metadata.serviceMetadata}))):null]:null])}});function g(e,t,r){var i=t,a="."+r;return i.indexOf(a)!==i.length-a.length&&(i+=a),"local"===e&&(i="processed "+i),i}var v=(0,a.default)({displayName:"Link",mixins:[d.default],propTypes:{url:n.default.string.isRequired,text:n.default.string.isRequired,download:n.default.string},render:function(){return i.default.createElement("a",{href:this.props.url,className:f.default.link,download:this.props.download,target:"_blank",rel:"noopener noreferrer"},this.props.text)}}),y=m;t.default=y},,,function(e,t,r){e.exports={preview:"tjs-data-preview__preview tjs-_base__scrollbars",placeholder:"tjs-data-preview__placeholder","btn--back-to-map":"tjs-data-preview__btn--back-to-map tjs-_buttons__btn tjs-_buttons__btn--tertiary",btnBackToMap:"tjs-data-preview__btn--back-to-map tjs-_buttons__btn tjs-_buttons__btn--tertiary",preview__inner:"tjs-data-preview__preview__inner tjs-_base__scrollbars",previewInner:"tjs-data-preview__preview__inner tjs-_base__scrollbars","preview-chart":"tjs-data-preview__preview-chart",previewChart:"tjs-data-preview__preview-chart",field:"tjs-data-preview__field tjs-_form__field tjs-_form__input",h4:"tjs-data-preview__h4 tjs-_base__h4",h3:"tjs-data-preview__h3 tjs-_base__h3"}},function(e,t,r){e.exports={description:"tjs-mappable-preview__description tjs-_base__clearfix","btn--add":"tjs-mappable-preview__btn--add tjs-_buttons__btn tjs-_buttons__btn-primary",btnAdd:"tjs-mappable-preview__btn--add tjs-_buttons__btn tjs-_buttons__btn-primary","previewed--info":"tjs-mappable-preview__previewed--info",previewedInfo:"tjs-mappable-preview__previewed--info",field:"tjs-mappable-preview__field tjs-_form__field tjs-_form__input",link:"tjs-mappable-preview__link","title-and-share-wrapper":"tjs-mappable-preview__title-and-share-wrapper",titleAndShareWrapper:"tjs-mappable-preview__title-and-share-wrapper","share-link--wrapper":"tjs-mappable-preview__share-link--wrapper",shareLinkWrapper:"tjs-mappable-preview__share-link--wrapper",h3:"tjs-mappable-preview__h3 tjs-_base__h3",h4:"tjs-mappable-preview__h4 tjs-_base__h4",error:"tjs-mappable-preview__error",metadata:"tjs-mappable-preview__metadata"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildShareLink=m,t.getShareData=g,t.canShorten=function(e){return e.urlShortener&&e.urlShortener.isUsable||e.shareDataService&&e.shareDataService.isUsable},t.buildShortShareLink=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{includeStories:!0},a=function(e){return new i.default(window.location).fragment("share="+e).toString()};return(0,n.default)(e.shareDataService)?e.shareDataService.getShareToken(g(e,t,r)).then(a):e.urlShortener.shorten(m(e,t,r)).then(a)},t.addUserAddedCatalog=v,t.SHARE_VERSION=void 0;var i=p(r(51)),a=p(r(14)),n=p(r(8)),o=p(r(26)),s=r(665),l=p(r(608)),u=p(r(287)),c=p(r(667)),d=p(r(177));function p(e){return e&&e.__esModule?e:{default:e}}var f=["hideExplorerPanel","activeTabId"],h="0.0.05";function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{includeStories:!0},a=new i.default(window.location).fragment("").search({start:JSON.stringify(g(e,t,r))});return f.forEach(function(t){return a.addSearch({key:e.userProperties[t]})}),a.fragment(a.query()).query("").toString()}function g(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{includeStories:!0}).includeStories,i=r?e.initSources.slice():[];return v(e,i),function(e,t){var r=function e(t){return t.reduce(function(t,r){return t.push(r),r.items&&(t=t.concat(e(r.items)),r.items=void 0),t},[])}(e.catalog.serializeToJson({itemFilter:(0,l.default)([function(e){return!!u.default.itemFilters.noLocalData(e)||!!u.default.itemFilters.isCsvForCharting(e)}]),propertyFilter:(0,l.default)([u.default.propertyFilters.sharedOnly,function(e,t){return"name"!==e||"csv"===t.type}])})).filter(function(e){return e.isEnabled||e.isOpen}).reduce(function(e,t){return e[t.id]=t,t.id=void 0,e},{});Object.keys(r).forEach(function(e){var t=r[e];t.isOpen&&t.parents.some(function(e){return!r[e]})&&(r[e]=void 0)}),Object.keys(r).length>0&&t.push({sharedCatalogMembers:r})}(e,i),function(e,t,r){var i=e.currentViewer.getCurrentExtent(),o={west:a.default.toDegrees(i.west),south:a.default.toDegrees(i.south),east:a.default.toDegrees(i.east),north:a.default.toDegrees(i.north)};if((0,n.default)(e.cesium)){var s=e.cesium.scene.camera;o.position=s.positionWC,o.direction=s.directionWC,o.up=s.upWC}var l,u={west:a.default.toDegrees(e.homeView.rectangle.west),south:a.default.toDegrees(e.homeView.rectangle.south),east:a.default.toDegrees(e.homeView.rectangle.east),north:a.default.toDegrees(e.homeView.rectangle.north),position:e.homeView.position,direction:e.homeView.direction,up:e.homeView.up},c={dayNumber:e.clock.currentTime.dayNumber,secondsOfDay:e.clock.currentTime.secondsOfDay};switch(e.viewerMode){case d.default.CesiumTerrain:l="3d";break;case d.default.CesiumEllipsoid:l="3dSmooth";break;case d.default.Leaflet:l="2d"}var p={initialCamera:o,homeCamera:u,baseMapName:e.baseMap.name,viewerMode:l,currentTime:c};if((0,n.default)(t)){var f=t.viewingUserData()?(0,n.default)(t.userDataPreviewedItem)&&t.userDataPreviewedItem.uniqueId:(0,n.default)(t.previewedItem)&&t.previewedItem.uniqueId;t.explorerPanelIsVisible&&(p.sharedFromExplorerPanel=t.explorerPanelIsVisible),t.explorerPanelIsVisible&&f&&(p.previewedItemId=f)}(0,n.default)(e.showSplitter)&&(p.showSplitter=e.showSplitter,p.splitPosition=e.splitPosition);r.push(p)}(e,t,i),function(e,t){if((0,n.default)(e.pickedFeatures)&&e.pickedFeatures.features.length>0){var r=o.default.WGS84.cartesianToCartographic(e.pickedFeatures.pickPosition),i={providerCoords:e.pickedFeatures.providerCoords,pickCoords:{lat:a.default.toDegrees(r.latitude),lng:a.default.toDegrees(r.longitude),height:r.height}};(0,n.default)(e.selectedFeature)&&(i.current={name:e.selectedFeature.name,hash:(0,c.default)(e.selectedFeature,e.clock)}),i.entities=e.pickedFeatures.features.filter(function(e){return!(0,n.default)(e.imageryLayer)}).map(function(t){return{name:t.name,hash:(0,c.default)(t,e.clock)}}),t.push({pickedFeatures:i})}}(e,i),function(e,t){if((0,n.default)(e.locationMarker)){var r=e.locationMarker.entities.values[0].position.getValue(),i=o.default.WGS84.cartesianToCartographic(r);t.push({locationMarker:{name:e.locationMarker.entities.values[0].name,latitude:a.default.toDegrees(i.latitude),longitude:a.default.toDegrees(i.longitude)}})}}(e,i),function(e,t){e.timeSeriesStack.topLayer&&t.push({timeline:{shouldAnimate:e.clock.shouldAnimate,multiplier:e.clock.multiplier,currentTime:{dayNumber:e.clock.currentTime.dayNumber,secondsOfDay:e.clock.currentTime.secondsOfDay}}})}(e,i),r&&function(e,t){(0,n.default)(e.stories)&&t.push({stories:e.stories.slice()})}(e,i),{version:h,initSources:i}}function v(e,t){var r,i,a=(r=u.default.itemFilters.noLocalData,{filter:function(e){var t=r(e);return t||i.push(e),t},rejections:i=[]}),n=e.catalog.serializeToJson({itemFilter:(0,l.default)([a.filter,u.default.itemFilters.userSuppliedOnly,function(e){return!(e.name===s.CHART_DATA_CATEGORY_NAME)},function(e){return!e.parent||!e.parent.url}])});return n.length>0&&t.push({catalog:n}),a.rejections}t.SHARE_VERSION=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(13)),a=u(r(15)),n=u(r(19)),o=u(r(453)),s=u(r(39)),l=u(r(1477));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)({displayName:"SearchBox",propTypes:{onSearchTextChanged:a.default.func.isRequired,onDoSearch:a.default.func.isRequired,searchText:a.default.string.isRequired,onFocus:a.default.func,placeholder:a.default.string,onClear:a.default.func,alwaysShowClear:a.default.bool,autoFocus:a.default.bool},getDefaultProps:function(){return{placeholder:"Search",alwaysShowClear:!1,autoFocus:!1}},UNSAFE_componentWillMount:function(){this.searchWithDebounce=(0,o.default)(this.search,2e3)},componentWillUnmount:function(){this.removeDebounce()},hasValue:function(){return this.props.searchText.length>0},search:function(){this.removeDebounce(),this.props.onDoSearch()},removeDebounce:function(){this.searchWithDebounce.cancel()},handleChange:function(e){var t=e.target.value;this.props.onSearchTextChanged(t),this.searchWithDebounce()},clearSearch:function(){this.props.onSearchTextChanged(""),this.search(),this.props.onClear&&this.props.onClear()},onKeyDown:function(e){13===e.keyCode&&this.search()},render:function(){var e=i.default.createElement("button",{type:"button",className:l.default.searchClear,onClick:this.clearSearch},i.default.createElement(s.default,{glyph:s.default.GLYPHS.close}));return i.default.createElement("form",{className:l.default.searchData,autoComplete:"off",onSubmit:function(e){return e.preventDefault()}},i.default.createElement("label",{htmlFor:"search",className:l.default.formLabel},i.default.createElement(s.default,{glyph:s.default.GLYPHS.search})),i.default.createElement("input",{id:"search",type:"text",name:"search",value:this.props.searchText,onChange:this.handleChange,onFocus:this.props.onFocus,onKeyDown:this.onKeyDown,className:l.default.searchField,placeholder:this.props.placeholder,autoComplete:"off",autoFocus:this.props.autoFocus}),(this.props.alwaysShowClear||this.hasValue())&&e)}});t.default=c},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=u(r(13)),a=u(r(15)),n=u(r(19)),o=u(r(39)),s=u(r(1602)),l=u(r(35));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=(0,n.default)({displayName:"SearchResult",propTypes:{name:a.default.string.isRequired,clickAction:a.default.func.isRequired,icon:a.default.string,theme:a.default.string},getDefaultProps:function(){return{icon:!1,theme:"dark"}},render:function(){var e;return i.default.createElement("li",{className:(0,l.default)(s.default.searchResult,(e={},c(e,s.default.dark,"dark"===this.props.theme),c(e,s.default.light,"light"===this.props.theme),e))},i.default.createElement("button",{type:"button",onClick:this.props.clickAction,className:s.default.btn},this.props.icon&&i.default.createElement("span",{className:s.default.icon},i.default.createElement(o.default,{glyph:o.default.GLYPHS[this.props.icon]})),i.default.createElement("span",{className:s.default.resultName},this.props.name),i.default.createElement("span",{className:s.default.arrowIcon},i.default.createElement(o.default,{glyph:o.default.GLYPHS.right}))))}});e.exports=d},function(e,t,r){"use strict";var i=c(r(35)),a=c(r(39)),n=c(r(21)),o=c(r(13)),s=c(r(19)),l=c(r(15)),u=c(r(733));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=(0,s.default)({displayName:"Concept",mixins:[n.default],propTypes:{concept:l.default.object.isRequired,hideName:l.default.bool,isLoading:l.default.bool},toggleOpen:function(){this.props.concept.toggleOpen()},toggleActive:function(){this.props.isLoading||this.props.concept.toggleActive()},getColorStyle:function(){if(this.props.concept.color)return{color:this.props.concept.color}},getFillStyle:function(){if(this.props.concept.color)return{fill:this.props.concept.color}},render:function(){var e,t=this.props.concept,r=t.parent&&t.parent.allowMultiple,n=(0,i.default)(u.default.header,(d(e={},u.default.hasChildren,t.hasChildren),d(e,u.default.isSelectable,t.isSelectable),d(e,u.default.isLoading,this.props.isLoading),d(e,u.default.unSelectable,t.parent&&t.parent.requireSomeActive&&function(e){return e.parent.items.every(function(t){return t===e?t.isActive:!t.isActive})}(t)),e));return o.default.createElement("li",{style:this.getColorStyle()},!this.props.hideName&&t.name?o.default.createElement("div",{className:n},o.default.createElement("div",{className:u.default.btnGroup},t.hasChildren?o.default.createElement("button",{type:"button",onClick:this.toggleOpen,style:this.getColorStyle(),className:u.default.btnToggleOpen,title:"open variable selection"},t.isOpen?o.default.createElement(a.default,{glyph:a.default.GLYPHS.showLess}):o.default.createElement(a.default,{glyph:a.default.GLYPHS.showMore})):null,t.isSelectable?o.default.createElement("button",{type:"button",onClick:this.toggleActive,style:this.getColorStyle(),className:u.default.btnToggleActive,title:"select variable"},t.isActive&&r&&o.default.createElement(a.default,{style:this.getFillStyle(),glyph:a.default.GLYPHS.checkboxOn}),!t.isActive&&r&&o.default.createElement(a.default,{style:this.getFillStyle(),glyph:a.default.GLYPHS.checkboxOff}),t.isActive&&!r&&o.default.createElement(a.default,{style:this.getFillStyle(),glyph:a.default.GLYPHS.radioOn}),!t.isActive&&!r&&o.default.createElement(a.default,{style:this.getFillStyle(),glyph:a.default.GLYPHS.radioOff})):null),t.name):null,t.isOpen?o.default.createElement("ul",{className:u.default.items},t.items.filter(function(e){return e.isVisible}).map(function(e,r){return o.default.createElement(p,{key:r,concept:e,allowMultiple:t.allowMultiple,isLoading:this.props.isLoading})},this)):null)}});e.exports=p},function(e,t,r){e.exports={btnClose:"tjs-summary-concept__btnClose tjs-_buttons__btn",btnOpen:"tjs-summary-concept__btnOpen tjs-_buttons__btn",root:"tjs-summary-concept__root",title:"tjs-summary-concept__title",section:"tjs-summary-concept__section",controls:"tjs-summary-concept__controls","is-loading":"tjs-summary-concept__is-loading",isLoading:"tjs-summary-concept__is-loading",heading:"tjs-summary-concept__heading",condition:"tjs-summary-concept__condition","children-list":"tjs-summary-concept__children-list tjs-concept-viewer__children-list tjs-_base__list-reset tjs-_base__clearfix",childrenList:"tjs-summary-concept__children-list tjs-concept-viewer__children-list tjs-_base__list-reset tjs-_base__clearfix",btnRemove:"tjs-summary-concept__btnRemove tjs-_buttons__btn",btnEdit:"tjs-summary-concept__btnEdit tjs-_buttons__btn","no-conditions":"tjs-summary-concept__no-conditions tjs-summary-concept__heading",noConditions:"tjs-summary-concept__no-conditions tjs-summary-concept__heading",btnAddOpen:"tjs-summary-concept__btnAddOpen tjs-summary-concept__btnOpen tjs-_buttons__btn",indented:"tjs-summary-concept__indented",btnBack:"tjs-summary-concept__btnBack tjs-_buttons__btn",items:"tjs-summary-concept__items tjs-concept-viewer__items tjs-_base__list-reset","list-reset":"tjs-summary-concept__list-reset tjs-_base__list-reset",listReset:"tjs-summary-concept__list-reset tjs-_base__list-reset",btnAddNew:"tjs-summary-concept__btnAddNew tjs-summary-concept__btnOpen tjs-_buttons__btn tjs-summary-concept__heading",text:"tjs-summary-concept__text"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(r(13)),a=l(r(15)),n=l(r(19)),o=l(r(8)),s=l(r(1652));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,n.default)({displayName:"BadgeBar",propTypes:{label:a.default.string,badge:a.default.number,buttonCaption:a.default.string,children:a.default.node},render:function(){return i.default.createElement("ul",{className:s.default.header},i.default.createElement("li",null,i.default.createElement("label",{className:s.default.title},this.props.label)),(0,o.default)(this.props.badge)&&i.default.createElement("li",null,i.default.createElement("label",{className:s.default.labelBadge},"[ ",this.props.badge," ]")),i.default.createElement("li",null,this.props.children))}});t.default=u},function(e,t,r){"use strict";var i=r(9);e.exports=function(e){this.image=e.image,this.catalogItem=e.catalogItem,this.contrastColor=i(e.contrastColor,"#ffffff")}},,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(9),a=r(8),n=function(){this.key=void 0,this.options=void 0};n.prototype.start=function(e){this.key=e.googleAnalyticsKey,this.options=e.googleAnalyticsOptions},n.prototype.logEvent=function(e,t,r,n){!function(e){if(a(window.ga))return;if(!a(e.key))return console.log("Google Analytics tracking is disabled because terria.configParameters.googleAnalyticsKey is not specified"),void(window.ga=function(){});t=window,r=document,n="script",o="ga",t.GoogleAnalyticsObject=o,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,s=r.createElement(n),l=r.getElementsByTagName(n)[0],s.async=1,s.src="https://www.google-analytics.com/analytics.js",l.parentNode.insertBefore(s,l),ga("create",e.key,i(e.options,"auto")),ga("send","pageview");var t,r,n,o,s,l}(this),ga("send","event",e,t,r,n)},e.exports=n},,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeChartData=d,t.initializeChartTypes=function(e){e.data.forEach(d)};var i=l(r(8)),a=l(r(787)),n=l(r(788)),o=l(r(789)),s=l(r(790));function l(e){return e&&e.__esModule?e:{default:e}}var u={line:new a.default,bar:new n.default,moment:new o.default,momentPoints:new s.default};function c(e){return"line"===e?new a.default:"bar"===e?new n.default:"moment"===e?new o.default:"momentPoints"===e?new s.default:void 0}function d(e){void 0===e.renderer&&(e.renderer=function(e){if((0,i.default)(u[e.type]))return c(e.type);var t=e.points.length;if(0===t)return c("line");var r,a,n=e.getDomain(),o=n.x[0]instanceof Date;try{if(o&&(a=(n.x[1].getTime()-n.x[0].getTime())/315576e5,t/a<1)||!o&&(r=Math.floor(n.x[1]-n.x[0]),t/r<1)||e.points.filter(function(e){return!(0,i.default)(e.y)}).length>0)return c("line")}catch(e){console.error(e.stack)}return c("line")}(e))}},function(e,t,r){"use strict";var i=s(r(9)),a=s(r(23)),n=s(r(288)),o=s(r(255));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){e=(0,i.default)(e,i.default.EMPTY_OBJECT),this.seconds=e.seconds,this.url=e.url,this.replace=e.replace,this.nextScheduledUpdateTime=void 0,this.isPolling=!1,a.default.track(this,["nextScheduledUpdateTime","isPolling"])};l.prototype.updateFromJson=function(e,t){return(0,o.default)(this,e,t)},l.prototype.serializeToJson=function(e){return(0,n.default)(this,void 0,e)},e.exports=l},,,,function(e,t,r){"use strict";var i=r(167),a=r(51),n=r(18);e.exports=function(e,t,r,o){var s,l=i.loadImage;try{i.loadImage=function(e,t){return"string"==typeof t||t instanceof String?s=t:t&&t.url&&(s=t.url,t._ionEndpoint&&t._ionEndpoint.accessToken&&(s=new a(s).addQuery("access_token",t._ionEndpoint.accessToken).toString())),n()},e.requestImage(t,r,o)}finally{i.loadImage=l}return s}},,,,function(e,t,r){"use strict";var i=r(8);e.exports={setOpacity:function(e,t,r){i(t)&&(i(e.terria.cesium)&&(t.alpha=r),i(e.terria.leaflet)&&t.setOpacity(r))},fixNextLayerOrder:function(e,t,r){if(i(t)&&i(r)&&i(e.terria.cesium)){var a=e.terria.cesium.scene.imageryLayers,n=a.indexOf(t),o=a.indexOf(r);if(n<0||o<0)return;for(;o<n-1;)a.raise(r),++o;for(;o>n+1;)a.lower(r),--o}}}},function(e,t,r){"use strict";var i=r(8),a=r(9),n=r(42),o=r(36);function s(e,t,r){r=a(r,e.stopTime),n.lessThan(t,e.startTime)?e.currentTime=e.startTime.clone():n.greaterThan(t,r)?e.currentTime=r.clone():e.currentTime=t.clone()}e.exports=function(e,t,r){if(i(e))switch(s(e,n.now(),r),t=a(t,"present")){case"start":e.currentTime=e.startTime.clone(e.currentTime);break;case"end":e.currentTime=e.stopTime.clone(e.currentTime);break;case"present":break;default:var l;try{if(l=n.fromIso8601(t),isNaN(n.toDate(l)))throw new Error("Invalid Date")}catch(e){throw new o("Invalid initialTimeSource specified in config file: "+t)}i(l)&&s(e,l)}}},function(e,t,r){"use strict";e.exports={YEAR:1}},function(e,t,r){"use strict";var i=r(184),a=r(806),n=r(24),o=r(32),s=r(14),l=r(836),u=r(546),c=r(302),d=r(8),p=r(20),f=r(11),h=r(204),m=r(26),g=r(140),v=r(23),y=r(29),b=r(383),_=r(384),w=r(18),S=r(9),C=r(48),x=r(232),E=r(396),I=r(27),k=r(1041),L=r(1042),P=r(405),T=r(589),M=r(139),A=r(590);window.html2canvas=a,k.initialize(i);var j=i.Canvas.prototype._destroyContainer;i.Canvas.prototype._destroyContainer=function(){i.Util.cancelAnimFrame(this._redrawRequest),j.apply(this,arguments)},i.Canvas.prototype._onClick=function(e){for(var t,r=this._map.mouseEventToLayerPoint(e),a=[],n=this._drawFirst;n;n=n.next)(t=n.layer).options.interactive&&t._containsPoint(r)&&!this._map._draggableMoved(t)&&(i.DomEvent.fakeStop(e),a.push(t));a.length&&this._fireEvent(a,e)};var D=function(e,t){E.call(this,e),this.map=t,this.scene=new L(t),this.canShowSplitter=!0,this.dataSourceDisplay=void 0,this._tweens=new _,this._tweensAreRunning=!1,this._selectionIndicatorTween=void 0,this._selectionIndicatorIsAppearing=void 0,this._pickedFeatures=void 0,this._selectionIndicator=i.marker([0,0],{icon:i.divIcon({className:"",html:'<img src="'+A+'" width="50" height="50" alt="" />',iconSize:i.point(50,50)}),zIndexOffset:1,interactive:!1,keyboard:!1}),this._selectionIndicator.addTo(this.map),this._selectionIndicatorDomElement=this._selectionIndicator._icon.children[0],this._dragboxcompleted=!1,this._pauseMapInteractionCount=0,this.scene.featureClicked.addEventListener(function(e,t,r){if(B(e,r.latlng),t&&t.entityCollection&&t.entityCollection.owner&&t.entityCollection.owner.name===E._featureHighlightName)return;var i=x.fromEntityCollectionOrEntity(t);e._pickedFeatures.features.push(i),t.position&&(e._pickedFeatures.pickPosition=t.position._value)}.bind(void 0,this));var r=this;t.on("dragboxend",function(e){var t=r.terria.mapInteractionModeStack;if(d(t)&&t.length>0&&t[t.length-1].drawRectangle&&d(e.dragBoxBounds)){var i=e.dragBoxBounds;t[t.length-1].pickedFeatures=y.fromDegrees(i.getWest(),i.getSouth(),i.getEast(),i.getNorth())}r._dragboxcompleted=!0}),t.on("click",function(e){(e.latlng.lng>180||e.latlng.lng<-180)&&(e.latlng=e.latlng.wrap()),!r._dragboxcompleted&&r.map.dragging.enabled()&&B(r,e.latlng),r._dragboxcompleted=!1}),this._selectedFeatureSubscription=v.getObservable(this.terria,"selectedFeature").subscribe(function(){G(this)},this),this._splitterPositionSubscription=v.getObservable(this.terria,"splitPosition").subscribe(function(){this.updateAllItemsForSplitter()},this),this._showSplitterSubscription=v.getObservable(e,"showSplitter").subscribe(function(){this.updateAllItemsForSplitter()},this),t.on("layeradd",function(e){r.updateAllItemsForSplitter()}),t.on("move",function(e){r.updateAllItemsForSplitter()}),this._initProgressEvent(),G(this)};function N(e){return e.className&&e.className.indexOf&&e.className.indexOf("tjs-splitter__thumb")>=0}I(E,D),D.prototype._initProgressEvent=function(){var e=function(){var e=0;this.map.eachLayer(function(t){t._tiles&&(e+=Object.keys(t._tiles).filter(function(e){return!t._tiles[e].loaded}).length)}),this.updateTilesLoadingCount(e)}.bind(this);this.map.on("layeradd",function(t){void 0!==t.layer._tiles&&t.layer.on("tileloadstart tileload load",e)}.bind(this)),this.map.on("layerremove",function(t){t.layer.off("tileloadstart tileload load",e)}.bind(this))},D.prototype.destroy=function(){return d(this._selectedFeatureSubscription)&&(this._selectedFeatureSubscription.dispose(),this._selectedFeatureSubscription=void 0),d(this._splitterPositionSubscription)&&(this._splitterPositionSubscription.dispose(),this._splitterPositionSubscription=void 0),d(this._showSplitterSubscription)&&(this._showSplitterSubscription.dispose(),this._showSplitterSubscription=void 0),this.map.clearAllEventListeners(),this.map.eachLayer(function(e){return e.clearAllEventListeners()}),E.disposeCommonListeners(this),p(this)},D.prototype.getCurrentExtent=function(){var e=this.map.getBounds();return y.fromDegrees(e.getWest(),e.getSouth(),e.getEast(),e.getNorth())},D.prototype.getContainer=function(){return this.map.getContainer()},D.prototype.zoomTo=function(e,t){if(!d(e))throw new f("target is required.");var r=this;return w().then(function(){var i,a;d(e.entities)?i=r.dataSourceDisplay.getLatLngBounds(e):((a=e instanceof y?e:e.rectangle).east<a.west&&((a=y.clone(a)).east+=s.TWO_PI),i=T(a));d(i)&&r.map.flyToBounds(i,{animate:t>0,duration:t})})},D.prototype.captureScreenshot=function(){var e=this;this.map.attributionControl.remove();var t=this;try{var r;if(this.terria.showSplitter){var i=U(this),n=i.left.replace(/ /g,""),o=i.right.replace(/ /g,"");r=a(this.map.getContainer(),{useCORS:!0,ignoreElements:function(e){return e.style&&e.style.clip.replace(/ /g,"")===o||N(e)}}).then(function(t){return a(e.map.getContainer(),{useCORS:!0,ignoreElements:function(e){return e.style&&e.style.clip.replace(/ /g,"")===n||N(e)}}).then(function(e){var r=document.createElement("canvas");r.width=t.width,r.height=t.height;var a=r.getContext("2d"),n=i.clipPositionWithinMap*window.devicePixelRatio;return a.drawImage(t,0,0,n,r.height,0,0,n,r.height),a.drawImage(e,n,0,r.width-n,r.height,n,0,r.width-n,r.height),r})})}else r=a(this.map.getContainer(),{useCORS:!0});return w(r).then(function(e){return e.toDataURL("image/png")}).always(function(e){return t.map.attributionControl.addTo(t.map),e})}catch(e){return t.map.attributionControl.addTo(t.map),w.reject(e)}},D.prototype.notifyRepaintRequired=function(){};var O=new o;function F(e,t){d(e.imageryLayer)&&d(e.imageryLayer.setZIndex)&&(e.supportsReordering?e.imageryLayer.setZIndex(t.reorderable++):e.imageryLayer.setZIndex(t.fixed++))}D.prototype.computePositionOnScreen=function(e,t){var r=m.WGS84.cartesianToCartographic(e,O),a=this.map.latLngToContainerPoint(i.latLng(s.toDegrees(r.latitude),s.toDegrees(r.longitude)));return d(t)?(t.x=a.x,t.y=a.y):t=new n(a.x,a.y),t},D.prototype.addAttribution=function(e){e&&this.map.attributionControl.addAttribution(V(e))},D.prototype.removeAttribution=function(e){e&&this.map.attributionControl.removeAttribution(V(e))},D.prototype.getAllAttribution=function(){return Object.keys(this.map.attributionControl._attributions)},D.prototype.updateLayerOrder=function(){var e,t,r,i=this.terria.nowViewing.items,a={reorderable:100,fixed:1e6};for(e=i.length-1;e>=0;--e){if(r=i[e],d(r.items))for(t=r.items.length-1;t>=0;--t)F(r.items[t],a);F(r,a)}},D.prototype.updateLayerOrderAfterReorder=function(){this.updateLayerOrder()},D.prototype.raise=function(e){},D.prototype.lower=function(e){},D.prototype.lowerToBottom=function(e){if(d(e.items))for(var t=e.items.length-1;t>=0;--t){var r=e.items[t];this.lowerToBottom(r)}d(e._imageryLayer)&&e._imageryLayer.setZIndex(0)},D.prototype.pickFromLocation=function(e,t,r){B(this,e,t,r)},D.prototype.addImageryProvider=function(e){var t,r={opacity:e.opacity,bounds:e.clipToRectangle&&e.rectangle?T(e.rectangle):void 0};d(this.map.options.maxZoom)&&(r.maxZoom=this.map.options.maxZoom),e.imageryProvider instanceof c?(r.async=!0,r.bounds=T(e.imageryProvider.rectangle),t=new u(e.imageryProvider,r)):t=new l(e.imageryProvider,r),t.errorEvent.addEventListener(function(r,i){d(e.onProjectionError)&&e.onProjectionError(),t.initialized=!1});var i=e.imageryProvider.errorEvent;return d(e.onLoadError)&&d(i)&&i.addEventListener(e.onLoadError),t},D.prototype.removeImageryLayer=function(e){this.map.removeLayer(e.layer)},D.prototype.showImageryLayer=function(e){this.map.hasLayer(e.layer)||this.map.addLayer(e.layer),this.updateLayerOrder()},D.prototype.hideImageryLayer=function(e){this.map.removeLayer(e.layer)},D.prototype.isImageryLayerShown=function(e){return this.map.hasLayer(e.layer)};var R=C.isInternetExplorer()||C.isEdge();function U(e){var t,r,i="",a="";if(e.terria.showSplitter){var n=e.map,o=n.getSize(),s=n.containerPointToLayerPoint([0,0]),l=n.containerPointToLayerPoint(o);t=o.x*e.terria.splitPosition,r=Math.round(s.x+t),i="rect("+[s.y,r,l.y,s.x].join("px,")+"px)",a="rect("+[s.y,l.x,l.y,r].join("px,")+"px)"}return{left:i,right:a,clipPositionWithinMap:t,clipX:r}}function V(e){return e.element}function B(e,t,r,i){if(!d(e._pickedFeatures)){e._pickedFeatures=new P,d(i)&&(e._pickedFeatures.features=i);var a=M(function(){var t=m.WGS84.cartographicToCartesian(l),r=e.terria.mapInteractionModeStack;d(r)&&r.length>0?r[r.length-1].pickedFeatures.pickPosition=t:d(e.terria.pickedFeatures)&&(e.terria.pickedFeatures.pickPosition=t),e._pickedFeatures=void 0}),n=e.terria.nowViewing.items;r=S(r,{});var l=o.fromDegrees(t.lng,t.lat);e._pickedFeatures.pickPosition=m.WGS84.cartographicToCartesian(l);var u=[a].concat(n.filter(function(e){return e.isEnabled&&e.isShown&&d(e.imageryLayer)&&d(e.imageryLayer.pickFeatures)}).map(function(i){var a=i.imageryLayer.imageryProvider.url,n=s.toRadians(t.lng),o=s.toRadians(t.lat);return w(r[a]||i.imageryLayer.getFeaturePickingCoords(e.map,n,o)).then(function(e){return i.imageryLayer.pickFeatures(e.x,e.y,e.level,n,o).then(function(t){return{features:t,imageryLayer:i.imageryLayer,coords:e}})})})),c=e._pickedFeatures;c.allFeaturesAvailablePromise=w.all(u).then(function(t){var r=t.slice(1);c.isLoading=!1,c.providerCoords={};var i=r.filter(function(e){return d(e.features)&&e.features.length>0});c.providerCoords=i.reduce(function(e,t){return e[t.imageryLayer.imageryProvider.url]=t.coords,e},{}),c.features=i.reduce(function(t,r){if(e.terria.showSplitter){var i=e.computePositionOnScreen(c.pickPosition),a=e.terria.getSplitterSideForScreenPosition(i),n=r.imageryLayer.splitDirection;if(n!==a&&n!==g.NONE)return t}return t.concat(r.features.map(function(t){return t.imageryLayer=r.imageryLayer,d(t.position)||(t.position=l),e._createFeatureFromImageryLayerFeature(t)}))},c.features)}).otherwise(function(e){throw c.isLoading=!1,c.error="An unknown error occurred while picking features.",e});var p=e.terria.mapInteractionModeStack;d(p)&&p.length>0?p[p.length-1].pickedFeatures=e._pickedFeatures:e.terria.pickedFeatures=e._pickedFeatures}}function G(e){var t=e.terria.selectedFeature;if(e._highlightFeature(t),d(t)&&d(t.position)){var r=m.WGS84.cartesianToCartographic(t.position.getValue(e.terria.clock.currentTime),O);e._selectionIndicator.setLatLng([s.toDegrees(r.latitude),s.toDegrees(r.longitude)]),function(e){if(d(e._selectionIndicatorTween)){if(e._selectionIndicatorIsAppearing)return;e._selectionIndicatorTween.cancelTween(),e._selectionIndicatorTween=void 0}var t=e._selectionIndicatorDomElement.style;e._selectionIndicatorIsAppearing=!0,e._selectionIndicatorTween=e._tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:h.EXPONENTIAL_OUT,update:function(e){t.opacity=e.opacity,t.transform="scale("+e.scale+") rotate("+e.rotate+"deg)"},complete:function(){e._selectionIndicatorTween=void 0},cancel:function(){e._selectionIndicatorTween=void 0}}),W(e)}(e)}else!function(e){if(d(e._selectionIndicatorTween)){if(!e._selectionIndicatorIsAppearing)return;e._selectionIndicatorTween.cancelTween(),e._selectionIndicatorTween=void 0}var t=e._selectionIndicatorDomElement.style;e._selectionIndicatorIsAppearing=!1,e._selectionIndicatorTween=e._tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:h.EXPONENTIAL_OUT,update:function(e){t.opacity=e.opacity,t.transform="scale("+e.scale+") rotate(0deg)"},complete:function(){e._selectionIndicatorTween=void 0},cancel:function(){e._selectionIndicatorTween=void 0}}),W(e)}(e)}function W(e){if(!e._tweensAreRunning){var t=e.terria.selectedFeature;if(d(t)&&d(t.position)){var r=m.WGS84.cartesianToCartographic(t.position.getValue(e.terria.clock.currentTime),O);e._selectionIndicator.setLatLng([s.toDegrees(r.latitude),s.toDegrees(r.longitude)])}e._tweens.length>0&&e._tweens.update(),(0!==e._tweens.length||d(t)&&d(t.position))&&b(W.bind(void 0,e))}}D.prototype.updateItemForSplitter=function(e,t){if(d(e.splitDirection)&&d(e.imageryLayer)){var r=e.imageryLayer,i=r.getContainer&&r.getContainer();if(i){var a,n=t||U(this),o=n.left,s=n.right;if(i)R&&(a=i.style.display,i.style.display="none",i.getBoundingClientRect()),e.splitDirection===g.LEFT?i.style.clip=o:e.splitDirection===g.RIGHT?i.style.clip=s:i.style.clip="auto",e.imageryLayer.splitDirection=e.splitDirection,e._nextLayer&&e._nextLayer.getContainer&&e._nextLayer.getContainer()&&(e._nextLayer.getContainer().style.clip=i.style.clip,e._nextLayer.splitDirection=e.imageryLayer.splitDirection),R&&(i.style.display=a)}}},D.prototype.updateAllItemsForSplitter=function(){var e=this,t=U(this);this.terria.nowViewing.items.forEach(function(r){e.updateItemForSplitter(r,t)})},D.prototype.pauseMapInteraction=function(){++this._pauseMapInteractionCount,1===this._pauseMapInteractionCount&&this.map.dragging.disable()},D.prototype.resumeMapInteraction=function(){var e=this;--this._pauseMapInteractionCount,0===this._pauseMapInteractionCount&&setTimeout(function(){0===e._pauseMapInteractionCount&&e.map.dragging.enable()},0)},e.exports=D},,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(184),a=r(14),n=r(25),o=r(32),s=r(381),l=i.GridLayer.extend({initialize:function(e,t){this.imageryProvider=e,t.tileSize=256,this.errorEvent=new n,this.initialized=!1,this._usable=!1,this._delayedUpdate=void 0,this._zSubtract=0,this._previousCredits=[];var r=this;this._ipReady=s(function(){return r.imageryProvider.ready}),i.GridLayer.prototype.initialize.call(this,t)},createTile:function(e,t){var r=i.DomUtil.create("canvas","leaflet-tile"),n=this.getTileSize();r.width=n.x,r.height=n.y;var o=this;return this._ipReady.then(function(){var t=o.imageryProvider.tilingScheme.getNumberOfXTilesAtLevel(e.z);return o.imageryProvider._requestImage(a.mod(e.x,t),e.y,e.z,r)}).then(function(e){t(void 0,e)}),r},getFeaturePickingCoords:function(e,t,r){var i=new o(a.negativePiToPi(t),r,0),n=Math.round(e.getZoom()),l=this;return s(function(){return l.imageryProvider.ready}).then(function(){var e=l.imageryProvider.tilingScheme.positionToTileXY(i,n);return{x:e.x,y:e.y,level:n}})},pickFeatures:function(e,t,r,i,a){var n=this;return s(function(){return n.imageryProvider.ready}).then(function(){return n.imageryProvider.pickFeatures(e,t,r,i,a)})}});e.exports=l},function(e,t,r){"use strict";var i=r(142),a=r(11);e.exports=function(e){for(var t=e.length,r=e[t-1].x*(e[0].y-e[t-2].y)+e[0].x*(e[1].y-e[t-1].y),n=1;n<=t-2;n++)r+=e[n].x*(e[n+1].y-e[n-1].y);if(isNaN(r))throw new a("Expected points of type {x:number, y:number}");return r>0?i.COUNTER_CLOCKWISE:i.CLOCKWISE}},,,function(e,t,r){"use strict";var i=r(37);e.exports=function(e){return i.createIfNeeded(e).fetchArrayBuffer()}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(37);e.exports=function(e){return i.createIfNeeded(e).fetchBlob()}},,function(e,t,r){var i={"./deflate":577,"./deflate.js":577,"./draco_decoder":578,"./draco_decoder.js":578,"./draco_wasm_wrapper":579,"./draco_wasm_wrapper.js":579,"./inflate":580,"./inflate.js":580};function a(e){var t=n(e);return r(t)}function n(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id=576},,,,,function(e,t,r){"use strict";var i=r(1034),a=r(295);e.exports=function(e,t){return"number"==typeof e?a(e,t):"string"!=typeof e||/<[a-z][\s\S]*>/i.test(e)?e:i(e)}},,,,,,,function(e,t,r){"use strict";e.exports={"EPSG:4326":"EPSG:4326",WGS84:"WGS84","EPSG:4269":"EPSG:4269","EPSG:3857":"EPSG:3857","EPSG:3785":"EPSG:3785",GOOGLE:"GOOGLE","EPSG:900913":"EPSG:900913","EPSG:102113":"EPSG:102113","EPSG:3006":"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:4283":"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs","EPSG:3577":"+proj=aea +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=132 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:3107":"+proj=lcc +lat_1=-28 +lat_2=-36 +lat_0=-32 +lon_0=135 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:3112":"+proj=lcc +lat_1=-18 +lat_2=-36 +lat_0=0 +lon_0=134 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28349":"+proj=utm +zone=49 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28350":"+proj=utm +zone=50 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28351":"+proj=utm +zone=51 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28352":"+proj=utm +zone=52 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28353":"+proj=utm +zone=53 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28354":"+proj=utm +zone=54 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28355":"+proj=utm +zone=55 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28356":"+proj=utm +zone=56 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28357":"+proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:28358":"+proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:20248":"+proj=utm +zone=48 +south +ellps=aust_SA +units=m +no_defs","EPSG:20249":"+proj=utm +zone=49 +south +ellps=aust_SA +units=m +no_defs","EPSG:20250":"+proj=utm +zone=50 +south +ellps=aust_SA +units=m +no_defs","EPSG:20251":"+proj=utm +zone=51 +south +ellps=aust_SA +units=m +no_defs","EPSG:20252":"+proj=utm +zone=52 +south +ellps=aust_SA +units=m +no_defs","EPSG:20253":"+proj=utm +zone=53 +south +ellps=aust_SA +units=m +no_defs","EPSG:20254":"+proj=utm +zone=54 +south +ellps=aust_SA +units=m +no_defs","EPSG:20255":"+proj=utm +zone=55 +south +ellps=aust_SA +units=m +no_defs","EPSG:20256":"+proj=utm +zone=56 +south +ellps=aust_SA +units=m +no_defs","EPSG:20257":"+proj=utm +zone=57 +south +ellps=aust_SA +units=m +no_defs","EPSG:20258":"+proj=utm +zone=58 +south +ellps=aust_SA +units=m +no_defs","EPSG:102100":"EPSG:3857","EPSG:27700":"+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +towgs84=446.448,-125.157,542.06,0.15,0.247,0.842,-20.489 +units=m +no_defs"}},function(e,t,r){"use strict";var i=r(184),a=r(14);e.exports=function(e){var t=a.toDegrees(e.west),r=a.toDegrees(e.south),n=a.toDegrees(e.east),o=a.toDegrees(e.north);return i.latLngBounds([r,t],[o,n])}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE3NnB4IiBoZWlnaHQ9IjE3NnB4IiB2aWV3Qm94PSIwIDAgMTc2IDE3NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMS4xICg4NzYxKSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMiIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4KICAgICAgICAgICAgPGZlTWVyZ2U+CiAgICAgICAgICAgICAgICA8ZmVNZXJnZU5vZGUgaW49InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZU1lcmdlTm9kZT4KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4KICAgICAgICAgICAgPC9mZU1lcmdlPgogICAgICAgIDwvZmlsdGVyPgogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIwIiBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgICAgICA8ZmVNZXJnZT4KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPgogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPgogICAgICAgICAgICA8L2ZlTWVyZ2U+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTY5MS4wMDAwMDAsIC00OTguMDAwMDAwKSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2U9IiNGRkZGRkYiPgogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODAsMTQ0IEMxMTUuMzQ2MjI0LDE0NCAxNDQsMTE1LjM0NjIyNCAxNDQsODAgQzE0NCw0NC42NTM3NzYgMTE1LjM0NjIyNCwxNiA4MCwxNiBDNDQuNjUzNzc2LDE2IDE2LDQ0LjY1Mzc3NiAxNiw4MCBDMTYsMTE1LjM0NjIyNCA0NC42NTM3NzYsMTQ0IDgwLDE0NCBaIE0xNjAsODAgTDE0NCw4MCBNMTYsODAgTDAsODAgTTc5LjYsLTAuNCBMNzkuNiwxNS42IE03OC44LDE0NCBMNzguOCwxNjAiIGlkPSJMb2NhdGlvblRhcmdldCIgc3Ryb2tlLXdpZHRoPSI3IiBmaWx0ZXI9InVybCgjZmlsdGVyLTEpIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8Y2lyY2xlIGlkPSJQYXRoIiBzdHJva2Utd2lkdGg9IjIiIG9wYWNpdHk9IjAuMjUyMjE1NDg1IiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiBjeD0iODAiIGN5PSI4MCIgcj0iNiI+PC9jaXJjbGU+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(e,t,r){"use strict";var i=r(41),a=r(22),n=r(9),o=r(8),s=r(398),l=r(400),u=r(295),c=r(406),d=r(269),p=r(1992).default,f=r(1993).default,h=[{offset:0,color:"rgba(239,210,193,1.0)"},{offset:.25,color:"rgba(221,139,116,1.0)"},{offset:.5,color:"rgba(255,127,46,1.0)"},{offset:.75,color:"rgba(255,65,43,1.0)"},{offset:1,color:"rgba(111,0,54,1.0)"}],m=s.brewer9ClassSet1,g=s.highContrast,v=[32,32,32,128],y=[0,0,0,0],b="(No value)",_=s.highContrast,w=7,S=function(e,t,r,a){this.tableColumn=e,this.tableStyle=o(t)?t:new d,this.tableColumnStyle=function(e,t){var r;if(o(e)&&o(t.columns))if(o(t.columns[e.id]))r=i(t.columns[e.id]);else{var a=e.parent,n=a.columns.indexOf(e);o(t.columns[n])&&(r=i(t.columns[n]))}if(!o(r))return t;for(var s in t)t.hasOwnProperty(s)&&r.hasOwnProperty(s)&&(o(r[s])||(r[s]=t[s]));return r}(e,this.tableStyle),this.name=a;var s=l(a||"")%_.length;this._noColumnColorArray=k(_[s],1),this._legend=void 0,this._colorGradient=void 0,this._binColors=void 0,this._regionProvider=r,o(this.tableColumnStyle.nullColor)?this._nullColorArray=k(this.tableColumnStyle.nullColor):this._nullColorArray=o(r)?y:v,this._cycleEnumValues=!1,this._cycleColors=void 0,this.tableColumnStyle.legendTicks=n(this.tableColumnStyle.legendTicks,0),this.tableColumnStyle.scale=n(this.tableColumnStyle.scale,1)};function C(e){var t;if(o(e.tableColumn)&&o(e.tableColumn.values))if(e.tableColumn.isEnum){var r=e.tableColumnStyle,i=e.tableColumn.uniqueValues;e._binColors=x(e,i,r.colorBinMethod,r.colorBins),t=E(e,i)}else{var a=n(e.tableColumnStyle.colorMap,h),s=n(e.tableColumnStyle.colorBins,w);e._colorGradient=function(e){if(!o(e))return;var t=document.createElement("canvas");if(!o(t))return;for(var r=t.width=64,i=t.height=256,a=t.getContext("2d"),n=a.createLinearGradient(0,0,0,i-1),s=0;s<e.length;s++)n.addColorStop(e[s].offset,e[s].color);return a.fillStyle=n,a.fillRect(0,0,r,i),a.getImageData(0,0,1,256)}(a),e._binColors=function(e,t){var r=e.tableColumn,i=e.tableColumnStyle,a=e._colorGradient,n=P(r,i);if(Array.isArray(t)&&o(n.minimum)&&o(n.maximum)){t[t.length-1]<n.maximum&&(t=t.concat(n.maximum));var s=t.length,l=t.filter(function(e,r){return e>n.minimum&&(0===r||t[r-1]<n.maximum)}),u=t.indexOf(l[0]);return l.map(function(e,t){return{upperBound:Math.min(e,n.maximum),colorArray:L(a,(u+t)/(s-1))}})}if(t<=0||i.colorBinMethod.match(/none/i))return;var c,d=[],h=r.numericalValues;if(0===h.length)return[];var m=Math.min(t,h.length),g=i.colorBinMethod.toLowerCase();"auto"===g&&(g=h.length>1e3?"quantile":"ckmeans");if("quantile"===g)for(c=0;c<m;c++)d.push({upperBound:f(h,(c+1)/m),colorArray:L(a,c/(m-1))});else if("ckmeans"===g){var v=p(h,m);for(c=0;c<v.length;c++)c>0&&1===v[c].length&&v[c][0]===v[c-1][v[c-1].length-1]||d.push({upperBound:v[c][v[c].length-1]});if(d.length>1)for(c=0;c<d.length;c++)d[c].colorArray=L(a,c/(d.length-1));else d[0].colorArray=L(a,.5)}return d}(e,s),t=function(e,t){var r,i=e.tableColumn,a=e.tableColumnStyle,o=e._binColors,s=P(i,a);var l=n(a.nullLabel,b),u=n(e.tableColumnStyle.legendName,i.name);if(!o)return{title:u,barHeightMin:130,gradientColorMap:t,labelTickColor:"darkgray",items:function(t){for(var r=[],n=2+t,o=1;o<=n;o++)r.push({titleAbove:T(s.minimum+(s.maximum-s.minimum)*(o/n),a),titleBelow:1===o?T(s.minimum,a):void 0});i.values.indexOf(null)>=0&&r.unshift({title:l,color:M(e._nullColorArray),spacingAbove:8});return r}(a.legendTicks)};r={title:u,itemSpacing:0,items:o.map(function(e,t){return{titleAbove:0===t||t<o.length-1||e.upperBound>o[t-1].upperBound?T(e.upperBound,a):void 0,titleBelow:0===t&&e.upperBound!==s.minimum?T(s.minimum,a):void 0,color:M(e.colorArray)}})};i.values.indexOf(null)>=0&&r.items.unshift({title:l,color:M(e._nullColorArray),spacingAbove:8});return r}(e,a)}else e.regionProvider?(e._binColors=x(e,e.regionProvider.regions,"top",void 0),t=E(e,e.regionProvider.regions)):t=o(e.name)?{items:[{title:e.name,color:M(e._noColumnColorArray)}]}:void 0;o(t)?e._legend=new c(t):e._legend=null}function x(e,t,r,i){i=n(i,t.length),e._cycleEnumValues=!1,e._otherColor=k(g[g.length-1]);var a,s={};if(Array.isArray(i))for(a=0;a<i.length;a++){var l=i[a];o(l.value)?t.indexOf(l.value)>=0&&(s[l.value]=k(l.color)):e._otherColor=k(l.color)}else{var u=Math.min(i,t.length,g.length),c=u<=m.length?m:g;c=c.slice(0,u).map(function(e){return k(e)}),"auto"===(r=r.toLowerCase())&&(r="top");var d=0;for("top"===r?d=t.length<=c.length?t.length:c.length-1:"cycle"===r&&(d=t.length)>c.length&&(e._cycleEnumValues=!0,e._cycleColors=c),a=0;a<d;a++)s[t[a]]=c[a%c.length]}return s}function E(e,t){var r,i=e.tableColumn,a=e.tableColumnStyle,s=e._binColors,l=n(a.nullLabel,b),u=i.name;if(e._cycleEnumValues)r=[{title:A(i),multipleColors:e._cycleColors.map(function(e){return M(e)})}];else{r=[];var c=0;for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(r.push({title:n(d,l),color:M(s[d])}),c++);t.length>c&&r.push({title:t.length-c+" other values",color:M(e._otherColor)})}r.reverse();var p={title:u,itemSpacing:2,items:r};return o(i)&&i.values.indexOf(null)>=0&&p.items.unshift({title:l,color:M(e._nullColorArray),spacingAbove:0}),p}function I(e,t){var r=P(e.tableColumn,e.tableColumnStyle),i=r.maximum===r.minimum?0:(t-r.minimum)/(r.maximum-r.minimum);return e.tableColumnStyle.clampDisplayValue&&(i=Math.max(0,Math.min(1,i))),i}function k(e,t){var r=document.createElement("canvas");if(!o(r))return v;var i=r.getContext("2d");i.fillStyle=e,i.fillRect(0,0,2,2);var a=i.getImageData(0,0,1,1).data;return o(t)&&(a[3]=Math.round(255*t)),a}function L(e,t){var r=4*Math.floor(t*(e.data.length/4-1));return[e.data[r],e.data[r+1],e.data[r+2],e.data[r+3]]}function P(e,t){if(!o(e))return{};var r=e.minimumValue,i=e.maximumValue;return r!==i&&o(t)&&(o(t.maxDisplayValue)&&(i=t.maxDisplayValue),o(t.minDisplayValue)&&(r=t.minDisplayValue)),{minimum:r,maximum:i}}function T(e,t){var r;return o(t.format)?(r=i(t.format)).maximumFractionDigits=n(t.format.maximumFractionDigits,2):r={maximumFractionDigits:2},u(e,r)}function M(e){return"rgba("+e[0]+","+e[1]+","+e[2]+", "+e[3]/255+")"}function A(e){return e.uniqueValues.length+" values"}S.prototype.legendUrl=function(){if(o(this._legend)||C(this),o(this._legend))return this._legend.getLegendUrl()},S.prototype.getScaleFromValue=function(e){var t=this.tableColumnStyle.scale;if(this.tableColumnStyle.scaleByValue){var r=o(e)?I(this,e):0;o(r)&&r==r?t*=r+.5:t=.5}return t},S.prototype.getColorArrayFromValue=function(e){if(!o(this.tableColumn))return this._noColumnColorArray;if(!o(e))return this._nullColorArray;if(0===this.tableColumnStyle.colorBins)return L(this._colorGradient,I(this,e));if(this.tableColumn.isEnum)return Object.prototype.hasOwnProperty.call(this._binColors,e)?this._binColors[e]:this._otherColor;if(!o(this._binColors)||0===this._binColors.length)return this._nullColorArray;for(var t=0;t<this._binColors.length-1&&e>this._binColors[t].upperBound;)t++;return o(this._binColors[t])?this._binColors[t].colorArray:(console.log("Bad bin "+t),[0,0,0,0])},S.prototype.getColorFromValue=function(e){return t=this.getColorArrayFromValue(e),new a(t[0]/255,t[1]/255,t[2]/255,t[3]/255);var t},e.exports=S},function(e,t,r){"use strict";var i=r(8),a=r(70),n=r(11),o=r(593),s=function(e){this.regionProviders=[],this.corsProxy=e};s.metaList={},s.fromUrl=function(e,t){return i(s.metaList[e])||(s.metaList[e]=a(e).then(function(e){return new s(t).initFromObject(e)})),s.metaList[e]},s.prototype.initFromObject=function(e){var t=this;return Object.keys(e.regionWmsMap).forEach(function(r){t.regionProviders.push(new o(r,e.regionWmsMap[r],t.corsProxy))}),Object.keys(e.regionWmsMap).forEach(function(r){var i=t.getRegionProvider(r);e.regionWmsMap[r].disambigRegionId&&i.setDisambigProperties(t.getRegionProvider(e.regionWmsMap[r].disambigRegionId))}),this},s.prototype.getRegionDetails=function(e,t,r){var a=[],n=e.indexOf(t);if(n>=0)if((e=e.slice()).splice(n,1),i(r)){var o=this.getRegionProvider(r);a.push({regionProvider:o,variableName:t,disambigVariableName:o.findDisambigVariable(e)})}else e.unshift(t);for(var s=0;s<this.regionProviders.length;s++){var l=this.regionProviders[s].findRegionVariable(e);l&&a.push({regionProvider:this.regionProviders[s],variableName:l,disambigVariableName:this.regionProviders[s].findDisambigVariable(e)})}return a},s.prototype.getRegionProvider=function(e){var t=this.regionProviders.filter(function(t){return t.regionType.toLowerCase()===e.toLowerCase()});if(t.length>1)throw new n("More than one definition of region provider: "+e);if(0!==t.length)return t[0]},e.exports=s},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(8),n=r(9),o=r(11),s=r(42),l=r(234),u=r(70),c=r(107),d=r(18),p=r(36),f=r(151),h=r(51),m=function(e,t,r){t=n(t,n.EMPTY_OBJECT),this.regionType=e,this.regionProp=t.regionProp,this.nameProp=t.nameProp,this.description=t.description,this.layerName=t.layerName,this.server=t.server,this.serverType=n(t.serverType,"WMS"),this.analyticsWmsServer=n(t.analyticsWmsServer,"WMS"===this.serverType?this.server:void 0),this.analyticsWmsLayerName=n(t.analyticsWmsLayerName,"WMS"===this.serverType?this.layerName:void 0),this.serverSubdomains=t.serverSubdomains,this.serverMinZoom=n(t.serverMinZoom,0),this.serverMaxZoom=n(t.serverMaxZoom,1/0),this.serverMaxNativeZoom=n(t.serverMaxNativeZoom,this.serverMaxZoom),this.bbox=t.bbox,this.aliases=n(t.aliases,[this.regiontype]),this.serverReplacements=t.serverReplacements instanceof Array?t.serverReplacements.map(function(e){return[e[0],e[1].toLowerCase(),new RegExp(e[0].toLowerCase(),"gi")]}):[],this.dataReplacements=t.dataReplacements instanceof Array?t.dataReplacements.map(function(e){return[e[0],e[1].toLowerCase(),new RegExp(e[0].toLowerCase(),"gi")]}):[],this._appliedReplacements={serverReplacements:{},dataReplacements:{},disambigDataReplacements:{}},this.disambigProp=t.disambigProp,this.uniqueIdProp=n(t.uniqueIdProp,"FID"),this.nameProp=t.nameProp,this.textCode=n(t.textCodes,!1),this.regions=[],this.regionNames=[],this._idIndex={},this.regionIdsFile=t.regionIdsFile,this.regionDisambigIdsFile=t.regionDisambigIdsFile,this._loadRegionIDsPromises=void 0,this._loadRegionNamesPromise=void 0,this.corsProxy=r};function g(e,t,r){if(a(t)){var i;i="number"==typeof t?String(t):t.toLowerCase().trim();var n=e[r];return void 0===n||0===n.length?i:void 0!==e._appliedReplacements[r][i]?e._appliedReplacements[r][i]:(n.forEach(function(e){i=i.replace(e[2],e[1])}),e._appliedReplacements[r][t]=i,i)}}function v(e,t,r){if(!a(t)||""===t)return-1;var i=g(e,t,"dataReplacements"),n=e._idIndex[i];if(!a(n))return-1;if("number"==typeof n)return n;var o=n;if(!a(r))return console.warn("Ambiguous value found in region mapping: "+i),o[0];for(var s=g(e,r,"disambigDataReplacements"),l=0;l<o.length;l++)if(e.regions[o[l]][e.disambigProp]===s)return o[l];return-1}function y(e,t){for(var r=0;r<t.length;r++)for(var i=new RegExp("^"+t[r]+"$","i"),a=0;a<e.length;a++)if(i.test(e[a]))return e[a]}m.prototype.setDisambigProperties=function(e){this.disambigDataReplacements=e.dataReplacements,this.disambigServerReplacements=e.serverReplacements,this.disambigAliases=e.aliases},m.prototype.loadRegionIDs=function(){var e=this;function t(t,r,n,s){return a(t)||a(r)?((c=a(t)?u(t):function(e,t){if("WMS"!==e.serverType)throw new o("Cannot fetch region ids for region providers that are not WMS");var r=h(e.server).addQuery({service:"wfs",version:"2.0",request:"getPropertyValue",typenames:e.layerName}),i=e.corsProxy.getURLProxyIfNecessary(r.setQuery("valueReference",t).toString());return l(i).then(function(e){var r=f(e);if(!a(r.member)){console.log(e);var i=a(r.Exception)?"<br/><br/>"+r.Exception.ExceptionText:"";throw new p({title:"CSV region mapping",message:"Couldn't load region boundaries for region "+t+i})}if(r.member instanceof Array||(r.member=[r.member]),1===r.member.length&&!a(r.member[0]))throw new p({title:"CSV region mapping",message:"Zero region boundaries found for region "+t});return{values:r.member.map(function(e){return e[t]})}})}(e,r)).then(function(t){!function(e,t,r,n){var o="number"==typeof t[0],s=a(r);s||(r="id");t.forEach(function(t,l){a(e.regions[l])||(e.regions[l]={}),o||(t=t.toLowerCase(),t=g(e,t,n)),e.regions[l][r]=t,s||(a(e._idIndex[t])?"object"===i(e._idIndex[t])?e._idIndex[t].push(l):e._idIndex[t]=[e._idIndex[t],l]:e._idIndex[t]=l,e.regions[l][e.uniqueIdProp]=l)})}(e,t.values,n,s)}).otherwise(function(e){throw console.log(e),e}),c):d();var c}if(this.regions.length>0)return d();if(void 0===this.server)throw new o("No server for region mapping defined: "+this.regionType);return a(this._loadRegionIDsPromises)||(this._loadRegionIDsPromises=[t(this.regionIdsFile,this.regionProp,void 0,"serverReplacements"),t(this.regionDisambigIdsFile,this.disambigProp,this.disambigProp,"disambigServerReplacements")]),d.all(this._loadRegionIDsPromises)},m.prototype.loadRegionNames=function(){if(a(this._loadRegionNamesPromise))return this._loadRegionNamesPromise;var e=this.nameProp||this.regionProp,t=h(this.analyticsWmsServer).addQuery({service:"wfs",version:"2.0",request:"getPropertyValue",typenames:this.analyticsWmsLayerName}).setQuery("valueReference",e).toString();this.corsProxy.shouldUseProxy(t)&&(t=this.corsProxy.getURL(t));var r=this;return this._loadRegionNamesPromise=l(t).then(function(t){var i=f(t);if(!a(i.member)){console.log(t);var n=a(i.Exception)?"<br/><br/>"+i.Exception.ExceptionText:"";throw new p({title:"CSV region mapping",message:"Couldn't load region names for region type "+r.regionType+n})}if(i.member instanceof Array||(i.member=[i.member]),1===i.member.length&&!a(i.member[0]))throw new p({title:"CSV region mapping",message:"Zero region names found for region type "+r.regionType});return r.regionNames=i.member.map(function(t){return t[e]}),r.regionNames}),this._loadRegionNamesPromise},m.prototype.mapRegionsToIndicesInto=function(e,t,r,i,n,l){if(this.regions.length<1)throw new o("Region provider is not ready to match regions.");a(t)||(t=[]);for(var u=a(n)&&a(l),d=new Array(this.regions.length),p=0;p<e.length;p++)if(a(e[p])){if(u){var f=n[p];if(!a(f))continue;if(!c.contains(f,l))continue}var h=v(this,e[p],t[p]);if(h<0)a(r)&&r.push(p);else if(a(d[h])){if(u){var m=n[d[h]],g=n[p];if(s.greaterThan(g.start,m.start)){d[h]=p;continue}if(s.lessThan(g.start,m.start))continue}a(i)&&i.push(p)}else d[h]=p}return d},m.prototype.getColorLookupFunc=function(e,t){var r=e.map(t);return function(e){return r[e]}},m.prototype.findRegionVariable=function(e){return y(e,this.aliases)},m.prototype.findDisambigVariable=function(e){if(a(this.disambigAliases)&&0!==this.disambigAliases.length)return y(e,this.disambigAliases)},m.prototype.getRegionFeature=function(e,t,r){if(!a(t))return d(void 0);if(a(r)&&r.id===t.id)return d(r);var i=this.analyticsWmsServer||this.server;return e.corsProxy.shouldUseProxy(i)&&(i=e.corsProxy.getURL(i)),i=new h(i).search("").addQuery({service:"WFS",version:"1.1.0",request:"GetFeature",typeName:this.layerName,outputFormat:"JSON",cql_filter:"FID="+t.FID}).toString(),u(i).then(function(e){return a(e)&&a(e.features)?e.features[0]:void 0})},e.exports=m},function(e,t,r){"use strict";e.exports=function(e){return function e(t,r){for(var i=0;i<t.length;i++){var a=t[i];Array.isArray(a)?e(a,r):r.push(a)}return r}(e,[])}},function(e,t,r){"use strict";var i=r(8),a=r(154),n=r(36);e.exports=function(e,t,r){var o={url:t,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({url:r})};return a(o).then(function(t){var r=JSON.parse(t);if(!i(r.token))throw new n({title:"Token Error",message:'<p>The token server responded with an invalid token.</p><p>Please report it by sending an email to <a href="mailto:'+e.supportEmail+'">'+e.supportEmail+"</a>.</p>"});return r.token}).otherwise(function(){throw new n({title:"Token Error",message:'<p>Unable to request a token from the token server.</p><p>Please report it by sending an email to <a href="mailto:'+e.supportEmail+'">'+e.supportEmail+"</a>.</p>"})})}},function(e,t,r){"use strict";var i=r(8);e.exports=function(e,t){if(!i(e))return!1;for(var r=0;r<t.length;++r)if(e.indexOf(t[r])>=0)return!0;return!1}},function(e,t,r){"use strict";var i=r(8),a=r(29),n=r(598);e.exports=function(e){for(var t,r=0;r<e.length;++r)if(i(e[r]))if(i(t)){var o=e[r];i(o)&&(t=n(t,o,t))}else t=a.clone(e[r]);return t}},function(e,t,r){"use strict";var i=r(8),a=r(11),n=r(29);e.exports=function(e,t,r){if(!i(e))throw new a("first is required");if(!i(t))throw new a("second is required");var o=Math.min(e.west,t.west),s=Math.min(e.south,t.south),l=Math.max(e.east,t.east),u=Math.max(e.north,t.north);return i(r)?(r.west=o,r.south=s,r.east=l,r.north=u):r=new n(o,s,l,u),r}},,,,,,,,function(e,t,r){"use strict";var i=r(51),a=r(41),n=r(9),o=r(8),s=r(10),l=r(11),u=r(17),c=r(23),d=r(70),p=r(234),f=r(225),h=r(18),m=r(1063),g=r(607),v=r(254),y=r(27),b=r(118),_=r(46),w=r(369),S=r(257),C=r(263),x=r(157),E=r(36),I=r(532),k=r(128),L=["AUS","STE","SA4","SA3","SA2","SA1","CED","LGA","POA","SED"],P=function(e,t){S.call(this,e,t),this.datasetId=void 0,this.canDisplayPercent=!0,this.displayPercent=!0,this.regionTypeConcept=void 0,this.regionConcept=void 0,this.conceptNamesUrl=void 0,this.regionPopulationsUrlPrefix=void 0,this.filter=[],this.conceptsNotToLoad=void 0,this.uniqueValuedConcepts=[],this._baseUrl=void 0,this._conceptIds=void 0,this._conceptNamesMap=void 0,this._conceptCodes=[],this._loadConceptsPromise=void 0,this._loadConceptIdsAndNameMapPromise=void 0,this._loadDataFilePromise={},this._concepts=[],c.track(this,["datasetId","displayPercent","canDisplayPercent","_concepts"]),b(this,"concepts",{get:function(){return this._concepts}}),c.getObservable(this,"displayPercent").subscribe(M.bind(null,this),this)};function T(e,t){throw new E({sender:e,title:"Item is not available",message:"An error occurred while invoking "+t+' on the ABS ITT server.  <p>This error may indicate that the item you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href="mailto:'+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a>.</p>"})}function M(e){return o(e._regionMapping)?(e._regionMapping.isLoading=!0,function(e){if(!o(e._loadConceptIdsAndNameMapPromise)){var t={method:"GetDatasetConcepts",datasetid:e.datasetId,format:"json"},r=e._baseUrl+"?"+f(t),i=d(r).then(function(t){if(e._conceptIds=t.concepts,-1===t.concepts.indexOf(e.regionConcept)||-1===t.concepts.indexOf("REGIONTYPE"))throw new l("datasetId "+e.datasetId+" concepts ["+t.concepts.join(", ")+'] do not include "'+e.regionConcept+'" and "REGIONTYPE".')}).otherwise(T.bind(null,e,"GetDatasetConcepts")),a=d(e.conceptNamesUrl).then(function(t){e._conceptNamesMap=t});e._loadConceptIdsAndNameMapPromise=h.all([a,i])}return e._loadConceptIdsAndNameMapPromise}(e).then(function(){return function(e){if(!o(e._loadConceptsPromise)){var t=[],r=e._conceptIds.filter(function(t){return-1===e.conceptsNotToLoad.indexOf(t)}).map(function(r){var i={method:"GetCodeListValue",datasetid:e.datasetId,concept:r,format:"json"},a=e._baseUrl+"?"+f(i);return d(a).then(function(i){var a=i.codes;r===e.regionTypeConcept&&(a=a.filter(function(e){return L.indexOf(e.code)>=0}));var n=new m({id:r,codes:a,filter:e.filter,allowMultiple:!(r===e.regionTypeConcept||e.uniqueValuedConcepts.indexOf(r)>=0),activeItemsChangedCallback:function(){e.terria.pickedFeatures=void 0,M(e)}});n.name=function(e,t){if(!o(e[t.name]))return t.name;if("string"==typeof e[t.name])return e[t.name];for(var r=e[t.name],i=0;i<t.items.length;i++)if(o(r[t.items[i].name]))return r[t.items[i].name];return r["*"]||t.name}(e._conceptNamesMap,n),t.push(n)}).otherwise(T.bind(null,e,"GetCodeListValue"))});e._loadConceptsPromise=h.all(r).then(function(){var r=e.regionTypeConcept;t.sort(function(e,t){return e.id===r?-1:t.id===r?1:e.name>t.name?1:-1}),e._concepts=t})}return e._loadConceptsPromise}(e)}).then(function(){return function(e){for(var t=e._concepts.map(function(e){return e.activeItems}),r=t.length-1;r>=0;r--)if(0===t[r].length)return h();if(!o(A(e)))return h();var i=g(t),a=i.map(function(e){return e.map(function(e,t){return e.concept.id+"."+e.code}).join(",")}).map(function(t){if(!o(e._loadDataFilePromise[t])){var r={method:"GetGenericData",datasetid:e.datasetId,and:t,or:e.regionConcept,format:"csv"},i=e._baseUrl+"?"+f(r);e._loadDataFilePromise[t]=p(i).then(j.bind(void 0,e))}return e._loadDataFilePromise[t]}),n=e.regionPopulationsUrlPrefix+A(e)+".csv";return a.push(p(n).then(j.bind(void 0,e))),h.all(a).then(function(e){return{tableStructures:e,activeCombinations:i}})}(e)}).then(function(t){return e._tableStructure.columns=function(e,t){if(!o(t))return[];var r=t.tableStructures,i=t.activeCombinations;r.length<=1&&T(e,"GetGenericData");var a=r.pop(),n=r[0],s=n.columns[0],l=n.columns[2],u=o(s)&&s.minimumValue!==s.maximumValue;u?(e.canDisplayPercent=!1,e.displayPercent=!1):e.canDisplayPercent=!0;var c=function(e,t,r){return t.map(function(t,i){var a=t.getColumnNames();0===a.length?T(e,"GetGenericData"):v(a,["Time","Value",e.regionConcept,"Description"])||function(e,t){throw new E({sender:e,title:"Unexpected data format",message:'An error occurred while invoking GetGenericData on the ABS ITT server: the data format has changed. <p>Please report this error by sending an email to <a href="mailto:'+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a>.</p>"})}(e);var n=r[i],o=t.columns[a.indexOf("Value")],s=n.filter(function(t){return t.concept.id!==e.regionTypeConcept}).map(function(e){return e.name.trim()}).reverse().join(" ");return o=new C(s,o.values,o.options)})}(e,r,i),d=new C("Total selected",C.sumValues(c),{active:!e.displayPercent});c.length>1?c.push(d):e.displayPercent||(c[0].isActive=!0);if(!u){var p=a.columns;if(v(p[0].values.slice(0,l.values.length),l.values)){var f=new C("Total population",p[p.length-1].values.slice(0,l.values.length));c.push(f);var h=C.divideValues(d,f,0).map(function(e){return e<.01?Math.round(1e3*e)/10:Math.round(1e4*e)/100});c.push(new C("Total selected percent",h,{active:e.displayPercent}))}else console.error("Region ordering is different between total population data file and ABS data set."),e.canDisplayPercent=!1,e.displayPercent=!1,c[c.length-1].isActive=!0}var m=function(e,t){var r=e.toLowerCase();return"aus"===r?r:t.subtype===I.YEAR&&t.minimumValue===t.maximumValue?r+"_code_"+t.minimumValue:r+"_code"}(i[0].filter(function(t){return t.concept.id===e.regionTypeConcept})[0].code,s);u||(s.options.type=k.SCALAR);return s=new C("Year",s.values,s.options),l=new C(m,l.values,l.options),r.slice(1).forEach(function(t){v(t.columns[0],s)&&v(t.columns[2],l)||function(e){throw new E({sender:e,title:"Data cannot be merged",message:'An error occurred while invoking GetGenericData on the ABS ITT server: the individual data files cannot be merged. <p>Please report this error by sending an email to <a href="mailto:'+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a>.</p>"})}(e)}),c.unshift(s),c.unshift(l),c}(e,t),0===e._tableStructure.columns.length&&(e._regionMapping.hideImageryLayer(),e.terria.currentViewer.notifyRepaintRequired()),e._regionMapping.loadRegionDetails()}).then(function(t){return t&&(e._regionMapping.setRegionColumnType(),e._regionMapping.isLoading=!1),h()})):h()}function A(e){var t=e._concepts[0].activeItems;if(1===t.length)return t[0].code}function j(e,t){var r=new x("ABS_ITT");return r.loadFromCsv(t),r}y(S,P),s(P.prototype,{type:{get:function(){return"abs-itt"}},typeName:{get:function(){return"ABS.Stat"}},propertiesForSharing:{get:function(){return P.defaultPropertiesForSharing}},serializers:{get:function(){return P.defaultSerializers}}}),(P.defaultPropertiesForSharing=a(S.defaultPropertiesForSharing)).push("filter"),P.defaultPropertiesForSharing.push("regionConcept"),P.defaultPropertiesForSharing.push("regionTypeConcept"),P.defaultPropertiesForSharing.push("displayPercent"),u(P.defaultPropertiesForSharing),(P.defaultSerializers=a(S.defaultSerializers)).filter=function(e,t){var r=e._concepts.map(function(e){return e.toFilter()});t.filter=r.reduce(function(e,t){return e.concat(t)},[])},u(P.defaultSerializers),P.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.datasetId]},P.prototype._load=function(){var e,t;return this._baseUrl=(e=this,t=this.url,_(e,function(e){var t=new i(e);return t.search(""),t.toString()}(t))),this.conceptNamesUrl=n(this.conceptNamesUrl,"data/abs_names.json"),this.regionPopulationsUrlPrefix=n(this.regionPopulationsUrlPrefix,"data/2011Census_TOT_"),this.regionTypeConcept=n(this.regionTypeConcept,"REGIONTYPE"),this.regionConcept=n(this.regionConcept,"REGION"),this.conceptsNotToLoad=["STATE","FREQUENCY",this.regionConcept],this._tableStructure=new x(this.name,{displayDuration:this._tableStyle.displayDuration}),this._regionMapping=new w(this,this._tableStructure,this._tableStyle),M(this)},P.prototype.startPolling=function(){},e.exports=P},function(e,t,r){"use strict";var i=r(1065);e.exports=function(e){var t=[[]];return e.forEach(function(e){t=i(t.map(function(t){return e.map(function(e){return t.concat(e)})}))}),t}},function(e,t,r){"use strict";var i=r(8);function a(e,t){-1===e.indexOf(t)&&e.push(t)}e.exports=function(e){var t,r;return t=e.filter(function(e){return i(e)}).reduce(function(e,t){return t._filterIndex?t._filterIndex.forEach(a.bind(void 0,e)):a(e,t),e},[]),(r=function(){var e=arguments;return!t.some(function(t){return!t.apply(this,e)},this)})._filterIndex=t,r}},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(51),n=r(41),o=r(8),s=r(10),l=r(17),u=r(23),c=r(70),d=r(18),p=r(36),f=r(104),h=r(27),m=r(46),g=r(320),v=r(321),y=function(e){f.call(this,e,"esri-featureServer-group"),this.url="",this.dataCustodian=void 0,this.blacklist=void 0,this.itemProperties=void 0,u.track(this,["url","dataCustodian","blacklist","itemProperties"])};function b(e){var t=e.terria,r=new a(e.url).addQuery("f","json");return d(c(m(e,r.toString(),"1d"))).then(function(r){if(!r||!r.layers)throw new p({title:"Invalid ArcGIS Feature Service",message:"An error occurred while invoking the ArcGIS Feature Service.  The server's response does not appear to be a valid Feature Service document.  <p>If you entered the link manually, please verify that the link is correct.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href=\"mailto:"+t.supportEmail+'">'+t.supportEmail+"</a>.</p>"});if(o(r.documentInfo)){var i=e.dataCustodian;!o(i)&&o(r.documentInfo.Author)&&(i=r.documentInfo.Author),"Unnamed Item"===e.name&&o(r.documentInfo.Title)&&r.documentInfo.Title.length>0&&(e.name=r.documentInfo.Title)}!function(e,t,r,i,a){r instanceof Array||(r=[r]);for(var n=0;n<r.length;++n){var s=r[n];-1===t&&null!==s.parentLayer&&o(s.parentLayer)||(-1===t||s.parentLayer&&s.parentLayer.id===t)&&(e.blacklist&&e.blacklist[s.name]?console.log("Provider Feedback: Filtering out "+s.name+" ("+s.id+") because it is blacklisted."):i.add(_(e,s,a)))}}(e,-1,r.layers,e,i)}).otherwise(function(r){throw new p({sender:e,title:"Group is not available",message:'An error occurred while invoking the ArcGIS Feature Service. <p>If you entered the link manually, please verify that the link is correct.</p><p>This error may also indicate that the server does not support <a href="http://enable-cors.org/" target="_blank">CORS</a>.  If this is your server, verify that CORS is enabled and enable it if it is not.  If you do not control the server, please contact the administrator of the server and ask them to enable CORS.  Or, contact the '+t.appName+' team by emailing <a href="mailto:'+t.supportEmail+'">'+t.supportEmail+"</a> and ask us to add this server to the list of non-CORS-supporting servers that may be proxied by "+t.appName+' itself.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href="mailto:'+t.supportEmail+'">'+t.supportEmail+"</a>.</p>"})})}function _(e,t,r){var n=new v(e.terria);n.name=g(t.name),n.dataCustodian=r;var o=new a(e.url).segment(t.id+"");return n.url=o.toString(),n.layers=t.id.toString(),n.maximumScale=t.maxScale,"object"===i(e.itemProperties)&&n.updateFromJson(e.itemProperties),n}h(f,y),s(y.prototype,{type:{get:function(){return"esri-featureServer-group"}},typeName:{get:function(){return"ArcGIS Feature Server Group"}},serializers:{get:function(){return y.defaultSerializers}}}),(y.defaultSerializers=n(f.defaultSerializers)).items=f.enabledShareableItemsSerializer,y.defaultSerializers.isLoading=function(e,t,r,i){},l(y.defaultSerializers),y.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.blacklist]},y.prototype._load=function(){return b(this)},y.loadFeatureServer=function(e){return b(e)},e.exports=y},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(51),n=r(41),o=r(8),s=r(10),l=r(17),u=r(23),c=r(70),d=r(18),p=r(36),f=r(104),h=r(27),m=r(46),g=r(320),v=r(239),y=function(e){f.call(this,e,"esri-mapServer-group"),this.url="",this.dataCustodian=void 0,this.blacklist=void 0,this.itemProperties=void 0,u.track(this,["url","dataCustodian","blacklist","itemProperties"])};function b(e){function t(t){var r=new a(e.url).segment(t).addQuery("f","json");return c(m(e,r.toString(),"1d"))}var r=e.terria;return d.all([t(""),t("layers"),t("legend")]).then(function(t){var i=t[0],a=t[1],n=t[2];if(!(i&&i.layers&&a&&a.layers))throw new p({title:"Invalid ArcGIS Map Service",message:"An error occurred while invoking the ArcGIS Map Service.  The server's response does not appear to be a valid Map Service document.  <p>If you entered the link manually, please verify that the link is correct.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href=\"mailto:"+r.supportEmail+'">'+r.supportEmail+"</a>.</p>"});var s=e.dataCustodian;!o(s)&&o(i.documentInfo)&&o(i.documentInfo.Author)&&(s=i.documentInfo.Author),"Unnamed Item"===e.name&&o(i.mapName)&&i.mapName.length>0&&(e.name=i.mapName),function e(t,r,i,a,n,s,l,u){s instanceof Array||(s=[s]);for(var c=0;c<s.length;++c){var d=s[c];if((-1!==n||null===d.parentLayer||!o(d.parentLayer))&&(-1===n||d.parentLayer&&d.parentLayer.id===n))if(t.blacklist&&t.blacklist[d.name])console.log("Provider Feedback: Filtering out "+d.name+" ("+d.id+") because it is blacklisted.");else if("Group Layer"===d.type){var p=new f(t.terria);p.name=g(d.name),l.add(p),e(t,r,i,a,d.id,s,p,u)}else"Feature Layer"!==d.type&&"Raster Layer"!==d.type&&"Mosaic Layer"!==d.type||l.add(_(t,r,i,a,d,u))}}(e,i,a,n,-1,a.layers,e,s)}).otherwise(function(t){throw new p({sender:e,title:"Group is not available",message:'An error occurred while invoking the ArcGIS Map Service. <p>If you entered the link manually, please verify that the link is correct.</p><p>This error may also indicate that the server does not support <a href="http://enable-cors.org/" target="_blank">CORS</a>.  If this is your server, verify that CORS is enabled and enable it if it is not.  If you do not control the server, please contact the administrator of the server and ask them to enable CORS.  Or, contact the '+r.appName+' team by emailing <a href="mailto:'+r.supportEmail+'">'+r.supportEmail+"</a> and ask us to add this server to the list of non-CORS-supporting servers that may be proxied by "+r.appName+' itself.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href="mailto:'+r.supportEmail+'">'+r.supportEmail+"</a>.</p>"})})}function _(e,t,r,a,n,o){var s=new v(e.terria);return s.name=g(n.name),s.dataCustodian=o,s.url=e.url,s.layers=n.id.toString(),s.maximumScale=n.maxScale,s.updateFromMetadata(t,r,a,!0,n),"object"===i(e.itemProperties)&&s.updateFromJson(e.itemProperties),s}h(f,y),s(y.prototype,{type:{get:function(){return"esri-mapServer-group"}},typeName:{get:function(){return"ArcGIS Map Server Group"}},serializers:{get:function(){return y.defaultSerializers}}}),(y.defaultSerializers=n(f.defaultSerializers)).items=f.enabledShareableItemsSerializer,y.defaultSerializers.isLoading=function(e,t,r,i){},l(y.defaultSerializers),y.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.blacklist]},y.prototype._load=function(){return b(this)},y.loadMapServer=function(e){return b(e)},e.exports=y},,function(e,t,r){"use strict";var i=r(613),a=r(425),n=r(86),o=r(10),s=r(23),l=r(155),u=function(e){l.call(this,e),this.mapStyle=a.AERIAL,this.key=void 0,s.track(this,["mapStyle","key"])};r(27)(l,u),o(u.prototype,{type:{get:function(){return"bing-maps"}},typeName:{get:function(){return"Bing Maps"}}}),u.prototype._createImageryProvider=function(){var e=new i({url:"//dev.virtualearth.net",mapStyle:this.mapStyle,key:this.key});return e._credit=new n('<a href="http://www.bing.com" target="_blank">Bing</a>'),e.defaultGamma=1,e},e.exports=u},,function(e,t,r){"use strict";var i=r(181),a=r(10),n=r(23),o=r(155),s=r(27),l=r(46),u=function(e){o.call(this,e),this.minimumLevel=0,this.maximumLevel=25,this.attribution=void 0,this.subdomains=void 0,this.tileDiscardPolicy=void 0,n.track(this,["minimumLevel","maximumLevel","attribution","subdomains","tileDiscardPolicy"])};s(o,u),a(u.prototype,{type:{get:function(){return"url-template"}},typeName:{get:function(){return"URL Template Map Server"}}}),u.prototype._createImageryProvider=function(){return new i({url:l(this,this.url),maximumLevel:this.maximumLevel,minimumLevel:this.minimumLevel,credit:this.attribution,subdomains:this.subdomains,tileDiscardPolicy:this.tileDiscardPolicy,rectangle:this.rectangle})},e.exports=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(321),n=r(239),o=r(92),s=r(41),l=r(442),u=r(443),c=r(179),d=r(444),p=r(8),f=r(10),h=r(17),m=r(79),g=r(27),v=r(330),y=r(70),b=r(117),_=r(36),w=r(46),S=r(29),C=r(51),x=r(332),E=r(172),I=r(445),k=r(333),L=r(18);function P(e){o.call(this,e),this.resourceId=void 0,this.datasetId=void 0,this.allowAnyResourceIfResourceIdNotFound=!0,this.allowWms=!0,this.wmsResourceFormat=/^wms$/i,this.allowWfs=!0,this.wfsResourceFormat=/^wfs$/i,this.allowKml=!0,this.kmlResourceFormat=/^kml$/i,this.allowCsv=!0,this.csvResourceFormat=/^csv-geo-/i,this.allowEsriMapServer=!0,this.allowEsriFeatureServer=!0,this.esriMapServerResourceFormat=/^esri rest$/i,this.esriFeatureServerResourceFormat=/^esri rest$/i,this.allowGeoJson=!0,this.geoJsonResourceFormat=/^geojson$/i,this.allowCzml=!0,this.czmlResourceFormat=/^czml$/i,this.itemProperties=void 0}g(o,P),f(P.prototype,{type:{get:function(){return"ckan-resource"}},typeName:{get:function(){return"CKAN Resource"}},metadata:{get:function(){var e=new b;return e.isLoading=!1,e.dataSourceErrorMessage="This data source does not have any details available.",e.serviceErrorMessage="This service does not have any details available.",e}},updaters:{get:function(){return P.defaultUpdaters}},serializers:{get:function(){return P.defaultSerializers}}}),P.defaultUpdaters=s(o.defaultUpdaters),P.defaultUpdaters.wmsResourceFormat=l("wmsResourceFormat"),P.defaultUpdaters.wfsResourceFormat=l("wfsResourceFormat"),P.defaultUpdaters.kmlResourceFormat=l("kmlResourceFormat"),P.defaultUpdaters.csvResourceFormat=l("csvResourceFormat"),P.defaultUpdaters.esriMapServerResourceFormat=l("esriMapServerResourceFormat"),P.defaultUpdaters.esriFeatureServerResourceFormat=l("esriFeatureServerResourceFormat"),P.defaultUpdaters.geoJsonResourceFormat=l("geoJsonResourceFormat"),P.defaultUpdaters.czmlResourceFormat=l("czmlResourceFormat"),h(P.defaultUpdaters),P.defaultSerializers=s(o.defaultSerializers),P.defaultSerializers.wmsResourceFormat=u("wmsResourceFormat"),P.defaultSerializers.wfsResourceFormat=u("wfsResourceFormat"),P.defaultSerializers.kmlResourceFormat=u("kmlResourceFormat"),P.defaultSerializers.csvResourceFormat=u("csvResourceFormat"),P.defaultSerializers.esriMapServerResourceFormat=u("esriMapServerResourceFormat"),P.defaultSerializers.esriFeatureServerResourceFormat=u("esriFeatureServerResourceFormat"),P.defaultSerializers.geoJsonResourceFormat=u("geoJsonResourceFormat"),P.defaultSerializers.czmlResourceFormat=u("czmlResourceFormat"),h(P.defaultSerializers),P.createCatalogItemFromResource=function(e){var t=e.resource,r=e.itemData,o=e.extras,s=e.parent;if(!t.__filtered){if(!p(o)&&(o={},p(r.extras)))for(var l=0;l<r.extras.length;l++)o[r.extras[l].key]=r.extras[l].value;var u=[[e.wmsResourceFormat,E],[e.wfsResourceFormat,k],[e.esriMapServerResourceFormat,n,/MapServer/],[e.esriFeatureServerResourceFormat,a,/FeatureServer/],[e.kmlResourceFormat,v,void 0,/\.zip$/],[e.geoJsonResourceFormat,m],[e.czmlResourceFormat,d],[e.csvResourceFormat,c]].filter(function(e){return p(e[0])}),f=t.wms_url;if(p(f)||(f=t.url,p(f))){var h=u.filter(function(e){return t.format.match(e[0])&&(!p(e[2])||f.match(e[2]))&&(!p(e[3])||!f.match(e[3]))});if(0!==h.length){var g,y=h[0][1]===E,b=h[0][1]===k,_=new C(f),w=_.search(!0),L=f;if(y||b){var P=t.wms_layer||w.LAYERS||w.layers||w.typeName;if(p(P))(g=y?new E(e.terria):new k(e.terria)).layers=P;else if(y&&e.allowWmsGroups)g=new x(e.terria);else{if(!b||!e.allowWfsGroups)return;g=new I(e.terria)}_.search(""),L=_.toString()}else g=new h[0][1](e.terria);if(g){e.useResourceName?g.name=t.name:g.name=r.title,r.notes&&(g.info.push({name:"Dataset Description",content:r.notes}),g.info.push({name:"Data Description",content:""})),p(t.description)&&g.info.push({name:"Resource Description",content:t.description}),p(r.license_url)?g.info.push({name:"Licence",content:"["+(r.license_title||r.license_url)+"]("+r.license_url+")"}):p(r.license_title)&&g.info.push({name:"Licence",content:r.license_title}),p(r.author)&&g.info.push({name:"Author",content:r.author}),p(r.contact_point)&&g.info.push({name:"Contact",content:r.contact_point}),p(r.metadata_created)&&g.info.push({name:"Created",content:A(r.metadata_created)}),p(r.metadata_modified)&&g.info.push({name:"Modified",content:A(r.metadata_modified)}),p(r.update_freq)&&g.info.push({name:"Update Frequency",content:r.update_freq}),g.url=L;var T=r.geo_coverage||o.geo_coverage;if(p(T)){var M=T.split(",");4===M.length&&(g.rectangle=S.fromDegrees(M[0],M[1],M[2],M[3]))}return g.dataUrl=new C(e.ckanBaseUrl).segment("dataset").segment(r.name).toString(),g.dataUrlType="direct",p(e.dataCustodian)?g.dataCustodian=e.dataCustodian:r.organization&&r.organization.title&&(g.dataCustodian=r.organization.description||r.organization.title),"object"===i(e.itemProperties)&&g.updateFromJson(e.itemProperties),p(s)&&(g.id=s.uniqueId+"/"+t.id),g}}}}function A(e){return e.match(/^\d\d\d\d-\d\d-\d\d.*/)?e.substr(0,10):e}},P.shortHumanReadableTypeNames={wms:"WMS","wms-getCapabilities":"WMS",wfs:"WFS","wfs-getCapabilities":"WFS","esri-mapServer":"MapServer","esri-featureServer":"FeatureServer",kml:"KML",geojson:"GeoJSON",czml:"CZML",csv:"CSV"},P.prototype._load=function(){var e=new C(this.url).segment("api/3/action");if(!p(this.resourceId)&&!p(this.datasetId))throw new _({sender:this,title:"resourceId or datasetId must be specified",message:"CkanCatalogItem requires that either resourceId or datasetId be specified."});var t,r=this;if(p(this.datasetId))t=L(this.datasetId);else{var i=e.clone().segment("resource_show").addQuery({id:this.resourceId}),a=w(this,i.toString(),"1d");t=y(a).then(function(e){if(!e.success)throw new _({sender:r,title:"Error retrieving CKAN URL",message:"Could not retrieve URL as JSON: "+r.url+"."});if(!p(e.result)||!p(e.result.package_id))throw new _({sender:r,title:"Invalid CKAN resource JSON",message:"The resource returned from the CKAN server does not appear to have a package_id."});return e.result.package_id})}return t.then(function(t){var i=e.clone().segment("package_show").addQuery({id:t}),a=w(r,i.toString(),"1d");return y(a).then(function(e){if(!e.success)throw new _({sender:r,title:"Error retrieving CKAN URL",message:"Could not retrieve URL as JSON: "+a+"."});var t=e.result.resources,i=t;p(r.resourceId)&&0===(i=t.filter(function(e){return e.id===r.resourceId})).length&&r.allowAnyResourceIfResourceIdNotFound&&(i=t);for(var n=0;n<i.length;++n){var o=P.createCatalogItemFromResource({terria:r.terria,resource:i[n],itemData:e.result,ckanBaseUrl:r.url,wmsResourceFormat:r.allowWms?r.wmsResourceFormat:void 0,kmlResourceFormat:r.allowKml?r.kmlResourceFormat:void 0,csvResourceFormat:r.allowCsv?r.csvResourceFormat:void 0,esriMapServerResourceFormat:r.allowEsriMapServer?r.esriMapServerResourceFormat:void 0,geoJsonResourceFormat:r.allowGeoJson?r.geoJsonResourceFormat:void 0,czmlResourceFormat:r.allowCzml?r.czmlResourceFormat:void 0,dataCustodian:r.dataCustodian,itemProperties:r.itemProperties});if(p(o))return o.name=r.name,o}throw new _({sender:r,title:"No compatible resources found",message:p(r.resourceId)?"The CKAN dataset does not have a resource with the ID "+r.resourceId+" or it does not have a supported format.":"The CKAN dataset does not have any resources with a supported format."})})})},e.exports=P},function(e,t,r){"use strict";var i=[],a=function e(t,r,a,n){if(!((n=n||0)>=i.length)){if(i[n].matcher&&!i[n].matcher(t)||i[n].requiresLoad&&!a)return e(t,r,a,n+1);var o=new i[n].constructor(r);return a?(o.url=t,o.name=t,o.load().yield(o).otherwise(function(i){return console.log(i),e(t,r,a,n+1)})):o}};a.register=function(e,t,r){i.push({matcher:e,constructor:t,requiresLoad:r})},e.exports=a},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(104),n=r(41),o=r(8),s=r(10),l=r(17),u=r(27),c=r(23),d=r(158),p=r(46),f=r(51),h=r(647),m=r(151);function g(e){a.call(this,e),this.url="",this.executeWithHttpGet=!1,this.itemProperties=void 0,c.track(this,["url","itemProperties","executeWithHttpGet"])}u(a,g),s(g.prototype,{type:{get:function(){return"wps-getCapabilities"}},typeName:{get:function(){return"Web Processing Service (WPS) Server"}},serializers:{get:function(){return g.defaultSerializers}}}),g.defaultSerializers=n(a.defaultSerializers),g.defaultSerializers.items=function(e,t,r,i){},g.defaultSerializers.isLoading=function(e,t,r,i){},l(g.defaultSerializers),g.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.itemProperties]},g.prototype._load=function(){var e=new f(this.url).search({service:"WPS",request:"GetCapabilities",version:"1.0.0"}),t=p(this,e.toString(),"1d"),r=this;return d(t).then(function(e){var t=m(e).ProcessOfferings;if(o(t)){var a=t.Process;if(o(a)){Array.isArray(a)||(a=[a]);for(var n=0;n<a.length;++n){var s=a[n],l=new h(r.terria);l.url=r.url,l.name=s.Title,l.identifier=s.Identifier,l.executeWithHttpGet=r.executeWithHttpGet,o(s.Abstract)&&(l.description=s.Abstract),"object"===i(r.itemProperties)&&l.updateFromJson(r.itemProperties),r.items.push(l)}}}})},e.exports=g},function(e,t,r){"use strict";var i=r(235),a=r(648),n=r(649),o=r(446),s=r(253),l=r(14),u=r(650),c=r(8),d=r(10),p=r(651),f=r(652),h=r(27),m=r(23),g=r(158),v=r(154),y=r(447),b=r(46),_=r(139),w=r(289),S=r(36),C=r(51),x=r(653),E=r(403),I=r(18),k=r(151),L=r(334),P=r(1144),T=r(448),M=r(238),A=r(421);function j(e){s.call(this,e),this._statusSupported=!1,this._storeSupported=!1,this.url=void 0,this.identifier=void 0,this.executeWithHttpGet=void 0,this.customXmlTemplate=void 0,this.customInputs=void 0,this.resultCatalogItemParameters={},m.track(this,["_parameters","url","identifier","inputs","executeWithHttpGet"])}function D(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function N(e,t,r,i){if(!i||!i.documentElement||"ExecuteResponse"!==i.documentElement.localName)throw new S({sender:e,title:"Invalid WPS server response",message:"An error occurred while accessing the status location on the WPS server for process name "+e.name+".  The server's response does not appear to be a valid ExecuteResponse document.  <p>This error may also indicate that the processing server you specified is temporarily unavailable or there is a problem with your internet connection.  If the problem persists, please report it by sending an email to <a href=\"mailto:"+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a>.</p>"});var a=k(i),n=a.Status;if(!c(n))throw new S({sender:e,title:"Invalid response from WPS server",message:"The response from the WPS server does not include a Status element."});if(c(n.ProcessFailed)){var o="The reason for failure is unknown.";c(n.ProcessFailed.ExceptionReport)&&c(n.ProcessFailed.ExceptionReport.Exception)&&(c(n.ProcessFailed.ExceptionReport.Exception.ExceptionText)?o=n.ProcessFailed.ExceptionReport.Exception.ExceptionText:c(n.ProcessFailed.ExceptionReport.Exception.Exception)&&(o=n.ProcessFailed.ExceptionReport.Exception.Exception)),r.isFailed=!0,r.shortReport="Web Processing Service invocation failed.  More details are available on the Info panel.",r.moreFailureDetailsAvailable=!0,r.info.push({name:"Error Details",content:o})}else if(c(n.ProcessSucceeded)){var s=new x(e.terria);s.name=r.name,s.description=r.description,s.parameters=e.parameters,s.parameterValues=t,s.wpsResponseUrl=a.statusLocation,s.wpsResponse=a,s.dataUrl=a.statusLocation,0===a.statusLocation.indexOf("/")&&(s.dataUrl=e.url.substr(0,e.url.lastIndexOf("/"))+a.statusLocation),r.isEnabled=!1,s.isEnabled=!0,Object.assign(s,e.resultCatalogItemParameters)}else if(c(a.statusLocation)&&r.isEnabled)return _(function(){return g(b(e,a.statusLocation,"1d")).then(function(i){return N(e,t,r,i)})},500)}h(s,j),d(j.prototype,{type:{get:function(){return"wps"}},typeName:{get:function(){return"Web Processing Service (WPS)"}},parameters:{get:function(){return this._parameters}}}),j.parameterConverters=[{id:"ComplexData",inputToFunctionParameter:function(e,t){if(c(t.ComplexData)){var r=t.ComplexData.AllowedValues;if(c(t.ComplexData.AllowedValue)&&(r=t.ComplexData.AllowedValue),c(r)){var i=r.Value.slice();return"string"==typeof i&&(i=[i]),new p({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,possibleValues:i,isRequired:(0|t.minOccurs)>0})}return c(t.ComplexData.AnyValue)?new f({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,isRequired:(0|t.minOccurs)>0}):void 0}},functionParameterToInput:function(e,t,r){return{inputValue:r,inputType:"LiteralData"}}},{id:"LiteralData",inputToFunctionParameter:function(e,t){if(c(t.LiteralData)){var r=t.LiteralData.AllowedValues;if(c(t.LiteralData.AllowedValue)&&(r=t.LiteralData.AllowedValue),c(r)){var i=r.Value.slice();return"string"==typeof i&&(i=[i]),new p({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,possibleValues:i,isRequired:(0|t.minOccurs)>0})}return c(t.LiteralData.AnyValue)?new f({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,isRequired:(0|t.minOccurs)>0}):void 0}},functionParameterToInput:function(e,t,r){return{inputValue:r,inputType:"LiteralData"}}},{id:"DateTime",inputToFunctionParameter:function(e,t){if(c(t.ComplexData)&&c(t.ComplexData.Default)&&c(t.ComplexData.Default.Format)&&c(t.ComplexData.Default.Format.Schema)&&"http://www.w3.org/TR/xmlschema-2/#dateTime"===t.ComplexData.Default.Format.Schema)return new u({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,isRequired:(0|t.minOccurs)>0})},functionParameterToInput:function(e,t,r){return{inputType:"ComplexData",inputValue:u.formatValueForUrl(r)}}},{id:"PointGeometry",inputToFunctionParameter:function(e,t){if(c(t.ComplexData)&&c(t.ComplexData.Default)&&c(t.ComplexData.Default.Format)&&c(t.ComplexData.Default.Format.Schema)){var r=t.ComplexData.Default.Format.Schema;if(0===r.indexOf("http://geojson.org/geojson-spec.html#")&&"point"===r.substring(r.lastIndexOf("#")+1))return new y({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,isRequired:(0|t.minOccurs)>0})}},functionParameterToInput:function(e,t,r){return{inputType:"ComplexData",inputValue:y.formatValueForUrl(r)}}},{id:"LineGeometry",inputToFunctionParameter:function(e,t){if(c(t.ComplexData)&&c(t.ComplexData.Default)&&c(t.ComplexData.Default.Format)&&c(t.ComplexData.Default.Format.Schema)){var r=t.ComplexData.Default.Format.Schema;if(0===r.indexOf("http://geojson.org/geojson-spec.html#")&&"linestring"===r.substring(r.lastIndexOf("#")+1))return new a({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,isRequired:(0|t.minOccurs)>0})}},functionParameterToInput:function(e,t,r){return{inputType:"ComplexData",inputValue:a.formatValueForUrl(r)}}},{id:"PolygonGeometry",inputToFunctionParameter:function(e,t){if(c(t.ComplexData)&&c(t.ComplexData.Default)&&c(t.ComplexData.Default.Format)&&c(t.ComplexData.Default.Format.Schema)){var r=t.ComplexData.Default.Format.Schema;if(0===r.indexOf("http://geojson.org/geojson-spec.html#")&&"polygon"===r.substring(r.lastIndexOf("#")+1))return new o({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,isRequired:(0|t.minOccurs)>0})}},functionParameterToInput:function(e,t,r){return{inputType:"ComplexData",inputValue:o.formatValueForUrl(r)}}},{id:"RectangleGeometry",inputToFunctionParameter:function(e,t){if(c(t.BoundingBoxData)&&c(t.BoundingBoxData.Default)&&c(t.BoundingBoxData.Default.CRS)){var r=E.crsStringToCode(t.BoundingBoxData.Default.CRS),i=t.BoundingBoxData.Default.CRS;if(r!==E.TERRIA_CRS)for(var a=0;a<t.BoundingBoxData.Supported.CRS.length;a++)if(E.crsStringToCode(t.BoundingBoxData.Supported.CRS[a])===E.TERRIA_CRS){r=E.TERRIA_CRS,i=t.BoundingBoxData.Supported.CRS[a];break}if(c(r))return new n({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,isRequired:(0|t.minOccurs)>0,crs:i})}},functionParameterToInput:function(e,t,r){var i,a,n,o,s;return-1!==t.crs.indexOf("crs84")?(i=l.toDegrees(r.west),a=l.toDegrees(r.south),n=l.toDegrees(r.east),o=l.toDegrees(r.north),s="urn:ogc:def:crs:OGC:1.3:CRS84"):(i=l.toDegrees(r.south),a=l.toDegrees(r.west),n=l.toDegrees(r.north),o=l.toDegrees(r.east),s="urn:ogc:def:crs:EPSG:6.6:4326"),{inputType:"BoundingBoxData",inputValue:i+","+a+","+n+","+o+","+s}}},{id:"GeoJsonGeometry",inputToFunctionParameter:function(e,t){if(c(t.ComplexData)&&c(t.ComplexData.Default)&&c(t.ComplexData.Default.Format)&&c(t.ComplexData.Default.Format.Schema)){var r=t.ComplexData.Default.Format.Schema;if(0!==r.indexOf("http://geojson.org/geojson-spec.html#")||0===r.indexOf("http://geojson.org/geojson-spec.html")){var i=new M({terria:e.terria,catalogFunction:e,id:"regionType",name:"Region Type",description:"The type of region to analyze."}),a=new A({terria:e.terria,catalogFunction:e,id:"regionParameter",name:"Region Parameter",regionProvider:i});return new T({terria:e.terria,catalogFunction:e,id:t.Identifier,name:t.Title,description:t.Abstract,isRequired:(0|t.minOccurs)>0,regionParameter:a})}}},functionParameterToInput:function(e,t,r){var i=t.getProcessedValue(r),a=JSON.parse(i.inputValue);return a.crs={type:"EPSG",properties:{code:4326,coordinate_order:[1,0]}},i.inputValue=JSON.stringify(a),i}}],j.prototype._load=function(){var e=new C(this.url).query({service:"WPS",request:"DescribeProcess",version:"1.0.0",Identifier:this.identifier}),t=b(this,e.toString(),"1d"),r=this;return g(t).then(function(e){if(!e||!e.documentElement||"ProcessDescriptions"!==e.documentElement.localName)throw new S({title:"Invalid WPS server",message:"An error occurred while invoking DescribeProcess on the WPS server for process name "+r.name+".  The server's response does not appear to be a valid DescribeProcess document.  <p>This error may also indicate that the processing server you specified is temporarily unavailable or there is a problem with your internet connection.  Try opening the processing server again, and if the problem persists, please report it by sending an email to <a href=\"mailto:"+r.terria.supportEmail+'">'+r.terria.supportEmail+"</a>.</p>"});var t,i=k(e);if(!c(i.ProcessDescription))throw new S({sender:r,title:"Process does not have a process description",message:"The WPS DescribeProcess for this process does not include a ProcessDescription."});function a(){throw new S({sender:r,title:"Process does not have any inputs",message:"This WPS process does not specify any inputs."})}if(r._storeSupported="true"===i.ProcessDescription.storeSupported,r._statusSupported="true"===i.ProcessDescription.statusSupported,c(r.customInputs))t=r.customInputs;else{var n=i.ProcessDescription.DataInputs;c(n)||a(),t=n.Input}c(t)||a(),Array.isArray(t)||(t=[t]),r._parameters=t.map(function(e,t){for(var r=0;r<j.parameterConverters.length;++r){var i=j.parameterConverters[r],a=i.inputToFunctionParameter(e,t);if(c(a))return a.converter=i,a}throw new S({sender:e,title:"Unsupported parameter type",message:"The parameter "+t.Identifier+" is not a supported type of parameter."})}.bind(void 0,r)),""===r.description&&c(i.ProcessDescription.Abstract)&&(r.description=i.ProcessDescription.Abstract)})},j.prototype.invoke=function(){var e=new Date,t=w("%04d-%02d-%02dT%02d:%02d:%02d",e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),r=new i(this.terria);r.name=this.name+" "+t,r.description="This is the result of invoking the "+this.name+" process or service at "+t+" with the input parameters below.";var a='<table class="cesium-infoBox-defaultTable">'+(this.parameters||[]).reduce(function(e,t){return e+'<tr><td style="vertical-align: middle">'+t.name+"</td><td>"+t.formatValueAsString(t.value)+"</td></tr>"},"")+"</table>";r.info.push({name:"Inputs",content:a});var n,o=this;I.all((n=this,n.parameters.map(function(e){var t=e.value;if(c(t)&&""!==t){var r=e.converter.functionParameterToInput(n,e,t);return I(r.inputValue).then(function(t){if(c(t)&&""!==t){if(n.executeWithHttpGet)return e.id+"="+t;var i={inputIdentifier:D(e.id),inputValue:D(t),inputType:D(r.inputType)};return i}})}}).filter(function(e){return c(e)}))).then(function(e){var t;return t=o.executeWithHttpGet?function(e,t,r,i){t=t.join(";");var a=new C(e.url).query({service:"WPS",request:"Execute",version:"1.0.0",Identifier:e.identifier,DataInputs:t});e._statusSupported&&a.addQuery("status",!0);e._storeSupported&&a.addQuery("storeExecuteResponse",!0);var n=b(e,a.toString(),i),o=e.getParameterValues();return g(n).then(function(t){return N(e,o,r,t)})}(o,e,r,"1d"):function(e,t,r,i){var a={identifier:D(e.identifier),storeExecuteResponse:e._storeSupported,status:e._statusSupported,dataInputs:t},n=L.render(P,a),o=new C(e.url).query({service:"WPS",request:"Execute"}),s=b(e,o.toString(),i),l=e.getParameterValues();return v({url:s,method:"POST",data:n,overrideMimeType:"text/xml",responseType:"document"}).then(function(t){return N(e,l,r,t)})}(o,e,r,"1d"),r.loadPromise=t,r.isEnabled=!0,t})},e.exports=j},function(e,t,r){"use strict";var i=r(10),a=r(8),n=r(116),o=r(27),s=r(9),l=function(e){n.call(this,e)};o(n,l),i(l.prototype,{type:{get:function(){return"line"}}}),l.prototype.formatValueAsString=function(e){if(e=s(e,this.value),!a(e))return"-";for(var t="",r=0;r<e.length;r++)t+="["+e[r][0].toFixed(3)+", "+e[r][1].toFixed(3)+"]",r!==e.length-1&&(t+=", ");return t.length>0?t:""},l.prototype.getGeoJsonFeature=function(e){return{type:"Feature",geometry:{type:"LineString",coordinates:e=s(e,this.value)}}},l.formatValueForUrl=function(e){return JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:e}}]})},l.formatValueAsString=l.prototype.formatValueAsString,l.getGeoJsonFeature=l.prototype.getGeoJsonFeature,e.exports=l},function(e,t,r){"use strict";var i=r(14),a=r(9),n=r(8),o=r(10),s=r(116),l=r(27),u=r(403),c=r(29),d=r(1142),p=function(e){s.call(this,e),this.crs=a(e.crs,u.TERRIA_CRS)};l(s,p),o(p.prototype,{type:{get:function(){return"rectangle"}}}),p.prototype.formatValueAsString=function(e){if(e=a(e,this.value),!n(e))return"-";var t=c.southwest(e),r=c.northeast(e),o=i.toDegrees(t.longitude),s=i.toDegrees(t.latitude),l=i.toDegrees(r.longitude),u=i.toDegrees(r.latitude);return Math.abs(s).toFixed(2)+"°"+(s<0?"S ":"N ")+Math.abs(o).toFixed(2)+"°"+(o<0?"W":"E")+" to "+Math.abs(u).toFixed(2)+"°"+(u<0?"S ":"N ")+Math.abs(l).toFixed(2)+"°"+(l<0?"W":"E")},p.prototype.getGeoJsonFeature=function(e){return e=a(e,this.value),{type:"Feature",geometry:{type:"Polygon",coordinates:d(e)}}},p.formatValueAsString=p.prototype.formatValueAsString,p.getGeoJsonFeature=p.prototype.getGeoJsonFeature,e.exports=p},function(e,t,r){"use strict";var i=r(10),a=r(116),n=function(e){a.call(this,e)};r(27)(a,n),i(n.prototype,{type:{get:function(){return"dateTime"}}}),n.formatValueForUrl=function(e){return JSON.stringify({type:"object",properties:{timestamp:{type:"string",format:"date-time","date-time":e}}})},e.exports=n},function(e,t,r){"use strict";var i=r(41),a=r(9),n=r(8),o=r(10),s=r(116),l=function(e){this.possibleValues=a(e.possibleValues,[]).slice(),e.isRequired||this.possibleValues.unshift(""),!n(e.defaultValue)&&this.possibleValues.length>0&&((e=i(e)).defaultValue=this.possibleValues[0]),s.call(this,e)};r(27)(s,l),o(l.prototype,{type:{get:function(){return"enumeration"}}}),e.exports=l},function(e,t,r){"use strict";var i=r(10),a=r(116),n=function(e){a.call(this,e),this.value=e.defaultValue};r(27)(a,n),i(n.prototype,{type:{get:function(){return"string"}}}),e.exports=n},function(e,t,r){"use strict";var i=r(92),a=r(72),n=r(8),o=r(10),s=r(79),l=r(27),u=r(23),c=r(158),d=r(46),p=r(1143),f=r(51),h=r(18),m=r(151),g=r(138);function v(e){i.call(this,e),this._geoJsonItem=void 0,this.showGeoJsonInput=!0,this.parameters=void 0,this.parameterValues=void 0,this.wpsResponseUrl=void 0,this.wpsResponse=void 0,u.track(this,["wpsResponseUrl","wpsResponse"])}function y(e,t){return n(t)?t.split(",").reduce(function(r,i){return t.match(/[.\/](png|jpg|jpeg|gif|svg)/i)?r+'<a href="'+i+'"><img src="'+i+'" alt="'+e+'" /></a>':0===i.indexOf("http:")||0===i.indexOf("https:")?r+'<a href="'+i+'">'+new f(i).filename()+"</a>":r+i},""):""}l(i,v),o(v.prototype,{type:{get:function(){return"wps-result"}},typeName:{get:function(){return"Web Processing Service Result"}},dataSource:{get:function(){return n(this._geoJsonItem)?this._geoJsonItem.dataSource:void 0}}}),v.prototype._getValuesThatInfluenceLoad=function(){return[this.wpsResponseUrl,this.wpsResponse]},v.prototype._load=function(){n(this._geoJsonItem)&&(this._geoJsonItem._hide(),this._geoJsonItem._disable(),this._geoJsonItem=void 0);var e=this;return function(e){if(!n(e.parameters)||!n(e.parameterValues))return h(void 0);for(var t=[],r=0;r<e.parameters.length;r++)if("function"==typeof e.parameters[r].getGeoJsonFeature){var i=e.parameters[r].getGeoJsonFeature(e.parameterValues[e.parameters[r].id]);n(i)&&(i instanceof Array?t=t.concat(i):t.push(i))}return h.all(t).then(function(e){var t={type:"FeatureCollection",features:e,totalFeatures:e.length};return t})}(this).then(function(t){return(n(e.wpsResponse)?h(e.wpsResponse):c(d(e,e.wpsResponseUrl,"1d"))).then(function(r){var i=(r instanceof Document?m(r):r).ProcessOutputs;if(n(i)){var o=i.Output;if(n(o)){Array.isArray(o)||(o=[o]);for(var l=0;l<o.length;++l)if(n(o[l].Data)&&(!n(o[l].Identifier)||".context"!==o[l].Identifier))if(n(o[l].Data.LiteralData))e.shortReportSections.push(new p({name:o[l].Title,content:y(o[l].Title,o[l].Data.LiteralData)}));else if(n(o[l].Data.ComplexData)){var u=o[l].Data.ComplexData;if("text/csv"===o[l].Data.ComplexData.mimeType)u='<collapsible title="'+o[l].Title+'" open="'+(0===l?"true":"false")+'">',u+='<chart can-download="true" hide-buttons="false" title="'+o[l].Title+"\" data='"+o[l].Data.ComplexData+'\' styling="histogram"></chart>',u+="</collapsible>";else if("application/vnd.terriajs.catalog-member+json"===o[l].Data.ComplexData.mimeType){u="Chart "+o[l].Title+" generated.";var c=JSON.parse(o[l].Data.ComplexData.text),d=g(c.type,e.terria);d.updateFromJson(c),d.id=a()}e.shortReportSections.push(new p({content:u}))}var f='<table class="cesium-infoBox-defaultTable">'+(e.parameters||[]).reduce(function(t,r){return t+'<tr><td style="vertical-align: middle">'+r.name+'</td><td style="padding-left: 4px">'+r.formatValueAsString(e.parameterValues[r.id])+"</td></tr>"},"")+"</table>",h='<table class="cesium-infoBox-defaultTable">'+(o||[]).reduce(function(e,t){if(!n(t.Data)||!n(t.Data.LiteralData)&&!n(t.Data.ComplexData))return e;var r="";return n(t.Data.LiteralData)?r=y(t.Title,t.Data.LiteralData):n(t.Data.ComplexData)&&("text/csv"===t.Data.ComplexData.mimeType?r='<chart can-download="true" hide-buttons="false" title="'+t.Title+"\" data='"+t.Data.ComplexData+'\' styling: "feature-info">':"application/vnd.terriajs.catalog-member+json"===t.Data.ComplexData.mimeType&&(r=t.Title+" layers generated.")),e+'<tr><td style="vertical-align: middle">'+t.Title+"</td><td>"+r+"</td></tr>"},"")+"</table>",v=e.findInfoSection("Inputs");return n(v)||e.info.push({name:"Inputs",content:f}),n(e.featureInfoTemplate)||(e.featureInfoTemplate="#### Inputs\n\n"+f+"\n\n#### Outputs\n\n"+h),e.showGeoJsonInput&&n(t)?(e._geoJsonItem=new s(e.terria),e._geoJsonItem.name=e.name,e._geoJsonItem.data=t,e._geoJsonItem.load().then(function(){n(e.rectangle)||(e.rectangle=e._geoJsonItem.rectangle)})):void 0}}})})},v.prototype._enable=function(){n(this._geoJsonItem)&&this._geoJsonItem._enable()},v.prototype._disable=function(){n(this._geoJsonItem)&&this._geoJsonItem._disable()},v.prototype._show=function(){n(this._geoJsonItem)&&this._geoJsonItem._show()},v.prototype._hide=function(){n(this._geoJsonItem)&&this._geoJsonItem._hide()},e.exports=v},function(e,t,r){"use strict";var i=r(655),a=r(10),n=r(155),o=function(e){n.call(this,e),this.ionAssetId=void 0,this.ionAccessToken=void 0,this.ionServer=void 0};r(27)(n,o),a(o.prototype,{type:{get:function(){return"ion-imagery"}},typeName:{get:function(){return"Cesium Ion Imagery"}}}),o.prototype._createImageryProvider=function(){return new i({assetId:this.ionAssetId,accessToken:this.ionAccessToken,server:this.ionServer})},e.exports=o},,,,,function(e,t,r){"use strict";var i=r(8),a=r(10),n=r(23),o=r(154),s=r(106),l=r(18),u=r(92),c=r(79),d=r(27),p=r(117),f=r(36),h=function(e,t){u.call(this,e),this._geoJsonItem=void 0,this.url=t,this.data=void 0,this.dataSourceUrl=void 0,n.track(this,["data","dataSourceUrl"])};function m(e,t,r){var a=e.terria,n=new FormData;if(i(t)){var l=1e6;if(i(a.serverConfig)&&i(a.serverConfig.config)&&i(a.serverConfig.config.maxConversionSize)&&(l=a.serverConfig.config.maxConversionSize),t.size>l)return void g(e,"The file size is greater than the "+l/1e6+"MB limit of the "+a.appName+" conversion service.");n.append("input_file",t)}else i(r)&&(r=new s(r).resolve(new s(document.location.href)).toString(),n.append("input_url",r));return console.log("Attempting to convert file via the Terria-Server ogr2ogr web service"),o({url:e.terria.configParameters.conversionServiceBaseUrl,method:"POST",data:n}).then(function(t){return e._geoJsonItem.data=JSON.parse(t),e._geoJsonItem.load().then(function(){e.clock=e._geoJsonItem.clock})}).otherwise(function(){g(e)})}function g(e,t){var r=e.terria;throw i(t)||(t="This may indicate that the file is invalid or that it is not supported by the "+r.appName+" conversion service."),new f({sender:e,title:"Error converting file to GeoJson",message:"An error occurred while attempting to convert this file to GeoJson.  "+t+'  If you would like assistance or further information, please email us at <a href="mailto:'+r.supportEmail+'">'+r.supportEmail+"</a>."})}d(u,h),a(h.prototype,{type:{get:function(){return"ogr"}},typeName:{get:function(){return"Unknown / Converted to GeoJSON"}},metadata:{get:function(){var e=new p;return e.isLoading=!1,e.dataSourceErrorMessage="This data source does not have any details available.",e.serviceErrorMessage="This service does not have any details available.",e}},dataSource:{get:function(){return i(this._geoJsonItem)?this._geoJsonItem.dataSource:void 0}},canZoomTo:{get:function(){return!!i(this._geoJsonItem)&&this._geoJsonItem.canZoomTo}}}),h.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.data]},h.prototype._load=function(){if("undefined"==typeof FormData)throw new f({sender:this,title:"Legacy browser not supported",message:'Your web browser does not support the "FormData" type, which is required by the '+this.terria.appName+' conversion service.  We recommend you upgrade to the latest version of <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a>, <a href="http://www.mozilla.org/firefox" target="_blank">Mozilla Firefox</a>, <a href="https://www.apple.com/au/osx/how-to-upgrade/" target="_blank">Apple Safari</a>, or <a href="http://www.microsoft.com/ie" target="_blank">Microsoft Internet Explorer</a>.'});if(!1===this.terria.configParameters.conversionServiceBaseUrl)throw new f({title:"Unsupported file type",message:"This file format is not supported by "+this.terria.appName+'. Supported file formats include: <ul><li>.geojson</li><li>.kml, .kmz</li><li>.csv (in <a href="https://github.com/TerriaJS/nationalmap/wiki/csv-geo-au">csv-geo-au format</a>)</li></ul>'});this._geoJsonItem=new c(this.terria);var e=this;return i(e.data)?l(e.data,function(t){return t instanceof Blob||(t=new Blob([t],{type:"application/octet-stream",name:e.dataSourceUrl,lastModifiedDate:new Date})),m(e,t)}):m(e,void 0,e.url)},h.prototype._enable=function(){i(this._geoJsonItem)&&this._geoJsonItem._enable()},h.prototype._disable=function(){i(this._geoJsonItem)&&this._geoJsonItem._disable()},h.prototype._show=function(){i(this._geoJsonItem)&&this._geoJsonItem._show()},h.prototype._hide=function(){i(this._geoJsonItem)&&this._geoJsonItem._hide()},h.prototype.showOnSeparateMap=function(e){if(i(this._geoJsonItem))return this._geoJsonItem.showOnSeparateMap(e)},h.prototype.zoomTo=function(){i(this._geoJsonItem)&&this._geoJsonItem.zoomTo()},e.exports=h},function(e,t,r){"use strict";var i=r(9),a=r(27),n=r(318),o=function(e,t){e=i(e,"Conditions"),t=i(t,i.EMPTY_OBJECT),n.call(this,e,t)};a(n,o),o.prototype.closeDescendants=function(){!function e(t){t.isOpen=!1;t.items.forEach(function(t){t.items&&e(t)})}(this)},e.exports=o},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n=r(334),o=r(41),s=r(9),l=r(8),u=r(10),c=r(11),d=r(17),p=r(42),f=r(23),h=r(154),m=r(18),g=r(318),v=r(27),y=r(314),b=r(79),_=r(118),w=r(46),S=r(137),C=r(257),x=r(263),E=r(157),I=r(36),k=r(296),L=r(151),P=function(e,t){C.call(this,e,t),this._concepts=[],this._featureMapping=void 0,this._previousProcedureIdentifier=void 0,this._previousObservablePropertyIdentifier=void 0,this._loadingProcedureIdentifier=void 0,this._loadingObservablePropertyIdentifier=void 0,this._revertingConcepts=!1,this._loadingFeatures=!1,this._observationDataPromise=void 0,this.tryToLoadObservationData=!0,this.requestSizeLimit=200,this.requestNumberLimit=3,this.proceduresName="Procedure",this.observablePropertiesName="Property",this.procedures=void 0,this.observableProperties=void 0,this.initialProcedureIndex=0,this.initialObservablePropertyIndex=0,this.startDate=void 0,this.endDate=void 0,this.showFeaturesAtAllTimes=!1,this.representAsGeoJson=!1,this.filterByProcedures=!0,this.stationIdWhitelist=void 0,this.stationIdBlacklist=void 0,this._idColumnNames=["identifier","id"],this._geoJsonItem=void 0,this.requestTemplate=void 0,f.track(this,["_concepts"]),_(this,"concepts",{get:function(){return this._concepts}}),_(this,"dataViewId",{get:function(){if(l(this.procedures)&&l(this.observableProperties)){var e=A(this,"procedures"),t=A(this,"observableProperties");return[e&&e.identifier||"",t&&t.identifier||""].join("-")}}}),f.defineProperty(this,"activeConcepts",{get:function(){return this._concepts.map(function(e){return e.items.filter(function(e){return e.isActive})})}}),f.getObservable(this,"activeConcepts").subscribe(function(){if(!this._revertingConcepts&&!this._loadingFeatures){var e=A(this,"procedures"),t=A(this,"observableProperties");if(l(e)&&l(t))if(this.isLoading){O(this,this._loadingProcedureIdentifier,this._loadingObservablePropertyIdentifier);var r=new I({sender:this,title:"Data already loading",message:"Your data is still loading. You will be able to change the display once it has loaded."});S(this.terria,r)}else!function(e){var t=A(e,"procedures"),r=A(e,"observableProperties");if(!l(t)||!l(r))return;e.isLoading=!0,e._loadingProcedureIdentifier=t.identifier,e._loadingObservablePropertyIdentifier=r.identifier,e._observationDataPromise=D(e).then(function(){e.isLoading=!1,e._previousProcedureIdentifier=t.identifier,e._previousObservablePropertyIdentifier=r.identifier,e.initialProcedureIndex=j(e,"procedures",t.identifier),e.initialObservablePropertyIndex=j(e,"observableProperties",r.identifier)}).otherwise(function(t){O(e,e._previousProcedureIdentifier,e._previousObservablePropertyIdentifier),e.isLoading=!1,S(e.terria,t)})}(this)}},this)};function T(e,t){var r=s(e.requestTemplate,P.defaultRequestTemplate),i=n.render(r,t);return h({url:w(e,e.url,"0d"),responseType:"document",method:"POST",overrideMimeType:"text/xml",data:i,headers:{"Content-Type":"application/soap+xml"}}).then(function(t){if(l(t)){var r=L(t);if(r.Exception){var i="The server reported an unknown error.";throw r.Exception.ExceptionText&&(i="The server reported an error:\n\n"+r.Exception.ExceptionText),new I({sender:e,title:e.name,message:i})}if(!l(r.Body))throw new I({sender:e,title:e.name,message:"The server responded with missing body."});return r.Body}})}function M(e,t,r){var i=t&&t.defaultDuration||r&&r.defaultDuration,a=e.endDate||p.toIso8601(p.now(),0);if(l(i)){var n=function(e,t){if(!l(e)||e.length<3)throw new c("Bad date "+e);var r=parseFloat(t);if(isNaN(r)||0===r)throw new c("Bad duration "+t);var i=p.fromIso8601(e,R),a=t.slice(t.length-1);if("s"===a)i=p.addSeconds(i,r,R);else if("h"===a)i=p.addHours(i,r,R);else if("d"===a)i=p.addHours(i,24*r,R);else{if("y"!==a)throw new c('Unknown duration type "'+t+'" (use s, h, d or y)');var n=Math.round(365*r);i=p.addDays(i,n,R)}return p.toIso8601(i)}(a,"-"+i);return n<e.startDate&&(n=e.startDate),[{index:1,startDate:n,endDate:a}]}if(e.startDate)return[{index:1,startDate:e.startDate,endDate:a}]}function A(e,t){return P.getObjectCorrespondingToSelectedConcept(e,t)}function j(e,t,r){return 1===e[t].length?0:e._concepts.filter(function(e){return e.id===t})[0].items.map(function(e){return e.id}).indexOf(r)}function D(e){if(e._featureMapping){var t=Object.keys(e._featureMapping);if(!e.tryToLoadObservationData||t.length>e.requestSizeLimit*e.requestNumberLimit){var r=e._tableStructure;l(r)||(r=new E(e.name));var i=N(e,r);return r.columns=i,l(e._tableStructure)?e._tableStructure.columns=r.columns:(e._tableStyle.dataVariable=null,e.initializeFromTableStructure(r)),m()}return e.loadIntoTableStructure(t).then(function(t){if(!l(t)||0===t.columns[0].values.length)throw new I({sender:e,title:e.name,message:"The Sensor Observation Service did not return any features matching your query."});var r=t.getColumnWithName("identifier").values,i=N(e,t,r);if(t.activeTimeColumnNameIdOrIndex=void 0,t.columns=t.columns.concat(i),t.idColumnNames=e._idColumnNames,e.showFeaturesAtAllTimes){t.setActiveTimeColumn(e.tableStyle.timeColumn);var a=t.finishJulianDates.map(function(e){return Number(p.toDate(e))});t.finalEndJulianDate=p.fromDate(new Date(Math.max.apply(null,a))),t.columns=t.getColumnsWithFeatureRowsAtStartAndEndDates("date","value")}l(e._tableStructure)?(t.setActiveTimeColumn(e.tableStyle.timeColumn),t.columns.filter(function(e){return"value"===e.id})[0].isActive=!0,e._tableStructure.columns=t.columns,e.isShown&&(e.isShown=!1,e.isShown=!0)):(t.name=e.name,e.initializeFromTableStructure(t))})}}function N(e,t,r){var i=e._featureMapping,a=!l(r);l(r)||(r=Object.keys(i));var n=r.map(function(e){return i[e]}),o={tableStructure:t},s={tableStructure:t,id:"chart"},u=[new x("type",n.map(function(e){return e.type}),o),new x("name",n.map(function(e){return e.name}),o),new x("id",n.map(function(e){return e.id}),o),new x("lat",n.map(function(e){return e.lat}),o),new x("lon",n.map(function(e){return e.lon}),o)];if(a){var c=A(e,"procedures"),d=A(e,"observableProperties"),p=c.title||d.title||"chart",f=c.title+"_"+d.title,h=n.map(function(e){return function(e,t){return'<chart src="'+e+'" can-download="false"'+(t=l(t)?' id="'+encodeURIComponent(t)+'"':"")+"></chart>"}(e.identifier,f)});u.push(new x("identifier",n.map(function(e){return e.identifier}),o),new x(p,h,s))}return u}function O(e,t,r){var i;if(e._revertingConcepts=!0,l(t)){var a=(i=e._concepts.filter(function(e){return"procedures"===e.id})[0])&&i.items.filter(function(e){return!e.isActive&&e.id===t})[0];l(a)&&a.toggleActive()}l(r)&&(a=(i=e._concepts.filter(function(e){return"observableProperties"===e.id})[0])&&i.items.filter(function(e){return!e.isActive&&e.id===r})[0],l(a)&&a.toggleActive()),e._revertingConcepts=!1}function F(e){return Object.keys(e).reduce(function(t,r){var i=e[r];return Array.isArray(i)||(i=[i]),t.concat(i.map(function(e){return{name:r,value:e}}))},[])}P.defaultRequestTemplate=r(1161),v(C,P),u(P.prototype,{type:{get:function(){return"sos"}},typeName:{get:function(){return"SOS"}},propertiesForSharing:{get:function(){return P.defaultPropertiesForSharing}},serializers:{get:function(){return P.defaultSerializers}},dataSource:{get:function(){return l(this._geoJsonItem)?this._geoJsonItem.dataSource:l(this._dataSource)?this._dataSource:void 0}}}),P.defaultPropertiesForSharing=o(C.defaultPropertiesForSharing),P.defaultPropertiesForSharing.push("initialProcedureIndex"),P.defaultPropertiesForSharing.push("initialObservablePropertyIndex"),d(P.defaultPropertiesForSharing),P.defaultSerializers=o(C.defaultSerializers),P.defaultSerializers.activeConcepts=function(){},d(P.defaultSerializers),P.prototype._getValuesThatInfluenceLoad=function(){return[this.url]},P.prototype._load=function(){var e=this;if(e.url)return e._loadingFeatures=!0,e._concepts=function(e){var t=[];if(!l(e.procedures)||!l(e.observableProperties))throw new c("Both `procedures` and `observableProperties` arrays must be defined on the catalog item.");if(e.procedures.length>1){var r=new g(e.proceduresName);r.id="procedures",r.requireSomeActive=!0,r.items=e.procedures.map(function(t,i){return new k(t.title||t.identifier,{parent:r,id:t.identifier,active:i===e.initialProcedureIndex})}),t.push(r),e._previousProcedureIdentifier=r.items[e.initialProcedureIndex].id,e._loadingProcedureIdentifier=r.items[e.initialProcedureIndex].id}e.observableProperties.length>1&&((r=new g(e.observablePropertiesName)).id="observableProperties",r.requireSomeActive=!0,r.items=e.observableProperties.map(function(t,i){return new k(t.title||t.identifier,{parent:r,id:t.identifier,active:i===e.initialObservablePropertyIndex})}),t.push(r),e._previousObservablePropertyIdentifier=r.items[e.initialObservablePropertyIndex].id,e._loadingObservablePropertyIdentifier=r.items[e.initialObservablePropertyIndex].id);return t}(e),function(e){var t={observedProperty:e.observableProperties.map(function(e){return e.identifier})};e.filterByProcedures&&(t.procedure=e.procedures.map(function(e){return e.identifier}));var r={action:"GetFeatureOfInterest",actionClass:"foiRetrieval",parameters:F(t)};return T(e,r).then(function(t){var r=t.GetFeatureOfInterestResponse;if(!r)throw new I({sender:e,title:e.name,message:"There are no features matching your query."});if(!l(r.featureMember))throw new I({sender:e,title:e.name,message:"The server responded with an unknown feature format."});var i=r.featureMember;if(Array.isArray(i)||(i=[i]),e.stationIdWhitelist&&(i=i.filter(function(t){return t.MonitoringPoint&&e.stationIdWhitelist.indexOf(String(t.MonitoringPoint.identifier))>=0})),e.stationIdBlacklist&&(i=i.filter(function(t){return t.MonitoringPoint&&!e.stationIdBlacklist.indexOf(String(t.MonitoringPoint.identifier))>=0})),e.representAsGeoJson)return e._geoJsonItem=function(e,t){var r={type:"FeatureCollection",features:t.map(function(e){var t,r=e.MonitoringPoint.shape;if(!l(r.Point))throw new c("Feature shape type not implemented. "+JSON.stringify(r));var i=r.Point.pos;if(l(i.split)){var a=i.split(" ");2===a.length&&(t={type:"Point",coordinates:[a[1],a[0]]})}return{type:"Feature",geometry:t,properties:{name:e.MonitoringPoint.name,id:e.MonitoringPoint["gml:id"],identifier:e.MonitoringPoint.identifier.toString(),type:e.MonitoringPoint.type&&e.MonitoringPoint.type["xlink:href"]}}}).filter(function(e){return l(e.geometry)})},i=new b(e.terria);return i.data=y(r),i.style=e.style,i}(e,i),e._geoJsonItem.load().then(function(){e.rectangle=e._geoJsonItem.rectangle});e._featureMapping=function(e){var t={};return e.forEach(function(e){var r=e.MonitoringPoint.shape;if(!l(r.Point))throw new c("Non-point feature not shown. You may want to implement `representAsGeoJson`. "+JSON.stringify(r));var i=r.Point.pos;if(l(i.split)){var a=i.split(" ");if(2===a.length){var n=e.MonitoringPoint.identifier.toString();return t[n]={lat:a[0],lon:a[1],name:e.MonitoringPoint.name,id:e.MonitoringPoint["gml:id"],identifier:n,type:e.MonitoringPoint.type&&e.MonitoringPoint.type["xlink:href"]},t[n]}}}),t}(i)}).otherwise(function(e){throw e})}(e).then(function(){return e._loadingFeatures=!1,D(e)}).otherwise(function(e){throw e})},P.getObjectCorrespondingToSelectedConcept=function(e,t){if(1===e[t].length)return e[t][0];var r=e._concepts.filter(function(e){return e.id===t})[0].items.filter(function(e){return e.isActive});if(1===r.length){var i=r[0].id;return e[t].filter(function(e){return e.identifier===i})[0]}},P.prototype.loadIntoTableStructure=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;Array.isArray(e)||(e=[e]);var n=0,o=[],s=A(r,"procedures");l(t.procedure)&&(s=t.procedure);var u=A(r,"observableProperties");if(!l(s.identifier)||!l(u.identifier))return m();for(var c=0;c<e.length;c+=this.requestSizeLimit){var d=e.slice(c,c+this.requestSizeLimit),p={action:"GetObservation",actionClass:"core",parameters:F({procedure:s.identifier,observedProperty:u.identifier,featureOfInterest:d}),temporalFilters:M(r,s,u)};if(o.push(T(r,p)),++n>=this.requestNumberLimit)break}return m.all(o).then(function(e){return function(e,t,r,n){var o=[],s=[],u=[],c=[],d=[];n.forEach(function(e){var n=e.GetObservationResponse&&e.GetObservationResponse.observationData;l(n)&&(Array.isArray(n)||(n=[n]),n.map(function(e){return e.OM_Observation}).forEach(function(e){if(l(e)){var n=e.result.MeasurementTimeseries.point;if(l(n)){Array.isArray(n)||(n=[n]);var p=n.map(function(e){return e.MeasurementTVP}),f=e.featureOfInterest["xlink:href"];o.push.apply(o,a(p.map(function(e){return"object"===i(e.time)?null:e.time}))),s.push.apply(s,a(p.map(function(e){return"object"===i(e.value)?null:parseFloat(e.value)}))),u.push.apply(u,a(p.map(function(e){return f}))),c.push.apply(c,a(p.map(function(e){return t.identifier}))),d.push.apply(d,a(p.map(function(e){return r.identifier})))}}}))});var p=new E("observations"),f={tableStructure:p},h=new x("date",o,f),m=r.units||t.units,g=r.title+" "+t.title+(l(m)?" ("+m+")":""),v=new x(g,s,f);v.id="value",v.units=m;var y=new x("identifier",u,f),b=new x(e.proceduresName,c,f),_=new x(e.observablePropertiesName,d,f);return p.columns=[h,v,y,b,_],p}(r,s,u,e)}).otherwise(function(e){if(!l(e.message)&&l(e.response)){var t=L(e.response);throw new I({sender:r,title:t.Exception&&t.Exception.exceptionCode,message:t.Exception&&t.Exception.ExceptionText})}throw e})},P.prototype._enable=function(){l(this._geoJsonItem)&&this._geoJsonItem._enable()},P.prototype._disable=function(){l(this._geoJsonItem)&&this._geoJsonItem._disable()},P.prototype._show=function(){if(l(this._geoJsonItem))this._geoJsonItem._show();else if(l(this._dataSource)){var e=this.terria.dataSources;if(e.contains(this._dataSource))return void(console&&console.log&&console.log(new Error("This data source is already shown.")));e.add(this._dataSource)}},P.prototype._hide=function(){if(l(this._geoJsonItem))this._geoJsonItem._hide();else if(l(this._dataSource)){var e=this.terria.dataSources;if(!e.contains(this._dataSource))throw new c("This data source is not shown.");e.remove(this._dataSource,!1)}},P.prototype.showOnSeparateMap=function(e){return l(this._geoJsonItem)?this._geoJsonItem.showOnSeparateMap(e):C.prototype.showOnSeparateMap.bind(this)(e)};var R=new p;e.exports=P},function(e,t,r){"use strict";var i=r(51),a=r(41),n=r(9),o=r(8),s=r(10),l=r(17),u=r(119),c=r(293),d=r(23),p=r(158),f=r(29),h=r(658),m=r(109),g=r(18),v=r(596),y=r(117),b=r(291),_=r(155),w=r(27),S=r(118),C=r(46),x=r(151),E=r(229),I=function(e){_.call(this,e),this._rawMetadata=void 0,this._metadata=void 0,this._dataUrl=void 0,this._dataUrlType=void 0,this._metadataUrl=void 0,this._legendUrl=void 0,this._rectangle=void 0,this._rectangleFromMetadata=void 0,this._intervalsFromMetadata=void 0,this.layer="",this.style=void 0,this.tileMatrixSetID=void 0,this.tileMatrixSetLabels=void 0,this.tileMatrixMaximumLevel=void 0,this.tilingScheme=void 0,this.getFeatureInfoFormats=void 0,this.populateIntervalsFromTimeDimension=!0,this.minScaleDenominator=void 0,this.format=void 0,d.track(this,["_dataUrl","_dataUrlType","_metadataUrl","_legendUrl","_rectangle","_rectangleFromMetadata","_intervalsFromMetadata","layer","style","tileMatrixSetID","tileMatrixMaximumLevel","getFeatureInfoFormats","tilingScheme","populateIntervalsFromTimeDimension","minScaleDenominator","format"]),S(this,"metadataUrl",{get:function(){return o(this._metadataUrl)?this._metadataUrl:k(this.url)+"?service=WMTS&request=GetCapabilities&version=1.0.0"},set:function(e){this._metadataUrl=e}}),S(this,"dataUrl",{get:function(){return this._dataUrl},set:function(e){this._dataUrl=e}}),S(this,"dataUrlType",{get:function(){return o(this._dataUrlType)?this._dataUrlType:"none"},set:function(e){this._dataUrlType=e}})};function k(e){var t=new i(e);return t.search(""),t.toString()}function L(e,t){if(o(e.Contents)&&o(e.Contents.Layer))for(var r=e.Contents.Layer,i=0;i<r.length;++i){var a=r[i];if(a.Identifier===t||a.Title===t)return a}}function P(e,t){if(!("string"==typeof t||t instanceof String||t instanceof Array))for(var r in t)if(t.hasOwnProperty(r)&&"_parent"!==r){var i,a=t[r];if("BoundingBox"===r&&a instanceof Array)for(var n=0;n<a.length;++n){var o=a[n];(i=new b).name=r+" ("+o.CRS+")",i.value=o,P(i,o),e.items.push(i)}else(i=new b).name=r,i.value=a,P(i,a),e.items.push(i)}}function T(e,t,r,i){if(o(i)&&0!==i.length){var a=e.findInfoSection(r);o(a)?t&&(a.content=i):e.info.push({name:r,content:i})}}function M(e,t,r,i){o(i)&&(!t&&o(e[r])||(e[r]=i))}w(_,I),s(I.prototype,{type:{get:function(){return"wmts"}},typeName:{get:function(){return"Web Map Tile Service (WMTS)"}},supportsIntervals:{get:function(){return!0}},metadata:{get:function(){return o(this._metadata)||(this._metadata=function(e){var t=new y;t.isLoading=!0;var r=e._rawMetadata||p(C(e,e.metadataUrl)).then(I.capabilitiesXmlToJson);return t.promise=g(r,function(r){r.ServiceIdentification||r.ServiceProvider?P(t.serviceMetadata,{Identification:r.ServiceIdentification,Provider:r.ServiceProvider}):t.serviceErrorMessage="Service information not found in GetCapabilities operation response.";var i=L(r,e.layer);i?P(t.dataSourceMetadata,i):t.dataSourceErrorMessage="Layer information not found in GetCapabilities operation response.",e.updateFromCapabilities(r,!1,i),t.isLoading=!1}).otherwise(function(){t.dataSourceErrorMessage="An error occurred while invoking the GetCapabilities service.",t.serviceErrorMessage="An error occurred while invoking the GetCapabilities service.",t.isLoading=!1}),t}(this)),this._metadata}},updaters:{get:function(){return I.defaultUpdaters}},serializers:{get:function(){return I.defaultSerializers}}}),I.defaultUpdaters=a(_.defaultUpdaters),I.defaultUpdaters.tilingScheme=function(e,t,r,i){"geographic"===t.tilingScheme?e.tilingScheme=new u:"web-mercator"===t.tilingScheme?e.tilingScheme=new m:e.tilingScheme=t.tilingScheme},I.defaultUpdaters.getFeatureInfoFormats=function(e,t,r,i){for(var a=[],n=0;n<t.getFeatureInfoFormats.length;++n){var o=t.getFeatureInfoFormats[n];a.push(new c(o.type,o.format))}e.getFeatureInfoFormats=a},l(I.defaultUpdaters),I.defaultSerializers=a(_.defaultSerializers),I.defaultSerializers.dataUrl=function(e,t,r){t.dataUrl=e._dataUrl},I.defaultSerializers.dataUrlType=function(e,t,r){t.dataUrlType=e._dataUrlType},I.defaultSerializers.metadataUrl=function(e,t,r){t.metadataUrl=e._metadataUrl},I.defaultSerializers.legendUrl=function(e,t,r){t.legendUrl=e._legendUrl},I.defaultSerializers.tilingScheme=function(e,t,r){e.tilingScheme instanceof u?t.tilingScheme="geographic":e.tilingScheme instanceof m?t.tilingScheme="web-mercator":t.tilingScheme=e.tilingScheme},l(I.defaultSerializers),I.abstractsToIgnore=["A compliant implementation of WMTS"],I.prototype.updateFromCapabilities=function(e,t,r){if(o(e.documentElement)&&(e=I.capabilitiesXmlToJson(e),r=void 0),o(r)||(r=L(e,this.layer),o(r))){this._rawMetadata=e,v(r.Abstract,I.abstractsToIgnore)||T(this,t,"Data Description",r.Abstract);var i=o(e.Service)?e.Service:{};v(i.Abstract,I.abstractsToIgnore)||i.Abstract===r.Abstract||T(this,t,"Service Description",i.Abstract),o(i.AccessConstraints)&&!/^none$/i.test(i.AccessConstraints)&&T(this,t,"Access Constraints",i.AccessConstraints),M(this,t,"dataCustodian",function(e){if(o(e.ServiceProvider)&&o(e.ServiceProvider.ProviderName)){var t,r,i=e.ServiceProvider.ProviderName;o(e.ServiceProvider.ProviderSite)&&o(e.ServiceProvider.ProviderSite["xlink:href"])&&(t=e.ServiceProvider.ProviderSite.href),o(e.ServiceProvider.ServiceContact)&&o(e.ServiceProvider.ServiceContact.Address)&&o(e.ServiceProvider.ServiceContact.Address.ElectronicMailAddress)&&(r=e.ServiceProvider.ServiceContact.Address.ElectronicMailAddress);var a=o(t)?"["+i+"]("+t+")":i;return o(r)&&(a+="<br/>",a+="["+r+"](mailto:"+r+")"),a}return}(e)),M(this,t,"minScaleDenominator",r.MinScaleDenominator),M(this,t,"getFeatureInfoFormats",function(e){var t=!1,r=!1,i=!1,a="text/xml",n=e.InfoFormat;o(n)&&("application/json"===n?t=!0:o(n.indexOf)&&n.indexOf("application/json")>=0&&(t=!0),"text/xml"===n||"application/vnd.ogc.gml"===n?(r=!0,a=n):o(n.indexOf)&&n.indexOf("text/xml")>=0?(r=!0,a="text/xml"):o(n.indexOf)&&n.indexOf("application/vnd.ogc.gml")>=0?(r=!0,a="application/vnd.ogc.gml"):o(n.indexOf)&&n.indexOf("text/html")>=0&&(i=!0));var s=[];t&&s.push(new c("json"));r&&s.push(new c("xml",a));i&&s.push(new c("html"));return s}(r)),M(this,t,"rectangle",function(e){var t=e.WGS84BoundingBox;if(!o(t))return;var r=t.LowerCorner,i=t.UpperCorner;if(!o(r)||!o(i))return;var a=r.split(" "),n=i.split(" ");if(2!==a.length||2!==n.length)return;return f.fromDegrees(a[0],a[1],n[0],n[1])}(r));var a,n=r.Format;if(o(n))Array.isArray(n)||(n=[n]),n.indexOf("image/png")>=0?a="image/png":(n.indexOf("image/jpeg")>=0||n.indexOf("images/jpg")>=0)&&(a="image/jpeg"),M(this,t,"format",a);var s,l,u="urn:ogc:def:wkss:OGC:1.0:GoogleMapsCompatible",d=r.TileMatrixSetLink;for(Array.isArray(d)||(d=[d]),l=0;l<d.length;++l){var p=d[l].TileMatrixSet;if(e.usableTileMatrixSets[p]){u=p,s=e.usableTileMatrixSets[p];break}}if(Array.isArray(s))var h=s.map(function(e){return Math.abs(Number(e))}).reduce(function(e,t){return t>e?t:e},0);M(this,t,"tileMatrixSetID",u),M(this,t,"tileMatrixSetLabels",s),M(this,t,"tileMatrixMaximumLevel",h);var m=r.Style;if(o(m)){var g;for(Array.isArray(m)||(m=[m]),l=0;l<m.length;++l){var y=m[l];if(y.isDefault){g=y.Identifier;var b=y.legendURL;o(b)&&(Array.isArray(b)&&(b=b[0]),this.legendUrl=new E(b.href,b.format));break}}o(g)||(g=""),M(this,t,"style",g)}}},I.prototype._load=function(){if(!o(this._rawMetadata)){var e=this;return p(C(this,this.metadataUrl)).then(function(t){return e._rawMetadata=I.capabilitiesXmlToJson(t),e.updateFromCapabilities(e._rawMetadata,!1),e._rawMetadata})}},I.prototype._createImageryProvider=function(){return new h({url:(e=this,t=this.url,C(e,k(t))),layer:this.layer,tileMatrixSetID:this.tileMatrixSetID,tileMatrixLabels:this.tileMatrixSetLabels,maximumLevel:this.tileMatrixMaximumLevel,style:this.style,getFeatureInfoFormats:this.getFeatureInfoFormats,tilingScheme:o(this.tilingScheme)?this.tilingScheme:new m,format:n(this.format,"image/png")});var e,t},I.capabilitiesXmlToJson=function(e){var t=x(e);t.usableTileMatrixSets={"urn:ogc:def:wkss:OGC:1.0:GoogleMapsCompatible":!0};for(var r=new m,i=t.Contents.TileMatrixSet,a=0;a<i.length;++a){var n=i[a];if("urn:ogc:def:crs:EPSG::900913"===n.SupportedCRS||"urn:ogc:def:crs:EPSG:6.18:3:3857"===n.SupportedCRS){var s=n.TileMatrix;if(o(s)&&!(s.length<1)){var l=s[0];if(256==(0|l.TileWidth)&&256==(0|l.TileHeight)&&1==(0|l.MatrixWidth)&&1==(0|l.MatrixHeight)){if(!(Math.abs(l.ScaleDenominator-559082264.0287178)>1)&&o(l.TopLeftCorner)){var u=l.TopLeftCorner.split(" "),c=u[0],d=u[1];Math.abs(c-r._rectangleSouthwestInMeters.x)>1||Math.abs(d-r._rectangleNortheastInMeters.y)>1||(t.usableTileMatrixSets[n.Identifier]=!0,o(n.TileMatrix)&&n.TileMatrix.length>0&&(t.usableTileMatrixSets[n.Identifier]=n.TileMatrix.map(function(e){return e.Identifier})))}}}}}return t},e.exports=I},function(e,t,r){"use strict";var i=r(505),a=o(r(9)),n=o(r(8));function o(e){return e&&e.__esModule?e:{default:e}}var s={className:function(e){return e&&e.className?e.className:"base-chart-title"},getHeight:function(e){return(0,a.default)((0,n.default)(e)?e.height:0,30)},create:function(e,t){e.append("div").attr("class",s.className(t)).style("opacity",1e-6).style("position","absolute")},enterUpdateAndExit:function(e,t,r,a,o){var l=e.select("."+s.className(t)).style("top",r.top+"px");if(l.transition().duration(o).style("opacity",s.getHeight(t)>0?1:1e-6),(0,n.default)(t)){var u=a.data;"string"===t.type&&(u=[{id:"_string__",name:t.title}]);var c=l.selectAll(".title-component").data(u,function(e){return e.id}),d=(0,i.nest)().key(function(e){return e.categoryName}).length,p=(0,i.nest)().key(function(e){return e.name}).length,f=c.enter().append("span").attr("class","title-component");"legend"===t.type&&f.append("span").attr("class","color"),f.append("span").attr("class","name");var h=f.merge(c);h.select(".color").style("background-color",function(e){return e.color}).style("border-radius",function(e){return"momentPoints"===e.type?"50%":"0"}),h.select(".name").text(function(e,t){return e.categoryName?1===p?e.categoryName+(0===t?" "+e.name:""):1===d?(0===t?e.categoryName+" ":"")+e.name:e.name===e.categoryName?e.categoryName:e.categoryName+" "+e.name:e.name}),c.exit().remove()}}};e.exports=s},function(e,t,r){"use strict";var i=u(r(35)),a=u(r(13)),n=u(r(15)),o=u(r(19)),s=u(r(39)),l=u(r(1260));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=(0,o.default)({displayName:"Collapsible",propTypes:{title:n.default.string,startsOpen:n.default.bool,isInverse:n.default.bool,children:n.default.any},getInitialState:function(){return{isOpen:this.props.startsOpen}},toggleOpen:function(){var e=this.state.isOpen;this.setState({isOpen:!e})},render:function(){var e,t;this.state.isOpen&&(t=a.default.createElement("div",{className:l.default.body},this.props.children));var r=(c(e={},l.default.isOpen,this.state.isOpen),c(e,l.default.isInverse,this.props.isInverse),e);return a.default.createElement("div",{className:l.default.root},a.default.createElement("div",{className:l.default.header},a.default.createElement("button",{type:"button",onClick:this.toggleOpen,className:(0,i.default)(l.default.btn,r)},a.default.createElement(s.default,{glyph:this.state.isOpen?s.default.GLYPHS.opened:s.default.GLYPHS.closed})),a.default.createElement("span",null,this.props.title)),t)}});e.exports=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHART_DATA_CATEGORY_NAME=void 0;t.CHART_DATA_CATEGORY_NAME="Chart Data"},function(e,t,r){"use strict";var i=r(8),a=function(){this.logToConsole=!1};a.prototype.start=function(e){i(e.logToConsole)&&(this.logToConsole=e.logAnalyticsToConsole)},a.prototype.logEvent=function(e,t,r,a){if(this.logToConsole){var n=i(r)?" Label: "+r:"",o=i(a)?" Value: "+a:"";console.log("** Event ** Category: "+e+" Action: "+t+n+o)}},e.exports=a},function(e,t,r){"use strict";var i=r(400),a=r(668),n=r(9);e.exports=function(e,t){return i(JSON.stringify(a(n(e.properties,{}),t))+e.name)}},function(e,t,r){"use strict";var i=r(8);e.exports=function(e,t){if(i(e)){var r={};if("function"==typeof e.getValue)return e.getValue(t);for(var a in e)e.hasOwnProperty(a)&&(e[a]&&"function"==typeof e[a].getValue?r[a]=e[a].getValue(t):r[a]=e[a]);return r}}},function(e,t,r){"use strict";var i=r(396),a=r(27),n=r(29),o=r(18),s=function(e){i.call(this,e)};a(i,s),s.prototype.destroy=function(){},s.prototype.isDestroyed=function(){return!1},s.prototype.getCurrentExtent=function(){return n.MAX_VALUE},s.prototype.getContainer=function(){},s.prototype.zoomTo=function(e,t){this.terria.initialView=e},s.prototype.captureScreenshot=function(){return o.reject()},s.prototype.notifyRepaintRequired=function(){},s.prototype.computePositionOnScreen=function(e,t){},s.prototype.addAttribution=function(e){},s.prototype.removeAttribution=function(e){},s.prototype.updateLayerOrderAfterReorder=function(){},s.prototype.raise=function(e){},s.prototype.lower=function(e){},s.prototype.lowerToBottom=function(e){},s.prototype.addImageryProvider=function(e){},s.prototype.removeImageryLayer=function(e){},s.prototype.showImageryLayer=function(e){},s.prototype.hideImageryLayer=function(e){},s.prototype.isImageryLayerShown=function(e){return!1},e.exports=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.USER_DATA_NAME=t.DATA_CATALOG_NAME=void 0;var i=d(r(41)),a=d(r(8)),n=d(r(1277)),o=d(r(340)),s=d(r(339)),l=d(r(23)),u=d(r(1278)),c=d(r(1282));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f="data-catalog";t.DATA_CATALOG_NAME=f;t.USER_DATA_NAME="my-data";var h=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=t.terria;this.mobileViewOptions=Object.freeze({data:"data",preview:"preview",nowViewing:"nowViewing",locationSearchResults:"locationSearchResults"}),this.searchState=new c.default({terria:o,catalogSearchProvider:t.catalogSearchProvider,locationSearchProviders:t.locationSearchProviders}),this.terria=o,this.previewedItem=void 0,this.userDataPreviewedItem=void 0,this.explorerPanelIsVisible=!1,this.shareModalIsVisible=!1,this.activeTabCategory=f,this.activeTabSubCategory=null,this.isDraggingDroppingFile=!1,this.mobileView=null,this.isMapFullScreen=!1,this.myDataIsUploadView=!0,this.useSmallScreenInterface=!1,this.featureInfoPanelIsVisible=!1,this.featureInfoPanelIsCollapsed=!1,this.firstTimeAddingData=!0,this.notifications=[],this.feedbackFormIsVisible=!1,this.myDataIsUploadView=!0,this.mouseCoords=new u.default,this.mobileMenuVisible=!1,this.panelVisible=void 0,this.explorerPanelAnimating=!1,this.topElement="FeatureInfo",this.lastUploadedFiles=[],this.storyBuilderShown=!1,this.storyShown=null,this.currentStoryId=0,this.featurePrompts=[],l.default.track(this,["previewedItem","catalogSearch","explorerPanelIsVisible","shareModalIsVisible","activeTabCategory","activeTabIdInCategory","userDataPreviewedItem","isDraggingDroppingFile","mobileView","useSmallScreenInterface","featureInfoPanelIsVisible","featureInfoPanelIsCollapsed","notifications","isMapFullScreen","feedbackFormIsVisible","myDataIsUploadView","mobileMenuVisible","panelVisible","explorerPanelAnimating","topElement","lastUploadedFiles","storyBuilderShown","storyShown","currentStoryId","featurePrompts"]),l.default.defineProperty(this,"chartIsOpen",{get:function(){return this.terria.catalog.chartableItems.some(function(e){return e.isEnabled&&(0,a.default)(e.chartData())&&!e.dontChartAlone})},set:function(e){for(var t=this.terria.catalog.chartableItems,r=t.length-1;r>=0;r--){var i=t[r];i.isEnabled&&(0,a.default)(i.tableStructure)?i.tableStructure.columns.filter(function(t){return t.isActive===!e}).forEach(function(e){return e.toggleActive()}):i.showOnChart=!1}}}),this._unsubscribeErrorListener=o.error.addEventListener(function(e){0===r.notifications.filter(function(t){return t.title===e.title&&t.message===e.message}).length&&r.notifications.push((0,i.default)(e))}),this._sharedFromExplorerPanelSubscription=l.default.getObservable(o,"sharedFromExplorerPanel").subscribe(function(e){(0,a.default)(e)&&e&&(r.explorerPanelIsVisible=!0)},this),this._previewedItemIdSubscription=l.default.getObservable(o,"previewedItemId").subscribe(function(e){(0,a.default)(e)&&o.catalog.shareKeyIndex[e]&&r.viewCatalogMember(o.catalog.shareKeyIndex[e])},this),this._pickedFeaturesSubscription=l.default.getObservable(o,"pickedFeatures").subscribe(function(e){(0,a.default)(e)&&(r.featureInfoPanelIsVisible=!0,r.featureInfoPanelIsCollapsed=!1)},this);var s=function(){r.isMapFullScreen="1"===o.userProperties.hideWorkbench||"1"===o.userProperties.hideExplorerPanel,(0,a.default)(r.storyShown)||(r.storyShown=o.configParameters.storyEnabled)};this.terria.getUserProperty("hideWorkbench"),this.terria.getUserProperty("hideExplorerPanel"),this.terria.getUserProperty("playStory"),this._userPropertiesHideWorkbenchSubscription=l.default.getObservable(o.userProperties,"hideWorkbench").subscribe(s),this._userPropertiesHideEPSubscription=l.default.getObservable(o.userProperties,"hideExplorerPanel").subscribe(s),this._userPropertiesShowStoriesSubscription=l.default.getObservable(o.userProperties,"playStory").subscribe(function(){r.storyShown=o.configParameters.storyEnabled&&Boolean(o.userProperties.playStory)}),this._mobileMenuSubscription=l.default.getObservable(this,"mobileMenuVisible").subscribe(function(e){e&&(r.explorerPanelIsVisible=!1,r.switchMobileView(null))}),this._disclaimerHandler=new n.default(o,this),this._storyPromptHandler=l.default.getObservable(this,"storyShown").subscribe(function(e){!1===e&&(r.terria.getLocalProperty("storyPrompted")||r.toggleFeaturePrompt("story",!0,!1))})}var t,r,d;return t=e,(r=[{key:"dispose",value:function(){this._sharedFromExplorerPanelSubscription.dispose(),this._previewedItemIdSubscription.dispose(),this._pickedFeaturesSubscription.dispose(),this._unsubscribeErrorListener(),this._mobileMenuSubscription.dispose(),this._userPropertiesHideWorkbenchSubscription.dispose(),this._userPropertiesHideEPSubscription.dispose(),this._disclaimerHandler.dispose(),this._storyPromptHandler.dispose()}},{key:"openAddData",value:function(){this.explorerPanelIsVisible=!0,this.activeTabCategory=f}},{key:"openUserData",value:function(){this.explorerPanelIsVisible=!0,this.activeTabCategory="my-data"}},{key:"viewingUserData",value:function(){return"my-data"===this.activeTabCategory}},{key:"closeCatalog",value:function(){this.explorerPanelIsVisible=!1}},{key:"searchInCatalog",value:function(e){this.openAddData(),this.searchState.catalogSearchText=e,this.searchState.searchCatalog()}},{key:"viewCatalogMember",value:function(e){if((0,s.default)(e))this.userDataPreviewedItem=e,this.openUserData();else if(this.previewedItem=e,this.openAddData(),this.terria.configParameters.tabbedCatalog){var t=(0,o.default)(e);0===t.length?this.activeTabIdInCategory=e.name:this.activeTabIdInCategory=t[0].name}}},{key:"switchMobileView",value:function(e){this.mobileView=e}},{key:"getNextNotification",value:function(){return this.notifications[0]}},{key:"hideMapUi",value:function(){return this.getNextNotification()&&this.getNextNotification().hideUi}},{key:"toggleFeaturePrompt",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.featurePrompts.indexOf(e);t&&i<0&&!this.terria.getLocalProperty("".concat(e,"Prompted"))?this.featurePrompts.push(e):!t&&i>=0&&this.featurePrompts.splice(i,1),r&&this.terria.setLocalProperty("".concat(e,"Prompted"),!0)}}])&&p(t.prototype,r),d&&p(t,d),e}();t.default=h},,function(e,t,r){"use strict";var i=r(29),a=r(9);e.exports=function(e,t,r){r=a(r,.2);var n=parseFloat(e)-r/2,o=parseFloat(t)-r/2,s=parseFloat(e)+r/2,l=parseFloat(t)+r/2;return i.fromDegrees(o,n,l,s)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=function(){},t.Nav=function(){},t.ExperimentalMenu=function(){},t.Feedback=function(){}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(13)),a=n(r(15));function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){function r(r){return r.smallScreen?i.default.createElement(t,r):i.default.createElement(e,r)}return r.propTypes={smallScreen:a.default.bool},r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(r(13)),a=c(r(15)),n=c(r(19)),o=c(r(35)),s=c(r(8)),l=c(r(217)),u=c(r(39));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=(0,n.default)({displayName:"InnerPanel",propTypes:{doNotCloseFlag:a.default.string,onDismissed:a.default.func,showDropdownAsModal:a.default.bool,modalWidth:a.default.number,theme:a.default.object,caretOffset:a.default.string,innerRef:a.default.oneOfType([a.default.func,a.default.string]),dropdownOffset:a.default.string,children:a.default.oneOfType([a.default.arrayOf(a.default.element),a.default.element])},getDefaultProps:function(){return{onDismissed:function(){}}},getInitialState:function(){return{}},componentDidMount:function(){var e=this;this.escKeyListener=function(t){27===t.keyCode&&e.close(t)},window.addEventListener("click",this.close),window.addEventListener("keydown",this.escKeyListener,!0),setTimeout(function(){return e.setState({isOpenCss:!0})})},componentWillUnmount:function(){this.cleanListeners()},cleanListeners:function(){window.removeEventListener("click",this.close),window.removeEventListener("keydown",this.escKeyListener,!0)},forceClose:function(){var e=this;this.cleanListeners(),this.setState({isOpenCss:!1}),setTimeout(function(){e.props.onDismissed()},200)},close:function(e){this.props.doNotCloseFlag&&e[this.props.doNotCloseFlag]||this.forceClose()},render:function(){return i.default.createElement("div",{className:(0,o.default)(l.default.inner,this.props.theme.inner,d({},l.default.isOpen,this.state.isOpenCss),d({},l.default.showDropdownAsModal,this.props.showDropdownAsModal)),ref:this.props.innerRef,onClick:function(e){return e.stopPropagation()},style:{width:this.props.modalWidth,left:this.props.dropdownOffset,transformOrigin:this.props.caretOffset&&"".concat(this.props.caretOffset," top")}},i.default.createElement("button",{type:"button",className:(0,o.default)(l.default.innerCloseBtn,d({},l.default.innerCloseBtnForModal,this.props.showDropdownAsModal)),onClick:this.forceClose,title:"Close","aria-label":"Close"},i.default.createElement(u.default,{glyph:u.default.GLYPHS.close})),(0,s.default)(this.props.caretOffset)&&!this.props.showDropdownAsModal?i.default.createElement("span",{className:l.default.caret,style:{left:this.props.caretOffset}}):null,i.default.createElement("div",{className:l.default.content},this.props.children))}});t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=r(15))&&i.__esModule?i:{default:i};var n={propTypes:{theme:a.default.object,children:a.default.any,btnTitle:a.default.string,btnText:a.default.string,onOpenChanged:a.default.func,isOpen:a.default.bool,forceClosed:a.default.bool,onDismissed:a.default.func},getDefaultProps:function(){return{theme:{},onOpenChanged:void 0,onDismissed:function(){}}},changeOpenState:function(e){void 0!==this.props.onOpenChanged?this.props.onOpenChanged(e):this.setState({localIsOpen:e})},onDismissed:function(){this.changeOpenState(!1),this.props.onDismissed()},isOpen:function(){return void 0!==this.props.isOpen&&void 0!==this.props.onOpenChanged?this.props.isOpen:this.state.localIsOpen},openPanel:function(e){this.isOpen()||(e.nativeEvent[this.getDoNotCloseFlag()]=!0,this.changeOpenState(!0))},getDoNotCloseFlag:function(){return"do-not-react-".concat(this.props.btnText,"-").concat(this.props.btnTitle,"-").concat(this.props.theme.btn)}};t.default=n},function(e,t,r){"use strict";var i=u(r(8)),a=u(r(278)),n=u(r(13)),o=u(r(15)),s=u(r(19)),l=u(r(1362));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,s.default)({displayName:"Branding",propTypes:{terria:o.default.object.isRequired,version:o.default.string,onClick:o.default.func},render:function(){var e=this.props.terria.configParameters.brandBarElements;(0,i.default)(e)||(e=['<a target="_blank" href="http://terria.io"><img src="images/terria_logo.png" height="52" title="Version: {{ version }}" /></a>']);var t=this.props.version||"Unknown";return n.default.createElement("div",{className:l.default.branding},e.map(function(e,r){return(0,a.default)(e.replace(/\{\{\s*version\s*\}\}/g,t))},this))}});e.exports=c},,,,,,,,,function(e,t,r){"use strict";var i=p(r(463)),a=p(r(687)),n=p(r(235)),o=p(r(8)),s=p(r(688)),l=p(r(256)),u=p(r(402)),c=p(r(36)),d=p(r(18));function p(e){return e&&e.__esModule?e:{default:e}}e.exports=function(e,t,r,p){var f=p||(0,s.default)().localDataType[0];(0,o.default)(e)||t.error.raiseEvent(new c.default({title:"File API not supported",message:"Sorry, your web browser does not support the File API, which "+t.appName+' requires in order to add data from a file on your system.  Please upgrade your web browser.  For the best experience, we recommend <a href="http://www.microsoft.com/ie" target="_blank">Internet Explorer 11</a> or the latest version of <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a> or <a href="http://www.mozilla.org/firefox" target="_blank">Mozilla Firefox</a>.'}));for(var h=[],m=[],g=function(o){var s=e[o],c=new n.default(t);c.name=s.name,c.description="Loading file...",t.catalog.userAddedDataGroup.add(c),t.catalog.userAddedDataGroup.isOpen=!0,t.analytics.logEvent("uploadFile","browse",s.name);var d=void 0;if(-1!==s.name.toUpperCase().indexOf(".JSON")){var p=(0,u.default)(s).then(function(e){if(e.catalog||e.services||e.stories)return t.addInitSource(e).then(function(){c.isEnabled=!1,m.splice(m.indexOf(c),1),t.catalog.userAddedDataGroup.remove(c)});d=(0,i.default)(t,(0,a.default)(t,r,s,f.value,!0))});d=(0,l.default)(t,p),h.push(d)}else d=(0,i.default)(t,(0,a.default)(t,r,s,f.value,!0)),h.push(d);c.loadPromise=d,c.isEnabled=!0,m.push(c)},v=0;v<e.length;++v)g(v);return d.default.all(h,function(e){if(!e.every(function(e){return void 0===e})){var i=e.filter(function(e){return e&&!(e instanceof c.default)});return m.forEach(function(e){t.catalog.userAddedDataGroup.remove(e)}),i}r.openAddData()})}},function(e,t,r){"use strict";var i=r(9),a=r(18),n=r(645),o=r(138),s=r(36),l=r(8),u=r(659);function c(e,t,r,i){if(!r)return a(!0);var n=a.defer();return t.notifications.push({confirmText:"Upload",denyText:"Cancel",title:"Use conversion service?",message:i,confirmAction:function(){n.resolve(!0)},denyAction:function(){n.resolve(!1)}}),n.promise}function d(e,t,r){return"string"==typeof r?e.url=r:(e.data=r,e.dataSourceUrl=r.name,e.dataUrlType="local",e.name=r.name),a(e.load()).yield(e)}e.exports=function(e,t,r,p,f){var h="string"==typeof r;p=i(p,"auto");var m=h?r:r.name;return"auto"===p?a(n(m,e,h)).then(function(i){return l(i)?d(i,0,r):function(i){if(!1!==e.configParameters.conversionServiceBaseUrl){if(!m.match(/\.(shp|jpg|jpeg|pdf|xlsx|xls|tif|tiff|png|txt|doc|docx|xml|json)$/))return c(0,t,f,"This file is not directly supported by "+e.appName+".\n\nDo you want to try uploading it to the "+e.appName+" conversion service? This may work for small, zipped Esri Shapefiles or MapInfo TAB files.").then(function(t){return t?d(new u(e),0,r):void 0});e.error.raiseEvent(new s({title:"Unsupported file type",message:"This file format is not supported by "+e.appName+'. Directly supported file formats include: <ul><li>.geojson</li><li>.kml, .kmz</li><li>.csv (in <a href="https://github.com/TerriaJS/nationalmap/wiki/csv-geo-au">csv-geo-au format</a>)</li></ul>File formats supported through the online conversion service include: <ul><li>Shapefile (.zip)</li><li>MapInfo TAB (.zip)</li><li>Possibly other <a href="http://www.gdal.org/ogr_formats.html">OGR Vector Formats</a></li></ul>'}))}else e.error.raiseEvent(new s({title:"Unsupported file type",message:"This file format is not supported by "+e.appName+'. Supported file formats include: <ul><li>.geojson</li><li>.kml, .kmz</li><li>.csv (in <a href="https://github.com/TerriaJS/nationalmap/wiki/csv-geo-au">csv-geo-au format</a>)</li></ul>'}))}()}):"other"===p?c(0,t,f,"Ready to upload your file to the "+e.appName+" conversion service?").then(function(t){return t?d(o("ogr",e),0,r):void 0}):d(o(p,e),0,r)}},function(e,t,r){"use strict";e.exports=function(){return{remoteDataType:[{value:"auto",name:"Auto-detect (recommended)"},{value:"wms-getCapabilities",name:"Web Map Service (WMS) Server"},{value:"wmts-getCapabilities",name:"Web Map Tile Service (WMTS) Server"},{value:"wfs-getCapabilities",name:"Web Feature Service (WFS) Server"},{value:"esri-group",name:"Esri ArcGIS Server"},{value:"esri-mapServer",name:"Esri ArcGIS MapServer (single layer)"},{value:"esri-featureServer",name:"Esri ArcGIS FeatureServer (single layer)"},{value:"open-street-map",name:"Open Street Map Server"},{value:"geojson",name:"GeoJSON"},{value:"kml",name:"KML or KMZ"},{value:"csv",name:"CSV"},{value:"czml",name:"CZML"},{value:"gpx",name:"GPX"},{value:"other",name:"Other (use conversion service)"}],localDataType:[{value:"auto",name:"Auto-detect (recommended)"},{value:"geojson",name:"GeoJSON",extensions:["geojson"]},{value:"kml",name:"KML or KMZ",extensions:["kml","kmz"]},{value:"csv",name:"CSV",extensions:["csv"]},{value:"czml",name:"CZML",extensions:["czml"]},{value:"gpx",name:"GPX",extensions:["gpx"]},{value:"json",name:"JSON",extensions:["json","json5"]},{value:"other",name:"Other (use conversion service)"}]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(13)),a=u(r(19)),n=u(r(15)),o=u(r(21)),s=u(r(1370)),l=u(r(1372));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.default)({mixins:[o.default],displayName:"DataCatalogMember",propTypes:{member:n.default.object.isRequired,viewState:n.default.object.isRequired,manageIsOpenLocally:n.default.bool,removable:n.default.bool,terria:n.default.object},render:function(){return this.props.member.isGroup?i.default.createElement(l.default,{group:this.props.member,viewState:this.props.viewState,manageIsOpenLocally:this.props.manageIsOpenLocally,removable:this.props.removable,terria:this.props.terria}):i.default.createElement(s.default,{item:this.props.member,viewState:this.props.viewState,removable:this.props.removable,terria:this.props.terria})}});t.default=c},function(e,t,r){"use strict";e.exports=function(e,t){var r=e.catalog.userAddedDataGroup.items.indexOf(t);r>=0&&e.catalog.userAddedDataGroup.items.splice(r,1)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(13)),a=u(r(15)),n=u(r(35)),o=u(r(39)),s=u(r(9)),l=u(r(1371));function u(e){return e&&e.__esModule?e:{default:e}}var c={loading:"Loading...",remove:"Remove",add:"Add",trash:"Remove from catalogue"},d={loading:i.default.createElement(o.default,{glyph:o.default.GLYPHS.loader}),remove:i.default.createElement(o.default,{glyph:o.default.GLYPHS.remove}),add:i.default.createElement(o.default,{glyph:o.default.GLYPHS.add}),trash:i.default.createElement(o.default,{glyph:o.default.GLYPHS.trashcan}),stats:i.default.createElement(o.default,{glyph:o.default.GLYPHS.barChart}),preview:i.default.createElement(o.default,{glyph:o.default.GLYPHS.right})};function p(e){var t,r,a,o=(0,s.default)(e.titleOverrides,c);return i.default.createElement("li",{className:(0,n.default)(l.default.root)},i.default.createElement("button",{type:"button",onClick:e.onTextClick,title:e.title,className:(0,n.default)(l.default.btnCatalogItem,(t={},r=l.default.btnCatalogItemIsPreviewed,a=e.selected,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t))},e.text),i.default.createElement("button",{type:"button",onClick:e.onBtnClick,title:o[e.btnState]||"",className:l.default.btnAction},d[e.btnState]))}p.propTypes={onTextClick:a.default.func,selected:a.default.bool,text:a.default.string,title:a.default.string,onBtnClick:a.default.func,btnState:a.default.oneOf(Object.keys(d)),titleOverrides:a.default.object};var f=p;t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(13)),a=u(r(15)),n=u(r(35)),o=u(r(132)),s=u(r(39)),l=u(r(1374));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return i.default.createElement("li",{className:l.default.root},i.default.createElement("button",{type:"button",className:(0,n.default)(l.default.btnCatalog,c({},l.default.btnCatalogTopLevel,e.topLevel),c({},l.default.btnIsOpen,e.open),c({},l.default.isPreviewed,e.selected)),title:e.title,onClick:e.onClick},e.topLevel?null:i.default.createElement("span",{className:l.default.folder},e.open?i.default.createElement(s.default,{glyph:s.default.GLYPHS.folderOpen}):i.default.createElement(s.default,{glyph:s.default.GLYPHS.folder})),e.text,i.default.createElement("span",{className:(0,n.default)(l.default.caret,c({},l.default.offsetRight,e.removable))},e.open?i.default.createElement(s.default,{glyph:s.default.GLYPHS.opened}):i.default.createElement(s.default,{glyph:s.default.GLYPHS.closed}))),e.removable?i.default.createElement("button",{type:"button",className:l.default.trashGroup,title:"remove this group",onClick:e.removeUserAddedData},i.default.createElement(s.default,{glyph:s.default.GLYPHS.trashcan})):null,e.open?i.default.createElement("ul",{className:(0,n.default)(l.default.catalogGroup,c({},l.default.catalogGroupLowerLevel,!e.topLevel))},e.loading?i.default.createElement("li",{key:"loader"},i.default.createElement(o.default,null)):0===e.children.length&&e.emptyMessage?i.default.createElement("li",{className:(0,n.default)(l.default.label,l.default.labelNoResults),key:"empty"},e.emptyMessage):null,e.children):null)}d.propTypes={text:a.default.string,title:a.default.string,topLevel:a.default.bool,open:a.default.bool,loading:a.default.bool,emptyMessage:a.default.string,onClick:a.default.func,children:a.default.oneOfType([a.default.element,a.default.arrayOf(a.default.element)]),selected:a.default.bool,removable:a.default.bool,removeUserAddedData:a.default.func};var p=d;t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(132)),a=u(r(21)),n=u(r(13)),o=u(r(19)),s=u(r(15)),l=u(r(1375));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.default)({mixins:[a.default],displayName:"SearchHeader",propTypes:{searchProvider:s.default.object.isRequired,isWaitingForSearchToStart:s.default.bool},render:function(){return this.props.searchProvider.isSearching||this.props.isWaitingForSearchToStart?n.default.createElement("div",{key:"loader",className:l.default.loader},n.default.createElement(i.default,null)):this.props.searchProvider.searchMessage?n.default.createElement("div",{key:"message",className:l.default.noResults},this.props.searchProvider.searchMessage):null}});t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(r(13)),a=c(r(19)),n=c(r(15)),o=c(r(423)),s=c(r(192)),l=c(r(21)),u=c(r(469));function c(e){return e&&e.__esModule?e:{default:e}}o.default.insensitive=!0;var d=["Disclaimer","Description","Data Description","Dataset Description","Service Description","Resource Description","Licence","Access Constraints","Author","Contact","Created","Modified","Update Frequency"],p=(0,a.default)({displayName:"DataPreviewSections",mixins:[l.default],propTypes:{metadataItem:n.default.object.isRequired},sortInfoSections:function(e){var t=this.props.metadataItem.infoSectionOrder||d;return e.sort(function(e,r){var i=t.indexOf(e.name),a=t.indexOf(r.name);return i>=0&&a<0?-1:i<0&&a>=0?1:i<0&&a<0?(0,o.default)(e.name,r.name):i-a}),e},render:function(){var e=this.props.metadataItem,t=e.hideSource?e.infoWithoutSources:e.info.slice();return i.default.createElement("div",null,this.sortInfoSections(t).map(function(t,r){return t.content&&t.content.length>0?i.default.createElement("div",{key:r},i.default.createElement("h4",{className:u.default.h4},t.name),(0,s.default)(t.content,{catalogItem:e})):null},this))}});t.default=p},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(13)),a=n(r(453));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){var t=function(t){function r(){var e,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=this,(e=!(n=u(r).call(this))||"object"!==o(n)&&"function"!=typeof n?c(t):n).wrappedComponent=i.default.createRef(),e.state={width:null,height:null},e.checkAndUpdateSizing=e.checkAndUpdateSizing.bind(c(e)),e.checkAndUpdateSizingWithDebounce=(0,a.default)(e.checkAndUpdateSizing,200),e}var n,p,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(r,i.default.Component),n=r,(p=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.checkAndUpdateSizingWithDebounce),this.checkAndUpdateSizing()}},{key:"componentDidUpdate",value:function(){this.checkAndUpdateSizing()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.checkAndUpdateSizingWithDebounce)}},{key:"checkAndUpdateSizing",value:function(){if(this.wrappedComponent.current){var e=this.wrappedComponent.current.refToMeasure,t=e?e.current?e.current.clientWidth:e.clientWidth:void 0,r=e?e.current?e.current.clientHeight:e.clientHeight:void 0,i=t||0,a=r||0;t&&r||console.warn("measureElement was used without a ref to measure"),0!==i&&0!==a||console.warn("measureElement has a reading of 0"),this.wrappedComponent.current&&this.wrappedComponent.current.refToMeasure&&(this.state.height&&this.state.width&&this.state.height===a&&this.state.width===i||this.setState({width:i,height:a}))}}},{key:"render",value:function(){return i.default.createElement(e,s({},this.props,{ref:this.wrappedComponent,widthFromMeasureElementHOC:this.state.width,heightFromMeasureElementHOC:this.state.height}))}}])&&l(n.prototype,p),f&&l(n,f),r}();return t.displayName="MeasureElement(".concat(function(e){return e.displayName||e.name||"Component"}(e),")"),t};t.default=p},function(e,t,r){"use strict";var i=w(r(8)),a=w(r(14)),n=w(r(26)),o=w(r(1441)),s=w(r(1447)),l=w(r(132)),u=w(r(21)),c=w(r(13)),d=w(r(19)),p=w(r(15)),f=w(r(23)),h=w(r(143)),m=w(r(39)),g=r(245),v=w(r(337)),y=w(r(137)),b=w(r(1449)),_=w(r(35));function w(e){return e&&e.__esModule?e:{default:e}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=(0,d.default)({displayName:"FeatureInfoPanel",mixins:[u.default],propTypes:{terria:p.default.object.isRequired,viewState:p.default.object.isRequired,printView:p.default.bool},ref:null,getInitialState:function(){return{left:null,right:null,top:null,bottom:null}},componentDidMount:function(){var e=this,t=this.props.terria;this._pickedFeaturesSubscription=f.default.getObservable(t,"pickedFeatures").subscribe(function(){var r=t.pickedFeatures;if((0,i.default)(r)){var a=new h.default({id:"Pick Location"});a.position=r.pickPosition,t.selectedFeature=a,(0,i.default)(r.allFeaturesAvailablePromise)&&r.allFeaturesAvailablePromise.then(function(){if(!1!==e.props.viewState.featureInfoPanelIsVisible){var a=r.features.filter(function(e){return(0,i.default)(x(t.nowViewing,e))});t.selectedFeature=a.filter(E)[0],!(0,i.default)(t.selectedFeature)&&a.length>0&&(t.selectedFeature=a[0])}})}else t.selectedFeature=void 0})},componentWillUnmount:function(){(0,i.default)(this._pickedFeaturesSubscription)&&(this._pickedFeaturesSubscription.dispose(),this._pickedFeaturesSubscription=void 0)},renderFeatureInfoCatalogItems:function(e,t){var r=this;return e.filter(function(e){return(0,i.default)(e)}).map(function(e,i){var a=t.filter(function(t){return t.catalogItem===e}).map(function(e){return e.feature});return c.default.createElement(o.default,{key:i,viewState:r.props.viewState,catalogItem:e,features:a,terria:r.props.terria,onToggleOpen:r.toggleOpenFeature,printView:r.props.printView})})},close:function(){var e=this;this.props.viewState.featureInfoPanelIsVisible=!1,setTimeout(function(){e.props.terria.pickedFeatures=void 0,e.props.terria.selectedFeature=void 0},200)},toggleCollapsed:function(e){this.props.viewState.featureInfoPanelIsCollapsed=!this.props.viewState.featureInfoPanelIsCollapsed},toggleOpenFeature:function(e){var t=this.props.terria;e===t.selectedFeature?t.selectedFeature=void 0:t.selectedFeature=e},getMessageForNoResults:function(){return this.props.terria.nowViewing.hasItems?this.props.viewState.firstTimeAddingData?(this.props.viewState.firstTimeAddingData=!1,"Click on the map to learn more about a location"):"No data is available here - try another location.":"Click 'Add Data' to add data to the map."},addManualMarker:function(e,t){(0,g.addMarker)(this.props.terria,{name:"User Selection",location:{latitude:t,longitude:e}})},pinClicked:function(e,t){(0,g.markerVisible)(this.props.terria)?(0,g.removeMarker)(this.props.terria):this.addManualMarker(e,t)},locationUpdated:function(e,t){(0,i.default)(t)&&(0,i.default)(e)&&(0,g.markerVisible)(this.props.terria)&&((0,g.removeMarker)(this.props.terria),this.addManualMarker(e,t))},filterIntervalsByFeature:function(e,t){try{e.filterIntervalsByFeature(t,this.props.terria.pickedFeatures)}catch(e){(0,y.default)(this.props.terria,e)}},renderLocationItem:function(e){var t=n.default.WGS84.cartesianToCartographic(e),r=a.default.toDegrees(t.latitude),i=a.default.toDegrees(t.longitude),o=(0,v.default)(i,r);this.locationUpdated(i,r);var s=this,l=(0,g.markerVisible)(this.props.terria)?b.default.btnLocationSelected:b.default.btnLocation;return c.default.createElement("div",{className:b.default.location},c.default.createElement("span",null,"Lat / Lon "),c.default.createElement("span",null,o.latitude+", "+o.longitude,!this.props.printView&&c.default.createElement("button",{type:"button",onClick:function(){s.pinClicked(i,r)},className:l},c.default.createElement(m.default,{glyph:m.default.GLYPHS.location}))))},render:function(){var e,t,r,a=this,n=this.props.terria,o=this.props.viewState,u=function(e){if(!(0,i.default)(e.pickedFeatures))return{catalogItems:[],featureCatalogItemPairs:[]};var t=e.pickedFeatures.features,r=[],a=[];return t.forEach(function(t){var i=x(e.nowViewing,t);r.push({catalogItem:i,feature:t}),-1===a.indexOf(i)&&a.push(i)}),{catalogItems:a,featureCatalogItemPairs:r}}(this.props.terria),d=u.catalogItems,p=u.featureCatalogItemPairs,f=this.renderFeatureInfoCatalogItems(d,p),h=(0,_.default)(b.default.panel,(S(e={},b.default.isCollapsed,o.featureInfoPanelIsCollapsed),S(e,b.default.isVisible,o.featureInfoPanelIsVisible),S(e,b.default.isTranslucent,o.explorerPanelIsVisible),e)),g=d.filter(function(e){return(0,i.default)(e)&&e.canFilterIntervalsByFeature}).map(function(e){var t=p.filter(function(t){return t.catalogItem===e});return{catalogItem:e,feature:(0,i.default)(t[0])?t[0].feature:void 0}}).filter(function(e){return(0,i.default)(e.feature)});(0,i.default)(n.selectedFeature)&&(0,i.default)(n.selectedFeature.position)&&((0,i.default)(n.clock)&&(r=n.clock.currentTime),t=n.selectedFeature.position.getValue(r),(isNaN(t.x)||isNaN(t.y)||isNaN(t.z))&&(t=void 0));(0,i.default)(t)||(0,i.default)(n.pickedFeatures)&&(0,i.default)(n.pickedFeatures.pickPosition)&&(t=n.pickedFeatures.pickPosition);var v=t?c.default.createElement("li",null,this.renderLocationItem(t)):null;return this.ref=c.default.createRef(),c.default.createElement(s.default,{ref:this.ref},c.default.createElement("div",{className:h,"aria-hidden":!o.featureInfoPanelIsVisible},!this.props.printView&&c.default.createElement("div",{className:b.default.header},c.default.createElement("div",{className:(0,_.default)("drag-handle",b.default.btnPanelHeading)},c.default.createElement("span",null,"Feature Information"),c.default.createElement("button",{type:"button",onClick:this.toggleCollapsed,className:b.default.btnToggleFeature},this.props.viewState.featureInfoPanelIsCollapsed?c.default.createElement(m.default,{glyph:m.default.GLYPHS.closed}):c.default.createElement(m.default,{glyph:m.default.GLYPHS.opened}))),c.default.createElement("button",{type:"button",onClick:this.close,className:b.default.btnCloseFeature,title:"Close data panel"},c.default.createElement(m.default,{glyph:m.default.GLYPHS.close}))),c.default.createElement("ul",{className:b.default.body},this.props.printView&&v,o.featureInfoPanelIsCollapsed||!o.featureInfoPanelIsVisible?null:(0,i.default)(n.pickedFeatures)&&n.pickedFeatures.isLoading?c.default.createElement("li",null,c.default.createElement(l.default,null)):f&&0!==f.length?f:c.default.createElement("li",{className:b.default.noResults},this.getMessageForNoResults()),!this.props.printView&&v,g.map(function(e){return c.default.createElement("button",{key:e.catalogItem.id,type:"button",onClick:a.filterIntervalsByFeature.bind(a,e.catalogItem,e.feature),className:b.default.satelliteSuggestionBtn},"Show ",e.catalogItem.name," at this location")}))))}});function x(e,t){if((0,i.default)(e)){if(t._catalogItem)return t._catalogItem;var r,a,n;if((0,i.default)(t.entityCollection)&&(0,i.default)(t.entityCollection.owner)){var o=t.entityCollection.owner;if(o.name===g.LOCATION_MARKER_DATA_SOURCE_NAME)return{name:"Location Marker"};for(a=e.items.length-1;a>=0;a--)if((n=e.items[a]).dataSource===o){r=n;break}return r}if((0,i.default)(t.imageryLayer)){var s=t.imageryLayer;for(a=e.items.length-1;a>=0;a--)if(e.items[a].imageryLayer===s){r=e.items[a];break}return r}}}function E(e){return(0,i.default)(e.properties)||(0,i.default)(e.description)}e.exports=C},function(e,t,r){"use strict";var i=h(r(35)),a=h(r(8)),n=h(r(23)),o=h(r(132)),s=h(r(21)),l=h(r(46)),u=h(r(13)),c=h(r(19)),d=h(r(15)),p=h(r(51)),f=h(r(1450));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=(0,c.default)({displayName:"Legend",mixins:[s.default],propTypes:{item:d.default.object},UNSAFE_componentWillMount:function(){this.legendsWithError={}},onImageError:function(e){this.legendsWithError[e.url]=!0},doesLegendHaveError:function(e){var t=this.legendsWithError[e.url];return(0,a.default)(t)||(this.legendsWithError[e.url]=!1,n.default.track(this.legendsWithError,[e.url])),this.legendsWithError[e.url]},renderLegend:function(e,t){var r,a,n=e.isImage(),o=!!e.safeSvgContent,s=e.safeSvgContent,c={__html:s?s.replace(/NS\d+:href/gi,"xlink:href"):null},d=(r=(0,l.default)(this.props.item,e.url),"http"!==(a=new p.default(r)).protocol()&&"https"!==a.protocol()?r:a.absoluteTo(window.location.href).toString());return n&&o?u.default.createElement("li",{key:t,onError:this.onImageError.bind(this,e),className:(0,i.default)(f.default.legendSvg,m({},f.default.legendImagehasError,this.doesLegendHaveError(e))),dangerouslySetInnerHTML:c}):n?u.default.createElement("li",{key:d,className:(0,i.default)(m({},f.default.legendImagehasError,this.doesLegendHaveError(e)))},u.default.createElement("a",{onError:this.onImageError.bind(this,e),href:d,className:f.default.imageAnchor,target:"_blank",rel:"noreferrer noopener"},u.default.createElement("img",{src:d}))):u.default.createElement("li",{key:d},u.default.createElement("a",{href:d,target:"_blank",rel:"noreferrer noopener"},"Open legend in a separate tab"))},render:function(){return u.default.createElement("ul",{className:f.default.legend},u.default.createElement("div",{className:f.default.legendInner},this.props.item.isLoading?u.default.createElement("li",{className:f.default.loader},u.default.createElement(o.default,{message:this.props.item.loadingMessage})):(this.props.item.legendUrls||[]).map(function(e,t){return this.renderLegend(e,t)},this)))}});e.exports=g},function(e,t,r){"use strict";var i=h(r(13)),a=h(r(19)),n=h(r(15)),o=h(r(32)),s=h(r(14)),l=h(r(8)),u=h(r(26)),c=h(r(23)),d=h(r(183)),p=h(r(21)),f=h(r(98));function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,a.default)({displayName:"PointParameterEditor",mixins:[p.default],propTypes:{previewed:n.default.object,parameter:n.default.object,viewState:n.default.object,parameterViewModel:n.default.object},inputOnChange:function(e){var t=e.target.value;this.props.parameterViewModel.userValue=t,this.props.parameterViewModel.isValueValid=m.setValueFromText(e,this.props.parameter)},inputOnBlur:function(e){var t=!this.props.parameterViewModel.isValueValid;this.props.parameterViewModel.wasEverBlurredWhileInvalid=this.props.parameterViewModel.wasEverBlurredWhileInvalid||t},selectPointOnMap:function(){m.selectOnMap(this.props.previewed.terria,this.props.viewState,this.props.parameter)},getDisplayValue:function(){return(0,l.default)(this.props.parameterViewModel.userValue)?this.props.parameterViewModel.userValue:m.getDisplayValue(this.props.parameter.value)},render:function(){var e=this.props.parameterViewModel,t=!e.isValueValid&&e.wasEverBlurredWhileInvalid,r=t?f.default.fieldInvalid:f.default.field;return i.default.createElement("div",null,t?i.default.createElement("div",{className:f.default.warningText},"Please enter valid coordinates (e.g. 131.0361, -25.3450)."):null,i.default.createElement("input",{className:r,type:"text",onChange:this.inputOnChange,onBlur:this.inputOnBlur,value:this.getDisplayValue(),placeholder:"131.0361, -25.3450"}),i.default.createElement("button",{type:"button",onClick:this.selectPointOnMap,className:f.default.btnSelector},"Select location"))}});m.setValueFromText=function(e,t){var r=e.target.value;if(0===r.trim().length&&!t.isRequired)return t.value=void 0,!0;if(/[^\d\s\.,+-]/.test(r))return!1;var i=r.split(",");if(2===i.length){var a=parseFloat(i[0]),n=parseFloat(i[1]);return!isNaN(a)&&!isNaN(n)&&(t.value=o.default.fromDegrees(parseFloat(i[0]),parseFloat(i[1])),!0)}return!1},m.getDisplayValue=function(e){return(0,l.default)(e)?s.default.toDegrees(e.longitude).toFixed(5)+","+s.default.toDegrees(e.latitude).toFixed(5):""},m.selectOnMap=function(e,t,r){e.pickedFeatures=void 0;var i=new d.default({message:"Select a point by clicking on the map.",onCancel:function(){e.mapInteractionModeStack.pop(),t.openAddData()}});e.mapInteractionModeStack.push(i),c.default.getObservable(i,"pickedFeatures").subscribe(function(i){if((0,l.default)(i.pickPosition)){var a=u.default.WGS84.cartesianToCartographic(i.pickPosition);e.mapInteractionModeStack.pop(),r.value=a,t.openAddData()}}),t.explorerPanelIsVisible=!1},e.exports=m},function(e,t,r){"use strict";var i=p(r(13)),a=p(r(19)),n=p(r(15)),o=p(r(8)),s=p(r(21)),l=p(r(98)),u=p(r(14)),c=p(r(26)),d=p(r(344));function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.default)({displayName:"PolygonParameterEditor",mixins:[s.default],propTypes:{previewed:n.default.object,parameter:n.default.object,viewState:n.default.object},setValueFromText:function(e){f.setValueFromText(e,this.props.parameter)},selectPolygonOnMap:function(){f.selectOnMap(this.props.previewed.terria,this.props.viewState,this.props.parameter)},render:function(){return i.default.createElement("div",null,i.default.createElement("input",{className:l.default.field,type:"text",onChange:this.setValueFromText,value:f.getDisplayValue(this.props.parameter.value)}),i.default.createElement("button",{type:"button",onClick:this.selectPolygonOnMap,className:l.default.btnSelector},"Click to draw polygon"))}});function h(e,t){for(var r=e.entities.values,i=[],a=0;a<r.length;a++){var n=r[a].position.getValue(t.clock.currentTime),o=c.default.WGS84.cartesianToCartographic(n),s=[];s.push(u.default.toDegrees(o.longitude)),s.push(u.default.toDegrees(o.latitude)),i.push(s)}return i.length>0&&i.push(i[0]),i}f.setValueFromText=function(e,t){t.value=[JSON.parse(e.target.value)]},f.getDisplayValue=function(e){if(!(0,o.default)(e)||e.length<1)return"";for(var t=e[0],r="",i=0;i<t.length;i++)r+="["+t[i][0].toFixed(3)+", "+t[i][1].toFixed(3)+"]",i!==t.length-1&&(r+=", ");return r.length>0?"["+r+"]":""},f.selectOnMap=function(e,t,r){var i=new d.default({terria:e,onPointClicked:function(t){r.value=[h(t,e)]},onCleanUp:function(){t.openAddData()},onPointMoved:function(t){r.value=[h(t,e)]}});t.explorerPanelIsVisible=!1,i.enterDrawMode()},e.exports=f},function(e,t,r){"use strict";var i=m(r(35)),a=m(r(13)),n=m(r(19)),o=m(r(15)),s=m(r(8)),l=m(r(23)),u=m(r(18)),c=m(r(79)),d=m(r(21)),p=m(r(172)),f=m(r(706)),h=m(r(98));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=(0,n.default)({displayName:"RegionPicker",mixins:[d.default],propTypes:{previewed:o.default.object,parameter:o.default.object},getInitialState:function(){return{autocompleteVisible:!1,autocompleteOptions:[],autocompleteText:void 0,displayValue:""}},UNSAFE_componentWillMount:function(){this._loadingRegionProvider=void 0,this._selectedRegionCatalogItem=void 0,this._regionNames=[],this._regionsCatalogItem=void 0,this.regionProvider=void 0,this._subscriptions=[],this._lastFeature=void 0,this._lastPickedFeatures=void 0,l.default.defineProperty(this,"regionProvider",{get:function(){return this.props.parameter.regionProvider}}),this._subscriptions.push(l.default.getObservable(this,"regionProvider").subscribe(this.addRegionLayer)),l.default.defineProperty(this,"regionValue",{get:function(){return this.props.parameter.value},set:function(e){(0,s.default)(e)&&(0,s.default)(e.realRegion)&&(e=e.realRegion),this.props.parameter.value=e}});var e=this;l.default.getObservable(this.props.previewed.terria.mapInteractionModeStack[0],"pickedFeatures").subscribe(function(t){(0,s.default)(t)&&(e._lastPickedFeatures=t,(0,u.default)(t.allFeaturesAvailablePromise,function(){t===e._lastPickedFeatures&&0!==t.features.length&&e.updateFeature(t.features[0])}))}),this.addRegionLayer(),this.updateMapFromValue()},componentWillUnmount:function(){this._subscriptions.forEach(function(e){return e.dispose()}),(0,s.default)(this._regionsCatalogItem)&&(this._regionsCatalogItem.isEnabled=!1,this._regionsCatalogItem=void 0),(0,s.default)(this._selectedRegionCatalogItem)&&(this._selectedRegionCatalogItem.isEnabled=!1,this._selectedRegionCatalogItem=void 0)},updateFeature:function(e){this._lastRegionFeature=e.data;var t=e.properties[this.regionProvider.regionProp],r="object"===v(t)?t.getValue():t;this.regionValue=this.props.parameter.findRegionByID(r),(0,s.default)(this._selectedRegionCatalogItem)&&(this._selectedRegionCatalogItem.isEnabled=!1,this._selectedRegionCatalogItem=void 0),(0,s.default)(e.data)&&"Feature"===e.data.type&&(this._selectedRegionCatalogItem=new c.default(this.props.previewed.terria),this._selectedRegionCatalogItem.name="Selected Polygon",this._selectedRegionCatalogItem.data=e.data,this._selectedRegionCatalogItem.isEnabled=!0,this._selectedRegionCatalogItem.zoomTo()),this.setState({autocompleteVisible:!1,autocompleteOptions:[],autocompleteText:void 0})},addRegionLayer:function(){if((0,s.default)(this.regionProvider)&&this.regionProvider!==this._loadingRegionProvider){this._loadingRegionProvider=this.regionProvider;var e=this;u.default.all([e.regionProvider.loadRegionIDs(),e.regionProvider.loadRegionNames()]).then(function(){e.regionProvider===e._loadingRegionProvider&&(e._regionNames=e.regionProvider.regionNames,(0,s.default)(e._regionsCatalogItem)&&(e._regionsCatalogItem.isEnabled=!1,e._regionsCatalogItem=void 0),e._regionsCatalogItem=new p.default(e.props.previewed.terria),e._regionsCatalogItem.name="Available Regions",e._regionsCatalogItem.url=e.regionProvider.analyticsWmsServer,e._regionsCatalogItem.layers=e.regionProvider.analyticsWmsLayerName,e._regionsCatalogItem.parameters={styles:"border_black_fill_aqua"},e._regionsCatalogItem.isEnabled=!0,e._loadingRegionProvider=void 0)})}},updateMapFromValue:function(){if((0,s.default)(this.regionProvider)){(0,s.default)(this._selectedRegionCatalogItem)&&(this._selectedRegionCatalogItem.isEnabled=!1,this._selectedRegionCatalogItem=void 0);var e=this.regionValue,t=this.props.previewed.terria,r=this;this.regionProvider.getRegionFeature(t,e,r._lastRegionFeature).then(function(e){(0,s.default)(e)&&((0,s.default)(r._selectedRegionCatalogItem)&&(r._selectedRegionCatalogItem.isEnabled=!1,r._selectedRegionCatalogItem=void 0),(0,s.default)(e)&&"Feature"===e.type&&(r._selectedRegionCatalogItem=new c.default(r.props.previewed.terria),r._selectedRegionCatalogItem.name="Selected Polygon",r._selectedRegionCatalogItem.data=e,r._selectedRegionCatalogItem.isEnabled=!0,r._selectedRegionCatalogItem.zoomTo()))}).otherwise(function(){r.props.parameter.value===e&&(0,s.default)(r._selectedRegionCatalogItem)&&(r._selectedRegionCatalogItem.isEnabled=!1,r._selectedRegionCatalogItem=void 0)})}},textChange:function(e){if(this.regionValue=void 0,(0,s.default)(e.target.value)&&(0,s.default)(this.regionProvider))if((0,s.default)(e.target.value)){var t=[],r=this.regionProvider.regions,i=this._regionNames;if(r&&r.length>0)for(var a=0;a<r.length;a++){var n=i[a];if(n&&n.toLowerCase().indexOf(e.target.value.toLowerCase())>=0&&(t.push({name:n,id:r[a].id,FID:r[a].FID,realRegion:r[a]}),t.length>=100))break}this.setState({autocompleteVisible:t.length>0&&t.length<=100,autocompleteOptions:t,autocompleteText:e.target.value})}else this.setState({autocompleteVisible:!1,autocompleteOptions:[],autocompleteText:void 0})},selectRegion:function(e){this.regionValue=e,this.setState({autocompleteVisible:!1,autocompleteOptions:[],autocompleteText:void 0}),this.updateMapFromValue()},render:function(){return a.default.createElement("div",{className:h.default.parameterEditor},a.default.createElement(f.default,{previewed:this.props.previewed,parameter:this.props.parameter.regionTypeParameter}),a.default.createElement("input",{className:h.default.field,type:"text",autoComplete:"off",value:this.state.autocompleteText||y.getDisplayValue(this.regionValue,this.props.parameter),onChange:this.textChange,placeholder:"Region name"}),this.renderOptions())},renderOptions:function(){var e,t=this,r=(0,i.default)((g(e={},h.default.autocomplete,!0),g(e,h.default.isHidden,!this.state.autocompleteVisible),e));return a.default.createElement("ul",{className:r},this.state.autocompleteOptions.map(function(e,r){return a.default.createElement("li",{key:r},a.default.createElement("button",{type:"button",className:h.default.autocompleteItem,onClick:t.selectRegion.bind(t,e)},e.name))}))}});y.getDisplayValue=function(e,t){if(!(0,s.default)(e))return"";var r=t.regionProvider,i="",a=r.regions.indexOf(e);return i=a>=0&&r.regionNames[a]?r.regionNames[a]:e.id,(0,s.default)(i)?r.regionType+": "+i:""},e.exports=y},function(e,t,r){"use strict";var i=c(r(13)),a=c(r(19)),n=c(r(15)),o=c(r(8)),s=c(r(132)),l=c(r(21)),u=c(r(98));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,a.default)({displayName:"RegionTypeParameterEditor",mixins:[l.default],propTypes:{previewed:n.default.object,parameter:n.default.object},onChange:function(e){var t=this.getRegionProviders();if(t){var r=t.filter(function(t){return t.regionType===e.target.value})[0];this.props.parameter.value=r}},getRegionProviders:function(){var e;return this.props.parameter.getAllRegionTypes().then(function(t){e=t}),e},render:function(){var e=this.props.parameter.value,t=this.getRegionProviders();return t?i.default.createElement("select",{className:u.default.field,onChange:this.onChange,value:(0,o.default)(e)?e.regionType:""},t.map(function(e,t){return i.default.createElement("option",{value:e.regionType,key:t},e.regionType)})):i.default.createElement(s.default,null)}});e.exports=d},function(e,t,r){"use strict";var i=u(r(13)),a=u(r(19)),n=u(r(15)),o=u(r(39)),s=u(r(21)),l=u(r(98));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.default)({displayName:"BooleanParameterEditor",mixins:[s.default],propTypes:{previewed:n.default.object,parameter:n.default.object},onClick:function(){this.props.parameter.value=!this.props.parameter.value},renderCheckbox:function(){var e=void 0!==this.props.parameter.value?this.props.parameter.value:this.props.parameter.defaultValue,t=this.props.parameter.name,r=this.props.parameter.description;return i.default.createElement("div",null,i.default.createElement("button",{type:"button",className:l.default.btnRadio,title:r,onClick:this.onClick},e&&i.default.createElement(o.default,{glyph:o.default.GLYPHS.checkboxOn}),!e&&i.default.createElement(o.default,{glyph:o.default.GLYPHS.checkboxOff}),t))},renderRadio:function(e){var t,r,a=this.props.parameter.value===e;return!0===e?(t=this.props.parameter.trueName||this.props.parameter.name,r=this.props.parameter.trueDescription||this.props.parameter.description):(t=this.props.parameter.falseName||this.props.parameter.name,r=this.props.parameter.falseDescription||this.props.parameter.description),i.default.createElement("div",null,i.default.createElement("button",{type:"button",className:l.default.btnRadio,title:r,onClick:this.onClick},a&&i.default.createElement(o.default,{glyph:o.default.GLYPHS.radioOn}),!a&&i.default.createElement(o.default,{glyph:o.default.GLYPHS.radioOff}),t))},render:function(){return i.default.createElement("div",null,!this.props.parameter.hasNamedStates&&this.renderCheckbox(),this.props.parameter.hasNamedStates&&i.default.createElement("div",null,this.renderRadio(!0),this.renderRadio(!1)))}});e.exports=c},function(e,t,r){"use strict";var i=r(424),a=r(12),n=r(14),o=r(383),s=r(41),l=r(439),u=r(1469),c=r(1470),d=r(86),p=r(709),f=r(1471),h=r(9),m=r(8),g=r(26),v=r(341),y=r(153),b=r(48),_=r(1472),w=r(348),S=r(642),C=r(277),x=r(23),E=r(184),I=r(533),k=r(1473),L=r(1474),P=r(43),T=r(28),M=r(139),A=r(216),j=r(657),D=r(1475),N=r(60),O=r(303),F=r(51),R=r(177),U=r(669),V=r(18);i.defaultKey=void 0,b.supportsImageRenderingPixelated=function(){return!0},p._cesiumCreditInitialized=!0;var B=function(e,t){t=h(t,{}),this._mapContainer=h(t.mapContainer,"cesiumContainer"),this._uiContainer=h(t.uiContainer,"ui"),this._developerAttribution=t.developerAttribution,this.maximumLeafletZoomLevel=t.maximumLeafletZoomLevel;var r=D();this._slowWebGLAvailable="slow"===r,this._useWebGL=!0===r,e.viewerMode!==R.CesiumTerrain&&e.viewerMode!==R.CesiumEllipsoid||this._useWebGL||(this._slowWebGLAvailable?e.error.raiseEvent({title:"Poor WebGL performance",message:"Your web browser reports that it has performance issues displaying "+e.appName+" in 3D, so you will see a limited, 2D-only experience. For the full 3D experience, please try using a different web browser, upgrading your video drivers, or upgrading your operating system."}):e.error.raiseEvent({title:"WebGL not supported",message:e.appName+' works best with a web browser that supports <a href="http://get.webgl.org" target="_blank">WebGL</a>, including the latest versions of <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a>, <a href="http://www.mozilla.org/firefox" target="_blank">Mozilla Firefox</a>, <a href="https://www.apple.com/au/osx/how-to-upgrade/" target="_blank">Apple Safari</a>, and <a href="http://www.microsoft.com/ie" target="_blank">Microsoft Internet Explorer</a>. Your web browser does not appear to support WebGL, so you will see a limited, 2D-only experience.'}),e.viewerMode=R.Leaflet),this.terria=e;var i=e.viewerMode!==R.Leaflet;e.analytics.logEvent("startup","initialViewer",i?"cesium":"leaflet"),this._bumpyTerrainProvider=void 0,this._terrain=t.terrain,this._terrainProvider=void 0,m(this._terrain)&&0===this._terrain.length&&(this._terrain=void 0),this._useWebGL&&q(this),this.selectViewer(i),this.observeSubscriptions=[],this.observeSubscriptions.push(x.getObservable(this.terria,"viewerMode").subscribe(function(){var e,t,r;t=(e=this).terria,(r=t.viewerMode)===R.Leaflet?t.leaflet||(t.analytics.logEvent("mapSettings","switchViewer","2D"),e.selectViewer(!1)):e._useWebGL?r===R.CesiumTerrain?(t.analytics.logEvent("mapSettings","switchViewer","3D"),m(t.leaflet)?e.selectViewer(!0):(t.cesium.scene.globe.terrainProvider=e._bumpyTerrainProvider,p._cesiumCredit=e._bumpyTerrainCredit)):r===R.CesiumEllipsoid&&(t.analytics.logEvent("mapSettings","switchViewer","Smooth 3D"),m(t.leaflet)?e.selectViewer(!0):(t.cesium.scene.globe.terrainProvider=new v,p._cesiumCredit=void 0)):(t.error.raiseEvent({title:"WebGL not supported or too slow",message:'Your web browser cannot display the map in 3D, either because it does not support WebGL or because your web browser has reported that WebGL will be extremely slow.  Please try a different web browser, such as the latest version of <a href="http://www.google.com/chrome" target="_blank">Google Chrome</a>, <a href="http://www.mozilla.org/firefox" target="_blank">Mozilla Firefox</a>, <a href="https://www.apple.com/au/osx/how-to-upgrade/" target="_blank">Apple Safari</a>, or <a href="http://www.microsoft.com/ie" target="_blank">Microsoft Internet Explorer</a>.  In some cases, you may need to upgrade your computer\'s video driver or operating system in order to get the 3D view in '+t.appName+"."}),t.viewerMode=R.Leaflet)},this)),this._previousBaseMap=this.terria.baseMap,this.observeSubscriptions.push(x.getObservable(this.terria,"baseMap").subscribe(function(){G(this,this.terria.baseMap)},this)),this.observeSubscriptions.push(x.getObservable(this.terria,"fogSettings").subscribe(function(){W(this)},this)),this.observeSubscriptions.push(x.getObservable(this.terria,"selectBox").subscribe(function(){var e,t,r;t=(e=this).terria,r=t.selectBox,t.viewerMode===R.Leaflet?r?t.leaflet.map.dragBox.enable():t.leaflet.map.dragBox.disable():r?(e._enableSelectExtent(t.cesium.viewer.scene,!1),e.dragBox=new f(t,t.cesium.viewer.scene,function(e){var t=this.terria.mapInteractionModeStack;m(t)&&t.length>0&&t[t.length-1].drawRectangle&&(t[t.length-1].pickedFeatures=s(e,!0))}.bind(e),C.SHIFT),e.dragBox.start()):(e.dragBox.destroy(),e._enableSelectExtent(t.cesium.viewer.scene,!0))},this)),this.observeSubscriptions.push(x.getObservable(this.terria,"baseMaximumScreenSpaceError").subscribe(function(){!function(e){if(m(e.terria.cesium)){var t=e.terria;t.cesium.viewer.scene.globe.maximumScreenSpaceError=e.terria.baseMaximumScreenSpaceError,t.nowViewing.items.filter(function(e){return"3d-tiles"===e.type}).forEach(function(e){return e.syncMaximumScreenSpaceError&&e.syncMaximumScreenSpaceError()})}}(this)},this)),this.observeSubscriptions.push(x.getObservable(this.terria,"useNativeResolution").subscribe(function(){!function(e){if(m(e.terria.cesium)){var t=e.terria,r=t.useNativeResolution;t.cesium.viewer.resolutionScale=r?1/devicePixelRatio*2:1/devicePixelRatio,t.cesium.viewer.resize()}}(this)},this))};function G(e,t){m(e._previousBaseMap)&&(e._previousBaseMap._hide(),e._previousBaseMap._disable()),m(t)&&V(t.load()).then(function(){t._enable(),t._show(),m(e.terria.currentViewer)&&e.terria.currentViewer.lowerToBottom(t)}),e._previousBaseMap=t,m(e.terria.currentViewer)&&e.terria.currentViewer.notifyRepaintRequired()}function W(e){if(m(e.terria.fogSettings)&&m(e.terria.cesium)){var t=e.terria.fogSettings;for(var r in t)e.terria.cesium.scene.fog.hasOwnProperty(r)&&(e.terria.cesium.scene.fog[r]=t[r])}}B.create=function(e,t){return new B(e,t)},B.prototype._enableSelectExtent=function(e,t){if(t){var r=this;this.regionSelect=new f(r.terria,e,function(e){e&&r.terria.currentViewer.zoomTo(e,2)}),this.regionSelect.start()}else this.regionSelect.destroy()},B.prototype._createCesiumViewer=function(e,t){var r=this;q(this);var i=r._terrainProvider,a={dataSources:this.terria.dataSources,clock:this.terria.clock,terrainProvider:i,imageryProvider:new j({url:"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUA AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO 9TXL0Y4OHwAAAABJRU5ErkJggg=="}),scene3DOnly:!0,skyAtmosphere:this.terria.configParameters.cesiumSkyAtmosphere};b.isFirefox()&&(a.contextOptions={webgl:{preserveDrawingBuffer:!0}});var n=new t(e,a);if(n.scene.highDynamicRange=!1,n.scene.imageryLayers.removeAll(),i.errorEvent.addEventListener(function(e){console.log("Terrain provider error.  ",e.message),n.scene.terrainProvider instanceof l&&(console.log("Switching to EllipsoidTerrainProvider."),r.terria.viewerMode=R.CesiumEllipsoid,m(r.TerrainMessageViewed)||(r.terria.error.raiseEvent({title:"Terrain Server Not Responding",message:"The terrain server is not responding at the moment.  You can still use all the features of "+r.terria.appName+" but there will be no terrain detail in 3D mode.  We're sorry for the inconvenience.  Please try again later and the terrain server should be responding as expected.  If the issue persists, please contact us via email at "+r.terria.supportEmail+"."}),r.TerrainMessageViewed=!0))}),m(this._defaultTerriaCredit)){var o=w(e),s=o&&o.getElementsByClassName("cesium-widget-credits")[0],c=s&&s.getElementsByClassName("cesium-credit-logoContainer")[0];c&&s.insertBefore(this._defaultTerriaCredit.element,c)}var p=n.scene;p.globe.depthTestAgainstTerrain=!1;var f=this._getDisclaimer();f&&p.frameState.creditDisplay.addDefaultCredit(f),m(this._developerAttribution)&&p.frameState.creditDisplay.addDefaultCredit(u(this._developerAttribution.text,this._developerAttribution.link)),p.frameState.creditDisplay.addDefaultCredit(new d('<a href="http://cesiumjs.org" target="_blank" rel="noopener noreferrer">CESIUM</a>'));var h=n.screenSpaceEventHandler;return h.setInputAction(function(e){!function(e,t){H(e,2/3,t)}(p,e.position)},A.LEFT_DOUBLE_CLICK),h.setInputAction(function(e){!function(e,t){H(e,-2,t)}(p,e.position)},A.LEFT_DOUBLE_CLICK,C.SHIFT),n},B.prototype.destroy=function(){this.terria.beforeViewerChanged.raiseEvent(),G(this,void 0),this.observeSubscriptions.forEach(function(e){return e.dispose()}),m(this.terria.cesium)?this.destroyCesium():m(this.terria.leaflet)&&this.destroyLeaflet(),this.terria.currentViewer=new U(this.terria),this.terria.afterViewerChanged.raiseEvent()},B.prototype.destroyCesium=function(){var e=this.terria.cesium.viewer;this.terria.cesium.destroy(),this.cesiumEventHelper&&(this.cesiumEventHelper.removeAll(),this.cesiumEventHelper=void 0),this.dataSourceDisplay.destroy(),this._enableSelectExtent(e.scene,!1);var t=e.screenSpaceEventHandler;t.removeInputAction(A.MOUSE_MOVE),t.removeInputAction(A.LEFT_DOUBLE_CLICK),t.removeInputAction(A.LEFT_DOUBLE_CLICK,C.SHIFT),m(this.monitor)&&(this.monitor.destroy(),this.monitor=void 0),e.destroy(),this.terria.cesium=void 0},B.prototype.destroyLeaflet=function(){var e=this.terria.leaflet.map;this.terria.leaflet.destroy(),this.leafletEventHelper&&(this.leafletEventHelper.removeAll(),this.leafletEventHelper=void 0),this.dataSourceDisplay.destroy(),e.remove(),this.terria.leaflet=void 0},B.prototype.selectViewer=function(e){G(this,void 0),this.terria.beforeViewerChanged.raiseEvent();var t=this;(e?this.selectCesium():this.selectLeaflet()).then(function(){t.terria.afterViewerChanged.raiseEvent(),G(t,t.terria.baseMap)})},B.prototype.selectLeaflet=function(){var e,t,r;if(m(this.terria.cesium)){try{t=this.terria.cesium.getCurrentExtent()}catch(e){console.log("Using default screen extent",e.message),t=this.terria.initialView}this.destroyCesium()}else t=this.terria.initialView;(e=E.map(this._mapContainer,{zoomControl:!1,attributionControl:!1,maxZoom:this.maximumLeafletZoomLevel,zoomSnap:1,preferCanvas:!0,worldCopyJump:!0}).setView([-28.5,135],5)).attributionControl=E.control.attribution({position:"bottomleft"}),e.addControl(e.attributionControl),e.screenSpaceEventHandler={setInputAction:function(){},remoteInputAction:function(){}},e.destroy=function(){};var i=new I(this.terria,e);m(this.leafletVisualizer)||(this.leafletVisualizer=new L);var a=this._defaultTerriaCredit?this._defaultTerriaCredit.html:"",n=[this._getDisclaimer(),this._developerAttribution&&u(this._developerAttribution.text,this._developerAttribution.link),new d('<a target="_blank" href="http://leafletjs.com/">Leaflet</a>')];e.attributionControl.setPrefix(a+n.filter(function(e){return m(e)}).map(function(e){return e.html}).join(" | ")),e.on("boxzoomend",function(e){console.log(e.boxZoomBounds)}),this.terria.leaflet=i,this.terria.currentViewer=this.terria.leaflet,this.dataSourceDisplay=new k({scene:i.scene,dataSourceCollection:this.terria.dataSources,visualizersCallback:this.leafletVisualizer.visualizersCallback}),r=new y;var s=this;r.add(s.terria.clock.onTick,function(e){s.dataSourceDisplay.update(e.currentTime)}),this.terria.leaflet.dataSourceDisplay=this.dataSourceDisplay,this.leafletEventHelper=r;return function e(){m(s.terria.leaflet)&&(s.terria.clock.tick(),o(e))}(),this.terria.leaflet.zoomTo(t,0),V()},B.prototype.selectCesium=function(){var e=V.defer(),t=this;return Promise.all([r.e(5),r.e(0)]).then(function(){var i,a,n,o=r(744),s=r(759),l=r(769);if(m(t.terria.leaflet)&&(a=t.terria.leaflet.getCurrentExtent(),t.destroyLeaflet()),i=t._createCesiumViewer(t._mapContainer,o),t._enableSelectExtent(i.scene,!0),t.terria.cesium=new l(t.terria,i),t.terria.currentViewer=t.terria.cesium,W(t),!m(t.checkedStartupPerformance)){t.checkedStartupPerformance=!0;var u=new F(window.location).search(!0),c=m(u.fps)?u.fps:5;t.monitor=new _({scene:i.scene,minimumFrameRateDuringWarmup:c,minimumFrameRateAfterWarmup:0,samplingWindow:2}),t.monitor.lowFrameRate.addEventListener(function(){t.terria.cesium.stoppedRendering||(t.terria.error.raiseEvent({title:"Unusually Slow Performance Detected",message:"It appears that your system is capable of running "+t.terria.appName+" in 3D mode, but is having significant performance issues. We are automatically switching to 2D mode to help resolve this issue.  If you want to switch back to 3D mode you can select that option from the Maps button at the top of the screen."}),M(function(){t.terria.viewerMode=R.Leaflet}))})}(n=new y).add(t.terria.clock.onTick,function(e){t.dataSourceDisplay.update(e.currentTime)}),t.cesiumEventHelper=n,t.dataSourceDisplay=new s({scene:i.scene,dataSourceCollection:t.terria.dataSources}),t.terria.cesium.dataSourceDisplay=t.dataSourceDisplay,m(a)?t.terria.cesium.zoomTo(a,0):t.terria.cesium.zoomTo(t.terria.initialView,0),e.resolve()}.bind(null,r)).catch(r.oe),e.promise},B.prototype._getDisclaimer=function(){var e=this.terria.configParameters.disclaimer;return e?u(e.text,e.url):null};var z=new a;function H(e,t,r){var i=e.camera,o=i.getPickRay(r),s=e.globe.pick(o,e);s&&function(e,t,r){var i=e.camera,a=i.position,o=t;r=h(r,200);var s=N.eastNorthUpToFixedFrame(a,g.WGS84),l=new T;T.getRotation(s,l);var u=new P;P.transpose(l,u);var c=new P;P.multiplyByVector(u,i.up,c);var d=new P;P.multiplyByVector(u,i.right,d);var p=new P;P.multiplyByVector(u,i.direction,p);var f=e.screenSpaceCameraController;f.enableInputs=!1,e.tweens.add({duration:r/1e3,easingFunction:O.Easing.Sinusoidal.InOut,startObject:{time:0},stopObject:{time:1},update:function(t){e.camera.position.x=n.lerp(a.x,o.x,t.time),e.camera.position.y=n.lerp(a.y,o.y,t.time),e.camera.position.z=n.lerp(a.z,o.z,t.time);var r=N.eastNorthUpToFixedFrame(i.position,g.WGS84),s=new P;T.getRotation(r,s),i.up=P.multiplyByVector(s,c,i.up),i.right=P.multiplyByVector(s,d,i.right),i.direction=P.multiplyByVector(s,p,i.direction)},complete:function(){f.enableInputs=!0},cancel:function(){f.enableInputs=!0}})}(e,a.lerp(i.position,s,t,z))}function q(e){if(!m(e._terrainProvider)){if(e.terria.configParameters.cesiumIonAccessToken&&(S.defaultAccessToken=e.terria.configParameters.cesiumIonAccessToken),e.terria.configParameters.useCesiumIonTerrain){e._bumpyTerrainProvider=c();var t=r(710);e._bumpyTerrainCredit=new d('<a href="https://cesium.com/" target="_blank" rel="noopener noreferrer"><img src="'+t+'" title="Cesium ion"/></a>',!0)}else"string"==typeof e._terrain||e._terrain instanceof String?(e._bumpyTerrainProvider=new l({url:e._terrain}),e._bumpyTerrainCredit=void 0):m(e._terrain)?(e._bumpyTerrainProvider=e._terrain,e._bumpyTerrainCredit=void 0):(e._bumpyTerrainProvider=new v,e._bumpyTerrainCredit=void 0);var i=e.terria;if(i.viewerMode===R.CesiumTerrain?(e._terrainProvider=e._bumpyTerrainProvider,p._cesiumCredit=e._bumpyTerrainCredit):i.viewerMode===R.CesiumEllipsoid&&(e._terrainProvider=new v,p._cesiumCredit=void 0),e.terria.configParameters.hideTerriaLogo)e._defaultTerriaCredit=void 0;else{var a=r(1476);e._defaultTerriaCredit=new d('<div id="terriaLogoWrapper"><a id="terriaLogo" href="https://terria.io/" target="_blank" rel="noopener noreferrer" ><img src="'+a+'" title="Built with Terria"/></a></div>',!0)}}}e.exports=B},,,function(e,t,r){e.exports={baseLegend:"tjs-legend__baseLegend",bar:"tjs-legend__bar",locationBar:"tjs-legend__locationBar tjs-legend__baseLegend",distanceLegend:"tjs-legend__distanceLegend tjs-legend__baseLegend","section-long":"tjs-legend__section-long",sectionLong:"tjs-legend__section-long",section:"tjs-legend__section","section-short":"tjs-legend__section-short",sectionShort:"tjs-legend__section-short"}},function(e,t,r){"use strict";var i=v(r(13)),a=v(r(19)),n=v(r(211)),o=v(r(1518)),s=v(r(408)),l=v(r(15)),u=v(r(35)),c=v(r(260)),d=v(r(8)),p=r(279),f=v(r(39)),h=v(r(21)),m=v(r(713)),g=v(r(58));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_=(0,a.default)({displayName:"DateTimePicker",mixins:[h.default],propTypes:{dates:l.default.array.isRequired,currentDate:l.default.object,onChange:l.default.func.isRequired,openDirection:l.default.string,isOpen:l.default.bool.isRequired,onOpen:l.default.func.isRequired,onClose:l.default.func.isRequired,showCalendarButton:l.default.bool,dateFormat:l.default.object},getDefaultProps:function(){return{currentDate:void 0,showCalendarButton:!0,openDirection:"down"}},getInitialState:function(){return{century:null,year:null,month:null,day:null,time:null,hour:null,granularity:null}},UNSAFE_componentWillMount:function(){var e=x(this.props.dates),t=null,r=null,i=null,a=null,n="century";if(1===e.indice.length){var o=e.indice[0],s=e[o];if(t=o,1===s.indice.length){var l=s.indice[0],u=s[l];if(r=l,n="year",1===u.indice){var c=u.indice[0],d=u[c];i=c,n="month",1===d.indice&&(a=d.indice[0])}}}this.setState({century:t,year:r,month:i,day:a,time:p,granularity:n});var p=this.props.currentDate;window.addEventListener("click",this.closePicker)},componentWillUnmount:function(){window.removeEventListener("click",this.closePicker)},closePicker:function(e){void 0!==e&&this.setState({time:e}),this.props.onClose&&this.props.onClose()},renderCenturyGrid:function(e){var t=this,r=e.indice;return e.dates&&e.dates.length>=12?i.default.createElement("div",{className:m.default.grid},i.default.createElement("div",{className:m.default.gridHeading},"Select a century"),r.map(function(e){return i.default.createElement("button",{key:e,className:m.default.centuryBtn,onClick:function(){return t.setState({century:e})}},e,"00")})):this.renderList(e.dates)},renderYearGrid:function(e){var t=this;if(e.dates&&e.dates.length>12){var r=e.indice,a=Array.apply(null,{length:12}).map(Number.call,Number);return i.default.createElement("div",{className:m.default.grid},i.default.createElement("div",{className:m.default.gridHeading},"Select a year"),i.default.createElement("div",{className:m.default.gridBody},r.map(function(r){return i.default.createElement("div",{className:m.default.gridRow,key:r,onClick:function(){return t.setState({year:r,month:null,day:null,time:null})}},i.default.createElement("span",{className:m.default.gridLabel},r),i.default.createElement("span",{className:m.default.gridRowInner12},a.map(function(t){return i.default.createElement("span",{className:e[r][t]?m.default.activeGrid:"",key:t})})))})))}return this.renderList(e.dates)},renderMonthGrid:function(e){var t=this,r=this.state.year;return e[r].dates&&e[r].dates.length>12?i.default.createElement("div",{className:m.default.grid},i.default.createElement("div",{className:m.default.gridHeading},i.default.createElement("button",{className:m.default.backbtn,onClick:function(){t.setState({year:null,month:null,day:null,time:null})}},this.state.year)),i.default.createElement("div",{className:m.default.gridBody},b.map(function(a,n){return i.default.createElement("div",{className:(0,u.default)(m.default.gridRow,y({},m.default.inactiveGridRow,!(0,d.default)(e[r][n]))),key:a,onClick:function(){return(0,d.default)(e[r][n])&&t.setState({month:n,day:null,time:null})}},i.default.createElement("span",{className:m.default.gridLabel},a),i.default.createElement("span",{className:m.default.gridRowInner31},function(e,t){var r=new Date(t,e,0).getDate();return Array.apply(null,{length:r}).map(Number.call,Number)}(n+1,r).map(function(t){return i.default.createElement("span",{className:(0,d.default)(e[r][n])&&(0,d.default)(e[r][n][t+1])?m.default.activeGrid:"",key:t})})))}))):this.renderList(e[r].dates)},renderDayView:function(e){var t=this;if(e[this.state.year][this.state.month].dates&&e[this.state.year][this.state.month].dates.length>31){var r=e[this.state.year][this.state.month].indice.map(function(e){return(0,s.default)().date(e).month(t.state.month).year(t.state.year)}),a=(0,d.default)(this.state.day)?(0,s.default)().date(this.state.day).month(this.state.month).year(this.state.year):null;return i.default.createElement("div",{className:m.default.dayPicker},i.default.createElement("div",null,i.default.createElement("button",{className:m.default.backbtn,onClick:function(){t.setState({year:null,month:null,day:null,time:null})}},this.state.year),i.default.createElement("button",{className:m.default.backbtn,onClick:function(){t.setState({month:null,day:null,time:null})}},b[this.state.month])),i.default.createElement(o.default,{inline:!0,onChange:function(e){return t.setState({day:e.date()})},includeDates:r,selected:a}))}return this.renderList(e[this.state.year][this.state.month].dates)},renderList:function(e){var t=this;if((0,d.default)(e))return i.default.createElement("div",{className:m.default.grid},i.default.createElement("div",{className:m.default.gridHeading},"Select a time"),i.default.createElement("div",{className:m.default.gridBody},e.map(function(e){return i.default.createElement("button",{key:(0,p.formatDateTime)(e),className:m.default.dateBtn,onClick:function(){t.closePicker(e),t.props.onChange(e)}},(0,d.default)(t.props.dateFormat)?(0,n.default)(e,t.props.dateFormat.currentTime):(0,p.formatDateTime)(e))})))},renderHourView:function(e){var t=this;return e[this.state.year][this.state.month][this.state.day].dates.map(function(e){return{value:e,label:(0,p.formatDateTime)(e)}}).length>24?i.default.createElement("div",{className:m.default.grid},i.default.createElement("div",{className:m.default.gridHeading},"Select an hour on ".concat(this.state.day," ").concat(b[this.state.month+1]," ").concat(this.state.year)," "),i.default.createElement("div",{className:m.default.gridBody},e[this.state.year][this.state.month][this.state.day].indice.map(function(r){return i.default.createElement("button",{key:r,className:m.default.dateBtn,onClick:function(){return t.setState({hour:r})}},i.default.createElement("span",null,r," : 00 - ",r+1," : 00")," ",i.default.createElement("span",null,"(",e[t.state.year][t.state.month][t.state.day][r].length," ","options)"))}))):this.renderList(e[this.state.year][this.state.month][this.state.day].dates)},renderMinutesView:function(e){var t=e[this.state.year][this.state.month][this.state.day][this.state.hour];return this.renderList(t)},goBack:function(){(0,d.default)(this.state.time)?((0,d.default)(this.state.month)||this.setState({year:null,month:null,day:null}),(0,d.default)(this.state.hour)||this.setState({day:null}),(0,d.default)(this.state.day)||this.setState({month:null,day:null}),this.setState({hour:null,time:null})):(0,d.default)(this.state.hour)?this.setState({hour:null,time:null}):(0,d.default)(this.state.day)?this.setState({day:null,time:null,hour:null}):(0,d.default)(this.state.month)?this.setState({month:null,time:null,day:null,hour:null}):(0,d.default)(this.state.year)?this.setState({year:null,month:null,time:null,day:null,hour:null}):(0,d.default)(this.state.century)&&this.setState({century:null,year:null,month:null,time:null,day:null,hour:null})},toggleDatePicker:function(){if(this.props.isOpen)this.props.onClose();else{var e=this.props.currentDate;if((0,d.default)(e)){var t={day:(0,d.default)(this.state.day)?e.getDate():null,month:(0,d.default)(this.state.month)?e.getMonth():null,year:(0,d.default)(this.state.year)?e.getFullYear():null,century:(0,d.default)(this.state.century)?Math.floor(e.getFullYear()/100):null,time:(0,d.default)(this.state.time)?e:null};this.setState(t)}this.props.onOpen()}},render:function(){var e=this;if(this.props.dates){var t=x(this.props.dates);return i.default.createElement("div",{className:m.default.timelineDatePicker,onClick:function(e){e.stopPropagation()}},this.props.showCalendarButton&&i.default.createElement("button",{className:m.default.togglebutton,onClick:function(){e.toggleDatePicker()}},i.default.createElement(f.default,{glyph:f.default.GLYPHS.calendar})),this.props.isOpen&&i.default.createElement("div",{className:(0,u.default)(m.default.datePicker,y({},m.default.openBelow,"down"===this.props.openDirection))},i.default.createElement("button",{className:m.default.backbutton,disabled:!this.state[this.state.granularity],type:"button",onClick:function(){return e.goBack()}},i.default.createElement(f.default,{glyph:f.default.GLYPHS.left})),!(0,d.default)(this.state.century)&&this.renderCenturyGrid(t),(0,d.default)(this.state.century)&&!(0,d.default)(this.state.year)&&this.renderYearGrid(t[this.state.century]),(0,d.default)(this.state.year)&&!(0,d.default)(this.state.month)&&this.renderMonthGrid(t[this.state.century]),(0,d.default)(this.state.year)&&(0,d.default)(this.state.month)&&!(0,d.default)(this.state.day)&&this.renderDayView(t[this.state.century]),(0,d.default)(this.state.year)&&(0,d.default)(this.state.month)&&(0,d.default)(this.state.day)&&!(0,d.default)(this.state.hour)&&this.renderHourView(t[this.state.century]),(0,d.default)(this.state.year)&&(0,d.default)(this.state.month)&&(0,d.default)(this.state.day)&&(0,d.default)(this.state.hour)&&this.renderMinutesView(t[this.state.century])))}return null}});function w(e){return(0,c.default)(e.map(function(e){return e.getMonth()}))}function S(e){return(0,c.default)(e.map(function(e){return e.getDate()}))}function C(e){return(0,c.default)(e.map(function(e){return e.getHours()}))}function x(e){var t=(0,c.default)(e.map(function(e){return e.getFullYear()})),r=(0,c.default)(t.map(function(e){return Math.floor(e/100)})),i=r.reduce(function(r,i){return(0,g.default)(r,function(e,t,r){var i=r.filter(function(t){return Math.floor(t/100)===e}),a=function(e,t){return t.filter(function(t){return Math.floor(t.getFullYear()/100)===e})}(e,t),n=y({},e,i.reduce(function(e,r){return(0,g.default)(e,function(e,t){var r=function(e,t){return t.filter(function(t){return t.getFullYear()===e})}(e,t),i={};return w(r).forEach(function(e){var t=function(e,t){return e.filter(function(e){return e.getMonth()===t})}(r,e),a={};S(t).forEach(function(e){a.dates=t,a.indice=S(t);var r={},i=function(e,t){return e.filter(function(e){return e.getDate()===t})}(t,e);C(i).forEach(function(e){r[e]=function(e,t){return e.filter(function(e){return e.getHours()===t})}(i,e),r.dates=i,r.indice=C(i)}),a[e]=r}),i[e]=a,i.indice=w(r),i.dates=r}),y({},e,i)}(r,t))},{}));return n[e].dates=a,n[e].indice=i,n}(i,e,t))},{});return i.dates=e,i.indice=r,i}e.exports=_},function(e,t,r){e.exports={timeline:"tjs-timeline__timeline","text-row":"tjs-timeline__text-row",textRow:"tjs-timeline__text-row","text-cell":"tjs-timeline__text-cell",textCell:"tjs-timeline__text-cell",time:"tjs-timeline__time",controlsRow:"tjs-timeline__controlsRow","style-selector":"tjs-timeline__style-selector",styleSelector:"tjs-timeline__style-selector",title:"tjs-timeline__title",field:"tjs-timeline__field tjs-_form__field tjs-_form__input",timelineDatePicker:"tjs-timeline__timelineDatePicker",datePicker:"tjs-timeline__datePicker",openBelow:"tjs-timeline__openBelow",dayPicker:"tjs-timeline__dayPicker",backbutton:"tjs-timeline__backbutton tjs-_buttons__btn tjs-_buttons__btn-transparent",backbtn:"tjs-timeline__backbtn tjs-_buttons__btn tjs-_buttons__btn-transparent",togglebutton:"tjs-timeline__togglebutton",grid:"tjs-timeline__grid",gridBody:"tjs-timeline__gridBody tjs-_base__scrollbars",gridRow:"tjs-timeline__gridRow",inactiveGridRow:"tjs-timeline__inactiveGridRow",gridLabel:"tjs-timeline__gridLabel",gridRowInner12:"tjs-timeline__gridRowInner12",gridRowInner31:"tjs-timeline__gridRowInner31",activeGrid:"tjs-timeline__activeGrid",gridHeading:"tjs-timeline__gridHeading",summary:"tjs-timeline__summary",centuryBtn:"tjs-timeline__centuryBtn tjs-_buttons__btn tjs-_buttons__btn-primary",dateBtn:"tjs-timeline__dateBtn tjs-_buttons__btn tjs-_buttons__btn-primary"}},,function(e,t,r){"use strict";var i,a=m(r(13)),n=m(r(19)),o=m(r(15)),s=m(r(35)),l=m(r(771)),u=m(r(177)),c=m(r(21)),d=m(r(345)),p=m(r(39)),f=m(r(1591)),h=m(r(217));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=(g(i={},u.default.CesiumTerrain,"3D Terrain"),g(i,u.default.CesiumEllipsoid,"3D Smooth"),g(i,u.default.Leaflet,"2D"),i),y={0:"Maximum performance, lower quality",1:"Balanced performance & quality",2:"Maximum quality, lower performance"},b=(0,n.default)({displayName:"SettingPanel",mixins:[c.default],propTypes:{terria:o.default.object.isRequired,allBaseMaps:o.default.array,viewState:o.default.object.isRequired},getInitialState:function(){return{activeMap:this.props.terria.baseMap?this.props.terria.baseMap.name:"(None)"}},selectBaseMap:function(e,t){t.stopPropagation(),this.props.terria.baseMap=e.catalogItem,this.props.terria.baseMapContrastColor=e.contrastColor,this.props.terria.setLocalProperty("basemap",e.catalogItem.name)},mouseEnterBaseMap:function(e){this.setState({activeMap:e.catalogItem.name})},mouseLeaveBaseMap:function(){this.setState({activeMap:this.props.terria.baseMap?this.props.terria.baseMap.name:"(None)"})},selectViewer:function(e,t){var r;switch(t.stopPropagation(),e){case 0:r=u.default.CesiumTerrain;break;case 1:r=u.default.CesiumEllipsoid;break;case 2:r=u.default.Leaflet;break;default:return}this.props.terria.viewerMode=r,this.props.terria.setLocalProperty("viewermode",r),this.props.terria.currentViewer.notifyRepaintRequired()},render:function(){var e=this,t=this,r=this.props.terria.useNativeResolution,i=this.props.terria.viewerMode,n=this.props.terria.baseMap?this.props.terria.baseMap.name:"(None)",o="Press to stop using ".concat(r?"native":"screen"," resolution and start using ").concat(r?"screen":"native"," resolution"),c={outer:f.default.settingPanel,inner:f.default.dropdownInner,btn:f.default.btnDropdown,icon:"map"},m=[];return(this.props.terria.configParameters.useCesiumIonTerrain||this.props.terria.configParameters.cesiumTerrainUrl)&&m.push(u.default.CesiumTerrain),m.push(u.default.CesiumEllipsoid,u.default.Leaflet),a.default.createElement(d.default,{theme:c,btnTitle:"Change view",btnText:"Map",viewState:this.props.viewState,smallScreen:this.props.viewState.useSmallScreenInterface},a.default.createElement("div",{className:(0,s.default)(f.default.viewer,h.default.section)},a.default.createElement("label",{className:h.default.heading}," Map View "),a.default.createElement("ul",{className:f.default.viewerSelector},m.map(function(e,r){return a.default.createElement("li",{key:e,className:f.default.listItem},a.default.createElement("button",{onClick:t.selectViewer.bind(this,e),className:(0,s.default)(f.default.btnViewer,g({},f.default.isActive,e===i))},v[e]))},this))),a.default.createElement("div",{className:(0,s.default)(f.default.baseMap,h.default.section)},a.default.createElement("label",{className:h.default.heading}," Base Map "),a.default.createElement("label",{className:h.default.subHeading},this.state.activeMap),a.default.createElement("ul",{className:f.default.baseMapSelector},this.props.allBaseMaps.map(function(e,r){return a.default.createElement("li",{key:r,className:f.default.listItem},a.default.createElement("button",{className:(0,s.default)(f.default.btnBaseMap,g({},f.default.isActive,e.catalogItem.name===n)),onClick:t.selectBaseMap.bind(this,e),onMouseEnter:t.mouseEnterBaseMap.bind(this,e),onMouseLeave:t.mouseLeaveBaseMap.bind(this,e),onFocus:t.mouseEnterBaseMap.bind(this,e)},e.catalogItem.name===n?a.default.createElement(p.default,{glyph:p.default.GLYPHS.selected}):null,a.default.createElement("img",{alt:e.catalogItem.name,src:e.image})))},this))),this.props.terria.viewerMode!==u.default.Leaflet?a.default.createElement("div",{className:h.default.section},a.default.createElement("label",{className:h.default.heading},"Image Optimisation"),a.default.createElement("section",{className:f.default.nativeResolutionWrapper,title:y[this.props.terria.quality]},a.default.createElement("button",{id:"mapUseNativeResolution",type:"button",onClick:function(){return e.props.terria.useNativeResolution=!r},title:o,className:f.default.btnNativeResolution},r?a.default.createElement(p.default,{glyph:p.default.GLYPHS.checkboxOn}):a.default.createElement(p.default,{glyph:p.default.GLYPHS.checkboxOff})),a.default.createElement("label",{title:o,htmlFor:"mapUseNativeResolution",className:(0,s.default)(h.default.subHeading,f.default.nativeResolutionHeader)},"Use native device resolution")),a.default.createElement("label",{htmlFor:"mapQuality",className:(0,s.default)(h.default.subHeading)},"Raster Map Quality:"),a.default.createElement("section",{className:f.default.qualityWrapper,title:y[this.props.terria.quality]},a.default.createElement("label",{className:(0,s.default)(h.default.subHeading,f.default.qualityLabel)},"Quality"),a.default.createElement(l.default,{id:"mapMaximumScreenSpaceError",className:f.default.opacitySlider,min:1,max:3,step:.1,value:this.props.terria.baseMaximumScreenSpaceError,onChange:function(t){return e.props.terria.baseMaximumScreenSpaceError=t},marks:{2:""}}),a.default.createElement("label",{className:(0,s.default)(h.default.subHeading,f.default.qualityLabel)},"Performance"))):null)}});e.exports=b},,,,,,,,,,,,,,,function(e,t,r){e.exports={toolsPanel:"tjs-tools-panel__toolsPanel",submit:"tjs-tools-panel__submit tjs-_buttons__btn tjs-_buttons__btn-primary",results:"tjs-tools-panel__results"}},function(e,t,r){"use strict";var i=p(r(21)),a=p(r(13)),n=p(r(19)),o=p(r(15)),s=p(r(693)),l=p(r(489)),u=p(r(35)),c=p(r(39)),d=p(r(1603));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=(0,n.default)({displayName:"LocationSearchResults",mixins:[i.default],propTypes:{viewState:o.default.object.isRequired,isWaitingForSearchToStart:o.default.bool,terria:o.default.object.isRequired,search:o.default.object.isRequired,onLocationClick:o.default.func.isRequired,theme:o.default.string},getInitialState:function(){return{isOpen:!0,isExpanded:!1}},getDefaultProps:function(){return{theme:"dark"}},toggleGroup:function(){this.setState({isOpen:!this.state.isOpen})},toggleExpand:function(){this.setState({isExpanded:!this.state.isExpanded})},renderResultsFooter:function(){return this.state.isExpanded?"View less ".concat(this.props.search.name," results"):"View more ".concat(this.props.search.name," results")},render:function(){var e,t=this,r=this.props.search,i=r.searchResults.length>5?this.state.isExpanded?r.searchResults:r.searchResults.slice(0,5):r.searchResults;return a.default.createElement("div",{key:r.name,className:(0,u.default)(d.default.providerResult,(e={},f(e,d.default.isOpen,this.state.isOpen),f(e,d.default.dark,"dark"===this.props.theme),f(e,d.default.light,"light"===this.props.theme),e))},a.default.createElement("button",{onClick:this.toggleGroup,className:d.default.heading},a.default.createElement("span",null,r.name),a.default.createElement(c.default,{glyph:this.state.isOpen?c.default.GLYPHS.opened:c.default.GLYPHS.closed})),a.default.createElement(s.default,{searchProvider:r,isWaitingForSearchToStart:this.props.isWaitingForSearchToStart}),a.default.createElement("ul",{className:d.default.items},i.map(function(e,r){return a.default.createElement(l.default,{key:r,clickAction:t.props.onLocationClick.bind(null,e),name:e.name,icon:"location",theme:t.props.theme})}),r.searchResults.length>5&&a.default.createElement("button",{className:d.default.footer,onClick:this.toggleExpand},this.renderResultsFooter(),a.default.createElement(c.default,{glyph:this.state.isExpanded?c.default.GLYPHS.opened:c.default.GLYPHS.closed}))))}});e.exports=h},function(e,t,r){"use strict";var i=c(r(13)),a=c(r(19)),n=c(r(15)),o=c(r(357)),s=c(r(1605)),l=c(r(21)),u=c(r(1638));function c(e){return e&&e.__esModule?e:{default:e}}r(1639);var d=(0,a.default)({displayName:"WorkbenchList",mixins:[l.default],propTypes:{terria:n.default.object.isRequired,viewState:n.default.object.isRequired},onSort:function(e,t,r){for(var i=this.props.terria.nowViewing.items.indexOf(t),a=r;i<a;)this.props.terria.nowViewing.lower(t),++i;for(;i>a;)this.props.terria.nowViewing.raise(t),--i},render:function(){return i.default.createElement("ul",{className:u.default.workbenchContent},i.default.createElement(o.default,{onSort:this.onSort,direction:"vertical",dynamic:!0},this.props.terria.nowViewing.items.map(function(e,t){return i.default.createElement(s.default,{item:e,sortData:e,key:e.uniqueId,viewState:this.props.viewState})},this)))}});e.exports=d},function(e,t,r){e.exports={root:"tjs-concept-viewer__root",section:"tjs-concept-viewer__section",inner:"tjs-concept-viewer__inner","children-list":"tjs-concept-viewer__children-list tjs-_base__list-reset tjs-_base__clearfix",childrenList:"tjs-concept-viewer__children-list tjs-_base__list-reset tjs-_base__clearfix",header:"tjs-concept-viewer__header",btnGroup:"tjs-concept-viewer__btnGroup",hasChildren:"tjs-concept-viewer__hasChildren",isSelectable:"tjs-concept-viewer__isSelectable",btnToggleOpen:"tjs-concept-viewer__btnToggleOpen tjs-_buttons__btn",btnToggleActive:"tjs-concept-viewer__btnToggleActive tjs-_buttons__btn",items:"tjs-concept-viewer__items tjs-_base__list-reset","is-loading":"tjs-concept-viewer__is-loading",isLoading:"tjs-concept-viewer__is-loading",unSelectable:"tjs-concept-viewer__unSelectable"}},function(e,t,r){"use strict";var i=l(r(21)),a=l(r(351)),n=l(r(1658)),o=l(r(35)),s=l(r(39));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=r(13),d=r(19),p=r(15),f=d({displayName:"FullScreenButton",mixins:[i.default],propTypes:{terria:p.object,viewState:p.object.isRequired,btnText:p.string,minified:p.bool,animationDuration:p.number},getInitialState:function(){return{isActive:!1}},toggleFullScreen:function(){this.props.viewState.isMapFullScreen=!this.props.viewState.isMapFullScreen,this.props.terria.currentViewer.notifyRepaintRequired(),setTimeout(function(){(0,a.default)()},this.props.animationDuration||1),this.props.terria.analytics.logEvent("toggle full screen",this.props.viewState.isMapFullScreen?"exit":"enter","fullScreen")},renderButtonText:function(){var e=this.props.btnText?this.props.btnText:null;return this.props.minified?this.props.viewState.isMapFullScreen?c.createElement(s.default,{glyph:s.default.GLYPHS.right}):c.createElement(s.default,{glyph:s.default.GLYPHS.left}):c.createElement("span",null,e,c.createElement(s.default,{glyph:s.default.GLYPHS.right}))},render:function(){var e,t=(0,o.default)(n.default.btn,(u(e={},n.default.isActive,this.props.viewState.isMapFullScreen),u(e,n.default.minified,this.props.minified),e));return c.createElement("div",{className:(0,o.default)(n.default.fullScreen,u({},n.default.minifiedFullscreenBtnWrapper,this.props.minified))},this.props.minified&&c.createElement("label",{className:n.default.toggleWorkbench,htmlFor:"toggle-workbench"},this.props.btnText),c.createElement("button",{type:"button",id:"toggle-workbench","aria-label":this.props.viewState.isMapFullScreen?"Show Workbench":"Hide Workbench",onClick:this.toggleFullScreen,className:t,title:this.props.viewState.isMapFullScreen?"Show Workbench":"Hide Workbench"},this.renderButtonText()))}});e.exports=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(9),n=r(8),o=r(10),s=r(11),l=r(70),u=r(154),c=r(36),d=function(e){if(!n(e)||!n(e.terria))throw new s("options.terria is required.");this.terria=e.terria,this.url=e.url,this._isUsable=void 0};o(d.prototype,{isUsable:{get:function(){return this._isUsable}}}),d.prototype.init=function(e){this.url=a(this.url,a(this.terria.configParameters.shareUrl,"share")),"object"===i(e)&&"string"==typeof e.newShareUrlPrefix?this._isUsable=!0:this._isUsable=!1},d.prototype.getShareToken=function(e){if(!this.isUsable)throw new s("ShareDataService is not usable.");var t=this;return u({url:this.url,method:"POST",data:JSON.stringify(e),headers:{"Content-Type":"application/json"},responseType:"json"}).then(function(e){return("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),e.id}).otherwise(function(e){console.log(e),t.terria.error.raiseEvent(new c({title:"Couldn't generate short URL.",message:"Something went wrong when trying to use the share data service to generate a short URL. If you believe it is a bug in "+t.terria.appName+', please report it by emailing <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>."}))})},d.prototype.resolveData=function(e){var t=this;if(!this.isUsable)throw new s("ShareDataService is not usable because ###");return l(this.url+"/"+e).then(function(e){return e}).otherwise(function(){t.terria.error.raiseEvent(new c({title:"Couldn't expand URL",message:"The share data service used to launch "+t.terria.appName+" was not located. This may indicate an error in the link or that the service is unavailable at this time. If you believe it is a bug in "+t.terria.appName+', please report it by emailing <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>."}))})},e.exports=d},,,,,,,,function(e,t,r){"use strict";var i=r(138),a=r(782),n=r(1059),o=r(1060);e.exports=function(){i.register("places-like-me-function",a),i.register("spatial-detailing-function",n),i.register("why-am-i-special-function",o)}},function(e,t,r){"use strict";var i=r(253),a=r(179),n=r(8),o=r(10),s=r(1056),l=r(27),u=r(419),c=r(36),d=r(420),p=r(421),f=r(238),h=r(40),m=r(1058),g=function(e){i.call(this,e),this.url=void 0,this.name="Regions like this",this.description="Identifies regions that are _most like_ a given region according to a given set of characteristics.",this._regionTypeParameter=new f({terria:this.terria,catalogFunction:this,id:"regionType",name:"Region Type",description:"The type of region to analyze."}),this._regionParameter=new p({terria:this.terria,catalogFunction:this,id:"region",name:"Region",description:"The region to analyze.  The analysis will determine which regions are most similar to this one.",regionProvider:this._regionTypeParameter}),this._dataParameter=new d({terria:this.terria,catalogFunction:this,id:"data",name:"Characteristics",description:"The region characteristics to include in the analysis.",regionProvider:this._regionTypeParameter}),this._parameters=[this._regionTypeParameter,this._regionParameter,this._dataParameter]};l(i,g),o(g.prototype,{type:{get:function(){return"places-like-me-function"}},typeName:{get:function(){return"Places Like Me"}},parameters:{get:function(){return this._parameters}}}),g.prototype._load=function(){},g.prototype.invoke=function(){var e=this._regionParameter.value,t=this._dataParameter.getRegionDataValue();if(!n(e))throw new c({title:"Region not selected",message:"You must select a Region."});var r=this._regionTypeParameter.value,i={algorithm:"placeslikeme",boundaries_name:r.regionType,region_codes:t.regionCodes,columns:t.columnHeadings,table:t.table,parameters:{query:e.id}},o=r.regions.indexOf(e),l=e.id;o>=0&&(l=r.regionNames[o]||l);var d="Places like "+l,p=this;return u(this.terria,d,this.url,i).then(function(i){var n=i.result,o=r.aliases[0]+",Likeness\n",u=n.likeness;if(t.regionCodes.length!==u.length)throw new h("The list of likenesses and the list of region codes do not contain the same number of elements.");for(var c=0;c<t.regionCodes.length;++c)o+=t.regionCodes[c]+","+Math.pow(u[c],3)+"\n";var f=new a(p.terria);f.name=d,f.data=o,f.dataUrl=i.url,f.tableStyle.colorBins=40,f.tableStyle.colorMap=[{color:"rgba(255,255,255,1.00)",offset:0},{color:"rgba(191, 191, 255, 1.0)",offset:.5},{color:"rgba(0, 0, 255, 1.0)",offset:1}];var g='This is the result of invoking "'+p.name+'" at '+i.startDate+" with these parameters:\n\n";g+=" * "+r.regionType+" Region: "+l+" ("+e.id+")\n",g+=" * Characteristics: "+t.columnHeadings.join(", ")+"\n",f.description=g,s(f,function(){return m(f,r,e)}),f.isEnabled=!0})},e.exports=g},,,,,function(e,t,r){"use strict";var i=r(770),a=l(r(292)),n=l(r(258)),o=r(82),s=l(r(8));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=d(this,p(t).call(this))).path=null,e.chartData=null,e.sy=null,e}var r,l,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a["default"]),r=t,(l=[{key:"render",value:function(e,t,r){var a=this,o=r.chartTransform,l=r.scales,u=l.x,c=l.y[t.units],d=t.color||"white";this.path=(0,i.line)().x(function(e){return u(e.x)}).y(function(e){return c(e.y)})(t.points.filter(function(e){return(0,s.default)(e.y)})),this.chartData=t,this.sy=c,(0,n.default)(e,[t],"path",function(e,t){e.attr("d",a.path).style("fill","none").style("stroke",d),"function"==typeof e.classed&&e.classed("line",!0)},o)}},{key:"zoomOnAxisX",value:function(e){var t=this;this.path=(0,i.line)().x(function(t){return e(t.x)}).y(function(e){return t.sy(e.y)})(this.chartData.points.filter(function(e){return(0,s.default)(e.y)})),(0,o.select)("#".concat(this.id)).selectAll("path").attr("d",this.path)}}])&&c(r.prototype,l),u&&c(r,u),t}();e.exports=h},function(e,t,r){"use strict";var i=n(r(258)),a=n(r(292));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,u(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a["default"]),r=t,(n=[{key:"render",value:function(e,r,a){var n=a.scales,o=a.state,s=a.chartTransition,l=o.data.filter(function(e){return e.renderer instanceof t}),u=6*l.length/2-6*l.indexOf(r),c=n.x,d=n.y[r.units],p=r.color||"white",f=r.points.map(function(e){var t={x:c(e.x)-u,y:d(e.y),dx:6,dy:d(0)-d(e.y)};return t.dy<0&&(t.y+=t.dy,t.dy*=-1),t});(0,i.default)(e,f,"rect",function(e){return e.attr("x",function(e){return e.x}).attr("y",function(e){return e.y}).attr("width",function(e){return e.dx}).attr("height",function(e){return e.dy}).style("fill",p).style("stroke","none")},s)}},{key:"getXpadding",value:function(e,r){return 6*r.data.filter(function(e){return e.renderer instanceof t}).length/2}}])&&s(r.prototype,n),o&&s(r,o),t}();e.exports=d},function(e,t,r){"use strict";var i=o(r(292)),a=o(r(258)),n=r(82);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this))}var r,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i["default"]),r=t,(o=[{key:"render",value:function(e,t,r){r.chartTransform;var i=r.scales,n=r.size,o=t.points.length,s=(i.x(t.points[o-1].x)-i.x(t.points[0].x))/o;(0,a.default)(e,t.points,"rect",function(e,r){e.attr("class",function(e,t){return"dataIndex-".concat(t)}).style("fill",t.color||"turquoise").attr("fill-opacity",function(e,r){return r===t.selectedIndex?1:s>3?.4:.2}).attr("x",function(e){return i.x(e.x)}).attr("y",0).attr("width",function(e,r){return r===t.selectedIndex?3:1}).attr("height",n.plotHeight).attr("cursor","pointer")})}},{key:"highlightMoment",value:function(e){(0,n.select)("#".concat(this.id)).selectAll("rect").style("fill-opacity",.2).style("width",1).filter(".dataIndex-".concat(e)).style("fill-opacity",1).style("width",3)}},{key:"zoomOnAxisX",value:function(e){(0,n.select)("#".concat(this.id)).selectAll("rect").attr("x",function(t){return e(t.x)})}}])&&l(r.prototype,o),s&&l(r,s),t}();e.exports=p},function(e,t,r){"use strict";var i=s(r(292)),a=s(r(258)),n=r(82),o=r(223);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,d(t).call(this))).alternateYAxis=null,e.chartData=null,e.yMin=null,e.yMax=null,e.lastKnownXScale=null,e}var r,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i["default"]),r=t,(s=[{key:"render",value:function(e,t,r,i){var n=r.chartTransform,s=r.scales,l=r.size;null!==i?(this.alternateYAxis=i.firstY,this.yMin=i.yMin,this.yMax=i.yMax):(this.alternateYAxis=null,this.yMin=0,this.yMax=1),this.chartData=t;var u=this;this.lastKnownXScale=s.x;var c=this._calculateSpacing();(0,a.default)(e,t.points,"circle",function(e,r){return e.attr("class",function(e,t){return"dataIndex-".concat(t)}).style("fill",t.color||"turquoise").attr("r",function(e,r){return r===t.selectedIndex?c>2?8:5:c>2?5:2}).style("fill-opacity",function(e,r){return r===t.selectedIndex?1:.3}).attr("cx",function(e){return s.x(e.x)}).attr("cy",function(e){if(null===u.alternateYAxis)return l.plotHeight/2;var t=u._findNearestX(e.x);if(null===t||t===u.alternateYAxis.points.length-2||-1===t)return l.plotHeight/2;var r=u._getXAsPercentage(e.x,u.alternateYAxis.points[t].x,u.alternateYAxis.points[t+1].x),i=(0,o.interpolateNumber)(u.alternateYAxis.points[t].y,u.alternateYAxis.points[t+1].y)(r),a=(0,o.interpolateNumber)(0,l.plotHeight),n=a(u._calcPercentageBetweenMinAndMax(u.alternateYAxis.yAxisMin,u.yMin,u.yMax)),s=a(u._calcPercentageBetweenMinAndMax(u.alternateYAxis.yAxisMax,u.yMin,u.yMax));return l.plotHeight-u._getYAsPercentage(i,n,s,u.alternateYAxis.yAxisMin,u.alternateYAxis.yAxisMax)})},n)}},{key:"zoomOnAxisX",value:function(e){this.lastKnownXScale=e;var t=this._calculateSpacing(),r=this.chartData;(0,n.select)("#".concat(this.id)).selectAll("circle").attr("cx",function(t){return e(t.x)}).attr("r",function(e,i){return i===r.selectedIndex?t>2?8:5:t>2?5:2})}},{key:"highlightMoment",value:function(e){var t=this._calculateSpacing();this.chartData.selectedIndex=e,(0,n.select)("#".concat(this.id)).selectAll("circle").style("fill-opacity",.3).attr("r",function(e){return t>2?5:2}).filter(".dataIndex-".concat(e)).style("fill-opacity",1).attr("r",function(e){return t>2?8:5})}},{key:"_calculateSpacing",value:function(){var e=this.chartData.points.length;return(this.lastKnownXScale(this.chartData.points[e-1].x)-this.lastKnownXScale(this.chartData.points[0].x))/e}},{key:"_getXAsPercentage",value:function(e,t,r){var i=new Date(t).getTime(),a=new Date(r).getTime();return(new Date(e).getTime()-i)/(a-i)}},{key:"_getYAsPercentage",value:function(e,t,r,i,a){return(r-t)*(e-i)/(a-i)+t}},{key:"_calcPercentageBetweenMinAndMax",value:function(e,t,r){return(e-t)/(r-t)}},{key:"_findNearestX",value:function(e){for(var t=new Date(e).getTime(),r=0;r<this.alternateYAxis.points.length;r++)if(new Date(this.alternateYAxis.points[r].x).getTime()>=t)return r-1;return null}}])&&u(r.prototype,s),l&&u(r,l),t}();e.exports=f},,,,function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=794},function(e,t,r){var i={"./draco_wasm_wrapper.js":796};function a(e){var t=n(e);return r(t)}function n(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id=795},,,,function(e,t,r){var i={"./draco_decoder.wasm":800};function a(e){var t=n(e);return r(t)}function n(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id=799},,function(e,t,r){"use strict";var i=r(8),a=r(42),n=r(107);e.exports=function(e,t,r,o){var s={time:null,included:!1},l={time:null,included:!1},u={time:null,included:!1},c={time:null,included:!1},d={time:null,included:!1},p=r?a.lessThan:a.greaterThan,f=r?a.greaterThan:a.lessThan,h=function(e,t){return null===t.time||p(e.time,t.time)||a.equals(e.time,t.time)&&g(e.included)&&g(!t.included)},m=function(e,t){return a.equals(e.time,t.time)&&e.included===t.included},g=function(e){return r?e:!e};e.timeIntervals.forEach(function(e){i(e)&&[{time:e.start,included:e.isStartIncluded},{time:e.stop,included:!e.isStopIncluded}].forEach(function(e){f(e.time,t)||a.equals(e.time,t)&&g(!e.included)?h(e,l)?(null!==l.time&&(u=l),l=e):m(e,l)||h(e,u)&&(u=e):function(e,t){return null===t.time||f(e.time,t.time)||a.equals(e.time,t.time)&&g(!e.included)&&g(t.included)}(e,s)&&(s=e),!1!==o&&(h(e,c)?(null!==c.time&&(d=c),c=e):m(e,c)||h(e,d)&&(d=e))})});var v=function(e,t,i,a){return new n(r?{start:e,stop:t,isStartIncluded:i,isStopIncluded:a}:{start:t,stop:e,isStartIncluded:g(a),isStopIncluded:g(i)})},y={currentInterval:s.time&&l.time?v(s.time,l.time,s.included,!l.included):null,nextInterval:l.time&&u.time?v(l.time,u.time,l.included,!u.included):null};return!1!==o&&null===u.time&&(y.nextInterval=v(c.time,d.time,c.included,!d.included)),y}},,,,function(e,t,r){"use strict";var i=r(8),a=r(18),n=r(11),o={};o.addRecolorFunc=function(e,t){e.base_requestImage=e.requestImage,e.requestImage=function(r,s,l){var u=this.base_requestImage(r,s,l);return i(u)?a(u,function(r){i(r)&&(r=function(e,t,r){if(!i(e))throw new n("No context for image recoloring.");e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0);var a=e.getImageData(0,0,e.canvas.width,e.canvas.height);return a=o.recolorImage(a,r)}(function(e,t){var r=e._canvas2dContext;if(!i(r)||r.canvas.width!==t.width||r.canvas.height!==t.height){var a=document.createElement("canvas");a.width=t.width,a.height=t.height,r=a.getContext("2d"),e._canvas2dContext=r}return r}(e,r),r,t));return r}):u}},o.recolorImage=function(e,t){for(var r=e.data.length,a=0;a<r;a+=4)if(e.data[a+3]<255||0!==e.data[a])e.data[a+3]=0;else{var n=t(256*e.data[a+1]+e.data[a+2]);if(i(n))for(var o=0;o<4;o++)e.data[a+o]=n[o];else e.data[a+3]=0}return e},o.addPickFeaturesHook=function(e,t){e.base_pickFeatures=e.pickFeatures,e.pickFeatures=function(e,r,a,n,o){var s=this.base_pickFeatures(e,r,a,n,o);return i(s)?s.then(t):s}},e.exports=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(184),a=r(24),n=r(32),o=r(25),s=r(14),l=r(8),u=r(169),c=r(109),d=r(526),p=r(381),f=new n,h=new n,m=new a,g=new a,v=i.TileLayer.extend({initialize:function(e,t){this.imageryProvider=e,this.tileSize=256,this.errorEvent=new o,this.initialized=!1,this._usable=!1,this._delayedUpdate=void 0,this._zSubtract=0,this._previousCredits=[],this._requestImageError=void 0,i.TileLayer.prototype.initialize.call(this,void 0,t)},_tileOnError:function(e,t,r){},createTile:function(e,t){var r=i.TileLayer.prototype.createTile.call(this,e,t),a=this;function n(o){o?o.then(function(){n()}).otherwise(function(e){i.TileLayer.prototype._tileOnError.call(a,t,r,e)}):r.src=a.getTileUrl(e)}return i.DomEvent.on(r,"error",function(t){var r=a._getLevelFromZ(e),i="Failed to obtain image tile X: "+e.x+" Y: "+e.y+" Level: "+r+".";a._requestImageError=u.handleError(a._requestImageError,a.imageryProvider,a.imageryProvider.errorEvent,i,e.x,e.y,r,n,t)}),r},getTileUrl:function(e){var t=this._getLevelFromZ(e);return t<0?this.options.errorTileUrl:d(this.imageryProvider,e.x,e.y,t)},_getLevelFromZ:function(e){return e.z-this._zSubtract},_update:function(){var e=this;this.imageryProvider.ready?(this.initialized||(this.initialized=!0,this._delayedUpdate&&(clearTimeout(this._delayedUpdate),this._delayedUpdate=void 0),this._delayedUpdate=setTimeout(function(){if(e._delayedUpdate=void 0,e._map){var t=e.imageryProvider.tilingScheme;if(t instanceof c){if(2===t.getNumberOfXTilesAtLevel(0)&&2===t.getNumberOfYTilesAtLevel(0))e._zSubtract=1;else if(1!==t.getNumberOfXTilesAtLevel(0)||1!==t.getNumberOfYTilesAtLevel(0))return void e.errorEvent.raiseEvent(e,"This dataset cannot be displayed on the 2D map because it uses an unusual tiling scheme that is not supported.");l(e.imageryProvider.maximumLevel)&&(e.options.maxNativeZoom=e.imageryProvider.maximumLevel),l(e.imageryProvider.credit)&&e._map.attributionControl.addAttribution(y(e.imageryProvider.credit)),e._usable=!0,e._update()}else e.errorEvent.raiseEvent(e,"This dataset cannot be displayed on the 2D map because it does not support the Web Mercator (EPSG:3857) projection.")}},100)),this._usable&&(i.TileLayer.prototype._update.apply(this,arguments),this._updateAttribution())):this._delayedUpdate||(this._delayedUpdate=setTimeout(function(){e._delayedUpdate=void 0,e._update()},100))},_updateAttribution:function(){if(this._usable&&l(this.imageryProvider.getTileCredits)){var e;for(e=0;e<this._previousCredits.length;++e)this._previousCredits[e]._shownInLeafletLastUpdate=this._previousCredits[e]._shownInLeaflet,this._previousCredits[e]._shownInLeaflet=!1;var t=this._map.getBounds(),r=this._map.getZoom()-this._zSubtract,i=this.imageryProvider.tilingScheme;f.longitude=Math.max(s.negativePiToPi(s.toRadians(t.getWest())),i.rectangle.west),f.latitude=Math.max(s.toRadians(t.getSouth()),i.rectangle.south);var a=i.positionToTileXY(f,r,m);l(a)||((a=m).x=0,a.y=i.getNumberOfYTilesAtLevel(r)-1),h.longitude=Math.min(s.negativePiToPi(s.toRadians(t.getEast())),i.rectangle.east),h.latitude=Math.min(s.toRadians(t.getNorth()),i.rectangle.north);var n=i.positionToTileXY(h,r,g);l(n)||((n=g).x=i.getNumberOfXTilesAtLevel(r)-1,n.y=0);for(var o=[],u=n.y;u<a.y;++u)for(e=a.x;e<n.x;++e){var c=this.imageryProvider.getTileCredits(e,u,r);if(l(c))for(var d=0;d<c.length;++d){var p=c[d];p._shownInLeaflet||(p._shownInLeaflet=!0,o.push(p),p._shownInLeafletLastUpdate||this._map.attributionControl.addAttribution(y(p)))}}for(e=0;e<this._previousCredits.length;++e)this._previousCredits[e]._shownInLeaflet||(this._map.attributionControl.removeAttribution(y(this._previousCredits[e])),this._previousCredits[e]._shownInLeafletLastUpdate=!1);this._previousCredits=o}},getFeaturePickingCoords:function(e,t,r){var i=new n(s.negativePiToPi(t),r,0),a=Math.round(e.getZoom());return p(function(){return this.imageryProvider.ready}.bind(this)).then(function(){var e=this.imageryProvider.tilingScheme.positionToTileXY(i,a);return{x:e.x,y:e.y,level:a}}.bind(this))},pickFeatures:function(e,t,r,i,a){return p(function(){return this.imageryProvider.ready}.bind(this)).then(function(){return this.imageryProvider.pickFeatures(e,t,r,i,a)}.bind(this))},onRemove:function(e){this._delayedUpdate&&(clearTimeout(this._delayedUpdate),this._delayedUpdate=void 0);for(var t=0;t<this._previousCredits.length;++t)this._previousCredits[t]._shownInLeafletLastUpdate=!1,this._previousCredits[t]._shownInLeaflet=!1,e.attributionControl.removeAttribution(y(this._previousCredits[t]));this._usable&&l(this.imageryProvider.credit)&&e.attributionControl.removeAttribution(y(this.imageryProvider.credit)),i.TileLayer.prototype.onRemove.apply(this,[e]),this._abortLoading()}});function y(e){return e.element.outerHTML}e.exports=v},,,,,,,function(e,t,r){var i={"./IAU2006_XYS_0.json":844,"./IAU2006_XYS_1.json":845,"./IAU2006_XYS_10.json":846,"./IAU2006_XYS_11.json":847,"./IAU2006_XYS_12.json":848,"./IAU2006_XYS_13.json":849,"./IAU2006_XYS_14.json":850,"./IAU2006_XYS_15.json":851,"./IAU2006_XYS_16.json":852,"./IAU2006_XYS_17.json":853,"./IAU2006_XYS_18.json":854,"./IAU2006_XYS_19.json":855,"./IAU2006_XYS_2.json":856,"./IAU2006_XYS_20.json":857,"./IAU2006_XYS_21.json":858,"./IAU2006_XYS_22.json":859,"./IAU2006_XYS_23.json":860,"./IAU2006_XYS_24.json":861,"./IAU2006_XYS_25.json":862,"./IAU2006_XYS_26.json":863,"./IAU2006_XYS_27.json":864,"./IAU2006_XYS_3.json":865,"./IAU2006_XYS_4.json":866,"./IAU2006_XYS_5.json":867,"./IAU2006_XYS_6.json":868,"./IAU2006_XYS_7.json":869,"./IAU2006_XYS_8.json":870,"./IAU2006_XYS_9.json":871};function a(e){var t=n(e);return r(t)}function n(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=n,e.exports=a,a.id=843},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(582)();e.exports=function(e){var t,r=i.match(e),a=[];return r&&(t=0,r.forEach(function(r){t<r.index&&a.push(e.slice(t,r.index).replace(/\r?\n/g,"<br>")),a.push('<a target="_blank" rel="noreferrer noopener" href="'),a.push(r.url),a.push('">'),a.push(r.text),a.push("</a>"),t=r.lastIndex}),t<e.length&&a.push(e.slice(t).replace(/\r?\n/g,"<br>")),e=a.join("")),e}},,,,,,function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(259),n=r(8),o=r(581);a.prototype.configureDescriptionFromProperties=function(e){this.description=function e(t){var r='<table class="cesium-infoBox-defaultTable">';for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];n(s)&&("object"===i(s)?r+="<tr><td>"+a+"</td><td>"+e(s)+"</td></tr>":r+="<tr><td>"+a+"</td><td>"+o(s)+"</td></tr>")}return r+="</table>"}(e)}},function(e,t,r){"use strict";var i=!1,a={initialize:function(e){var t;i||(i=!0,(t=e).Map.mergeOptions({dragBox:!1}),t.Map.DragBox=t.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._moved=!1,this._dragging=e.dragging.enabled()},addHooks:function(){this._dragging&&this._map.dragging.disable(),this._map.boxZoom.disable(),t.DomEvent.on(this._container,"mousedown",this._onMouseDown,this),this._dragging&&this._map.dragging.enable(),this._map.boxZoom.enable()},removeHooks:function(){this._dragging&&this._map.dragging.enable(),t.DomEvent.off(this._container,"mousedown",this._onMouseDown,this),this._moved=!1},_onMouseDown:function(e){if(this._moved=!1,!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._dragging&&this._map.dragging.disable(),this._map.boxZoom.disable(),t.DomUtil.disableTextSelection(),t.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),t.DomEvent.on(document,"mousemove",this._onMouseMove,this).on(document,"mouseup",this._onMouseUp,this).on(document,"keydown",this._onKeyDown,this)},_onMouseMove:function(e){this._moved||(this._box=t.DomUtil.create("div","leaflet-zoom-box",this._pane),t.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("dragboxstart"));var r=this._startLayerPoint,i=this._box,a=this._map.mouseEventToLayerPoint(e),n=a.subtract(r),o=new t.Point(Math.min(a.x,r.x),Math.min(a.y,r.y));t.DomUtil.setPosition(i,o),this._moved=!0,i.style.width=Math.abs(n.x)-4+"px",i.style.height=Math.abs(n.y)-4+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),this._dragging&&this._map.dragging.enable(),this._map.boxZoom.enable(),t.DomUtil.enableTextSelection(),t.DomUtil.enableImageDrag(),t.DomEvent.off(document,"mousemove",this._onMouseMove,this).off(document,"mouseup",this._onMouseUp,this).off(document,"keydown",this._onKeyDown,this)},_onMouseUp:function(e){this._finish();var r=this._map,i=r.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(i)){var a=new t.LatLngBounds(r.layerPointToLatLng(this._startLayerPoint),r.layerPointToLatLng(i));r.fire("dragboxend",{dragBoxBounds:a})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),t.Map.addInitHook("addHandler","dragBox",t.Map.DragBox))}};e.exports=a},function(e,t,r){"use strict";var i=r(25);e.exports=function(e){this.map=e,this.featureClicked=new i,this.featureMousedown=new i}},function(e,t,r){"use strict";var i=r(9),a=r(8),n=r(17),o=r(1044),s=r(288),l=r(255),u=function(e){if(e=i(e,i.EMPTY_OBJECT),this.minDisplayValue=e.minDisplayValue,this.yAxisMin=e.yAxisMin,this.yAxisMax=e.yAxisMax,this.maxDisplayValue=e.maxDisplayValue,this.displayDuration=e.displayDuration,this.replaceWithZeroValues=e.replaceWithZeroValues,this.replaceWithNullValues=e.replaceWithNullValues,this.nullColor=e.nullColor,this.nullLabel=e.nullLabel,this.scale=e.scale,this.scaleByValue=e.scaleByValue,this.clampDisplayValue=e.clampDisplayValue,this.imageUrl=e.imageUrl,this.featureInfoFields=e.featureInfoFields,this.chartLineColor=e.chartLineColor,this.colorBins=e.colorBins,this.colorBinMethod=i(e.colorBinMethod,"auto"),a(e.colorMap)?this.colorMap=new o(e.colorMap):this.colorMap=void 0,this.colorPalette=e.colorPalette,a(e.colorPalette)){var t=this;o.loadFromPalette(this.colorPalette).then(function(e){t.colorMap=e})}this.legendTicks=i(e.legendTicks,3),this.name=e.name,this.legendName=e.legendName,this.type=e.type,this.units=e.units,this.active=e.active,this.format=e.format};u.prototype.updaters={colorMap:function(e,t,r){e.colorMap=new o(t[r])},colorPalette:function(e,t,r){return o.loadFromPalette(t[r]).then(function(t){e.colorMap=t})}},n(u.prototype.updaters),u.prototype.serializers={colorMap:function(e,t,r){a(e.colorPalette)||(t[r]=e[r])}},n(u.prototype.serializers),u.prototype.updateFromJson=function(e,t){return l(this,e,t)},u.prototype.serializeToJson=function(e){return s(this,void 0,e)},e.exports=u},function(e,t,r){"use strict";var i=r(8),a=r(70),n=r(18),o=r(27),s=function(e){var t;("string"==typeof e||e instanceof String)&&(t=function(e){if(!e)return;return l(e.split("-"))}(e)),e instanceof Array&&e.length>0&&(t="string"==typeof e[0]||e[0]instanceof String?l(e):e),i(t)&&t.forEach(function(e){this.push(e)},this)};function l(e){return e.map(function(t,r){return{color:t,offset:1===e.length?0:r/(e.length-1)}}).filter(function(e){return""!==e.color})}o(Array,s),s.prototype.toJSON=function(){return this.slice()},s.colorBrewerFile=function(){return s.colorBrewerJSON?n(s.colorBrewerJSON):s.colorBrewerJSON=a("build/TerriaJS/data/colorbrewer.json").then(function(e){return s.colorBrewerJSON=e,e})},s.loadFromPalette=function(e){if(!e)return n(void 0);var t=e.match(/^((\d+)-class *)?([^-]+)/i);if(t){var r=t[3],i=t[2]?t[2]:7;return s.colorBrewerFile().then(function(e){return e&&e[r]&&e[r][i]?new s(l(e[r][i])):void 0})}return n(void 0)},e.exports=s},function(e,t,r){"use strict";RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};var a,n={};(a=n).csv={defaults:{separator:",",delimiter:'"',headers:!0},hooks:{castToScalar:function(e,t){if(isNaN(e))return e;if(/\./.test(e))return parseFloat(e);var r=parseInt(e);return isNaN(r)?null:r}},parsers:{parse:function(e,t){var r=t.separator,i=t.delimiter;t.state.rowNum||(t.state.rowNum=1),t.state.colNum||(t.state.colNum=1);var a=[],n=[],o=0,s="",l=!1;function u(){if(o=0,s="",t.start&&t.state.rowNum<t.start)return n=[],t.state.rowNum++,void(t.state.colNum=1);if(void 0===t.onParseEntry)a.push(n);else{var e=t.onParseEntry(n,t.state);!1!==e&&a.push(e)}n=[],t.end&&t.state.rowNum>=t.end&&(l=!0),t.state.rowNum++,t.state.colNum=1}function c(){if(void 0===t.onParseValue)n.push(s);else{var e=t.onParseValue(s,t.state);!1!==e&&n.push(e)}s="",o=0,t.state.colNum++}var d=RegExp.escape(r),p=RegExp.escape(i),f=/(D|S|\n|\r|[^DS\r\n]+)/,h=f.source;return h=(h=h.replace(/S/g,d)).replace(/D/g,p),f=RegExp(h,"gm"),e.replace(f,function(e){if(!l)switch(o){case 0:if(e===r){s+="",c();break}if(e===i){o=1;break}if("\n"===e){c(),u();break}if(/^\r$/.test(e))break;s+=e,o=3;break;case 1:if(e===i){o=2;break}s+=e,o=1;break;case 2:if(e===i){s+=e,o=1;break}if(e===r){c();break}if("\n"===e){c(),u();break}if(/^\r$/.test(e))break;throw new Error("CSVDataError: Illegal State [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");case 3:if(e===r){c();break}if("\n"===e){c(),u();break}if(/^\r$/.test(e))break;if(e===i)throw new Error("CSVDataError: Illegal Quote [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]")}}),0!==n.length&&(c(),u()),a},splitLines:function(e,t){var r=t.separator,i=t.delimiter;t.state.rowNum||(t.state.rowNum=1);var a=[],n=0,o="",s=!1;function l(){if(n=0,t.start&&t.state.rowNum<t.start)return o="",void t.state.rowNum++;if(void 0===t.onParseEntry)a.push(o);else{var e=t.onParseEntry(o,t.state);!1!==e&&a.push(e)}o="",t.end&&t.state.rowNum>=t.end&&(s=!0),t.state.rowNum++}var u=RegExp.escape(r),c=RegExp.escape(i),d=/(D|S|\n|\r|[^DS\r\n]+)/,p=d.source;return p=(p=p.replace(/S/g,u)).replace(/D/g,c),d=RegExp(p,"gm"),e.replace(d,function(e){if(!s)switch(n){case 0:if(e===r){o+=e,n=0;break}if(e===i){o+=e,n=1;break}if("\n"===e){l();break}if(/^\r$/.test(e))break;o+=e,n=3;break;case 1:if(e===i){o+=e,n=2;break}o+=e,n=1;break;case 2:var a=o.substr(o.length-1);if(e===i&&a===i){o+=e,n=1;break}if(e===r){o+=e,n=0;break}if("\n"===e){l();break}if("\r"===e)break;throw new Error("CSVDataError: Illegal state [Row:"+t.state.rowNum+"]");case 3:if(e===r){o+=e,n=0;break}if("\n"===e){l();break}if("\r"===e)break;if(e===i)throw new Error("CSVDataError: Illegal quote [Row:"+t.state.rowNum+"]");throw new Error("CSVDataError: Illegal state [Row:"+t.state.rowNum+"]");default:throw new Error("CSVDataError: Unknown state [Row:"+t.state.rowNum+"]")}}),""!==o&&l(),a},parseEntry:function(e,t){var r=t.separator,i=t.delimiter;t.state.rowNum||(t.state.rowNum=1),t.state.colNum||(t.state.colNum=1);var a=[],n=0,o="";function s(){if(void 0===t.onParseValue)a.push(o);else{var e=t.onParseValue(o,t.state);!1!==e&&a.push(e)}o="",n=0,t.state.colNum++}if(!t.match){var l=RegExp.escape(r),u=RegExp.escape(i),c=/(D|S|\n|\r|[^DS\r\n]+)/.source;c=(c=c.replace(/S/g,l)).replace(/D/g,u),t.match=RegExp(c,"gm")}return e.replace(t.match,function(e){switch(n){case 0:if(e===r){o+="",s();break}if(e===i){n=1;break}if("\n"===e||"\r"===e)break;o+=e,n=3;break;case 1:if(e===i){n=2;break}o+=e,n=1;break;case 2:if(e===i){o+=e,n=1;break}if(e===r){s();break}if("\n"===e||"\r"===e)break;throw new Error("CSVDataError: Illegal State [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");case 3:if(e===r){s();break}if("\n"===e||"\r"===e)break;if(e===i)throw new Error("CSVDataError: Illegal Quote [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+t.state.rowNum+"][Col:"+t.state.colNum+"]")}}),s(),a}},toArray:function(e,t,r){t=void 0!==t?t:{};var i={};i.callback=void 0!==r&&"function"==typeof r&&r,i.separator="separator"in t?t.separator:a.csv.defaults.separator,i.delimiter="delimiter"in t?t.delimiter:a.csv.defaults.delimiter;var n=void 0!==t.state?t.state:{},o=(t={delimiter:i.delimiter,separator:i.separator,onParseEntry:t.onParseEntry,onParseValue:t.onParseValue,state:n},a.csv.parsers.parseEntry(e,t));if(!i.callback)return o;i.callback("",o)},toArrays:function(e,t,r){t=void 0!==t?t:{};var i,n={};if(n.callback=void 0!==r&&"function"==typeof r&&r,n.separator="separator"in t?t.separator:a.csv.defaults.separator,n.delimiter="delimiter"in t?t.delimiter:a.csv.defaults.delimiter,t={delimiter:n.delimiter,separator:n.separator,onParseEntry:t.onParseEntry,onParseValue:t.onParseValue,start:t.start,end:t.end,state:{rowNum:1,colNum:1}},i=a.csv.parsers.parse(e,t),!n.callback)return i;n.callback("",i)},toObjects:function(e,t,r){t=void 0!==t?t:{};var i={};i.callback=void 0!==r&&"function"==typeof r&&r,i.separator="separator"in t?t.separator:a.csv.defaults.separator,i.delimiter="delimiter"in t?t.delimiter:a.csv.defaults.delimiter,i.headers="headers"in t?t.headers:a.csv.defaults.headers,t.start="start"in t?t.start:1,i.headers&&t.start++,t.end&&i.headers&&t.end++;var n=[],o=(t={delimiter:i.delimiter,separator:i.separator,onParseEntry:t.onParseEntry,onParseValue:t.onParseValue,start:t.start,end:t.end,state:{rowNum:1,colNum:1},match:!1},{delimiter:i.delimiter,separator:i.separator,start:1,end:1,state:{rowNum:1,colNum:1}}),s=a.csv.parsers.splitLines(e,o),l=a.csv.toArray(s[0],t),u=a.csv.parsers.splitLines(e,t);t.state.colNum=1,t.state.rowNum=l?2:1;for(var c=0,d=u.length;c<d;c++){var p=a.csv.toArray(u[c],t),f={};for(var h in l)f[l[h]]=p[h];n.push(f),t.state.rowNum++}if(!i.callback)return n;i.callback("",n)},fromArrays:function(e,t,r){t=void 0!==t?t:{};var n={};if(n.callback=void 0!==r&&"function"==typeof r&&r,n.separator="separator"in t?t.separator:a.csv.defaults.separator,n.delimiter="delimiter"in t?t.delimiter:a.csv.defaults.delimiter,n.escaper="escaper"in t?t.escaper:a.csv.defaults.escaper,n.experimental="experimental"in t&&t.experimental,!n.experimental)throw new Error("not implemented");var o=[];for(i in e)o.push(e[i]);if(!n.callback)return o;n.callback("",o)},fromObjects2CSV:function(e,t,r){t=void 0!==t?t:{};var n={};if(n.callback=void 0!==r&&"function"==typeof r&&r,n.separator="separator"in t?t.separator:a.csv.defaults.separator,n.delimiter="delimiter"in t?t.delimiter:a.csv.defaults.delimiter,n.experimental="experimental"in t&&t.experimental,!n.experimental)throw new Error("not implemented");var o=[];for(i in e)o.push(arrays[i]);if(!n.callback)return o;n.callback("",o)}},a.csvEntry2Array=a.csv.toArray,a.csv2Array=a.csv.toArrays,a.csv2Dictionary=a.csv.toObjects,e.exports=n.csv},function(e,t,r){"use strict";var i=r(51),a=r(599),n=r(23),o=r(14),s=r(8),l=r(574),u=r(29),c=r(289),d=r(183),p=r(46),f=r(235),h=r(36);e.exports=function(e){var t=e.terria;t.pickedFeatures=void 0;var r=new d({message:"Press the SHIFT key and hold down the left mouse button to draw a rectangle to download",drawRectangle:!0,onCancel:function(){t.mapInteractionModeStack.pop(),t.selectBox=!1,m.dispose()}});t.selectBox=!0,t.mapInteractionModeStack.push(r);var m=n.getObservable(r,"pickedFeatures").subscribe(function(r){r instanceof u&&(t.mapInteractionModeStack.pop(),t.selectBox=!1,function(e,t){t.west=o.toDegrees(t.west),t.south=o.toDegrees(t.south),t.east=o.toDegrees(t.east),t.north=o.toDegrees(t.north);var r={service:"WCS",request:"GetCoverage",version:"1.0.0",format:"GeoTIFF",crs:"EPSG:4326",width:1024,height:Math.round(1024*t.height/t.width),coverage:e.linkedWcsCoverage,bbox:"".concat(t.west,",").concat(t.south,",").concat(t.east,",").concat(t.north)};s(e.discreteTime)&&(r.time=e.discreteTime.toISOString());var n=function(e){var t,r=e._thisLayerInRawMetadata;if(s(r)){var i=e.availableStyles[r.Name];if(i.length>=2){var a=e.layers.split(","),n=a.indexOf(r.Name);if(-1===n)return void console.log("cannot find layer index");var o=e.styles.split(",");t=o[n];for(var l=!1,u=0;u<i.length;u++)if(i[u].name===t){l=!0;break}l||(t=i[0].name)}return t}console.log("cannot find current layer")}(e);s(n)&&(r.styles=n);var u=new i(e.linkedWcsUrl).query(r),d=p(e,u.toString(),"1d"),m=new Date,g=c("%04d-%02d-%02dT%02d:%02d:%02d",m.getFullYear(),m.getMonth()+1,m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds()),v=new f(e.terria);v.name=e.name+" "+g,v.description="This is the result of exporting data from "+e.name+" service at "+g+" with the input parameters below.";var y='<table class="cesium-infoBox-defaultTable">'+[{name:"Bounding box",value:r.bbox},{name:"Format",value:r.format}].reduce(function(e,t){return e+'<tr><td style="vertical-align: middle">'+t.name+"</td><td>"+t.value+"</td></tr>"},"")+"</table>";v.info.push({name:"Inputs",content:y});var b=l(d).then(function(t){if(-1!==t.type.indexOf("xml"))return e.terria.error.raiseEvent(new h({sender:e,title:"Data export failed",message:"The Web Coverage Service failed"})),void(v.isEnabled=!1);a.saveAs(t,"".concat(e.name," clip.tiff")),v.isEnabled=!1}).otherwise(function(t){e.terria.error.raiseEvent(new h({sender:e,title:"Data export failed",message:"The Web Coverage Service failed: ".concat(t)})),v.isEnabled=!1});v.loadPromise=b,v.isEnabled=!0}(e,r),m.dispose())})}},function(e,t,r){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=r(180),n=r(12),o=r(32),s=r(22),l=r(72),u=r(8),c=r(10),d=r(20),p=r(11),f=r(270),h=r(271),m=r(25),g=r(23),v=r(159),y=r(80),b=r(29),_=r(319),w=r(416),S=r(107),C=r(127),x=r(417),E=r(418),I=r(152),k=r(232),L=r(591),P=r(157),T=r(269),M=r(36),A=r(128),j="Site Data",D=function(e,t,r,n,c){if(this._guid=l(),this._name=n,this._isUpdating=c||!1,this._hasFeaturePerRow=void 0,this._changed=new m,this._error=new m,this._loading=new m,this._entityCollection=new f(this),this._entityCluster=new h,this._terria=e,this._tableStructure=u(t)?t:new P,u(r)&&!(r instanceof T))throw new p("Please pass a TableStyle object.");this.tableStyle=r,this._legendHelper=void 0,this._legendUrl=void 0,this._extent=void 0,this._rowObjects=void 0,this._rowDescriptions=void 0,this.loadingData=!1,g.track(this,["_tableStructure","_legendUrl","_extent"]),g.getObservable(this._tableStructure,"activeItems").subscribe(function(e){(function(e){var t=e._tableStructure.activeItems[0],r=u(e._regionDetails)?e._regionDetails[0].regionProvider:void 0;e._legendHelper=new L(t,e.tableStyle,r,e.name),e._legendUrl=e._legendHelper.legendUrl()})(e),function(e){var t=e._tableStructure,r=e._legendHelper,n=r.tableStyle,l={longitude:t.columnsByType[A.LON][0],latitude:t.columnsByType[A.LAT][0],height:t.columnsByType[A.ALT][0],time:t.activeTimeColumn,value:r.tableColumn};if(u(l.longitude)&&u(l.latitude)){var c=t.toStringAndNumberRowObjects(),d=t.toRowDescriptions(n&&n.featureInfoFields);e._rowObjects=c,e._rowDescriptions=d;var p=e._entityCollection;p.suspendEvents(),u(l.time)&&u(t.idColumnNames)&&t.idColumnNames.length>0?(!function(e,t,r){var i=e._legendHelper,a=i.tableColumnStyle,n=R(t.getColumnNames(),t.idColumnNames),o=t.getIdMapping(),l=t.getColumnAliases(),c=t.isSampled,d=c&&u(r.value)&&!r.value.isEnum;e._hasFeaturePerRow&&e._entityCollection.removeAll();function p(e,t){return function(){return e.getChartDetailsForRowNumbers(t)}}for(var f in o)if(o.hasOwnProperty(f)){var h=e._rowObjects[o[f][0]].string,m=e._guid+"-"+f,g=e._entityCollection.getById(m),v=u(g);v||(g=new k({id:m,name:h.title||h[n]||j}));var y,b,S,I,L=new C;y=c?new _:new x,d?(b=new w(s),S=new w(Number),I=new w(Number)):(b=new E,S=new E,I=new E);for(var P=new E,T=new E,M=o[f],A=p(t,M),D=0;D<M.length;D++){var U=M[D],V=F(r,U),B=r.time.timeIntervals[U];L.addInterval(B);var G=B.clone();G.data=e._rowObjects[U].string,G.data._terria_columnAliases=l,G.data._terria_numericalProperties=e._rowObjects[U].number,u(M)&&(G.data._terria_getChartDetails=A),P.intervals.addInterval(G);var W=B.clone();if(W.data=e._rowDescriptions[U],T.intervals.addInterval(W),c)u(V)&&y.addSample(r.time.julianDates[U],V);else{var z=B.clone();z.data=V,y.intervals.addInterval(z)}var H=u(r.value)?r.value.values[U]:void 0;if(d){var q=r.time.julianDates[U];b.addSample(q,i.getColorFromValue(H)),S.addSample(q,i.getScaleFromValue(H)),I.addSample(q,8*i.getScaleFromValue(H))}else{var Z=B.clone(),J=B.clone(),Y=B.clone();Z.data=i.getColorFromValue(H),J.data=i.getScaleFromValue(H),Y.data=8*i.getScaleFromValue(H),b.intervals.addInterval(Z),S.intervals.addInterval(J),I.intervals.addInterval(Y)}}var X=N(L);g.availability=L,g.position=y,g.properties=P,g.description=T,O(g,a,S,I,b,X),v||e._entityCollection.add(g)}}(e,t,l),e._hasFeaturePerRow=!1):(!function(e,t,r){function i(t){return function(){return e._rowDescriptions[t]}}function n(r){return function(){var i=e._rowObjects[r].string;return i._terria_columnAliases=t.getColumnAliases(),i._terria_numericalProperties=e._rowObjects[r].number,i}}var o,s=e._legendHelper,l=s.tableColumnStyle,c=R(t.getColumnNames()),d=e._entityCollection;if(d.values.length>e._rowObjects.length)for(var p=e._rowObjects.length;p<d.values.length;p++)d.removeById(e._guid+"-"+p);var f=!1;for(p=0;p<e._rowObjects.length;p++)if(u(r.latitude.values[p])&&u(r.longitude.values[p]))if(isNaN(r.latitude.values[p])||isNaN(r.longitude.values[p]))f||(e._terria.error.raiseEvent(new M({sender:e,title:"Invalid characters in latitude and longitude columns",message:"Could not interpret latitude and longitude pair ".concat(r.longitude.values[p],",").concat(r.latitude.values[p])})),f=!0);else{var h=e._rowObjects[p].string,m=d.getById(e._guid+"-"+p);(o=!u(m))&&(m=new k({id:e._guid+"-"+p})),m.name=h.title||h[c]||j,m.position=F(r,p),e._isUpdating?(m.description=new a(i(p),!1),m.properties=new a(n(p),!1)):(m.description=e._rowDescriptions[p],h._terria_columnAliases=t.getColumnAliases(),h._terria_numericalProperties=e._rowObjects[p].number,m.properties=h);var g=u(r.value)?r.value.values[p]:void 0,v=s.getColorFromValue(g),y=s.getScaleFromValue(g);r.time&&r.time.timeIntervals&&r.time.timeIntervals[p]&&(m.availability=new C([r.time.timeIntervals[p]]));var b=N(m.availability);O(m,l,y,8*y,v,b),o&&e._entityCollection.add(m)}}(e,t,l),e._hasFeaturePerRow=!0),p.resumeEvents(),e._extent=b.fromCartographicArray(l.longitude.values.map(function(e,t){return[e,l.latitude.values[t]]}).filter(function(e){return e.every(function(e){return!isNaN(e)})}).map(function(e){return o.fromDegrees.apply(o,i(e))}))}}(e),e._changed.raiseEvent(e)}.bind(null,this),this)};function N(e){var t=new E;if(u(e)&&u(e.start)){var r=e.start,i=e.stop;t.intervals.addInterval(new S({start:y.MINIMUM_VALUE,stop:y.MAXIMUM_VALUE,data:!1})),t.intervals.addInterval(new S({start:r,stop:i,data:!0}))}else t.intervals.addInterval(new S({start:y.MINIMUM_VALUE,stop:y.MAXIMUM_VALUE,data:!0}));return t}function O(e,t,r,i,a,n){u(t)&&u(t.imageUrl)&&""!==t.imageUrl?e.billboard={horizontalOrigin:v.CENTER,verticalOrigin:I.BOTTOM,image:t.imageUrl,scale:r,color:a,show:n}:e.point={outlineColor:new s(0,0,0,1),outlineWidth:1,pixelSize:i,color:a,show:n}}function F(e,t){if(u(e.latitude.values[t])&&u(e.longitude.values[t]))return n.fromDegrees(e.longitude.values[t],e.latitude.values[t],u(e.height)&&!isNaN(e.height)?e.height.values[t]:void 0);console.log("Missing lat/lon on row "+t)}function R(e,t){for(var r,i=Number.MAX_VALUE,a=0;a<e.length;a++){var n=e[a],o=n.toLowerCase();if(i>1&&"title"===o){i=1,r=n;break}i>2&&"name"===o?(i=2,r=n):i>3&&/title/i.test(n)?(i=3,r=n):i>4&&/name/i.test(n)&&(i=4,r=n)}return r||t&&t[0]}c(D.prototype,{name:{get:function(){return this._name}},clock:{get:function(){if(u(this._tableStructure))return this._tableStructure.clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this.loadingData}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},tableStructure:{get:function(){return this._tableStructure}},extent:{get:function(){return this._extent}},legendUrl:{get:function(){return this._legendUrl}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!u(e))throw new p("value must be defined.");this._entityCluster=e}}}),D.prototype.loadFromCsv=function(e){this._tableStructure.loadFromCsv(e)},D.prototype.destroy=function(){return d(this)},e.exports=D},,,,,,,,,function(e,t,r){"use strict";var i=r(8);e.exports=function(e,t){var r=e._load;e._load=function(){var e=r.call(this);return i(e)?e.then(t.bind(this)):t.call(this)}}},function(e,t,r){"use strict";e.exports=function(e,t,r,i){this.regionCodes=e,this.columnHeadings=t,this.table=r,this.singleSelectValues=i}},function(e,t,r){"use strict";var i=r(8),a=r(79);e.exports=function(e,t,r){return t.getRegionFeature(e.terria,r).then(function(t){if(i(t)&&"Feature"===t.type){var r=new a(e.terria);return r.data=t,r.load().then(function(){e.rectangle=r.rectangle})}}).otherwise(function(){})}},function(e,t,r){"use strict";var i=r(422),a=r(253),n=r(179),o=r(10),s=r(27),l=r(419),u=r(420),c=r(238),d=r(40),p=function(e){a.call(this,e),this.url=void 0,this.name="Spatial Detailing",this.description="Predicts the characteristics of fine-grained regions by learning and exploiting correlations of coarse-grained data with Census characteristics.",this._regionTypeToPredictParameter=new c({terria:this.terria,catalogFunction:this,id:"regionTypeToPredict",name:"Region Type to Predict",description:"The type of region for which to predict characteristics."}),this._coarseDataRegionTypeParameter=new c({terria:this.terria,catalogFunction:this,id:"coarseDataRegionType",name:"Coarse Data Region Type",description:"The type of region with which the coarse-grained input characteristics are associated."}),this._isMeanAggregationParameter=new i({terria:this.terria,catalogFunction:this,id:"isMeanAggregation",name:"Aggregation",description:"Specifies how coarse region values were aggregated.  True if the value is the mean of the values across the region, or False if the value is the sum of the values across the region.",trueName:"Mean Aggregation",trueDescription:"Coarse region values are the mean of samples in the region.  For example, average household income.",falseName:"Sum Aggregation",falseDescription:"Coarse region values are the sum of samples in the region.  For example, total population.",defaultValue:!0}),this._dataParameter=new u({terria:this.terria,catalogFunction:this,id:"data",name:"Characteristic to Predict",description:"The characteristic to predict for each region.",regionProvider:this._coarseDataRegionTypeParameter,singleSelect:!0}),this._parameters=[this._coarseDataRegionTypeParameter,this._regionTypeToPredictParameter,this._isMeanAggregationParameter,this._dataParameter]};s(a,p),o(p.prototype,{type:{get:function(){return"spatial-detailing-function"}},typeName:{get:function(){return"Spatial Detailing"}},parameters:{get:function(){return this._parameters}}}),p.prototype._load=function(){},p.prototype.invoke=function(){var e,t=this._dataParameter.getRegionDataValue(),r={algorithm:"spatialdetailing",boundaries_name:this._coarseDataRegionTypeParameter.value.regionType.replace(/_2011$/,""),region_codes:t.regionCodes,columns:t.columnHeadings[0],table:t.singleSelectValues,parameters:{disagg_boundaries_name:this._regionTypeToPredictParameter.value.regionType.replace(/_2011$/,""),mean_agg:this._isMeanAggregationParameter.value}},i=this._dataParameter.value;for(var a in i)if(i.hasOwnProperty(a)&&i[a]){e=a;break}var o="Spatial detailing of "+t.columnHeadings[0]+" at "+this._regionTypeToPredictParameter.value.regionType,s=this;return l(this.terria,o,this.url,r).then(function(r){var i=r.result,a=s._regionTypeToPredictParameter.value.aliases[0]+",Predicted "+e+" (Quality: "+i.Quality+"),Lower bound of 95% confidence interval,Upper bound of 95% confidence interval\n",l=i.disagg_mean,u=i.disagg_regions,c=i.disagg_95conf_upper,p=i.disagg_95conf_lower;if(l.length!==u.length)throw new d("The list of values and the list of region codes do not contain the same number of elements.");for(var f=0;f<u.length;++f)a+=u[f]+","+l[f]+","+p[f]+","+c[f]+"\n";var h=new n(s.terria);h.name=o,h.data=a,h.dataUrl=r.url;var m='This is the result of invoking "'+s.name+'" at '+r.startDate+" with these parameters:\n\n";return m+=" * Region type to predict: "+s._regionTypeToPredictParameter.value.regionType+"\n",m+=" * Coarse data region type: "+s._coarseDataRegionTypeParameter.value.regionType+"\n",s._isMeanAggregationParameter.value?m+=" * Treat values as a mean aggregation.\n":m+=" * Treat values as a sum aggregation.\n",m+=" * Predicted characteristic: "+t.columnHeadings[0]+"\n",h.description=m,h.loadAndEnable()})},e.exports=p},function(e,t,r){"use strict";var i=r(253),a=r(8),n=r(10),o=r(79),s=r(27),l=r(419),u=r(36),c=r(420),d=r(421),p=r(238),f=r(18),h=function(e){i.call(this,e),this.url=void 0,this.name="What makes this region unique or special?",this.description="Determines the characteristics by which a particular region is _most different_ from all other regions.",this._regionTypeParameter=new p({terria:this.terria,catalogFunction:this,id:"regionType",name:"Region Type",description:"The type of region to analyze."}),this._regionParameter=new d({terria:this.terria,catalogFunction:this,id:"region",name:"Region",description:"The region to analyze.  The analysis will determine the characteristics by which this region is most different from all others.",regionProvider:this._regionTypeParameter}),this._dataParameter=new c({terria:this.terria,catalogFunction:this,id:"data",name:"Characteristics",description:"The region characteristics to include in the analysis.",regionProvider:this._regionTypeParameter}),this._parameters=[this._regionTypeParameter,this._regionParameter,this._dataParameter]};s(i,h),n(h.prototype,{type:{get:function(){return"why-am-i-special-function"}},typeName:{get:function(){return"Why Am I Special?"}},parameters:{get:function(){return this._parameters}}}),h.prototype._load=function(){},h.prototype.invoke=function(){var e=this._regionParameter.value,t=this._dataParameter.getRegionDataValue();if(!a(e))throw new u({title:"Region not selected",message:"You must select a Region."});var r=this._regionTypeParameter.value,i={algorithm:"whyamispecial",boundaries_name:r.regionType,region_codes:t.regionCodes,columns:t.columnHeadings,table:t.table,parameters:{query:e.id}},n=r.regions.indexOf(e),s=e.id;n>=0&&(s=r.regionNames[n]||s);var c="Why is "+s+" special?",d=r.getRegionFeature(this.terria,e),p=l(this.terria,c,this.url,i),h=this;return f.all([d,p]).then(function(i){var n=i[0],l=i[1],u=l.result,d=new o(h.terria);d.name=c,d.data=n,d.dataUrl=l.url;var p='This is the result of invoking "'+h.name+'" at '+l.startDate+" with these parameters:\n\n";p+=" * "+r.regionType+" Region: "+s+" ("+e.id+")\n",p+=" * Characteristics: "+t.columnHeadings.join(", ")+"\n",d.description=p;for(var f="<p>These are the top characteristics that make "+s+" unique or special:</p>",m=0;m<5&&m<u.columns.length;++m){for(var g=t.columnHeadings[u.columns[m]],v=u.histograms[m],y=v.bin_counts,b=v.bin_edges,_=[["Value","Count"]],w=0;w<y.length;++w){var S=b[w],C=b[w+1];a(C)||(C=S+(b[1]-b[0]));var x=.5*(S+C);_.push([x,y[w]])}var E=u.percentiles[m],I="lower";E>50&&(E=100-E,I="higher"),f+='<collapsible title="'+g+'" open="'+(0===m?"true":"false")+'">\n',f+='<p style="font-size: 0.8em">The value of '+g+" in "+s+" is "+u.values[m]+".</p>\n",f+='<p style="font-size: 0.8em">Only '+E.toFixed(1)+"% of regions have an equal or "+I+" value.</p>\n",f+='<chart title="Distribution of '+g+" across "+r.regionType+' regions" id="'+g+"\" data='"+JSON.stringify(_)+'\' column-names="," y-column="1" styling="histogram" highlight-x="'+u.values[m]+'" hide-buttons="true"></chart>\n',f+="</collapsible>\n"}d.shortReport=f,d.isEnabled=!0})},e.exports=h},function(e,t,r){"use strict";var i=r(1062),a=r(606),n=r(1066),o=r(609),s=r(321),l=r(610),u=r(239),c=r(235),d=r(612),p=r(1071),f=r(104),h=r(1072),m=r(1131),g=r(1137),v=r(644),y=r(374),b=r(645),_=r(138),w=r(179),S=r(1140),C=r(1141),x=r(444),E=r(79),I=r(1148),k=r(1149),L=r(654),P=r(330),T=r(1156),M=r(659),A=r(449),j=r(1157),D=r(661),N=r(1162),O=r(1163),F=r(614),R=r(445),U=r(333),V=r(332),B=r(172),G=r(1166),W=r(662),z=r(646),H=r(653),q=r(647),Z=r(1167),J=r(1168),Y=r(1169);function X(e){var t=new RegExp("\\."+e+"$","i");return function(e){return e.match(t)}}function K(e){return/./.test.bind(e)}e.exports=function(){_.register("3d-tiles",h),_.register("abs-itt",a),_.register("abs-itt-dataset-list",i),_.register("result-pending",c),_.register("bing-maps",d),_.register("carto",p),_.register("ckan",g),_.register("ckan-resource",v),_.register("composite",y),_.register("csv",w),_.register("senaps",S),_.register("csw",C),_.register("cesium-terrain",m),_.register("czml",x),_.register("esri-group",n),_.register("esri-featureServer",s),_.register("esri-featureServer-group",o),_.register("esri-mapServer",u),_.register("esri-mapServer-group",l),_.register("geojson",E),_.register("gltf",I),_.register("gpx",k),_.register("group",f),_.register("ion-imagery",L),_.register("kml",P),_.register("kmz",P),_.register("mvt",T),_.register("ogr",M),_.register("open-street-map",A),_.register("sdmx-json",j),_.register("socrata",N),_.register("sos",D),_.register("terria-json",O),_.register("url-template",F),_.register("wfs",U),_.register("wfs-features-group",Z),_.register("wfs-getCapabilities",R),_.register("wms",B),_.register("wms-getCapabilities",V),_.register("wmts",W),_.register("wmts-getCapabilities",G),_.register("wps-getCapabilities",z),_.register("wps-result",H),_.register("wps",q),_.register("magda-item",J),_.register("mapbox-map",Y),b.register(X("csv"),w),b.register(X("czm"),x),b.register(X("czml"),x),b.register(X("geojson"),E),b.register(X("gpx"),k),b.register(X("json"),E),b.register(X("kml"),P),b.register(X("kmz"),P),b.register(X("topojson"),E),b.register(K(/\/WMTS\b/i),G,!0),b.register(K(/\/wfs/i),R,!0),b.register(K(/\/wms/i),V,!0),b.register(K(/\/arcgis\/rest\/.*\/MapServer\/\d+\b/i),u,!0),b.register(K(/\/arcgis\/rest\/.*\/FeatureServer\/\d+\b/i),s,!0),b.register(K(/\/arcgis\/rest\/.*\/MapServer(\/.*)?$/i),l,!0),b.register(K(/\/arcgis\/rest\/.*\/FeatureServer(\/.*)?$/i),o,!0),b.register(K(/\/arcgis\/rest\/.*\/\d+\b/i),u,!0),b.register(K(/\/ArcGis\/rest\//i),n,!0),b.register(K(/\/sdmx-json\//i),j,!0),b.register(void 0,V,!0),b.register(void 0,R,!0),b.register(void 0,u,!0),b.register(void 0,l,!0),b.register(void 0,n,!0),b.register(void 0,s,!0),b.register(void 0,o,!0)}},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(51),n=r(41),o=r(8),s=r(10),l=r(17),u=r(23),c=r(70),d=r(225),p=r(606),f=r(104),h=r(27),m=r(36),g=r(46),v=function(e){f.call(this,e,"abs-itt-by-concept"),this.url=void 0,this.filter=void 0,this.conceptNamesUrl=void 0,this.regionPopulationsUrlPrefix=void 0,this.dataCustodian=void 0,this.blacklist=void 0,this.whitelist=void 0,this.itemProperties=void 0,u.track(this,["url","filter","dataCustodian","blacklist","whitelist","itemProperties"])};function y(e,t){var r=new p(e.terria);return r.name=t.description,r.description=t.description,r.dataCustodian=e.dataCustodian,r.url=e.url,r.datasetId=t.id,r.filter=e.filter,r.conceptNamesUrl=e.conceptNamesUrl,r.regionPopulationsUrlPrefix=e.regionPopulationsUrlPrefix,"object"===i(e.itemProperties)&&r.updateFromJson(e.itemProperties),r}h(f,v),s(v.prototype,{type:{get:function(){return"abs-itt-dataset-list"}},typeName:{get:function(){return"ABS.Stat Dataset List"}},serializers:{get:function(){return v.defaultSerializers}}}),(v.defaultSerializers=n(f.defaultSerializers)).items=f.enabledShareableItemsSerializer,l(v.defaultSerializers),v.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.blacklist,this.whitelist]},v.prototype._load=function(){var e=function(e,t){var r=new a(t);r.search("");var i=r.toString();return g(e,i,"1d")}(this,this.url),t=this,r=e+"?"+d({method:"GetDatasetList",format:"json"});return c(r).then(function(e){var r,i=e.datasets,a=[];for(r in t.blacklist)t.blacklist.hasOwnProperty(r)&&"?"===r[0]&&a.push(r.substring(1));var n=[];for(r in t.whitelist)t.whitelist.hasOwnProperty(r)&&"?"===r[0]&&n.push(r.substring(1));for(var s=0;s<i.length-1;++s){var l,u=i[s],c=o(t.blacklist)&&o(t.blacklist[u.description]);for(l=0;l<a.length&&!c;l++)-1!==u.id.indexOf(a[l])&&(c=!0);for(l=0;l<n.length&&!c;l++)-1===u.id.indexOf(n[l])&&(c=!0);o(t.whitelist)&&o(t.whitelist[u.description])&&(c=!0),c?console.log("Provider Feedback: Filtering out "+u.description+" ("+u.id+") because it is blacklisted."):t.add(y(t,u))}}).otherwise(function(e){throw console.log(e.message),new m({sender:t,title:"Group is not available",message:'An error occurred while invoking GetCodeListValue on the ABS ITT server.  <p>This error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"})})},e.exports=v},function(e,t,r){"use strict";var i=r(423);i.insensitive=!0;var a=r(9),n=r(8),o=r(10),s=r(23),l=r(1064),u=r(27),c=r(376),d=function(e){(e=a(e,a.EMPTY_OBJECT),c.call(this,e.name||e.id),this.id=e.id,this.items=[],this.isOpen=!0,this.isSelectable=!1,this.allowMultiple=a(e.allowMultiple,!1),n(e.codes))&&(!function e(t,r,a,o){o.sort(function(e,t){return i(e.description.replace(",",""),t.description.replace(",",""))});var s=!1;for(var u=0;u<o.length;++u){var c=t instanceof l?t.code:"";if(o[u].parentCode===c){var d=new l(o[u].code,o[u].description,a),p=a.id+"."+d.code;n(r)&&-1!==r.indexOf(p)&&(d.isActive=!0,s=!0),""===c&&o.length<50&&(d.isOpen=!0),d.parent=t,t.items.push(d);var f=e(d,r,a,o);s=f||s}}return s}(this,e.filter,this,e.codes)&&this.items.length>0&&(this.items[0].isActive=!0));s.track(this,["items","isOpen"]),s.defineProperty(this,"activeItems",{get:function(){return p(this)}}),s.getObservable(this,"activeItems").subscribe(function(t){e.activeItemsChangedCallback(this,t)},this)};function p(e){if(n(e)){var t=[];return e.items.forEach(function(e){e.isActive&&t.push(e),t=t.concat(p(e))}),t}}u(c,d),o(d.prototype,{hasChildren:{get:function(){return this.items.length>0}}}),d.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},d.prototype.toFilter=function(){return p(this).map(function(e){return e.concept.id+"."+e.code})},e.exports=d},function(e,t,r){"use strict";var i=r(10),a=r(23),n=r(8),o=r(27),s=r(376),l=function(e,t,r){s.call(this,t),this.code=e,this.items=[],this.parent=void 0,this.concept=r,this.allowMultiple=this.concept.allowMultiple,this.isOpen=!1,this.isActive=!1,this.isSelectable=!0,a.track(this,["code","items","isOpen","isActive"])};o(s,l),i(l.prototype,{hasChildren:{get:function(){return this.items.length>0}}}),l.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},l.prototype.toggleActive=function(e){var t;this.isActive=!this.isActive,this.isActive&&(!function e(t){n(t.parent)&&(t.parent.isActive=!1,e(t.parent))}(this),function e(t){t.items.forEach(function(t){t.isActive=!1,e(t)})}(this),(t=this).parent.allowMultiple||t.parent.items.forEach(function(e){e!==t&&(e.isActive=!1)}))},e.exports=l},function(e,t,r){"use strict";e.exports=function(e){return e.reduce(function(e,t){return e.concat(t)},[])}},function(e,t,r){"use strict";var i=r(51),a=r(41),n=r(8),o=r(10),s=r(17),l=r(23),u=r(70),c=r(36),d=r(104),p=r(27),f=r(46),h=r(320),m=r(609),g=r(610),v=function(e){d.call(this,e,"esri-group"),this.url="",this.dataCustodian=void 0,this.blacklist=void 0,this.itemProperties=void 0,l.track(this,["url","dataCustodian","blacklist","itemProperties"])};function y(e,t,r){var a=w(t,r),o=new v(e.terria);return o.name=h(a),o.url=new i(e.url).segment(a).toString(),o.dataCustodian=e.dataCustodian,o.blacklist=e.blacklist,n(e.itemProperties)&&o.updateFromJson(e.itemProperties),e.add(o),o}p(d,v),o(v.prototype,{type:{get:function(){return"esri-group"}},typeName:{get:function(){return"ArcGIS Service Group"}},serializers:{get:function(){return v.defaultSerializers}}}),v.defaultSerializers=a(d.defaultSerializers),v.defaultSerializers.items=d.enabledShareableItemsSerializer,v.defaultSerializers.isLoading=function(e,t,r,i){},s(v.defaultSerializers),v.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.blacklist]},v.prototype._load=function(){return/\/MapServer\/?$/i.test(this.url)?g.loadMapServer(this):/\/FeatureServer\/?$/i.test(this.url)?m.loadFeatureServer(this):(t=function(e,t){var r=new i(t);r.search("");var a=r.toString();return f(e,a,"1d")}(e=this,e.url)+"?f=json",r=e.terria,u(t).then(function(t){if(!t||!t.folders&&!t.services)throw new c({title:"Invalid ArcGIS Server",message:"An error occurred while invoking the ArcGIS REST service.  The server's response does not appear to be a valid ArcGIS REST document.  <p>If you entered the link manually, please verify that the link is correct.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href=\"mailto:"+r.supportEmail+'">'+r.supportEmail+"</a>.</p>"});var i,a=function(e){var t=/rest\/services\/(.*)/i.exec(e.url);return t&&t.length>1?t[1]:""}(e),o=t.folders;if(n(o))for(i=0;i<o.length;++i)y(e,a,o[i]);var s=t.services;if(n(s))for(i=0;i<s.length;++i)_(e,a,s[i])}).otherwise(function(t){throw new c({sender:e,title:"Group is not available",message:'An error occurred while invoking the ArcGIS REST service. <p>If you entered the link manually, please verify that the link is correct.</p><p>This error may also indicate that the server does not support <a href="http://enable-cors.org/" target="_blank">CORS</a>.  If this is your server, verify that CORS is enabled and enable it if it is not.  If you do not control the server, please contact the administrator of the server and ask them to enable CORS.  Or, contact the '+r.appName+' team by emailing <a href="mailto:'+r.supportEmail+'">'+r.supportEmail+"</a> and ask us to add this server to the list of non-CORS-supporting servers that may be proxied by "+r.appName+' itself.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href="mailto:'+r.supportEmail+'">'+r.supportEmail+"</a>.</p>"})}));var e,t,r};var b=["MapServer","FeatureServer"];function _(e,t,r){var a=b.indexOf(r.type);if(!(a<0)){var o,s=w(t,r.name);if((o=0===a?new g(e.terria):new m(e.terria)).name=h(s),o.url=new i(e.url).segment(s).segment(r.type).toString(),o.dataCustodian=e.dataCustodian,o.blacklist=e.blacklist,n(e.itemProperties))for(var l in e.itemProperties)e.itemProperties.hasOwnProperty(l)&&(o[l]=e.itemProperties[l]);return e.add(o),o}}function w(e,t){return(e||0!==e.length)&&0===t.indexOf(e)?t.substring(e.length+1):t}e.exports=v},,,,,function(e,t,r){"use strict";var i=r(8),a=r(10),n=r(27),o=r(23),s=r(46),l=r(37),u=r(36),c=r(614),d=r(181);function p(e){c.call(this,e),this.config=void 0,this.auth_token=void 0,this.tileUrl=void 0,this.tileSubdomains=void 0,o.track(this,["tileUrl","tileSubdomains"])}n(c,p),a(p.prototype,{type:{get:function(){return"carto"}},typeName:{get:function(){return"Carto Map"}}}),p.prototype._load=function(){var e=this;if(!i(this.tileUrl)){var t={};return this.auth_token&&(t.auth_token=this.auth_token),new l({url:this.url,headers:{"Content-Type":"application/json"},queryParameters:t}).post(JSON.stringify(this.config||{})).then(function(t){var r,a,n=JSON.parse(t),o=n.metadata&&n.metadata.url&&n.metadata.url.raster;if(!o)throw new u({sender:e,title:"No URL",message:"Unable to find a usable URL for the Carto Map layer."});r=o.urlTemplate,a=o.subdomains,e.tileUrl=r,i(e.tileSubdomains)||(e.tileSubdomains=a)})}},p.prototype._createImageryProvider=function(){return new d({url:s(this,this.tileUrl),maximumLevel:this.maximumLevel,minimumLevel:this.minimumLevel,credit:this.attribution,subdomains:this.tileSubdomains,tileDiscardPolicy:this.tileDiscardPolicy,rectangle:this.rectangle})},e.exports=p},function(e,t,r){"use strict";var i=r(92),a=r(615),n=r(58),o=r(8),s=r(10),l=r(27),u=r(327),c=r(46),d=r(137),p=r(36),f=r(18),h=function(e){i.call(this,e),this.options=void 0,this.ionAssetId=void 0,this.ionAccessToken=void 0,this.ionServer=void 0,this._tileset=void 0};l(i,h),s(h.prototype,{type:{get:function(){return"3d-tiles"}},typeName:{get:function(){return"Cesium 3D Tiles"}},supportsReordering:{get:function(){return!1}},supportsOpacity:{get:function(){return!1}},canZoomTo:{get:function(){return!0}}}),h.prototype._showInCesium=function(){o(this._tileset)&&(this._tileset.show=!0)},h.prototype._hideInCesium=function(){o(this._tileset)&&(this._tileset.show=!1)},h.prototype._showInLeaflet=function(){throw this.isShown=!1,new p({sender:this,title:"Not supported in 2D",message:'"'+this.name+'" cannot be show in the 2D view.  Switch to 3D and try again.'})},h.prototype._hideInLeaflet=function(){},h.prototype._enableInCesium=function(){var e=this;if(!o(this._tileset)){var t=c(this,this.url);o(this.ionAssetId)&&(t=u.fromAssetId(this.ionAssetId,{accessToken:this.ionAccessToken||this.terria.configParameters.cesiumIonAccessToken,server:this.ionServer}).otherwise(function(t){d(e.terria,t)}));var r={show:this.isShown,url:t};this.options&&(r=n(r,this.options)),this._tileset=new a(r)}var i=this.terria.cesium.scene.primitives;i.contains(this._tileset)||i.add(this._tileset)},h.prototype._disableInCesium=function(){o(this._tileset)&&(this.terria.cesium.scene.primitives.removeAndDestroy(this._tileset),this._tileset=void 0)},h.prototype._enableInLeaflet=function(){},h.prototype._disableInLeaflet=function(){},h.prototype.zoomTo=function(){var e=this;return f(this.load(),function(){return o(e.nowViewingCatalogItem)?e.nowViewingCatalogItem.zoomTo():o(e.rectangle)?i.prototype.zoomTo.call(e):o(e._tileset)?e.terria.currentViewer.zoomTo(e._tileset):void 0})},h.prototype.syncMaximumScreenSpaceError=function(){if(o(this._tileset)&&!this.options.maximumScreenSpaceError){if(!o(this.terria.cesium))return;var e=8*this.terria.baseMaximumScreenSpaceError;this._tileset.maximumScreenSpaceError!==e&&(this._tileset.maximumScreenSpaceError=e)}},e.exports=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=r(439),a=r(8),n=r(10),o=r(327),s=r(137),l=r(1136),u=function(e){l.call(this,e),this.ionAssetId=void 0,this.ionAccessToken=void 0,this.ionServer=void 0};r(27)(l,u),n(u.prototype,{type:{get:function(){return"cesium-terrain"}},typeName:{get:function(){return"Cesium Terrain"}}}),u.prototype._createTerrainProvider=function(){var e=this,t=this.url;return a(this.ionAssetId)&&(t=o.fromAssetId(this.ionAssetId,{accessToken:this.ionAccessToken||this.terria.configParameters.cesiumIonAccessToken,server:this.ionServer}).otherwise(function(t){s(e.terria,t)})),new i({url:t})},e.exports=u},,,,,function(e,t,r){"use strict";var i=r(8),a=r(10),n=r(11),o=r(92),s=r(27),l=r(36),u=function(e){o.call(this,e),this._terrainProvider=void 0,this._originalTerrainProvider=void 0};function c(e){if(i(e.terrainProvider))return!0;if(e.isMappable&&i(e.items))for(var t=0;t<e.items.length;++t)if(c(e.items[t]))return!0;return!1}s(o,u),a(u.prototype,{terrainProvider:{get:function(){return this._terrainProvider}},supportsReordering:{get:function(){return!1}},supportsOpacity:{get:function(){return!1}}}),u.prototype._createTerrainProvider=function(){throw new n("_createTerrainProvider must be implemented in the derived class.")},u.prototype._showInCesium=function(){this._disableOtherTerrainItems();var e=this._terrainProvider=this._createTerrainProvider(),t=this.terria.cesium.scene;this._originalTerrainProvider=t.terrainProvider,t.terrainProvider=e},u.prototype._hideInCesium=function(){i(this._originalTerrainProvider)&&(this.terria.cesium.scene.terrainProvider=this._originalTerrainProvider,this._originalTerrainProvider=void 0,this._terrainProvider=void 0)},u.prototype._showInLeaflet=function(){throw this.isShown=!1,new l({sender:this,title:"Not supported in 2D",message:'"'+this.name+'" cannot be show in the 2D view.  Switch to 3D and try again.'})},u.prototype._hideInLeaflet=function(){},u.prototype._enableInCesium=function(){},u.prototype._disableInCesium=function(){},u.prototype._enableInLeaflet=function(){},u.prototype._disableInLeaflet=function(){},u.prototype._disableOtherTerrainItems=function(){for(var e=this.terria.nowViewing.items,t=0;t<e.length;t++){var r=e[t];r!==this&&c(r)&&(r.isShown=!1)}},e.exports=u},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(51),n=r(41),o=r(8),s=r(10),l=r(201),u=r(17),c=r(23),d=r(70),p=r(234),f=r(18),h=r(644),m=r(442),g=r(443),v=r(36),y=r(104),b=r(27),_=r(46),w=r(151),S=function(e){y.call(this,e,"ckan"),this.url="",this.dataCustodian=void 0,this.filterQuery=void 0,this.blacklist=void 0,this.filterByWmsGetCapabilities=!1,this.minimumMaxScaleDenominator=void 0,this.wmsParameters=void 0,this.groupBy="group",this.ungroupedTitle="No group",this.useResourceName=!1,this.allowEntireWmsServers=!1,this.allowEntireWfsServers=!1,this.includeWms=!0,this.wmsResourceFormat=/^wms$/i,this.includeWfs=!0,this.wfsResourceFormat=/^wfs$/i,this.includeKml=!1,this.kmlResourceFormat=/^km[lz]$/i,this.includeCsv=!1,this.csvResourceFormat=/^csv-geo-/i,this.includeEsriMapServer=!1,this.includeEsriFeatureServer=!1,this.esriMapServerResourceFormat=/^esri rest$/i,this.esriFeatureServerResourceFormat=/^esri rest$/i,this.includeGeoJson=!1,this.geoJsonResourceFormat=/^geojson$/i,this.includeCzml=!1,this.czmlResourceFormat=/^czml$/i,this.itemProperties=void 0,c.track(this,["url","dataCustodian","filterQuery","blacklist","wmsParameters","groupBy","ungroupedTitle","useResourceName","allowEntireWmsServers","allowEntireWfsServers","includeWms","includeWfs","includeKml","includeCsv","includeEsriMapServer","includeGeoJson","includeCzml","itemProperties"])};function C(e,t,r){for(var i in r)r.hasOwnProperty(i)&&(r[i].__filtered=!0);return p(t).then(function(t){var i=w(t);!function e(t,r,i){!o(r)||r instanceof Array||(r=[r]);for(var a=0;a<r.length;++a){var n=r[a];if(n.Name){var s=i[n.Name];s&&(!o(t.minimumMaxScaleDenominator)||!o(n.MaxScaleDenominator)||n.MaxScaleDenominator>=t.minimumMaxScaleDenominator?s.__filtered=!1:console.log("Provider Feedback: Filtering out "+n.Title+" ("+n.Name+") because its MaxScaleDenominator is "+n.MaxScaleDenominator))}n.Layer&&e(t,n.Layer,i)}}(e,i.Capability.Layer,r)}).otherwise(function(){})}function x(e,t){for(var r,i=0;i<t.length;++i){var a=t[i];if(e.blacklist&&e.blacklist[a.title])console.log("Provider Feedback: Filtering out "+a.title+" ("+a.name+") because it is blacklisted.");else{var n={};if(o(a.extras))for(var s=0;s<a.extras.length;s++)n[a.extras[s].key]=a.extras[s].value;for(var l=[],u=a.resources,c=0;c<u.length;++c){var d,p,f=u[c];if(d="group"===e.groupBy?a.groups:"organization"===e.groupBy&&a.organization?[a.organization]:void 0,o(d)&&d.length>0)for(var m=0;m<d.length;++m){var g=d[m],v=g.display_name||g.title,b=e.uniqueId+"/"+g.id;if(!e.blacklist||!e.blacklist[v]){var _=e.terria.catalog.shareKeyIndex[b],w=o(_);o(_)||((_=new y(e.terria)).name=v,_.id=b),p=E(f,e,a,n,_),!w&&_.items.length&&e.add(_)}}else e.ungroupedTitle?(o(r)||((r=new y(e.terria)).name=e.ungroupedTitle,r.id=e.uniqueId+"/_ungrouped",e.add(r)),p=E(f,e,a,n,r)):p=E(f,e,a,n,e);o(p)&&l.push(p)}l.length>1&&!e.useResourceName&&l.forEach(function(e){var t=h.shortHumanReadableTypeNames[e.type]||"Other";e.name+=" ("+t+")"})}}function S(e,t){var r=e.name.toLowerCase(),i=t.name.toLowerCase();return r<i?-1:r>i?1:0}e.items.sort(S);for(var C=0;C<e.items.length;++C)o(e.items[C].items)&&e.items[C].items.sort(S)}function E(e,t,r,i,a){var n=t.terria.catalog.shareKeyIndex[a.uniqueId+"/"+e.id];return o(n)||(n=function(e,t,r,i,a){return h.createCatalogItemFromResource({terria:t.terria,itemData:r,resource:e,extras:i,parent:a,ckanBaseUrl:t.url,wmsResourceFormat:t.includeWms?t.wmsResourceFormat:void 0,wfsResourceFormat:t.includeWfs?t.wfsResourceFormat:void 0,kmlResourceFormat:t.includeKml?t.kmlResourceFormat:void 0,csvResourceFormat:t.includeCsv?t.csvResourceFormat:void 0,esriMapServerResourceFormat:t.includeEsriMapServer?t.esriMapServerResourceFormat:void 0,esriFeatureServerResourceFormat:t.includeEsriFeatureServer?t.esriFeatureServerResourceFormat:void 0,geoJsonResourceFormat:t.includeGeoJson?t.geoJsonResourceFormat:void 0,czmlResourceFormat:t.includeCzml?t.czmlResourceFormat:void 0,allowWmsGroups:t.allowEntireWmsServers,allowWfsGroups:t.allowEntireWfsServers,dataCustodian:t.dataCustodian,itemProperties:t.itemProperties,useResourceName:t.useResourceName})}(e,t,r,i,a))&&a.add(n),n}b(y,S),s(S.prototype,{type:{get:function(){return"ckan"}},typeName:{get:function(){return"CKAN Server"}},updaters:{get:function(){return S.defaultUpdaters}},serializers:{get:function(){return S.defaultSerializers}}}),(S.defaultUpdaters=n(y.defaultUpdaters)).wmsResourceFormat=m("wmsResourceFormat"),S.defaultUpdaters.wfsResourceFormat=m("wfsResourceFormat"),S.defaultUpdaters.kmlResourceFormat=m("kmlResourceFormat"),S.defaultUpdaters.csvResourceFormat=m("csvResourceFormat"),S.defaultUpdaters.esriMapServerResourceFormat=m("esriMapServerResourceFormat"),S.defaultUpdaters.esriFeatureServerResourceFormat=m("esriFeatureServerResourceFormat"),S.defaultUpdaters.geoJsonResourceFormat=m("geoJsonResourceFormat"),S.defaultUpdaters.czmlResourceFormat=m("czmlResourceFormat"),u(S.defaultUpdaters),(S.defaultSerializers=n(y.defaultSerializers)).items=y.enabledShareableItemsSerializer,S.defaultSerializers.wmsResourceFormat=g("wmsResourceFormat"),S.defaultSerializers.wfsResourceFormat=g("wfsResourceFormat"),S.defaultSerializers.kmlResourceFormat=g("kmlResourceFormat"),S.defaultSerializers.csvResourceFormat=g("csvResourceFormat"),S.defaultSerializers.esriMapServerResourceFormat=g("esriMapServerResourceFormat"),S.defaultSerializers.esriFeatureServerResourceFormat=g("esriFeatureServerResourceFormat"),S.defaultSerializers.geoJsonResourceFormat=g("geoJsonResourceFormat"),S.defaultSerializers.czmlResourceFormat=g("czmlResourceFormat"),u(S.defaultSerializers),S.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.filterQuery,this.blacklist,this.filterByWmsGetCapabilities,this.minimumMaxScaleDenominator,this.allowEntireWmsServers,this.allowEntireWfsServers,this.includeWms,this.includeWfs,this.includeKml,this.includeCsv,this.includeEsriMapServer,this.includeGeoJson,this.includeCzml,this.groupBy,this.ungroupedTitle]},S.prototype._load=function(){if(o(this.url)&&0!==this.url.length){var e=this,t=[];if(!o(this.filterQuery)||!Array.isArray(this.filterQuery)||"string"!=typeof this.filterQuery[0]&&"object"!==i(this.filterQuery[0]))throw new v({title:"Error loading CKAN catalogue",message:"The definition for this CKAN catalogue does not have a valid filter query."});var r=[];return this.filterQuery.forEach(function(n){var o=new a(e.url).segment("api/3/action/package_search").addQuery({rows:1e5,sort:"metadata_created asc"});"object"===i(n)&&Object.keys(n).forEach(function(e){return o.addQuery(e,n[e])});var s=0;t.push(function t(){var i=o.clone().addQuery({start:s}).toString();return"string"==typeof n&&(i+="&"+n),d(_(e,i,"1d")).then(function(e){if(e&&e.result&&e.result.results){for(var i=e.result.results,a=0;a<i.length;++a)r.push(i[a]);if((s+=i.length)<e.result.count)return t()}})}().then(function(){return r}))}),f.all(t).then(function(t){if(o(t)){for(var r=[],i=0;i<t.length;i++)for(var n=t[i],s=0;s<n.length;++s)r.push(n[s]);if(e.filterByWmsGetCapabilities)return f(function(e,t){for(var r={},i=0;i<t.length;++i)for(var n=t[i],s=n.resources,l=0;l<s.length;++l){var u=s[l];if(u.format.match(e.wmsResourceFormat)){var c=u.wms_url;if(o(c)||(c=u.url,o(c))){var d=new a(c),p=d.search(!0),h=p.LAYERS;d.search("");var m=d.toString();o(r[m])||(r[m]={}),r[m][h]=u}}}var g=[];for(var v in r)if(r.hasOwnProperty(v)){var y=e.terria.corsProxy.getURLProxyIfNecessary(v+"?service=WMS&request=GetCapabilities","1d");g.push(C(e,y,r[v]))}return f.all(g)}(e,r),function(){x(e,r)});x(e,r)}}).otherwise(function(t){throw new v({sender:e,title:e.name,message:'Couldn\'t retrieve packages from this CKAN server.<br/><br/>If you entered the URL manually, please double-check it.<br/><br/>If it\'s your server, make sure <a href="http://enable-cors.org/" target="_blank">CORS</a> is enabled.<br/><br/>Otherwise, if reloading doesn\'t fix it, please report the problem by sending an email to <a href="mailto:'+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a> with the technical details below.  Thank you!<br/><br/><pre>"+l(t)+"</pre>"})})}},e.exports=S},function(e,t,r){"use strict";var i=r(315),a=r(40),n=r(18),o=new DOMParser;e.exports=function(e){return n(i(e),function(e){var t=o.parseFromString(e,"application/xml");if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length>0)throw new a("The file does not contain valid XML.");return t},function(e){throw e})}},function(e,t,r){"use strict";var i=r(8),a=r(40),n="http://www.opengis.net/gml";var o=["Curve","LineString","Point","Polygon","MultiCurve","MultPoint","MultiSurface","Surface"];function s(e,t){for(var r=!0,i=0;i<e.childNodes.length;++i){var a=e.childNodes[i];a.nodeType===Node.ELEMENT_NODE&&(r=!1),o.indexOf(a.localName)>=0||a.hasChildNodes()&&s(a,t)&&(t[a.localName]=a.textContent)}return r}function l(e){for(var t,r=0;!i(t)&&r<e.childNodes.length;++r){var a=e.childNodes[r];if(o.indexOf(a.localName)>=0)return p(a);t=l(a)}return t}function u(e){for(var t=[],r=e.getElementsByTagNameNS(n,"posList"),i=0;i<r.length;++i)for(var a=h(r[i].textContent),o=0;o<a.length;++o)t.push(a[o]);return{type:"LineString",coordinates:t}}function c(e){var t=[],r=e.getElementsByTagNameNS(n,"exterior");if(r.length<1)throw new a("GML polygon is missing its exterior ring.");var i=r[0].getElementsByTagNameNS(n,"posList");if(i.length<1)throw new a("GML polygon's exterior ring is missing a posList.");t.push(h(i[0].textContent));for(var o=e.getElementsByTagNameNS(n,"interior"),s=0;s<o.length;++s){var l=o[s].getElementsByTagNameNS(n,"posList");l.length<1||t.push(h(l[0].textContent))}return{type:"Polygon",coordinates:t}}var d={Curve:u,LineString:u,Point:function(e){var t=e.getElementsByTagNameNS(n,"pos");if(t<1)throw new a("GML point element is missing a pos element.");return{type:"Point",coordinates:h(t[0].textContent)[0]}},Polygon:c,MultiCurve:function(e){for(var t=e.getElementsByTagNameNS(n,"posList"),r=[],i=0;i<t.length;++i)r.push(h(t[i].textContent));return{type:"MultiLineString",coordinates:r}},MultPoint:function(e){for(var t=e.getElementsByTagNameNS(n,"pos"),r=[],i=0;i<t.length;++i)r.push(h(t[i].textContent)[0]);return{type:"MultiPoint",coordinates:r}},MultiSurface:function(e){for(var t=[],r=e.getElementsByTagNameNS(n,"Polygon"),i=0;i<r.length;++i){var o=r[i],s=o.getElementsByTagNameNS(n,"exterior");if(s.length<1)throw new a("GML polygon is missing its exterior ring.");var l=[],u=s[0].getElementsByTagNameNS(n,"posList");if(u.length<1)throw new a("GML polygon's exterior ring is missing a posList.");l.push(h(u[0].textContent));for(var c=o.getElementsByTagNameNS(n,"interior"),d=0;d<c.length;++d){var p=c[d].getElementsByTagNameNS(n,"posList");p.length<1||l.push(h(p[0].textContent))}t.push(l)}return{type:"MultiPolygon",coordinates:t}},Surface:c};function p(e){var t=e.localName,r=d[t];if(!i(r))throw new a("GML contains unsupported feature type: "+t);return r(e)}function f(e){return 0!==e.length}function h(e){for(var t=e.split(/[ ,]+/).filter(f),r=[],i=0;i<t.length;i+=2)r.push([parseFloat(t[i+1]),parseFloat(t[i])]);return r}e.exports=function(e){"string"==typeof e&&(e=(new DOMParser).parseFromString(e,"text/xml"));for(var t=[],r=e.documentElement.getElementsByTagNameNS(n,"featureMember"),a=0;a<r.length;++a){var o=r[a],u={};s(o,u);var c={type:"Feature",geometry:l(o),properties:u};i(c.geometry)&&t.push(c)}return{type:"FeatureCollection",crs:{type:"EPSG",properties:{code:"4326"}},features:t}}},function(e,t,r){"use strict";var i=n(r(14)),a=n(r(26));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),i.forEach(function(t){s(e,t,r[t])})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(8),u=r(10),c=r(23),d=r(168),p=r(262),f=r(127),h=r(138),m=r(72),g=r(42),v=r(261),y=r(37),b=r(118),_=r(27),w=r(92),S=r(79),C=r(257),x=r(70),E=r(157),I=function(e,t){w.call(this,e),this._geoJsonItem=void 0,this._tableCatalogItem=void 0,this._chartCatalogItem=void 0,this._streams=void 0,this.apikey=void 0,this.url=t,this.style=void 0,this.data=void 0,this.dataSourceUrl=void 0,this.intervals=void 0,this.currentIntervalIndex=void 0,c.track(this,["data","dataSourceUrl","_tableCatalogItem","_chartCatalogItem","intervals"]),c.defineProperty(this,"concepts",{get:function(){return l(this._tableCatalogItem)&&l(this._tableCatalogItem._tableStructure)?[this._tableCatalogItem._tableStructure]:[]}}),c.defineProperty(this,"availableDates",{get:function(){if(l(this.intervals)){for(var e=[],t=0;t<this.intervals.length;t++)e.push(g.toDate(this.intervals.get(t).start,3));return e}return[]}},this),b(this,"rectangle",{get:function(){return l(this._rectangle)?this._rectangle:l(this._tableCatalogItem)?this._tableCatalogItem.rectangle:void 0},set:function(e){this._rectangle=e}}),b(this,"legendUrl",{get:function(){return l(this._tableCatalogItem)?this._tableCatalogItem.legendUrl:l(this._tableCatalogItem._regionMapping)?this._tableCatalogItem._regionMapping.legendUrl:void 0}})};function k(e,t,r,i,a){e.isLoading=!0,y.fetch({url:"https://senaps.io/tdm/drill?path=".concat(i,"&longitude=").concat(r.lng,"&latitude=").concat(r.lat,"&variable=tscrn&apikey=").concat(e.apikey),responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}}).then(function(r){r=JSON.parse(r);var i=1/0,n=-1/0,o=r.results.reduce(function(e,t){return t.v.v>n&&(n=t.v.v),t.v.v<i&&(i=t.v.v),"".concat(e).concat(t.t,",").concat(t.v.v,"\n")},"date,v1\n"),s=h("csv",e.terria);s.id=m(),s.updateFromJson({name:t,data:o,isEnabled:!0,tableStyle:{columns:{v1:{yAxisMin:i,yAxisMax:n,active:!0,name:a}}}}),l(e._chartCatalogItem)&&e.terria.nowViewing.remove(e._chartCatalogItem),e.isLoading=!1})}_(w,I),u(I.prototype,{type:{get:function(){return"senaps"}},typeName:{get:function(){return"Senaps"}},dataSource:{get:function(){return l(this._geoJsonItem)?this._geoJsonItem.dataSource:l(this._tableCatalogItem)?this._tableCatalogItem.dataSource:void 0}}}),I.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.currentIntervalIndex]},I.prototype._load=function(){if(this.apikey=this.url.split("apikey=")[1].split("&")[0],this.url.includes("/streams?")){if(l(this._streams))return this._getStreamsData();var e=this;return new Promise(function(t){e._initStreams().then(function(){e._getStreamsData().then(t)})})}if(this.url.includes("/locations?")){this._geoJsonItem=new S(this.terria),this._geoJsonItem.clampToGround=!0,this._geoJsonItem.style=this.style;var t=this;return x(this.url).then(function(e){return t._geoJsonItem.data={type:"FeatureCollection",features:e._embedded.locations.map(function(e){return{type:"Feature",properties:{description:e.description},geometry:e.geojson}})},t._geoJsonItem.load()})}},I.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.currentIntervalIndex]},I.prototype._initStreams=function(){var e=this;return new Promise(function(t){y.fetch({url:e.url,responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}}).then(function(r){e._streams=JSON.parse(r)._embedded.streams.reduce(function(e,t){return e[t.id]={resultsSummary:t.resultsSummary,location:{id:t._embedded.location[0].id,description:t._embedded.location[0].description,geojson:t._embedded.location[0].geojson}},e},{});var i={epoch:g.fromIso8601("2019-01-01T01:00:00Z"),iso8601Durations:new Array(700).fill("PT1H"),relativeToPrevious:!0,isStartIncluded:!0,isStopIncluded:!0,leadingInterval:!1,trailingInterval:!1};e.intervals=f.fromIso8601DurationArray(i,new f);var a=e.intervals.start,n=e.intervals.stop,o=g.secondsDifference(n,a),s=Math.round(o/120),l=new v;l.startTime=g.clone(a),l.stopTime=g.clone(n),l.clockRange=d.LOOP_STOP,l.multiplier=s,l.currentTime=g.clone(a),l.clockStep=p.SYSTEM_CLOCK_MULTIPLIER,e.clock=l,e.currentIntervalIndex=e.intervals.indexOf(e.clock.currentTime),t()})})},I.prototype._getStreamsData=function(){if(this.currentIntervalIndex<0)return Promise.resolve();var e=this;return new Promise(function(t){var r=e.currentIntervalIndex,i=e.intervals.get(r),a=g.toIso8601(i.start),n=g.toIso8601(i.stop);Promise.all(L(Object.keys(e._streams),50).map(function(t){return new Promise(function(r,i){var o=encodeURI("https://senaps.io/api/sensor/v2/observations?streamid=".concat(t.join(","),"&start=").concat(a,"&end=").concat(n,"&si=true&ei=true&media=json&apikey=").concat(e.apikey));y.fetch({url:o,responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}}).then(function(e){var t=JSON.parse(e);t.results.length>0?r(Object.values(t.results[0])[0]):r(void 0)})})})).then(function(i){i=i.reduce(function(e,t){return void 0!==t&&Object.assign(e,t),e},{});var a=Object.keys(i).reduce(function(t,r){return t+"".concat(r,",").concat(e._streams[r].location.geojson.coordinates[0],",").concat(e._streams[r].location.geojson.coordinates[1],",").concat(i[r].v[0],",").concat(i[r].v[1],",").concat(i[r].v[2],"\n")},"name,long,lat,bcModel,rawModel,observation\n"),n=!1;l(e._tableCatalogItem)&&(n=!0,e.isEnabled&&(e._disable(),e.isShown&&e._hide()));var s=new C(e.terria);s.id=m();var u={minDisplayValue:250,maxDisplayValue:300,colorMap:[{color:"#081d58",offset:0},{color:"#253494",offset:.125},{color:"#225ea8",offset:.25},{color:"#1d91c0",offset:.375},{color:"#41b6c4",offset:.5},{color:"#7fcdbb",offset:.625},{color:"#c7e9b4",offset:.75},{color:"#edf8b1",offset:.875},{color:"#ffffd9",offset:1}],colorBins:new Array(11).fill(250).map(function(e,t){return e+5*t})};s._tableStyle.columns={bcModel:o({},u),rawModel:o({},u),observation:o({},u,{active:!0})};var c={idColumnNames:s.idColumns,isSampled:s.isSampled,initialTimeSource:s.initialTimeSource,displayDuration:s._tableStyle.displayDuration,replaceWithNullValues:s._tableStyle.replaceWithNullValues,replaceWithZeroValues:s._tableStyle.replaceWithZeroValues,columnOptions:s._tableStyle.columns},d=new E(void 0,c);d.loadFromCsv(a),s.initializeFromTableStructure(d),e._tableCatalogItem=s,n&&(e._enable(),e._show()),r!==e.currentIntervalIndex?e._getStreamsData().then(t):t()})})},I.prototype._enable=function(){var e=this;l(this._geoJsonItem)&&this._geoJsonItem._enable(),l(this._tableCatalogItem)&&this._tableCatalogItem._enable(),this.currentTimeSubscription=c.getObservable(this,"currentTime").subscribe(function(e){!function(e,t){if(!l(e.intervals)||!l(e.currentIntervalIndex))return;e.currentIntervalIndex=e.intervals.indexOf(t),e.load()}(this,e)},this),this._selectedFeatureSubscription=c.getObservable(this.terria,"selectedFeature").subscribe(function(){if(l(this.terria.selectedFeature)&&l(this.terria.selectedFeature._entityCollection)&&this.terria.selectedFeature._entityCollection._owner._guid===this._tableCatalogItem._dataSource._guid)o=e,s=this.terria.selectedFeature._name,o.isLoading=!0,y.fetch({url:"https://senaps.io/api/sensor/v2/observations?streamid=".concat(s,"&media=csv&limit=4000&apikey=").concat(o.apikey),responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}}).then(function(e){var t="date,v1,v2,v3"+e.split("timestamp,".concat(s))[1].replace(/["']/g,""),r=h("csv",o.terria);r.id=m(),r.updateFromJson({name:s,data:t,isEnabled:!0,tableStyle:{columns:{v1:{chartLineColor:"#91bfdb",yAxisMin:250,active:!0,name:"bcModel"},v2:{chartLineColor:"#ffffbf",yAxisMin:250,active:!0,name:"rawModel"},v3:{chartLineColor:"#fc8d59",yAxisMin:250,active:!0,name:"observation"}}}}),l(o._chartCatalogItem)&&o.terria.nowViewing.remove(o._chartCatalogItem),o._chartCatalogItem=r,o.isLoading=!1});else if(l(this.terria.selectedFeature.imageryLayer)&&"tscrn"===this.terria.selectedFeature.imageryLayer._imageryProvider.layers){var t=a.default.WGS84.cartesianToCartographic(this.terria.selectedFeature.position._value),r=i.default.toDegrees(t.latitude),n=i.default.toDegrees(t.longitude);setTimeout(function(){k(e,"Model",{lat:r,lng:n},"csiro%2Fubisense%2Fccam_output%2Fchicago%2F2019%2Fjanuary%2Ftscrn.ccam_2.00km.201901.nc4","Temp")},10),setTimeout(function(){k(e,"Corrected",{lat:r,lng:n},"csiro/ubisense/ccam_bc_output/chicago/2019/january/tscrn.ccam_2.00km.201901.nc4","Temp")},50)}var o,s},this)},I.prototype._disable=function(){l(this.currentTimeSubscription)&&(this.currentTimeSubscription.dispose(),this.currentTimeSubscription=void 0),l(this._selectedFeatureSubscription)&&(this._selectedFeatureSubscription.dispose(),this._selectedFeatureSubscription=void 0),l(this._geoJsonItem)&&this._geoJsonItem._disable(),l(this._tableCatalogItem)&&this._tableCatalogItem._disable()},I.prototype._show=function(){l(this._geoJsonItem)&&this._geoJsonItem._show(),l(this._tableCatalogItem)&&this._tableCatalogItem._show()},I.prototype._hide=function(){l(this._geoJsonItem)&&this._geoJsonItem._hide(),l(this._tableCatalogItem)&&this._tableCatalogItem._hide()},I.prototype.showOnSeparateMap=function(e){return l(this._geoJsonItem)?this._geoJsonItem.showOnSeparateMap(e):l(this._tableCatalogItem)?this._tableCatalogItem.showOnSeparateMap(e):void 0},e.exports=I;var L=function(e,t){return Array(Math.ceil(e.length/t)).fill().map(function(e,r){return r*t}).map(function(r){return e.slice(r,r+t)})}},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(239),n=r(104),o=r(41),s=r(179),l=r(9),u=r(8),c=r(10),d=r(201),p=r(17),f=r(79),h=r(27),m=r(330),g=r(23),v=r(229),y=r(154),b=r(158),_=r(46),w=r(36),S=r(51),C=r(332),x=r(172),E=r(646),I=r(18),k=r(151),L=function(e){n.call(this,e,"csw"),this.url="",this.getRecordsTemplate=void 0,this.includeWms=!0,this.wmsResourceFormat=/\bwms\b/i,this.includeKml=!1,this.kmlResourceFormat=/\bkml\b/i,this.includeCsv=!1,this.csvResourceFormat=/\bcsv-geo-/i,this.includeEsriMapServer=!1,this.esriMapServerResourceFormat=/\besri rest\b/i,this.includeGeoJson=!1,this.geoJsonResourceFormat=/\bgeojson\b/i,this.metadataGroups=[],this.domainSpecification=void 0,this.includeWps=!1,this.wpsResourceFormat=/\bwps\b/i,this.itemProperties=void 0,g.track(this,["url","getRecordsParameters","includeWms","includeKml","includeCsv","includeEsriMapServer","includeGeoJson","includeWps","itemProperties"])};function P(e){return function(t,r,i,a){u(r[e])&&(t[e]=new RegExp(r[e],"i"))}}function T(e){return function(t,r,i,a){u(t[e])&&(r[e]=t[e].source)}}L.defaultGetRecordsTemplate=r(1146),L.wpsGetRecordsTemplate=r(1147),h(n,L),c(L.prototype,{type:{get:function(){return"csw"}},typeName:{get:function(){return"Catalogue Service (CSW)"}},updaters:{get:function(){return L.defaultUpdaters}},serializers:{get:function(){return L.defaultSerializers}}}),(L.defaultUpdaters=o(n.defaultUpdaters)).wmsResourceFormat=P("wmsResourceFormat"),L.defaultUpdaters.kmlResourceFormat=P("kmlResourceFormat"),L.defaultUpdaters.csvResourceFormat=P("csvResourceFormat"),L.defaultUpdaters.esriMapServerResourceFormat=P("esriMapServerResourceFormat"),L.defaultUpdaters.geoJsonResourceFormat=P("geoJsonResourceFormat"),L.defaultUpdaters.wpsResourceFormat=P("wpsResourceFormat"),p(L.defaultUpdaters),(L.defaultSerializers=o(n.defaultSerializers)).items=n.enabledShareableItemsSerializer,L.defaultSerializers.wmsResourceFormat=T("wmsResourceFormat"),L.defaultSerializers.kmlResourceFormat=T("kmlResourceFormat"),L.defaultSerializers.csvResourceFormat=T("csvResourceFormat"),L.defaultSerializers.esriMapServerResourceFormat=T("esriMapServerResourceFormat"),L.defaultSerializers.geoJsonResourceFormat=T("geoJsonResourceFormat"),L.defaultSerializers.wpsResourceFormat=T("wpsResourceFormat"),p(L.defaultSerializers),L.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.filterQuery,this.blacklist,this.filterByWmsGetCapabilities,this.minimumMaxScaleDenominator,this.allowEntireWmsServers,this.includeKml,this.includeWms,this.includeCsv,this.includeEsriMapServer,this.includeWps]};var M=[["wmsResourceFormat","includeWms",x],["esriMapServerResourceFormat","includeEsriMapServer",a],["kmlResourceFormat","includeKml",m],["geoJsonResourceFormat","includeGeoJson",f],["csvResourceFormat","includeCsv",s],["wpsResourceFormat","includeWps",E]];function A(e,t,r,i,a){if(0!==r.length&&t!==e.length-1||(j(e,t,r,i,a),t!==e.length-1)){for(var n=-1,o=0;o<r.length;o++)if(r[o].group===e[t]){n=o;break}-1===n&&(j(e,t,r,i,a),n=r.length-1),u(r[n].children)||(r[n].children=[]),A(e,t+1,r[n].children,i,a)}}function j(e,t,r,i,a){var n,o=!0;if(t+1!==e.length){var s=i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");n="^"+e.slice(0,t+1).join(s)+s}else n=e.slice(0,t+1).join(i),o=!1;r.push({field:a,value:n,regex:o,group:e[t]})}function D(e,t,r){for(var i=0;i<t.length;i++){var a=t[i],n=r[a.field],o=!1;if(u(n)){(n instanceof String||"string"==typeof n)&&(n=[n]);for(var s=0;s<n.length;s++){var l=n[s];if(N(a.value,l,a.regex)){o=!0;break}}}if(o){var c=O(a.group?a.group:a.value,e);return a.children&&u(c)?(e=D(c,a.children,r),u(e)||(e=c)):u(c)&&(e=c),e}}}function N(e,t,r){return u(r)&&r?new RegExp(e).test(t):e===t}function O(e,t){var r=t.findFirstItemByName(e);return u(r)||((r=new n(t.terria)).name=e,t.items.push(r)),r}function F(e,t,r,a,n){var o,s;return u(r.name)&&(o=r.name),M.forEach(function(t){!u(s)&&(r.protocol||r.scheme).match(e[t[0]])&&e[t[1]]&&(s=t[2]!==x||u(o)?new t[2](e.terria):new C(e.terria))}),u(s)&&(s instanceof E?(s.name=t.title,s.url=r.toString()):(s.name=t.title,s.description=t.description,s.url=r.toString(),s.dataCustodian="",u(t.contributor)&&s.info.push({name:"Data Responsibility",content:t.contributor.toString()}),s.info.push({name:"Links",content:a.reduce(function(e,t){return e+"["+t.description+"]("+t.url+")\n\n"},"")}),s.info.push({name:"Metadata Record URL",content:e.url+"?&version=2.0.2&service=CSW&request=GetRecordById&outputSchema=http://www.opengis.net/cat/csw/2.0.2&ElementSetName=full&id="+t.identifier}),u(n)&&(s.legendUrl=new v(n)),s.hasOwnProperty("layers")&&u(o)&&(s.layers=o),"object"===i(e.itemProperties)&&s.updateFromJson(e.itemProperties))),s}function R(e){var t=new S(e);return t.search(""),t.toString()}L.prototype._load=function(){var e;e=this.includeWps&&!function(e){for(var t=!1,r=0;r<M.length;r++){var i=M[r][1];u(e[i])&&e[i]&&"includeWps"!==i&&(t=!0)}return t}(this)?l(this.getRecordsTemplate,L.wpsGetRecordsTemplate):l(this.getRecordsTemplate,L.defaultGetRecordsTemplate);var t,r=this,i=1;var a,n=I();return u(r.domainSpecification)&&(n=(a=R(r.url)+"?service=CSW&version=2.0.2&request=GetDomain&propertyname="+r.domainSpecification.domainPropertyName,b(_(r,a,"1d")).then(function(e){if(!e||!e.documentElement||"GetDomainResponse"!==e.documentElement.localName)throw new w({sender:r,title:"Catalogue service is not useable",message:'Invalid response obtained when invoking GetDomain on the CSW server.  <p>This error may indicate that the catalogue server you specified is temporarily unavailable or there is a problem with your internet connection.  Try opening the processing server again, and if the problem persists, please report it by sending an email to <a href="mailto:'+r.terria.supportEmail+'">'+r.terria.supportEmail+"</a>.</p>"});for(var t=k(e).DomainValues.ListOfValues.Value,i=0;i<t.length;i++)A(t[i].split(r.domainSpecification.hierarchySeparator),0,r.metadataGroups,r.domainSpecification.hierarchySeparator,r.domainSpecification.queryPropertyName)}).otherwise(function(e){throw new w({sender:r,title:"Catalogue service is not useable",message:'An error occurred while invoking GetDomain on the CSW server.  <p>This error may indicate that the catalogue server you specified is temporarily unavailable or there is a problem with your internet connection.  Try opening the processing server again, and if the problem persists, please report it by sending an email to <a href="mailto:'+r.terria.supportEmail+'">'+r.terria.supportEmail+"</a>.</p>"})})).otherwise(function(e){if(e instanceof w)throw e;throw new w({sender:r,title:r.name,message:'Couldn\'t execute GetDomain on this CSW server.<br/><br/>If you entered the URL manually, please double-check it.<br/><br/>If it\'s your server, make sure <a href="http://enable-cors.org/" target="_blank">CORS</a> is enabled.<br/><br/>Otherwise, if reloading doesn\'t fix it, please report the problem by sending an email to <a href="mailto:'+r.terria.supportEmail+'">'+r.terria.supportEmail+"</a> with the technical details below.  Thank you!<br/><br/><pre>"+d(e)+"</pre>"})})),I(n,function(){return function a(){var n=e.replace("{startPosition}",i);if(n!==t)return y({url:_(r,R(r.url),"1d"),responseType:"document",method:"POST",overrideMimeType:"text/xml",data:n,headers:{"Content-Type":"application/xml"}}).then(function(e){if(u(e)){var o=k(e);if(o.Exception){var s="The CSW server reported an unknown error.";throw o.Exception.ExceptionText&&(s="The CSW server reported an error:\n\n"+o.Exception.ExceptionText),new w({sender:r,title:r.name,message:s})}var l=o.SearchResults;if(u(l)&&u(l.Record)){var c,d,p,f=l.Record;Array.isArray(f)||(f=[f]);for(var h=0;h<f.length;++h){var m=f[h],g=m.URI||m.references;if(u(g)){(g instanceof String||"string"==typeof g)&&(g=[g]),c=[],d=[],p=void 0;for(var v=0;v<g.length;v++){for(var y=g[v],b=!1,_=0;_<M.length;_++){var S=M[_],C=y.protocol||y.scheme;C&&C.match(r[S[0]])&&(b=!0,d.push(y))}b||("LegendUrl"===y.description&&(p=y.toString()),c.push({url:y.toString(),description:u(y.description)?y.description:y.name}))}for(var x=0;x<d.length;++x){var E=d[x],I=r;if(r.metadataGroups.length>0&&(I=D(r,r.metadataGroups,m)),u(I)){var L=F(r,m,E,c,p);u(L)&&I.items.push(L)}}}}var P=parseInt(l.nextRecord,10);return 0!==P&&P<parseInt(l.numberOfRecordsMatched,10)?(i=P,t=n,a()):void 0}}})}().otherwise(function(e){if(e instanceof w)throw e;throw new w({sender:r,title:r.name,message:'Couldn\'t execute GetRecords on this CSW server.<br/><br/>If you entered the URL manually, please double-check it.<br/><br/>If it\'s your server, make sure <a href="http://enable-cors.org/" target="_blank">CORS</a> is enabled.<br/><br/>Otherwise, if reloading doesn\'t fix it, please report the problem by sending an email to <a href="mailto:'+r.terria.supportEmail+'">'+r.terria.supportEmail+"</a> with the technical details below.  Thank you!<br/><br/><pre>"+d(e)+"</pre>"})})})},L._findLevel=A,e.exports=L},function(e,t,r){"use strict";var i=r(14),a=r(29);e.exports=function(e){var t=a.southwest(e),r=a.southeast(e),n=a.northwest(e),o=a.northeast(e);return[[[i.toDegrees(t.longitude),i.toDegrees(t.latitude)],[i.toDegrees(r.longitude),i.toDegrees(r.latitude)],[i.toDegrees(o.longitude),i.toDegrees(o.latitude)],[i.toDegrees(n.longitude),i.toDegrees(n.latitude)],[i.toDegrees(t.longitude),i.toDegrees(t.latitude)]]]}},function(e,t,r){"use strict";var i=r(9),a=r(23);function n(e){this.name=e.name,this.content=e.content,this.isOpen=i(e.isOpen,!0),a.track(this,["name","content","isOpen"])}n.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},e.exports=n},function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\n<wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">\n  <ows:Identifier>{{identifier}}</ows:Identifier>\n  <wps:DataInputs>\n{{#dataInputs}}\n    <wps:Input>\n      <ows:Identifier>{{inputIdentifier}}</ows:Identifier>\n      <wps:Data>\n        <wps:{{inputType}}>{{inputValue}}</wps:{{inputType}}>\n      </wps:Data>\n    </wps:Input>\n{{/dataInputs}}\n  </wps:DataInputs>\n  <wps:ResponseForm>\n    <wps:ResponseDocument storeExecuteResponse="{{storeExecuteResponse}}" status="{{status}}"/>\n  </wps:ResponseForm>\n</wps:Execute>\n'},function(e,t,r){"use strict";var i=r(10),a=r(8),n=r(116),o=function(e){n.call(this,e)};r(27)(n,o),i(o.prototype,{type:{get:function(){return"polygon"}}}),o.formatValueForUrl=function(e,t){if(a(e)&&""!==e){var r=e.map(function(e){return{type:"Feature",crs:e.crs,geometry:e.geometry}});return JSON.stringify({type:"FeatureCollection",features:r})}},o.formatValueAsString=function(e){return a(e)?e.map(function(e){return e.id}).join(", "):"-"},o.getGeoJsonFeature=function(e){return e.map(function(e){return{type:"Feature",crs:e.crs,geometry:e.geometry}})},e.exports=o},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\n<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2" version="2.0.2" service="CSW" resultType="results" startPosition="{startPosition}" maxRecords="100">\n    <csw:Query typeNames="csw:Record" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">\n        <csw:ElementSetName>full</csw:ElementSetName>\n        <csw:Constraint version="1.1.0">\n            <ogc:Filter>\n                <ogc:Or>\n                    <ogc:PropertyIsLike wildCard="%" singleChar="#" escapeChar="!">\n                        <ogc:PropertyName>dc:format</ogc:PropertyName>\n                        <ogc:Literal>%WMS%</ogc:Literal>\n                    </ogc:PropertyIsLike>\n                    <ogc:PropertyIsLike wildCard="%" singleChar="#" escapeChar="!">\n                        <ogc:PropertyName>OnlineResourceType</ogc:PropertyName>\n                        <ogc:Literal>%WMS%</ogc:Literal>\n                    </ogc:PropertyIsLike>\n                    <ogc:PropertyIsLike wildCard="%" singleChar="#" escapeChar="!">\n                        <ogc:PropertyName>apiso:ServiceType</ogc:PropertyName>\n                        <ogc:Literal>%WMS%</ogc:Literal>\n                    </ogc:PropertyIsLike>\n                </ogc:Or>\n            </ogc:Filter>\n        </csw:Constraint>\n    </csw:Query>\n</csw:GetRecords>\n'},function(e,t){e.exports='<?xml version="1.0" encoding="utf-8"?>\n<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2" version="2.0.2" service="CSW" resultType="results" startPosition="{startPosition}" maxRecords="100">\n    <csw:Query typeNames="csw:Record" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">\n        <csw:ElementSetName>full</csw:ElementSetName>\n        <csw:Constraint version="1.1.0">\n            <ogc:Filter>\n                <ogc:And>\n                    <ogc:PropertyIsLike wildCard="%" singleChar="#" escapeChar="!">\n                        <ogc:PropertyName>apiso:ServiceType</ogc:PropertyName>\n                        <ogc:Literal>%WPS%</ogc:Literal>\n                    </ogc:PropertyIsLike>\n                    <ogc:PropertyIsEqualTo>\n                        <ogc:PropertyName>apiso:Type</ogc:PropertyName>\n                        <ogc:Literal>service</ogc:Literal>\n                    </ogc:PropertyIsEqualTo>\n                </ogc:And>\n            </ogc:Filter>\n        </csw:Constraint>\n    </csw:Query>\n</csw:GetRecords>\n'},function(e,t,r){"use strict";var i=r(190),a=r(12),n=r(92),o=r(41),s=r(8),l=r(10),u=r(232),c=r(17),d=r(27),p=r(23),f=r(117),h=r(46),m=r(37),g=r(102),v=r(36),y=r(60),b=r(18);function _(e,t){n.call(this,e),this._ModelClass=void 0,this._model=void 0,this.url=t,this.startTime=void 0,this.stopTime=void 0,this.initialTimeSource=void 0,this.origin=void 0,this.shadows="NONE",this.upAxis="Z",this.forwardAxis="X",this.featureInfoUrlTemplate=void 0,p.track(this,["startTime","stopTime","initialTimeSource","origin","shadows","upAxis","forwardAxis","featureInfoTemplate"]),this._subscriptions=[],p.defineProperty(this,"_cesiumShadows",{get:function(){var e;switch(this.shadows.toLowerCase()){case"none":e=g.DISABLED;break;case"both":e=g.ENABLED;break;case"cast":e=g.CAST_ONLY;break;case"receive":e=g.RECEIVE_ONLY;break;default:e=g.DISABLED}return e}}),p.defineProperty(this,"_cesiumUpAxis",{get:function(){return i.fromName(this.upAxis)}}),p.defineProperty(this,"_cesiumForwardAxis",{get:function(){return i.fromName(this.forwardAxis)}})}d(n,_),l(_.prototype,{type:{get:function(){return"gltf"}},typeName:{get:function(){return"GL Transmission Format (glTF)"}},metadata:{get:function(){var e=new f;return e.isLoading=!1,e.dataSourceErrorMessage="This data source does not have any details available.",e.serviceErrorMessage="This service does not have any details available.",e}},updaters:{get:function(){return _.defaultUpdaters}},serializers:{get:function(){return _.defaultSerializers}},canZoomTo:{get:function(){return!0}}}),_.defaultUpdaters=o(n.defaultUpdaters),c(_.defaultUpdaters),_.defaultSerializers=o(n.defaultSerializers),c(_.defaultSerializers),_.prototype._getValuesThatInfluenceLoad=function(){return[this.url]},_.prototype._load=function(){var e=b.defer(),t=this;return Promise.resolve().then(function(){t._ModelClass=r(272),e.resolve()}.bind(null,r)).catch(r.oe),e.promise},_.prototype._enableInCesium=function(){var e,t=this;if(this.origin){var r=a.fromDegrees(this.origin.longitude,this.origin.latitude,this.origin.height);e=y.eastNorthUpToFixedFrame(r)}var i={url:h(this,this.url),show:!1,modelMatrix:e,upAxis:this._cesiumUpAxis,forwardAxis:this._cesiumForwardAxis,shadows:this._cesiumShadows},n=this._ModelClass.fromGltf(i);n._catalogItem=this,this._model=n,this._subscriptions.forEach(function(e){return e.dispose()}),this._subscriptions.length=0,this._subscriptions.push(p.getObservable(this,"_cesiumShadows").subscribe(function(e){t._model.shadows=t._cesiumShadows})),this.terria.cesium.scene.primitives.add(this._model)},_.prototype._disableInCesium=function(){this._subscriptions.forEach(function(e){return e.dispose()}),this._subscriptions.length=0,s(this._model)&&(this.terria.cesium.scene.primitives.remove(this._model),this._model.destroy(),this._model=void 0)},_.prototype._enableInLeaflet=function(){},_.prototype._disableInLeaflet=function(){},_.prototype._showInCesium=function(){this._model&&(this._model.show=!0)},_.prototype._hideInCesium=function(){this._model&&(this._model.show=!1)},_.prototype._showInLeaflet=function(){throw this.isShown=!1,new v({sender:this,title:"Not supported in 2D",message:'"'+this.name+'" cannot be show in the 2D view.  Switch to 3D and try again.'})},_.prototype._hideInLeaflet=function(){},_.prototype.zoomTo=function(){var e=this;return b(this.load(),function(){return s(e.nowViewingCatalogItem)?e.nowViewingCatalogItem.zoomTo():s(e.rectangle)?n.prototype.zoomTo.call(e):s(e._model)?e.terria.currentViewer.zoomTo(e._model):void 0})},_.prototype.getFeaturesFromPickResult=function(e,t){var r=t.primitive,i=t.mesh,a=t.node;if(r&&i&&a){var n={meshName:i.name,nodeName:a.name},o=new u({properties:n});if(o._catalogItem=this,this.featureInfoUrlTemplate){var s=new m({url:h(this,this.featureInfoUrlTemplate),templateValues:n});s.fetchJson().then(function(e){Object.keys(e).forEach(function(t){o.properties.addProperty(t,e[t])})}).otherwise(function(e){o.properties.addProperty("Error","Unable to retrieve feature details from:\n\n"+s.url)})}return o}},e.exports=_},function(e,t,r){"use strict";var i=r(1150),a=r(8),n=r(10),o=r(23),s=r(18),l=r(117),u=r(36),c=r(92),d=r(27),p=r(46),f=r(79),h=r(315),m=r(234),g=function(e,t){c.call(this,e),this._geoJsonItem=void 0,this.url=t,this.data=void 0,this.dataSourceUrl=void 0,o.track(this,["data","dataSourceUrl"])};function v(e,t){var r=(new DOMParser).parseFromString(t,"text/xml"),a=i.gpx(r);return e._geoJsonItem.data=a,e._geoJsonItem.load().then(function(){e.rectangle=e._geoJsonItem.rectangle,e.clock=e._geoJsonItem.clock})}d(c,g),n(g.prototype,{type:{get:function(){return"gpx"}},typeName:{get:function(){return"GPX"}},metadata:{get:function(){var e=new l;return e.isLoading=!1,e.dataSourceErrorMessage="This data source does not have any details available.",e.serviceErrorMessage="This service does not have any details available.",e}},dataSource:{get:function(){return a(this._geoJsonItem)?this._geoJsonItem.dataSource:void 0}}}),g.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.data]},g.prototype._load=function(){this._geoJsonItem=new f(this.terria);var e=this;return a(e.data)?s(e.data,function(t){var r;return r=t instanceof Blob?h(t):t,s(r,function(t){return v(e,t)})}):m(p(e,e.url,"1d")).then(function(t){return v(e,t)}).otherwise(function(){!function(e){var t=e.terria;throw new u({sender:e,title:"Error loading GPX",message:"An error occurred while loading a GPX file.  This may indicate that the file is invalid or that it is not supported by "+t.appName+'.  If you would like assistance or further information, please email us at <a href="mailto:'+t.supportEmail+'">'+t.supportEmail+"</a>."})}(e)})},g.prototype._enable=function(){a(this._geoJsonItem)&&this._geoJsonItem._enable()},g.prototype._disable=function(){a(this._geoJsonItem)&&this._geoJsonItem._disable()},g.prototype._show=function(){a(this._geoJsonItem)&&this._geoJsonItem._show()},g.prototype._hide=function(){a(this._geoJsonItem)&&this._geoJsonItem._hide()},g.prototype.showOnSeparateMap=function(e){if(a(this._geoJsonItem))return this._geoJsonItem.showOnSeparateMap(e)},e.exports=g},,function(e,t){},,,,,function(e,t,r){"use strict";var i=r(302),a=r(41),n=r(8),o=r(10),s=r(259),l=r(155),u=r(27),c=r(23),d=r(406),p=r(118),f=function(e){l.call(this,e),this.lineColor="#000000",this.fillColor="rgba(0,0,0,0)",this.layer=void 0,this.idProperty="FID",this.nameProperty=void 0,this.maximumNativeZoom=12,this.maximumZoom=28,this.minimumZoom=0,this._legendUrl=void 0,c.track(this,["lineColor","fillColor","layer","idProperty","nameProperty","_legendUrl"]),p(this,"legendUrl",{get:function(){return n(this._legendUrl)?this._legendUrl:new d({items:[{color:this.fillColor,lineColor:this.lineColor,title:this.name}]}).getLegendUrl()},set:function(e){this._legendUrl=e}})};u(l,f),o(f.prototype,{type:{get:function(){return"mvt"}},typeName:{get:function(){return"Mapbox Vector Tile"}}}),f.prototype._createImageryProvider=function(){var e=this;return new i({url:this.url,layerName:this.layer,styleFunc:function(){return{fillStyle:e.fillColor,strokeStyle:e.lineColor,lineWidth:1}},rectangle:this.rectangle,minimumZoom:this.minimumZoom,maximumNativeZoom:this.maximumNativeZoom,maximumZoom:this.maximumZoom,uniqueIdProp:this.idProperty,featureInfoFunc:function(t){return function(e,t){var r=new s;n(e.nameProperty)&&(r.name=t.properties[e.nameProperty]);return r.properties=a(t.properties),r.data={id:t.properties[e.idProperty]},r}(e,t)}})},e.exports=f},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(334),n=r(51),o=r(423);o.insensitive=!0;var s=r(41),l=r(9),u=r(8),c=r(10),d=r(160),p=r(17),f=r(23),h=r(70),m=r(1158),g=r(1159),v=r(18),y=r(607),b=r(318),_=r(27),w=r(118),S=r(46),C=r(369),x=r(139),E=r(1160),I=r(660),k=r(257),L=r(263),P=r(157),T=r(36),M=r(296),A=r(128),j=function(e,t){k.call(this,e,t),this._originalUrl=t,this._columnOptions=void 0,this._allDimensions=void 0,this._loadedDimensions=void 0,this._numberOfInitialColumns=void 0,this._suppressedIds=[],this._dataflowUrl=void 0,this._concepts=[],this._regionTotals={},this.dataUrlComponent=void 0,this.sdmxVersionNumber=void 0,this.measureDimensionId=void 0,this.dataflowUrlComponent=void 0,this.providerId=void 0,this.regionTypeDimensionId=void 0,this.regionDimensionId=void 0,this.frequencyDimensionId=void 0,this.timePeriodDimensionId=void 0,this.regionType=void 0,this.regionNameTemplate=void 0,this.selectedInitially=void 0,this.singleValuedDimensionIds=[],this.startTime=void 0,this.endTime=void 0,this.whitelist={},this.blacklist={},this.aggregatedDimensionIds=[],this.sortValues=null,this.totalValueIds={},this.cleanFootnotes=!1,this.canDisplayPercent=!1,this.displayPercent=!1,this.cannotSum=void 0,this.cannotDisplayPercentMap=void 0,this.displayChoicesBeforeLegend=!0,this.forceShowDimensionIds=[],f.track(this,["_concepts","displayPercent","canDisplayPercent"]),w(this,"concepts",{get:function(){return this._concepts}}),w(this,"dataViewId",{get:function(){return K(this,Z(this)||[],this._fullDimensions||[])}}),f.defineProperty(this,"activeConcepts",{get:function(){var e=function(e){return e.isActive};if(u(this._concepts)&&this._concepts.length>0)return this._concepts.map(function(t){return t.getNodes(e)})}}),f.getObservable(this,"activeConcepts").subscribe(function(){var e=this;this.isLoading||x(function(){return Q(e)})},this),f.getObservable(this,"canDisplayPercent").subscribe(function(e){e||(this.displayPercent=!1)},this),f.getObservable(this,"displayPercent").subscribe(function(e){var t=this;u(t._tableStructure)&&t._tableStructure.columns.forEach(function(r){e?r.isActive="region percent"===r.id:t._concepts.length>0&&(r.isActive="total selected"===r.id)})},this)};function D(e,t){e._tableStructure.columns=t,0===e._tableStructure.columns.length&&(e._regionMapping.hideImageryLayer(),e.terria.currentViewer.notifyRepaintRequired()),e.terria.pickedFeatures=void 0}function N(e,t){return(e.totalValueIds["*"]||[]).concat(e.totalValueIds[t]||[])}function O(e,t){function r(e,t,r){var i=e[t];if(!u(i))return function(){return!0};try{var a=i.map(function(e){return new RegExp("^"+e+"$")});return function(e){var t=i.indexOf(e.id)>=0||a.map(function(t){return e.id.match(t)}).some(u);return r?t:!t}}catch(e){return function(e){var t=i.indexOf(e.id)>=0;return r?t:!t}}}for(var i=[],a=0;a<t.length;a++){var n=t[a],s=u(n.keyPosition)?n.keyPosition:a,l=n.values.filter(r(e.whitelist,n.id,!0)).filter(r(e.blacklist,n.id,!1));"id"===e.sortValues?l=l.sort(function(e,t){return o(e.id,t.id)}):"name"!==e.sortValues&&!0!==e.sortValues||(l=l.sort(function(e,t){return o(e.name,t.name)})),R(l,N(e,n.id)),i[s]={id:n.id,name:n.name,values:l}}return i}function F(e,t){for(var r=0;r<t.length;r++)if(t[r].id==="CL_"+e)return t[r];return null}function R(e,t){if(u(t))for(var r=t.length-1;r>=0;r--){var i=t[r],a=e.map(function(e){return e.id}).indexOf(i);a>=0&&e.splice(0,0,e.splice(a,1)[0])}}function U(e,t,r){return t.filter(function(t,i){return-1===e._suppressedIds.indexOf(t.id)&&(r[i].values.length>1||e.forceShowDimensionIds.indexOf(t.id)>=0)&&-1===e.aggregatedDimensionIds.indexOf(t.id)})}function V(e,t,r){u(r)||(r=t);var i=U(e,t,r).map(function(e){return e.values}),a=i.map(function(e){return e.map(function(e){return e.id})}),n=i.map(function(e){return e.map(function(e){return e.name})});return{ids:y(a),names:y(n)}}function B(e,t){for(var r,i=0;i<e.length;i++)e[i].id===t&&(r=e[i]);return r}function G(e,t){for(var r,i=0;i<e.length;i++)e[i].id===t&&(r=i);return r}function W(e,t){var r=B(t,e.regionDimensionId),i=B(t,e.timePeriodDimensionId);if(!u(r)&&!u(i))return[];for(var n,o=[],l=[],c=u(r)?r.values.length:1,d=u(i)?i.values.length:1,p=0;p<d;p++)for(var f=0;f<c;f++)u(r)&&o.push(r.values[f].id),u(i)&&l.push(i.values[p].id);if(u(i)){var h=s(e._columnOptions);1===d&&(h.type=A.ENUM),n=new L("date",l,h)}if(!u(r))return[n];var m=function(e,t,r){var i=B(t,e.regionTypeDimensionId),n=B(t,e.regionDimensionId);if(u(i)){var o=i.values[r||0].id;if(u(e.regionNameTemplate))return a.render(e.regionNameTemplate,{name:o});var s=o.lastIndexOf("_");if(s>=0)return o.slice(0,s)+"_code"+o.slice(s);var l=o.match(/(.+)([0-9]{4})$/);return u(l)?l[1]+"_code_"+l[2]:o+"_code"}if(u(n))return u(e.regionType)&&u(e.regionType)?e.regionType:n.id}(e,t,0),g=new L(m,o,e._columnOptions);return u(i)&&u(r)?[n,g]:[g]}function z(e,t,r){for(var i=[],a=U(e,t,e._fullDimensions).map(function(e){return e.id}),n=0;n<t.length;n++){var o=t[n],s=a.indexOf(o.id);s>=0?i.push(r[s]):e._suppressedIds.indexOf(o.id)>=0?i.push(void 0):i.push(o.values[0].id)}return i}function H(e,t,r,i){var a=r.join(":"),n=i[a];if(0===e.aggregatedDimensionIds.length)return u(n)?n.obsValue:null;if(1===e.aggregatedDimensionIds.length){var o=e.aggregatedDimensionIds[0],s=[],l=G(t,o),c=B(t,o);return u(c)?(c.values.forEach(function(e){r[l]=e.id;var t=r.join(":");e=i[t],u(e)&&s.push(e.obsValue)}),s.filter(u).reduce(function(e,t){return e+t},null)):(console.warn("Tried to aggregate on a dimension that doesn't exist, "+o),u(n)?n.obsValue:null)}console.warn("SDMX-JSON aggregatedDimensionIds - only a single dimension id is implemented.")}function q(e,t,r,i){var a=s(e._columnOptions);a.tableStructure=e._tableStructure;for(var n=[],o=0===e._concepts.length,l=B(t,e.regionDimensionId),c=G(t,e.regionDimensionId),d=B(t,e.timePeriodDimensionId),p=G(t,e.timePeriodDimensionId),f=u(l)?l.values.length:1,h=u(d)?d.values.length:1,m=0;m<r.ids.length;m++){for(var g=r.ids[m],v=z(e,t,g),y=r.names[m].filter(function(e){return!!e}).join(" ")||"Value",b=g.join(" ")||"Value",_=[],w=0;w<h;w++)for(var S=0;S<f;S++)u(c)&&(v[c]=l.values[S].id),u(p)&&(v[p]=d.values[w].id),_.push(H(e,t,v,i));a.id=b;var C=new L(y,_,a);o&&(C.isActive=!0),n.push(C)}return n}function Z(e){return 0===e._concepts.length?[]:e._concepts[0].items.map(function(e){return e.activeItems.map(function(e){return e.id})})}function J(e,t){function r(t,r,i){if(!u(e.selectedInitially))return 0===i;var a=e.selectedInitially[t];return u(a)?a.indexOf(r.id)>=0:0===i}var i=U(e,t,t);!function(e,t){t.forEach(function(t){if(u(e.selectedInitially)){var r=e.selectedInitially[t.id];if(r){var i=t.values.map(function(e){return e.id});r.some(function(e){return i.indexOf(e)>=0})||(console.warn("Ignoring invalid initial selection "+r+" on "+t.name),e.selectedInitially[t.id]=void 0)}}})}(e,i);var a=i.map(function(t,i){var a=-1===e.allSingleValuedDimensionIds.indexOf(t.id),n=new b(t.name,{isOpen:!1,allowMultiple:a,requireSomeActive:!0,exclusiveChildIds:N(e,t.id)});return n.id=t.id,n.items=t.values.map(function(t,i){return new M(function(e,t){var r=t.trim();if(e.cleanFootnotes){var i=r.length;if(r.indexOf("(")===i-3&&r.indexOf(")")===i-1)return r.slice(0,i-3)}return r}(e,t.name),{parent:n,id:t.id,active:r(n.id,t,i)})}),n});return a.length>0?[new I(void 0,{items:a,isOpen:!1})]:[]}function Y(e){var t=!0;u(e.cannotSum)&&("object"===i(e.cannotSum)?e._concepts[0].items.forEach(function(r){var i=e.cannotSum[r.id];if(u(i)){var a=r.activeItems.map(function(e){return e.id});i.some(function(e){return a.indexOf(e)>=0})&&(t=!1)}}):t=!e.cannotSum);return t}function X(e,t){if(!function(e){if(Y(e))return!0;var t=e._concepts[0].items,r=[];return t.forEach(function(e){e.items.filter(function(e){return e.isActive}).length>1&&r.push('"'+e.name+'"')}),!(r.length>0&&(e.terria.error.raiseEvent(new T({sender:e,title:"Cannot calculate a total",message:"You have selected multiple values for "+r.join(" and ")+", but the measure you now have chosen cannot be totalled across them.             As a result, there is no obvious measure to use to shade the regions (although you can still choose a region to view its data).            To see the regions shaded again, please select only one value for "+r.join(" and ")+", or select a different measure."})),1))}(e))return[];var r=s(e._columnOptions);r.tableStructure=e._tableStructure,r.id="total selected";var i=Z(e);if(0===i.length)return[];var a=y(i),n=t.ids.map(function(e){return e.join("+")}),o=a.map(function(e){var t=e.join("+");return n.indexOf(t)}),l=e._tableStructure.columns.slice(e._numberOfInitialColumns,t.ids.length+e._numberOfInitialColumns).filter(function(e,t){return o.indexOf(t)>=0});if(0===l.length)return[];var u=new L("Total selected",L.sumValues(l),r);return u.isActive=!e.displayPercent,u}function K(e,t,r){if(t.every(function(e){return e.length>0})){var i=0,a=r.filter(function(t){return e.timePeriodDimensionId!==t.id}).map(function(r,a){return r.id===e.regionDimensionId?[""]:e.aggregatedDimensionIds.indexOf(r.id)>=0?[""]:1===r.values.length&&-1===e.forceShowDimensionIds.indexOf(r.id)?[r.values[0].id]:t[i++]});if(a.some(function(e){return!u(e)}))throw new T({sender:e,title:"Dimension has no allowed values",message:"One of this catalog item's dimensions has no allowed values. This can be caused by a badly-formed whitelist."});return a.map(function(e){return e.join("+")}).join(".")}}function Q(e){if(u(e._dataflowUrl)){var t=K(e,Z(e),e._fullDimensions);if(!u(t))return;return ae(e,t)}var r=V(e,e._fullDimensions),i=e._tableStructure.columns.slice(0,r.ids.length+e._numberOfInitialColumns);return i.length>0&&D(e,i=i.concat(X(e,r))),v()}function $(e,t){var r=e._originalUrl;return"/"!==r[r.length-1]&&(r+="/"),r+=2.1===e.sdmxVersionNumber?t+"/":t+"/"+e.providerId,u(e.startTime)?(r+="?startTime="+e.startTime,u(e.endTime)&&(r+="&endTime="+e.endTime)):u(e.endTime)&&(r+="?endTime="+e.endTime),r}function ee(e,t){return e._type=t,e}function te(e,t){return function(e){var t={};return e.forEach(function(e){t[e._key]=e}),t}(E.response.mapDataSetsToArray(t))}function re(e,t){var r=E.response.mapComponentsToArray(t,ee).filter(function(e){return"dimensions"===e._type});return 2.1===e.sdmxVersionNumber&&(r=function(e){for(var t=0;t<e.length;t++){var r=e[t];r.name=u(r.name.en)?r.name.en:r.name;for(var i=0;i<r.values.length;i++){var a=r.values[i];a.name=a.name.en}}return e}(r)),O(e,r)}function ie(e){return e.structure.name=e.structure.name.en,e.structure.dimensions.observation[0].name=e.structure.dimensions.observation[0].name.en,e.structure.dimensions.observation[0].values.forEach(function(e){e.name=e.name.en}),e.structure.dimensions.series.forEach(function(e){e.name=e.name.en,e.values.forEach(function(e){e.name=e.name.en})}),e}function ae(e,t){var r,i,a=[];if(u(t)){r=$(e,t),e.url=r;var n=function(e){if(0===e._concepts.length)return[];var t=e._concepts[0].items.map(function(e){var t=e.items[0].id;return e.exclusiveChildIds.indexOf(t)>=0?[t]:e.allowMultiple?void 0:e.activeItems.map(function(e){return e.id})});return t.every(u)?t:void 0}(e);if(u(n)&&(i=K(e,n,e._fullDimensions),u(i)&&!u(e._regionTotals[i]))){var o=$(e,i);a.push(e._getData(S(e,o)))}}else r=e.originalUrl;return a.push(e._getData(S(e,r))),e.isLoading=!0,v.all(a).then(function(r){var a=r[r.length-1];if(2.1===e.sdmxVersionNumber&&(a=a.data),2===r.length){var n=r[0];2.1===e.sdmxVersionNumber&&(n=ie(r[0].data)),E.response.prepare(n),e._regionTotals[i]={dataSets:te(0,n),dimensions:re(e,n)}}2.1===e.sdmxVersionNumber&&(a=ie(a));var o=e._regionTotals[i];E.response.prepare(a);var l=te(0,a);if(e._loadedDimensions=re(e,a),!function(e){return u(G(e._loadedDimensions,e.regionDimensionId))}(e))throw ne(e);u(e._fullDimensions)||(e._fullDimensions=e._loadedDimensions,e._concepts=J(e,e._fullDimensions));var c=V(e,e._loadedDimensions,e._fullDimensions),d=W(e,e._loadedDimensions);e._numberOfInitialColumns=d.length;var p=q(e,e._loadedDimensions,c,l),f=[];if(u(o)&&i!==t){var h=V(e,o.dimensions,e._fullDimensions);(f=q(e,e._loadedDimensions,h,o.dataSets)).forEach(function(e,t){e.id="region total"+(t>0?"_"+t:"")})}e._regionMapping.isLoading=!0,e._tableStructure.columns=d.concat(p);var m=X(e,c),g=[];u(m)&&f.length>0?(e.canDisplayPercent=Y(e),e.canDisplayPercent&&(g=function(e,t,r){var i=s(e._columnOptions);i.tableStructure=e._tableStructure,i.id="region percent";var a=t.values.map(function(e,t){var i=r.values[t];if(!i)return null;var a=e/i;return a<.01?Math.round(1e3*a)/10:Math.round(1e4*a)/100}),n=new L("Percent selected in region",a,i);return n.isActive=e.displayPercent,n}(e,m,f[0]))):e.canDisplayPercent=!1;var v=e._tableStructure.columns.concat(m).concat(f).concat(g);return D(e,v),e._tableStructure.setActiveTimeColumn(e._tableStyle.timeColumn),e._regionMapping.loadRegionDetails()}).then(function(t){if(!t)throw ne(e);return e._regionMapping.setRegionColumnType(),2.1!==e.sdmxVersionNumber||e._regionMapping.enabled||e._regionMapping.enable(),e._regionMapping.isLoading=!1,e.isLoading=!1,v()}).otherwise(function(t){e._regionMapping.isLoading=!1,e.isLoading=!1,D(e,[]),404===t.statusCode?e.terria.error.raiseEvent(new T({sender:e,title:t.title||"No data",message:"There is no data available for this combination. Please choose again."})):e.terria.error.raiseEvent(new T({sender:e,title:t.title||"No data available",message:t.message||t.response}))})}function ne(e){return new T({sender:e,title:"No regions recognized",message:'This dataset cannot be shown geographically, because no regions were recognized in it. Please report this issue by sending an email to <a href="mailto:'+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a>.</p>"})}_(k,j),c(j.prototype,{type:{get:function(){return"sdmx-json"}},typeName:{get:function(){return"SDMX-JSON"}},propertiesForSharing:{get:function(){return j.defaultPropertiesForSharing}},serializers:{get:function(){return j.defaultSerializers}},allSingleValuedDimensionIds:{get:function(){return[this.regionTypeDimensionId,this.frequencyDimensionId].concat(this.singleValuedDimensionIds)}},originalUrl:{get:function(){return l(this._originalUrl,this.url)}}}),(j.defaultPropertiesForSharing=s(k.defaultPropertiesForSharing)).push("selectedInitially"),j.defaultPropertiesForSharing.push("displayPercent"),p(j.defaultPropertiesForSharing),(j.defaultSerializers=s(k.defaultSerializers)).selectedInitially=function(e,t){t.selectedInitially={},0!==e._concepts.length&&e._concepts[0].items.forEach(function(e){t.selectedInitially[e.id]=e.items.filter(function(e){return e.isActive}).map(function(e){return e.id})})},j.defaultSerializers.activeConcepts=function(){},j.defaultSerializers.url=function(e,t){t.url=e.originalUrl},p(j.defaultSerializers),j.prototype._getValuesThatInfluenceLoad=function(){return[this.originalUrl]},j.prototype._load=function(){var e,t,r;t=new n((e=this).url).segment(),1===(r=t[t.length-1].split(",")).length?e.flowId=r[0]:1===r.length?(e.agencyId=r[0],e.flowId=r[1]):(e.agencyId=r[0],e.flowId=r[1],e.dataflowVersion=r[2]),this.restEndpointRoot=l(this.restEndpointRoot,function(e){return e.url.split("Rest")[0].concat("Rest/")}(this)),this.agencyId=l(this.agencyId,"all"),this.dataflowVersion=l(this.dataflowVersion,"latest"),this._originalUrl=this.originalUrl,this.sdmxVersionNumber=l(this.sdmxVersionNumber,2),this._getData=2.1===this.sdmxVersionNumber?g:h,this._getMetadata=2.1===this.sdmxVersionNumber?m:h,this.measureDimensionId=l(this.measureDimensionId,"MEASURE"),this.regionTypeDimensionId=l(this.regionTypeDimensionId,"REGIONTYPE"),this.regionDimensionId=l(this.regionDimensionId,"REGION"),this.frequencyDimensionId=l(this.frequencyDimensionId,"FREQUENCY"),this.timePeriodDimensionId=l(this.timePeriodDimensionId,"TIME_PERIOD"),this.providerId=l(this.providerId,"all"),this.dataUrlComponent=l(this.dataUrlComponent,"data"),this.dataflowUrlComponent=l(this.dataflowUrlComponent,"dataflow"),u(this.cannotDisplayPercentMap)&&(d("cannotDisplayPercentMap is deprecated. Use cannotSum instead."),u(this.cannotSum)||(this.cannotSum=this.cannotDisplayPercentMap)),this._suppressedIds=[this.regionDimensionId,this.timePeriodDimensionId];var i=this._tableStyle;return this._columnOptions={displayDuration:i.displayDuration,displayVariableTypes:P.defaultDisplayVariableTypes,replaceWithNullValues:i.replaceWithNullValues,replaceWithZeroValues:i.replaceWithZeroValues},this._tableStructure=new P(this.name,this._columnOptions),this._regionMapping=new C(this,this._tableStructure,i),this._dataflowUrl=function(e){if(e.dataflowUrlComponent){var t="/"+e.dataUrlComponent+"/",r=e._originalUrl.lastIndexOf(t);if(r>=0){var i=e._originalUrl.slice(r+t.length);if(i.indexOf("/")>=0&&i.indexOf("/")<i.length-1)return;if(2!==e.sdmxVersionNumber)return"".concat(e.restEndpointRoot).concat(e.dataflowUrlComponent,"/").concat(e.agencyId,"/").concat(e.flowId,"/").concat(e.dataflowVersion,"/?references=all&detail=referencepartial");var a="/"+e.dataflowUrlComponent+"/";return e._originalUrl.replace(t,a)}}}(this),u(this.metadataUrl)||(this.metadataUrl=this._dataflowUrl),this._dataflowUrl?function(e){var t=2.1===e.sdmxVersionNumber?S(e,e._dataflowUrl):(r=e,i=e._dataflowUrl,S(r,function(e){var t=new n(e);return t.search(""),t.toString()}(i)));var r,i;return e._getMetadata(t).then(function(t){2.1===e.sdmxVersionNumber&&(t=t.data);var r=2.1===e.sdmxVersionNumber?function(e){for(var t=[],r=0;r<e.dataStructures[0].dataStructureComponents.dimensionList.dimensions.length;r++){var i=e.dataStructures[0].dataStructureComponents.dimensionList.dimensions[r],a=F(i.id,e.codelists),n={keyPosition:i.position,id:i.id,name:a.name.en};n.values=a.codes.map(function(e){return{id:e.id,name:e.name.en}}),t.push(n)}return t}(t):t.structure.dimensions.observation;if(e._fullDimensions=O(e,r),!u(G(e._fullDimensions,e.regionDimensionId)))throw ne(e);return e._concepts=J(e,e._fullDimensions),Q(e)})}(this):ae(this)},e.exports=j},function(e,t,r){"use strict";var i=r(37);e.exports=function(e){return i.createIfNeeded(e).fetch({responseType:"json",headers:{Accept:"application/vnd.sdmx.structure+json; version=1.0; charset=utf-8"}})}},function(e,t,r){"use strict";var i=r(37);e.exports=function(e){return i.createIfNeeded(e).fetch({responseType:"json",headers:{Accept:"application/vnd.sdmx.data+json; version=1.0; charset=utf-8"}})}},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a={request:{},response:{},version:"0.5.2"};a.response.obsCount=function(e){return e.dataSets.reduce(function(e,t){if("object"===i(t.observations)&&null!==t.observations)return e+Object.keys(t.observations).length;return void 0!==t.series&&null!==t.series?e+Object.keys(t.series).reduce(function(e,r){return void 0!==t.series[r].observations&&void 0!==t.series[r].observations?e+Object.keys(t.series[r].observations).length:e},0):e},0)},a.response._mapComponents=function(e,t,r){null==r&&(r=!1),["dimensions","attributes"].forEach(function(i){void 0!==e.structure[i]&&null!==e.structure[i]&&["dataSet","series","observation"].forEach(function(a){"dataSet"===a&&r||void 0!==e.structure[i][a]&&null!==e.structure[i][a]&&e.structure[i][a].forEach(function(e){t(e,i,a)})})})},a.response.mapComponentsToArray=function(e,t,r,i){var n=[];if(null==e)return n;null==t&&(t=a.response.identity);return a.response._mapComponents(e,function(e,r,a){return n.push(t.call(i,e,r,a))},r),n},a.response.mapComponentsToObject=function(e,t,r,i){var n={};if(null==e)return n;null==t&&(t=a.response.identity);return a.response._mapComponents(e,function(e,r,a){n[e._propertyName]=t.call(i,e,r,a)},r),n},a.response.mapDataSetsToArray=function(e,t,r,i){var n=[];if(null==e)return n;null==t&&(t=!1),null==r&&(r=a.response.obsToStructureSpecific);var o=e.structure.dimensions,s=e.structure.attributes,l=o.dataSet.length+o.series.length+o.observation.length,u=[],c=[],d=[],p=[],f=[].concat(o.series,o.observation),h=[].concat(s.series,s.observation),m=new Array(l),g=new Array(l),v=function(e){return void 0!==e.keyPosition&&null!==e.keyPosition?e.keyPosition:"TIME_PERIOD"===e.id?l-1:null},y=function(t,r){var i=e.structure.dimensions.observation[r],a=v(i);g[a]=i.values[t].id},b=function(e,t,a,o){if(null!=e)for(var s in e){var l=s.split(":").map(Number);l.forEach(y);var u=e[s];null!==u&&n.push(r.call(i,g.join(":"),t,u[0],a.concat(l),o.concat(u.slice(1)),f,h))}},_=function(t,r){var i=e.structure.dimensions.series[r],a=v(i);m[a]=g[a]=i.values[t].id};return t||(c=e.structure.dimensions.dataSet.map(function(e){return e.values[0]}),u=c.map(function(e){return 0}),f=e.structure.dimensions.dataSet.concat(f),p=e.structure.attributes.dataSet.map(function(e){return e.values[0]}),d=p.map(function(e){return 0}),h=e.structure.attributes.dataSet.concat(h)),e.structure.dimensions.dataSet.forEach(function(e){var t=v(e);m[t]=g[t]=e.values[0].id}),e.dataSets.forEach(function(e){void 0!==e.series?function(e){if(null!=e)for(var t in e){var r=t.split(":").map(Number);r.forEach(_);var i=e[t],a=[];Array.isArray(i.attributes)&&(a=i.attributes),b(i.observations,m.join(":"),u.concat(r),d.concat(a))}}(e.series):b(e.observations,null,u,d)}),n},a.response.identity=function(e){return e},a.response.obsToStructureSpecific=function(e,t,r,i,a,n,o){var s={_key:e,_seriesKey:t,obsValue:r};return i.forEach(function(e,t){s[n[t]._propertyName]=n[t].values[e]}),a.forEach(function(e,t){s[o[t]._propertyName]=o[t].values[e]}),s},a.response.prepare=function(e){var t=function(e,t,r){void 0!==e[t]&&null!==e[t]||(e[t]=r)};["dataSet","series","observation"].forEach(function(r){t(e.structure.dimensions,r,[]),t(e.structure.attributes,r,[])}),a.response.updateComponentValues(e,a.response.addStartAndEndDates),a.response.updateComponentValues(e,a.response.addIndex),a.response.updateComponents(e,a.response.addPropertyName),a.response.addKeyPositionToDimensions(e)},a.response.addStartAndEndDates=function(e){return void 0!==e.start&&null!==e.start&&void 0!==e.end&&null!==e.end&&(e._startDate=new Date(e.start),e._endDate=new Date(e.end),!0)},a.response.addIndex=function(e,t,r,i){return e._index=i,!0},a.response.normalizeSdmxIdString=function(e){return e.toLowerCase().split("_").map(function(e,t){return 0===t?e:e.substr(0,1).toUpperCase()+e.substr(1)}).join("")},a.response.addPropertyName=function(e){return e._propertyName=a.response.normalizeSdmxIdString(e.id),!0},a.response.addKeyPositionToDimensions=function(e){var t=function(e){return Array.isArray(e)?e:[]};[].concat(t(e.structure.dimensions.dataSet),t(e.structure.dimensions.series),t(e.structure.dimensions.observation)).forEach(function(e,t){return void 0!==e.keyPosition&&null!==e.keyPosition||"TIME_PERIOD"===e.id||void(e.keyPosition=t)})},a.response.updateComponents=function(e,t,r){if(null==e)return!1;if(null==t)return!0;var i=0,a=function(e,a){if(null!=e){var n=function(e,n,s){null!=e&&(i+=!t.call(r,e,a,o,n,s))};for(var o in e)e[o].forEach(n)}};return a(e.structure.dimensions,"dimension"),a(e.structure.attributes,"attribute"),0===i},a.response.updateComponentValues=function(e,t,r){return a.response.updateComponents(e,function(e,i,a){if(void 0===e.values||null===e.values)return!0;var n=0;return e.values.forEach(function(e,o){null!=e&&(n+=!t.call(r,e,i,a,o))}),0===n},r)},a.response.mapDataSetsForD3=function(e){return a.response.prepare(e),a.response.mapDataSetsToArray(e,!1,a.response.obsToStructureSpecific)},a.response.mapComponentsForD3=function(e){return a.response.prepare(e),a.response.mapComponentsToObject(e,a.response.identity)},a.response.mapDataSetsToJsonStat=function(e){var t=0,r=0,i=[],n={id:[],size:[],role:{time:[]}},o={},s=function(e){var t={label:e.name,category:{label:{}}};e.values.forEach(function(e){t.category.label[e.id]=e.name}),1<e.values.length&&(t.category.index={},e.values.forEach(function(e,r){t.category.index[e.id]=r})),n[e.id]=t,n.id.push(e.id),n.size.push(e.values.length),"time"===e.role&&n.role.time.push(e.id)},l=function(e){return function(t,r,a){return t+r*i[e+a]}},u=function(e,t,r,i){var a,n=l(r);for(var o in e)a=o.split(":").map(Number).reduce(n,i),t.value[a]=e[o][0]};a.response.prepare(e),void 0!==e.structure.dimensions.dataSet&&null!==e.structure.dimensions.dataSet&&(t=e.structure.dimensions.dataSet.length,e.structure.dimensions.dataSet.forEach(s)),void 0!==e.structure.dimensions.series&&null!==e.structure.dimensions.series&&(r=e.structure.dimensions.series.length+t,e.structure.dimensions.series.forEach(s)),void 0!==e.structure.dimensions.observation&&null!==e.structure.dimensions.observation&&e.structure.dimensions.observation.forEach(s);var c=1,d=!0;return i=n.size.slice(0).reverse().map(function(e,t){var r=c;return c*=e,1===e?1:d?(d=!1,1):r}).reverse(),e.dataSets.forEach(function(e,i){var a={value:{},dimension:n};null!==e.observations&&u(e.observations,a,t,0),null!==e.series&&function(e,i){var a,n=l(t);for(var o in e)a=o.split(":").map(Number).reduce(n,0),u(e[o].observations,i,r,a)}(e.series,a),o["dataset_"+i]=a}),o},e.exports=a},function(e,t){e.exports='<soap12:Envelope xmlns:soap12="http://www.w3.org/2003/05/soap-envelope"\n  xmlns:sos="http://www.opengis.net/sos/2.0"\n  xmlns:wsa="http://www.w3.org/2005/08/addressing"\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns:ows="http://www.opengis.net/ows/1.1"\n  xmlns:fes="http://www.opengis.net/fes/2.0"\n  xmlns:gml="http://www.opengis.net/gml/3.2"\n  xmlns:swes="http://www.opengis.net/swes/2.0"\n  xsi:schemaLocation="http://www.w3.org/2003/05/soap-envelope http://www.w3.org/2003/05/soap-envelope/soap-envelope.xsd http://www.opengis.net/sos/2.0 http://schemas.opengis.net/sos/2.0/sos.xsd"\n>\n    <soap12:Header>\n        <wsa:To>http://www.ogc.org/SOS</wsa:To>\n        <wsa:Action>http://www.opengis.net/def/serviceOperation/sos/{{actionClass}}/2.0/{{action}}</wsa:Action>\n        <wsa:ReplyTo>\n            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>\n        </wsa:ReplyTo>\n    <wsa:MessageID>0</wsa:MessageID>\n    </soap12:Header>\n    <soap12:Body>\n        <sos:{{action}} service="SOS" version="2.0.0">\n            {{#temporalFilters}}\n            <sos:temporalFilter>\n                <fes:During>\n                    <fes:ValueReference>om:phenomenonTime</fes:ValueReference>\n                    <gml:TimePeriod gml:id="tp{{index}}">\n                        <gml:beginPosition>{{startDate}}</gml:beginPosition>\n                        <gml:endPosition>{{endDate}}</gml:endPosition>\n                    </gml:TimePeriod>\n                </fes:During>\n            </sos:temporalFilter>\n            {{/temporalFilters}}\n            {{#parameters}}\n            <sos:{{name}}>{{value}}</sos:{{name}}>\n            {{/parameters}}\n        </sos:{{action}}>\n    </soap12:Body>\n</soap12:Envelope>'},function(e,t,r){"use strict";var i=r(41),a=r(8),n=r(10),o=r(201),s=r(17),l=r(23),u=r(70),c=r(46),d=r(29),p=r(18),f=r(27),h=r(172),m=r(79),g=r(104),v=r(36),y=function(e){g.call(this,e,"socrata"),this.url="",this.filterQuery=["limitTo=MAPS"],this.dataCustodian=void 0,this.groupBy="category",l.track(this,["url","filterQuery","dataCustodian","category"])};f(g,y),n(y.prototype,{type:{get:function(){return"socrata"}},typeName:{get:function(){return"Socrata Server"}},updaters:{get:function(){return y.defaultUpdaters}},serializers:{get:function(){return y.defaultSerializers}}}),s(y.defaultUpdaters=i(g.defaultUpdaters)),(y.defaultSerializers=i(g.defaultSerializers)).items=g.enabledShareableItemsSerializer,y.defaultSerializers.isLoading=function(e,t,r,i){},y.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.filterQuery,this.groupBy,this.dataCustodian]},y.prototype._load=function(){if(a(this.url)&&0!==this.url.length){for(var e=this,t=[],r=0;r<this.filterQuery.length;r++){var i=c(e,this.url+"/api/search/views?"+this.filterQuery[r],"1d"),n=u(i);t.push(n)}return p.all(t).then(function(t){if(a(t)){for(var r=t[0],i=1;i<t.length;i++)r.result.results=r.result.results.concat(t[i].result.results);!function(e,t){for(var r=t.results,i=0;i<r.length;++i){var n=r[i].view,o=n.metadata.geo;if(o&&a(n.childViews)){var s=n.category?e.uniqueId+"/"+n.category+"/"+n.id:e.uniqueId+"/"+n.id,l=e.terria.catalog.shareKeyIndex[s],u=a(l);if(!u)if(n.newBackend)(l=new m(e.terria)).url=e.url+"/resource/"+n.childViews[0]+".geojson?$limit=10000";else if((l=new h(e.terria)).url=e.url+o.owsUrl,l.layers=o.layers,o.namespace&&(l.layers=o.namespace+":"+l.layers.replace(/,/g,","+o.namespace+":")),"EPSG:4326"===o.bboxCrs&&a(o.bbox)){var c=o.bbox.split(",");4===c.length&&(l.rectangle=d.fromDegrees(c[0],c[1],c[2],c[3]))}if(l.name=n.name,l.id=s,a(n.description)&&l.info.push({name:"Description",content:n.description}),a(n.license)&&a(n.license.name)&&l.info.push({name:"Licence",content:(n.license.logoUrl?"<img src="+e.url+"/"+n.license.logoUrl+" /> &nbsp;":"")+(n.license.termsLink?'<a href="'+n.license.termsLink+'">'+n.license.name+"</a>":n.license.name)}),n.columns.length>0&&l.info.push({name:"Attributes",content:n.columns.map(function(e){return e.name}).join()}),a(n.tags)&&n.tags.length>0&&l.info.push({name:"Tags",content:n.tags.join()}),l.dataUrlType="direct",l.dataUrl=e.url+"/resource/"+n.id,a(e.dataCustodian)?l.dataCustodian=e.dataCustodian:l.dataCustodian=n.attribution,"category"===e.groupBy&&a(n.category)){var p=e.findFirstItemByName(n.category);a(p)||((p=new g(e.terria)).name=n.category,p.id=n.category,e.add(p)),p.add(l)}else e.add(l)}}}(e,r)}}).otherwise(function(t){throw new v({sender:e,title:e.name,message:"Couldn't retrieve packages from this Socrata server.<br/><br/>If you entered the URL manually, please double-check it.<br/><br/>Otherwise, if reloading doesn't fix it, please report the problem by sending an email to <a href=\"mailto:"+e.terria.supportEmail+'">'+e.terria.supportEmail+"</a> with the technical details below.  Thank you!<br/><br/><pre>"+o(t)+"</pre>"})})}},e.exports=y},function(e,t,r){"use strict";var i=r(253),a=r(104),n=r(41),o=r(1164),s=r(8),l=r(10),u=r(17),c=r(27),d=r(23),p=r(46),f=r(235),h=r(289),m=r(51),g=r(37),v=r(36);function y(e){i.call(this,e),this.url=void 0,this.acceptedUrl=void 0,this.acceptedDelay=1e4,this.inputs=[],d.track(this,["url","inputs"])}function b(e,t){return Object.keys(e).filter(function(e){return e===t.toUpperCase()}).length>0}function _(e,t){return Object.keys(e).filter(function(e){return e===t.toLowerCase()}).length>0}function w(e,t){return Object.keys(e).filter(function(e){return e===t.toLowerCase().replace(t.charAt(0),t.charAt(0).toUpperCase())}).length>0}c(i,y),l(y.prototype,{type:{get:function(){return"terria-json"}},typeName:{get:function(){return"Terria JSON Catalog Function"}},updaters:{get:function(){return y.defaultUpdaters}},serializers:{get:function(){return y.defaultSerializers}},propertiesForSharing:{get:function(){return y.defaultPropertiesForSharing}},parameters:{get:function(){return this.inputs}}}),y.defaultUpdaters=n(i.defaultUpdaters),y.defaultUpdaters.inputs=function(e,t,r,i){t.inputs&&(e.inputs=t.inputs.map(function(t){var r=o(t.type,{terria:e.terria,catalogFunction:e,id:t.id});return r.updateFromJson(t),r}))},u(y.defaultUpdaters),y.defaultSerializers=n(i.defaultSerializers),y.defaultSerializers.inputs=function(e,t,r,i){e.inputs&&(t[r]=e.inputs.map(function(e){return e.serializeToJson()}))},u(y.defaultSerializers),y.defaultPropertiesForSharing=n(i.defaultPropertiesForSharing),y.prototype._load=function(){},y.prototype.invoke=function(){var e=this,t=new Date,r=h("%04d-%02d-%02dT%02d:%02d:%02d",t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()),i=new f(this.terria);i.name=this.name+" "+r,i.description="This is the result of invoking the "+this.name+" process or service at "+r+' with the input parameters below.\n\n<table class="cesium-infoBox-defaultTable">'+(this.parameters||[]).reduce(function(e,t){return e+'<tr><td style="vertical-align: middle">'+t.name+"</td><td>"+t.formatValueAsString(t.value)+"</td></tr>"},"")+"</table>";var n={};this.parameters.forEach(function(e){s(e.value)&&""!==e.value&&(e.type.endsWith("-group")&&"groupIsTransparent"in e.availableFormatters&&("groupIsTransparent"===e.formatter||"default"===e.formatter&&e.availableFormatters.default===e.availableFormatters.groupIsTransparent)?e.formatForService().forEach(function(e){n[e.id]=e.value}):n[e.id]=e.formatForService())});var o=new m(this.url).addQuery(n),l=p(this,o.toString(),"1d"),u=g.fetchXHR({url:l,responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"},returnType:"XHRJSONHEADERS"}).then(function(t){return e._handleHttp202(t)}).then(function(t){if(i.isEnabled=!1,t.version&&t.initSources)return e.terria.updateFromStartData(t);if(Array.isArray(t.catalog))return e.terria.addInitSource(t);var r=Array.isArray(t)?t:[t];r.forEach(function(e){s(e.isEnabled)||(e.isEnabled=!0),e.name=e.name||i.name,e.description=e.description||i.description});var n=e.uniqueId+"-results",o=e.terria.catalog.shareKeyIndex[n];if(!o){var l=e.parent&&e.parent.items?e.parent:e.terria.catalog.group,u=l.items.indexOf(e);u>=0?++u:u=l.items.length,(o=new a(e.terria)).id=n,o.name=e.name+" Results",l.items.splice(u,0,o)}return a.updateItems(r,{isUserSupplied:!0},o)});return i.loadPromise=u,i.isEnabled=!0,u},y.prototype._handleHttp202=function(e){var t,r=function(e,t){return void 0===t.acceptedUrl||""===t.acceptedUrl?new v({sender:t,title:"Misconfigured init file",message:"Service not configured for TerriaJsonCatalogFunction HTTP 202."}):new v({sender:t,title:"Misconfigured init file",message:"HTTP 202 configuration "+t.acceptedUrl+" not present in response "+JSON.stringify(e)})};if(void 0!==this.acceptedUrl&&void 0!==e.status&&202===e.status){if("string"!=typeof this.acceptedUrl)throw r(e,this);if(void 0!==e.response&&"string"==typeof e.response&&""!==e.response)try{e.response=JSON.parse(e.response)}catch(e){}var i,a={url:"",responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"},returnType:"XHRJSONHEADERS"},n=e,o=this.acceptedUrl.split("."),s=!0,l=!1,u=void 0;try{for(var c,d=o[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=i=c.value;if(b(n,i)?f=f.toUpperCase():_(n,i)?f=f.toLowerCase():w(n,i)&&(f=f.toLowerCase().replace(f.charAt(0),f.charAt(0).toUpperCase())),!n.hasOwnProperty(f))throw r(e,this);n=n[f]}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}a.url=p(this,n,"1d");var h=new Proxy(this,{});return t={delay:this.acceptedDelay,terria:h,callback:function(e){return g.fetchXHR(a).then(function(t){return e._handleHttp202(t)})}},new Promise(function(e){setTimeout(function(){e(t.callback(t.terria))},t.delay)})}if(!(void 0!==e.status&&e.status>=200&&e.status<300))throw new v({sender:this,title:"Request Failed",message:"Request failed with status code "+e.status+"."});if(204===e.status)return{};try{return JSON.parse(e.response)}catch(t){throw new v({sender:this,title:"Service response not JSON string",message:"TerriaJsonCatalogFunction was supposed to receive a JSON string, received "+JSON.stringify(e)})}},e.exports=y},function(e,t,r){"use strict";var i;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=r(8),o=r(36),s=r(648),l=r(649),u=r(446),c=r(650),d=r(651),p=r(652),f=r(447),h=r(422),m=r(448),g=r(1165),v=(a(i={},p.prototype.type,p),a(i,d.prototype.type,d),a(i,h.prototype.type,h),a(i,g.prototype.type,g),a(i,c.prototype.type,c),a(i,f.prototype.type,f),a(i,s.prototype.type,s),a(i,u.prototype.type,u),a(i,l.prototype.type,l),a(i,m.prototype.type,m),i),y=function(e,t){var r=v[e];if(!n(r))throw new o({title:"Unsupported function parameter type",message:"Unknown function parameter type: "+e+"."});return new r(t)};y.register=function(e,t){v[e]=t},e.exports=y},function(e,t,r){"use strict";var i=r(10),a=r(422),n=r(116),o=r(27),s=function(e){this.OneForAll=new Proxy({},{}),this.ParameterList=new Proxy([],{}),this.allValue=!0,this.allCascade=!1,n.call(this,e),Object.defineProperty(this,"value",{get:function(){return this.getValue()}}),Object.defineProperty(this,"_value",{get:function(){return this.getValue()}})};function l(e){return e}function u(e,t,r){return!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)&&e.id?(e.terria=t,e.catalogFunction=r,new a(e)):{}}s.AvailableFormatters={default:l,groupIsOpaque:function(e){return e.map(function(e){return e.id+"="+e.value.toString()}).join("&")},groupIsTransparent:l},o(n,s),(s.defaultUpdaters={}).OneForAll=function(e,t,r,i){e.OneForAll=u(t[r],e.terria,e.catalogFunction)},s.defaultUpdaters.ParameterList=function(e,t,r,i){var a,n,o,s;e.ParameterList=(a=t[r],n=e.terria,o=e.catalogFunction,s=[],void 0!==a&&a.length>0&&a.forEach(function(e){s.push(u(e,n,o))}),s)},s.prototype.getValue=function(){var e=this.ParameterList.map(function(e){return e.value?{id:e.id,value:e.value}:void 0});return!0===this.allValue&&!0===this.OneForAll.value&&(!0===this.allCascade?e.unshift({id:this.OneForAll.id,value:this.OneForAll.value}):e=[{id:this.OneForAll.id,value:this.OneForAll.value}]),e.filter(function(e){return void 0!==e})},i(s.prototype,{type:{get:function(){return"boolean-group"}},updaters:{get:function(){return s.defaultUpdaters}}}),e.exports=s},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(51),n=r(41),o=r(8),s=r(10),l=r(17),u=r(23),c=r(158),d=r(104),p=r(27),f=r(36),h=r(46),m=r(662),g=function(e){d.call(this,e,"wmts-getCapabilities"),this.url="",this.dataCustodian=void 0,this.parameters=void 0,this.blacklist=void 0,this.titleField="title",this.itemProperties=void 0,u.track(this,["url","dataCustodian","parameters","blacklist","titleField","itemProperties"])};function v(e,t,r){var a=new m(e.terria);return a.name=function(e,t){return"name"===e.titleField?t.Identifier:"abstract"===e.titleField?t.Abstract:t.Title}(e,r),a.url=e.url,a.layer=r.Identifier,a.updateFromCapabilities(t,!0,r),"object"===i(e.itemProperties)&&a.updateFromJson(e.itemProperties),e.add(a),a}p(d,g),s(g.prototype,{type:{get:function(){return"wmts-getCapabilities"}},typeName:{get:function(){return"Web Map Tile Service (WMTS) Server"}},serializers:{get:function(){return g.defaultSerializers}}}),(g.defaultSerializers=n(d.defaultSerializers)).items=d.enabledShareableItemsSerializer,g.defaultSerializers.isLoading=function(e,t,r,i){},l(g.defaultSerializers),g.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.blacklist,this.titleField]},g.prototype._load=function(){var e=function(e,t){var r=new a(t);r.search("");var i=r.toString();return h(e,i,"1d")}(this,this.url)+"?service=WMTS&request=GetCapabilities&version=1.0.0",t=this;return c(e).then(function(e){if(!e||!e.documentElement||"Capabilities"!==e.documentElement.localName)throw new f({title:"Invalid WMTS server",message:"An error occurred while invoking GetCapabilities on the WMTS server.  The server's response does not appear to be a valid GetCapabilities document.  <p>If you entered the link manually, please verify that the link is correct.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href=\"mailto:"+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"});var r,i=m.capabilitiesXmlToJson(e);r=o(i.Contents)&&o(i.Contents.Layer)?Array.isArray(i.Contents.Layer)?i.Contents.Layer:[i.Contents.Layer]:[];for(var a=0;a<r.length;++a)v(t,i,r[a])}).otherwise(function(e){throw new f({sender:t,title:"Group is not available",message:'An error occurred while invoking GetCapabilities on the WMTS server.  <p>If you entered the link manually, please verify that the link is correct.</p><p>This error may also indicate that the server does not support <a href="http://enable-cors.org/" target="_blank">CORS</a>.  If this is your server, verify that CORS is enabled and enable it if it is not.  If you do not control the server, please contact the administrator of the server and ask them to enable CORS.  Or, contact the National Map team by emailing <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+'</a> and ask us to add this server to the list of non-CORS-supporting servers that may be proxied by National Map itself.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"})})},e.exports=g},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(51),n=r(41),o=r(8),s=r(10),l=r(17),u=r(23),c=r(70),d=r(36),p=r(104),f=r(79),h=r(27),m=r(46),g=function(e){p.call(this,e,"wfs-getCapabilities"),this.url="",this.typeNames="",this.nameProperty=void 0,this.useFeatureID=!0,this.groupByProperty=void 0,this.dataCustodian=void 0,this.blacklist=void 0,this.itemProperties=void 0,u.track(this,["url","typeNames","nameProperty","groupByProperty","dataCustodian","blacklist"])};function v(e,t){var r=function(e){var t=new a(e);return t.search(""),t.toString()}(t);return m(e,r,"1d")}h(p,g),s(g.prototype,{type:{get:function(){return"wfs-features-group"}},typeName:{get:function(){return"Group of features in a Web Feature Service (WFS) Server"}},serializers:{get:function(){return g.defaultSerializers}}}),(g.defaultSerializers=n(p.defaultSerializers)).items=p.enabledShareableItemsSerializer,g.defaultSerializers.isLoading=function(e,t,r,i){},l(g.defaultSerializers),g.prototype._getValuesThatInfluenceLoad=function(){return[this.url,this.typeNames,this.nameProperty,this.groupByProperty,this.blacklist]},g.prototype._load=function(){var e=new a(v(this,this.url)).addQuery({service:"WFS",version:"1.1.0",request:"GetFeature",typeName:this.typeNames,outputFormat:"JSON",propertyName:this.nameProperty+(o(this.groupByProperty)?","+this.groupByProperty:"")}).toString(),t=this;return c(e).then(function(e){if(!e||"FeatureCollection"!==e.type||!o(e.features))throw new d({title:"Error querying WFS server",message:"An error occurred while invoking GetFeature on the WFS server.  The server's response does not appear to be a valid GeoJSON document.  <p>If you entered the link manually, please verify that the link is correct.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href=\"mailto:"+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"});for(var r={},n=e.features,s=0;s<n.length;++s){var l=n[s],u=l.properties[t.nameProperty];if(t.blacklist&&t.blacklist[u])console.log("Provider Feedback: Filtering out "+u+" ("+l.id+") because it is blacklisted.");else{var c=new f(t.terria);c.name=u;var h=new a(v(t,t.url)).addQuery({service:"WFS",version:"1.1.0",request:"GetFeature",typeName:t.typeNames,outputFormat:"JSON"});t.useFeatureID?h.addQuery({featureID:l.id}):h.addQuery({cql_filter:t.nameProperty+"='"+l.properties[t.nameProperty]+"'"}),c.url=h.toString(),"object"===i(t.itemProperties)&&c.updateFromJson(t.itemProperties);var m=t;o(t.groupByProperty)&&o(l.properties[t.groupByProperty])&&(m=r[l.properties[t.groupByProperty]],o(m)||((m=r[l.properties[t.groupByProperty]]=new p(t.terria)).name=l.properties[t.groupByProperty],t.add(m))),m.add(c)}}}).otherwise(function(e){throw new d({title:"Group is not available",message:'An error occurred while invoking GetFeature on the WFS server.  <p>If you entered the link manually, please verify that the link is correct.</p><p>This error may also indicate that the server does not support <a href="http://enable-cors.org/" target="_blank">CORS</a>.  If this is your server, verify that CORS is enabled and enable it if it is not.  If you do not control the server, please contact the administrator of the server and ask them to enable CORS.  Or, contact the '+t.terria.appName+' Map team by emailing <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a> and ask us to add this server to the list of non-CORS-supporting servers that may be proxied by "+t.terria.appName+' itself.</p><p>If you did not enter this link manually, this error may indicate that the group you opened is temporarily unavailable or there is a problem with your internet connection.  Try opening the group again, and if the problem persists, please report it by sending an email to <a href="mailto:'+t.terria.supportEmail+'">'+t.terria.supportEmail+"</a>.</p>"})})},e.exports=g},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(321),n=r(239),o=r(92),s=r(41),l=r(442),u=r(443),c=r(179),d=r(444),p=r(8),f=r(10),h=r(17),m=r(79),g=r(27),v=r(330),y=r(70),b=r(117),_=r(36),w=r(46),S=r(51),C=r(332),x=r(172),E=r(445),I=r(333),k=r(18),L=r(23);function P(e){o.call(this,e),this.distributionId=void 0,this.datasetId=void 0,this.allowAnyDistributionIfDistributionIdNotFound=!0,this.allowWms=!0,this.wmsDistributionFormat=/^wms$/i,this.allowWfs=!0,this.wfsDistributionFormat=/^wfs$/i,this.allowKml=!0,this.kmlDistributionFormat=/^km[lz]$/i,this.allowCsv=!0,this.csvDistributionFormat=/^csv(-geo-)?/i,this.allowEsriMapServer=!0,this.allowEsriFeatureServer=!0,this.esriMapServerDistributionFormat=/^esri rest$/i,this.esriFeatureServerDistributionFormat=/^esri rest$/i,this.allowGeoJson=!0,this.geoJsonDistributionFormat=/^geojson$/i,this.allowCzml=!0,this.czmlDistributionFormat=/^czml$/i,this.itemProperties=void 0}g(o,P),f(P.prototype,{type:{get:function(){return"magda-distribution"}},typeName:{get:function(){return"MAGDA Distribution"}},metadata:{get:function(){var e=new b;return e.isLoading=!1,e.dataSourceErrorMessage="This data source does not have any details available.",e.serviceErrorMessage="This service does not have any details available.",e}},updaters:{get:function(){return P.defaultUpdaters}},serializers:{get:function(){return P.defaultSerializers}}}),P.defaultUpdaters=s(o.defaultUpdaters),P.defaultUpdaters.wmsDistributionFormat=l("wmsDistributionFormat"),P.defaultUpdaters.wfsDistributionFormat=l("wfsDistributionFormat"),P.defaultUpdaters.kmlDistributionFormat=l("kmlDistributionFormat"),P.defaultUpdaters.csvDistributionFormat=l("csvDistributionFormat"),P.defaultUpdaters.esriMapServerDistributionFormat=l("esriMapServerDistributionFormat"),P.defaultUpdaters.esriFeatureServerDistributionFormat=l("esriFeatureServerDistributionFormat"),P.defaultUpdaters.geoJsonDistributionFormat=l("geoJsonDistributionFormat"),P.defaultUpdaters.czmlDistributionFormat=l("czmlDistributionFormat"),h(P.defaultUpdaters),P.defaultSerializers=s(o.defaultSerializers),P.defaultSerializers.wmsDistributionFormat=u("wmsDistributionFormat"),P.defaultSerializers.wfsDistributionFormat=u("wfsDistributionFormat"),P.defaultSerializers.kmlDistributionFormat=u("kmlDistributionFormat"),P.defaultSerializers.csvDistributionFormat=u("csvDistributionFormat"),P.defaultSerializers.esriMapServerDistributionFormat=u("esriMapServerDistributionFormat"),P.defaultSerializers.esriFeatureServerDistributionFormat=u("esriFeatureServerDistributionFormat"),P.defaultSerializers.geoJsonDistributionFormat=u("geoJsonDistributionFormat"),P.defaultSerializers.czmlDistributionFormat=u("czmlDistributionFormat"),h(P.defaultSerializers),P.createCatalogItemFromDistribution=function(e){var t=e.distribution,r=e.parent,o=[[e.wmsDistributionFormat,x],[e.wfsDistributionFormat,I],[e.esriMapServerDistributionFormat,n,/MapServer/],[e.esriFeatureServerDistributionFormat,a,/FeatureServer/],[e.kmlDistributionFormat,v],[e.geoJsonDistributionFormat,m],[e.czmlDistributionFormat,d],[e.csvDistributionFormat,c]].filter(function(e){return p(e[0])}),s=t.aspects["dcat-distribution-strings"],l=t.aspects["dataset-format"],u=s.format;l&&l.format&&(u=l.format);var f=s.downloadURL;if(!p(f)){if(!s.accessURL)return k(void 0);f=s.accessURL}var h=o.filter(function(e){return u.match(e[0])&&(!p(e[2])||f.match(e[2]))});if(0===h.length)return k(void 0);var g,y=h[0][1]===x,b=h[0][1]===I,_=new S(f),w=_.search(!0),P=f;if(y||b){_.search(""),P=_.toString();var T=w.LAYERS||w.layers||w.typeName;if(p(T))(g=y?new x(e.terria):new I(e.terria)).layers=T,g.url=P;else{var M;if(y&&e.allowWmsGroups)(M=new C(e.terria)).flatten=!0;else{if(!b||!e.allowWfsGroups)return k(void 0);M=new E(e.terria)}M.url=P,g=M.load().then(function(){return 0===M.items.length?void 0:M.items[0]})}}else(g=new h[0][1](e.terria)).url=P;return k(g).then(function(a){if(a)return a.name=s.title,a.info.push({name:"Distribution Description",content:s.description}),p(e.dataCustodian)&&(a.dataCustodian=e.dataCustodian),"object"===i(e.itemProperties)&&a.updateFromJson(e.itemProperties),p(r)&&(a.id=r.uniqueId+"/"+t.id),p(e.zoomOnEnable)&&(a.zoomOnEnable=e.zoomOnEnable),L.getObservable(a,"isLoading").subscribe(function(e){try{if(!0===e)return;window.parent!==window&&window.parent.postMessage("loading complete","*"),window.opener&&window.opener.postMessage("loading complete","*")}catch(e){console.log(e)}}),a})},P.shortHumanReadableTypeNames={wms:"WMS","wms-getCapabilities":"WMS",wfs:"WFS","wfs-getCapabilities":"WFS","esri-mapServer":"MapServer","esri-featureServer":"FeatureServer",kml:"KML",geojson:"GeoJSON",czml:"CZML",csv:"CSV"},P.prototype._load=function(){var e=new S(this.url).segment("api/v0/registry");if(!p(this.distributionId)&&!p(this.datasetId))throw new _({sender:this,title:"distributionId or datasetId must be specified",message:"MagdaCatalogItem requires that either distributionId or datasetId be specified."});var t=this;return k().then(function(){if(p(t.distributionId)){var r=e.clone().segment("records/".concat(encodeURIComponent(t.distributionId))).addQuery({aspect:"dcat-distribution-strings",optionalAspect:"dataset-format"}),i=w(t,r.toString(),"1d");return y(i).then(function(e){return p(e.id)?[e]:[]})}if(p(t.datasetId)){var a=e.clone().segment("records/".concat(encodeURIComponent(t.datasetId))).addQuery({aspect:"dataset-distributions",optionalAspect:"dataset-format",dereference:!0}),n=w(t,a.toString(),"1d");return y(n).then(function(e){return e.aspects["dataset-distributions"].distributions})}throw new _({sender:t,title:"Error retrieving MAGDA record",message:"No distribution or dataset ID provided"})}).then(function(e){for(var r=[],i=0;i<e.length;++i){var a=P.createCatalogItemFromDistribution({terria:t.terria,distribution:e[i],magdaBaseUrl:t.url,wmsDistributionFormat:t.allowWms?t.wmsDistributionFormat:void 0,kmlDistributionFormat:t.allowKml?t.kmlDistributionFormat:void 0,wfsDistributionFormat:t.allowWfs?t.wfsDistributionFormat:void 0,csvDistributionFormat:t.allowCsv?t.csvDistributionFormat:void 0,esriMapServerDistributionFormat:t.allowEsriMapServer?t.esriMapServerDistributionFormat:void 0,geoJsonDistributionFormat:t.allowGeoJson?t.geoJsonDistributionFormat:void 0,czmlDistributionFormat:t.allowCzml?t.czmlDistributionFormat:void 0,dataCustodian:t.dataCustodian,itemProperties:t.itemProperties,allowWfsGroups:!0,allowWmsGroups:!0,zoomOnEnable:t.zoomOnEnable}).then(function(e){if(p(e))return e.name=t.name,e;var r=new Error;throw r.ignore=!0,r});r.push(a)}return k.any(r).otherwise(function(e){var r=new _({sender:t,title:"No compatible distributions found",message:p(t.distributionId)?"The MAGDA dataset does not have a distribution with the ID "+t.distributionId+" or it does not have a supported format.":"The MAGDA dataset does not have any distributions with a supported format."});if(e instanceof RangeError||!e.length)throw r;for(var i=0;i<e.length;i++)if(!e[i].ignore)throw e[i];throw r})})},e.exports=P},function(e,t,r){"use strict";var i=r(51),a=r(656),n=r(10),o=r(9),s=r(23),l=r(155),u=r(27),c=r(46),d=function(e){l.call(this,e),this.url=o(this.url,"//api.mapbox.com/v4/"),this.mapId=void 0,this.accessToken=void 0,this.fileExtension="png",this.maximumLevel=25,s.track(this,["fileExtension","maximumLevel"])};function p(e){var t=new i(e);return t.search(""),t.toString()}u(l,d),n(d.prototype,{type:{get:function(){return"mapbox-map"}},typeName:{get:function(){return"Mapbox Map"}}}),d.prototype._createImageryProvider=function(){return new a({credit:this.attribution,url:(e=this,t=this.url,c(e,p(t))),mapId:this.mapId,accessToken:this.accessToken,format:this.fileExtension,maximumLevel:this.maximumLevel});var e,t},e.exports=d},function(e,t,r){"use strict";var i,a=(i=r(1171))&&i.__esModule?i:{default:i};var n=r(8),o=r(11),s=r(450),l=r(1183),u=r(664),c=r(335),d=r(1261),p=r(157),f=r(128),h=r(13),m=["src","src-preview","sources","source-names","downloads","download-names","preview-x-label","data","id","x-column","y-column","y-columns","colors","column-names","column-units","styling","highlight-x","poll-seconds","poll-sources","poll-id-columns","poll-replace","title","can-download","hide-buttons"];function g(e){return n(e)?e.split(","):void 0}e.exports=function(e){function t(e){if(n(e.parent)&&"td"===e.parent.name&&n(e.parent.parent)&&"tr"===e.parent.parent.name&&n(e.parent.parent.children[0])&&n(e.parent.parent.children[0].children[0]))return e.parent.parent.children[0].children[0].data}var r=new d({name:"chart",attributes:m,processNode:function(r,i,u){!function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&-1===t.indexOf(r))throw console.log("Unknown attribute "+r),new o("Unknown attribute "+r)}(i.attribs,m);var d=g(i.attribs["column-names"]),v=g(i.attribs["column-units"]),y=i.attribs.styling||"feature-info",b=g(i.attribs.sources),_=g(i.attribs["source-names"]);!n(b)&&n(i.attribs.src)&&(b=[i.attribs.src],n(i.attribs["src-preview"])&&b.unshift(i.attribs["src-preview"]));var w=g(i.attribs.downloads)||b,S=g(i.attribs["download-names"])||_,C=g(i.attribs["poll-sources"]),x=i.attribs.id,E=i.attribs["x-column"],I=g(i.attribs["y-columns"]);!n(I)&&n(i.attribs["y-column"])&&(I=[i.attribs["y-column"]]);var k=n(b)?b[0]:void 0,L=function(e){if(n(e)&&!(e.length<2)){var t=new p("chart",{unallowedTypes:[f.ALT,f.LAT,f.LON]});if("["===e[0]){var r=JSON.parse(e.replace(/&quot;/g,'"'));return p.fromJson(r,t)}return e.indexOf("\\n")>=0||e.indexOf("\n")>=0?p.fromCsv(e.replace(/\\n/g,"\n"),t):void 0}}(function(e,t){var r=e.attribs.data;return r||(Array.isArray(t)&&t.length>0?t[0]:t)}(i,u)),P=g(i.attribs.colors),T=i.attribs.title,M={url:k,xColumn:E,yColumns:I},A=c.getUpdateCounter(r.updateCounters,s,M),j=[T||"",x||"",b&&b.join("|")||"",E||"",n(I)?I.join("|"):"",P||""],D=[];return"true"!==i.attribs["hide-buttons"]&&D.push(h.createElement(l,{key:"button",terria:e,catalogItem:r.catalogItem,title:T,colors:P,feature:r.feature,sources:b,sourceNames:_,downloads:w,downloadNames:S,tableStructure:L,columnNames:d,columnUnits:v,xColumn:i.attribs["x-column"],yColumns:I,id:x,canDownload:!("false"===i.attribs["can-download"]),raiseToTitle:!!t(i),pollSources:C,pollSeconds:i.attribs["poll-seconds"],pollReplace:"true"===i.attribs["poll-replace"],updateCounter:A})),D.push(h.createElement(s,{key:"chart",axisLabel:{x:i.attribs["preview-x-label"],y:void 0},catalogItem:r.catalogItem,url:k,tableStructure:L,xColumn:i.attribs["x-column"],yColumns:I,styling:y,highlightX:i.attribs["highlight-x"],pollUrl:n(C)?C[0]:void 0,pollSeconds:i.attribs["poll-seconds"],updateCounter:A,transitionDuration:300})),h.createElement("div",{key:j.join("-")||"chart-wrapper",className:a.default.previewChartWrapper},D)},furtherProcessing:[{shouldProcessNode:function(e){return"td"===e.name&&1===e.children.length&&"chart"===e.children[0].name&&"tr"===e.parent.name&&2===e.parent.children.length},processNode:function(e,t,r){var i=t.parent.children[0].children[0].data,n=[h.createElement("div",{key:"title",className:a.default.chartTitleFromTable},i)].concat(r);return h.createElement(t.name,{key:"chart",colSpan:2,className:a.default.chartTd},t.data,n)}},{shouldProcessNode:function(e){return"td"===e.name&&1===e.children.length&&"tr"===e.parent.name&&2===e.parent.children.length&&"td"===e.parent.children[1].name&&1===e.parent.children[1].children.length&&"chart"===e.parent.children[1].children[0].name},processNode:function(){}}],isCorresponding:function(e){return e.type===s},selfUpdateSeconds:function(e){return e.props.pollSeconds}});if(!n(e))throw new o("Terria is a required argument of registerCustomComponentTypes.");c.register(r);var i=new d({name:"collapsible",attributes:["title","open"],processNode:function(e,t,r){return h.createElement(u,{key:t.attribs.title,displayName:t.attribs.title,title:t.attribs.title,startsOpen:"string"==typeof t.attribs.open?JSON.parse(t.attribs.open):void 0},r)}});c.register(i)}},function(e,t,r){e.exports={"chart-td":"tjs-chart-preview__chart-td",chartTd:"tjs-chart-preview__chart-td","preview-chart-wrapper":"tjs-chart-preview__preview-chart-wrapper",previewChartWrapper:"tjs-chart-preview__preview-chart-wrapper","chart-title-from-table":"tjs-chart-preview__chart-title-from-table",chartTitleFromTable:"tjs-chart-preview__chart-title-from-table"}},,,,,,,function(e,t,r){"use strict";var i=r(82),a=r(1991),n=r(504),o=r(1990),s=g(r(260)),l=g(r(9)),u=g(r(8)),c=g(r(1179)),d=g(r(1180)),p=g(r(663)),f=g(r(1181)),h=r(521),m=g(r(258));function g(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=20,_={top:20,right:30,bottom:20,left:0},w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentScaleX=null}var t,r,g;return t=e,g=[{key:"create",value:function(e,t){if(e){var r=(0,i.select)(e);p.default.create(r,t.titleSettings),r.style("position","relative");var a=r.append("svg").attr("class","d3").attr("width",t.width).attr("height",t.height),n=a.append("g").attr("class","base-chart");n.append("rect").attr("class","plot-area").attr("x","0").attr("y","0"),n.append("g").attr("class","x axis").append("text").attr("class","label"),n.append("g").attr("class","y-axis").attr("clip-path","url(#yAxisClip)"),n.append("g").attr("class","selection").attr("clip-path","url(#chartAreaClip)"),n.append("g").attr("class","content"),t.supportsZooming&&(n.append("rect").attr("class","zoom-area").attr("x","0").attr("y","0"),a.append("clipPath").attr("id","chartAreaClip").append("rect").attr("x","0").attr("y","0"),a.append("clipPath").attr("id","yAxisClip").append("rect").attr("x","0").attr("y","-10")),n.append("g").attr("class","no-data").append("text"),f.default.create(r,t.tooltipSettings),this.update(e,t)}}},{key:"update",value:function(e,t){this.render(e,t)}},{key:"destroy",value:function(e,t){f.default.destroy(t.tooltipSettings)}},{key:"render",value:function(e,t){if(t.dblClickTimer=!1,(0,u.default)(t.data)){for(var r=0;r<t.data.length;r++)if("momentPoints"===t.data[r].type){var a=t.data.splice(r,1);t.data.push(a[0])}(0,h.initializeChartTypes)(t);var f=t.data,m=(0,l.default)(t.margin,_),g=(0,s.default)(t.data.filter(function(e){return"moment"!==e.type||"momentPoints"!==e.type}).map(function(e){return e.units})),y=d.default.calculate(e,m,t,t.mini?1:g.length),w=c.default.calculate(y,t.domain,t.data,this.getXpadding(t)),S=(0,l.default)(t.transitionDuration,1e3),C=f.length>0&&f[0].points.length>0&&f.some(function(e){return e.points.some(function(e){return(0,u.default)(e.y)})}),x=(0,i.select)(e);y.yChartOffset=m.top+p.default.getHeight(t.titleSettings);var E,I=void 0===w?[]:function(e,t,r,i){var a=Math.min(6,Math.floor(i.plotHeight/30)+1),n=[];return t.map(function(t,i){var o=r.y[t],s=o.tickFormat(),l=e.mini?o.domain():c.default.truncatedTickValues(o,a),d=Math.max.apply(Math,v(l.map(function(e){return s(e).length}))),p=(0,u.default)(t)?b:0,f=d>1?10*d:20;n.push(f+p)}),n}(t,g,w,y);if(I.length>0)E=I.reduce(function(e,t){return e+t});else{var k=e.clientWidth-y.width;E=Math.min(d.default.yAxisWidth,k/2)}y.yAxesWidth=E;var L=e.clientWidth-E-m.right;if(y.width=L,C){var P=this.getXpadding(t);w.x.range([P,y.width-P])}var T=x.select("svg").attr("width",t.width).attr("height",t.height).style("user-select","none").style("cursor","default");x.select("rect.plot-area").attr("width",y.width).attr("height",y.plotHeight),x.selectAll("clipPath").filter("#chartAreaClip").select("rect").attr("width",y.width).attr("height",y.plotHeight+3),x.selectAll("clipPath").filter("#yAxisClip").select("rect").attr("x",-E).attr("width",y.width+y.yAxesWidth).attr("height",y.plotHeight+20);var M="translate("+(m.left+y.yAxesWidth)+","+y.yChartOffset+")",A=(0,n.transition)().duration(S),j=(0,i.select)(e).selectAll(".base-chart").attr("transform",M),D=j.select(".content");p.default.enterUpdateAndExit(x,t.titleSettings,m,t,S);var N={container:e,state:t,size:y,yOffsets:I,margin:m,scales:w,units:g,chart:j,chartPlotContainer:D,chartTransform:M,chartTransition:A,chartSVGContainer:T},O=(0,o.zoom)().scaleExtent([1,1/0]).translateExtent([[0,0],[y.width,y.plotHeight]]).extent([[0,0],[y.width,y.plotHeight]]).on("zoom",function(){if(null===i.event.sourceEvent)return void(this.currentScaleX=null);var e=i.event.transform.rescaleX(w.x);this.currentScaleX=e,w.zoomedX=e;for(var t=0;t<f.length;t++)f[t].renderer.zoomOnAxisX(e);j.select(".x.axis").call(R.scale(e))}),F=x.select("rect.zoom-area").attr("width",y.width).attr("height",y.plotHeight).style("fill","transparent").on("dblclick",function(){return O.transform(F,o.zoomIdentity.scale(1))}).call(O),R=null;if((0,u.default)(w)){var U=this.renderAxis(N,C);R=U.xAxis,this.renderChart(N)}this.renderToolTip(N,C,O),this.renderHighlight(N),this.renderNoData(N,C)}}},{key:"getXpadding",value:function(e){return Math.max.apply(Math,e.data.map(function(t){return t.renderer.getXpadding(t,e)}))}},{key:"renderChart",value:function(e){(0,m.default)(e.chartPlotContainer,e.state.data,"g",function(t){t.each(function(t,r,a){t.renderer.id="chart-".concat(r);var n=(0,i.select)(this).attr("class","render").attr("clip-path","url(#chartAreaClip)").attr("id","chart-".concat(r));if("momentPoints"===t.type){var o=function(e){for(var t={yMin:1/0,yMax:-1/0,firstY:null},r=0;r<e.length;r++)"momentPoints"!==e[r].type&&"moment"!==e[r].type&&(null===t.firstY?(t.firstY=e[r],t.yMin=e[r].yAxisMin,t.yMax=e[r].yAxisMax):t.firstY.units===e[r].units&&(e[r].yAxisMin<t.yMin&&(t.yMin=e[r].yAxisMin),e[r].yAxisMax>t.yMax&&(t.yMax=e[r].yAxisMax)));return null===t.firstY?null:t}(e.state.data);t.renderer.render(n,t,e,o)}else t.renderer.render(n,t,e)})})}},{key:"renderToolTip",value:function(e,t,r){var a=e.chartSVGContainer,n=e.state,o=e.scales,s=e.chart;if((0,u.default)(n.tooltipSettings)){var l=f.default.select(n.tooltipSettings),c=function(){return[t,n.data,n,o,s,l]};a.on("mousemove",function(){return x.apply(void 0,v(c()))}).on("click",function(){return x.apply(void 0,v(c()).concat([!1,!1,!0]))}).on("mouseout",function(e){i.event.relatedTarget!==a.node()&&a.node().contains(i.event.relatedTarget)||function(e,t){e.select(".selection").selectAll("circle").data([]).exit().remove(),e.select(".selection").selectAll("line").data([]).exit().remove(),f.default.hide(t)}(s,l)})}}},{key:"renderHighlight",value:function(e){var t=e.state,r=e.scales,i=e.chart;(0,u.default)(t.highlightX)&&C(S(t.data,t.highlightX,null),r,i)}},{key:"renderNoData",value:function(e,t){var r=e.container,i=e.size,a=e.margin;e.chart.select(".no-data").style("opacity",t?1e-6:1).select("text").text("No preview available").style("text-anchor","middle").attr("x",r.offsetWidth/2-a.left-i.yAxesWidth).attr("y",(i.height-24)/2)}},{key:"renderAxis",value:function(e,t){var r=e.state,n=e.size,o=e.scales,s=e.units,l=e.chart,d=e.chartTransition,p={xAxis:null,yAxis:null};(0,m.default)(l.select(".y-axis"),s,"g",function(e,t){e=e.attr("class","y axis").attr("id",function(e){return"".concat(e)}),(0,m.default)(e,["ticks","colors","units-label-group"],"g",function(e){e.attr("class",function(e){return e}),e.each(function(e){if(e.match(/^units/)){var t=(0,i.select)(this);(0,m.default)(t,[""],"text",function(e){return e.attr("class","units-label")})}})})});var f=[];l.selectAll(".y.axis").nodes().forEach(function(t,l){var h=(0,i.select)(t),m=s[l],g=o.y[m];if("momentPoints"!==r.data[l].type){var v=l-f.length,y=Math.min(6,Math.floor(n.plotHeight/30)+1),_=r.mini?g.domain():c.default.truncatedTickValues(g,y),w=0;e.yOffsets.length>0&&v>0&&(w=e.yOffsets.slice(0,v).reduce(function(e,t){return e+t}),w),h.attr("transform","translate(".concat(-w,",0)"));var S=(0,u.default)(r.grid)&&r.grid.y?-n.width:3,C=isNaN(e.yOffsets[v])?30:e.yOffsets[v];v>=0&&(S+=-C);var x=(0,a.axisLeft)().tickSizeOuter(s.length>1?0:3).tickSizeInner(S).scale(g);p.yAxis=x,r.mini?x.tickSize(0,0).tickValues(_):x.tickValues(_);var E=h.selectAll(".ticks").transition(d).call(x),I=(0,u.default)(m)&&m.length>1?270:0,k=(0,u.default)(m)&&1===m.length?10-C:-C+b;if(h.selectAll(".units-label").attr("transform","translate(".concat(k,", ").concat(n.yChartOffset+42,") rotate(").concat(I,")")).text(m||""),s.length>1){var L=r.data.filter(function(e){return e.units===m})[0];E.selectAll("line").style("stroke",L.color||"white").style("opacity","0.25"),E.selectAll("text").style("fill",L.color||"white"),E.selectAll("path.domain").style("stroke",L.color||"white"),h.selectAll(".units-label").style("fill",L.color)}else E.selectAll("line").style("stroke","white").style("opacity","0.25"),h.selectAll("text").style("fill","white"),r.mini||E.selectAll("path.domain").style("stroke","white")}else f.push({origYNodeIndex:l})});var h=r.mini?n.plotHeight:Math.min(Math.max(o.y[s[0]](0),0),n.plotHeight);o.y.undefined&&(h=n.plotHeight);var g=(0,a.axisBottom)().ticks(6);p.xAxis=g,(0,u.default)(r.grid)&&r.grid.x&&g.tickSizeInner(-n.plotHeight),g.scale(o.x),l.select(".x.axis").attr("clip-path","url(#chartAreaClip)").attr("transform","translate(0,"+h+")").call(g),(0,u.default)(r.grid)&&r.grid.x&&l.selectAll(".x.axis line").attr("transform","translate(0,"+(n.plotHeight-h)+")");var v=(0,u.default)(r.axisLabel)&&(0,u.default)(r.axisLabel.x);return l.select(".x.axis").selectAll(".tick").style("opacity",0).transition(d).style("opacity",r.mini&&v||!t?1e-6:1).selectAll("text").style("fill","white"),v&&l.select(".x.axis .label").style("text-anchor","middle").text(r.axisLabel.x).attr("transform","translate("+n.width/2+", "+(n.height-h)+")").style("fill","white"),p}}],(r=null)&&y(t.prototype,r),g&&y(t,g),e}();function S(e,t,r){var i=e.map(function(e){return e.points.reduce(function(e,r){return Math.abs(r.x-t)<Math.abs(e.x-t)?r:e})});if(0===i.length)return[];var a,n;function o(e,t){return Math.abs(e.getTime()-t.getTime())}var s=i.reduce(function(e,r){return Math.abs(r.x-t)<Math.abs(e.x-t)?r:e}),l=null;l="function"==typeof i[0].x.getMonth?null===r?3:o(r[0],r[1]):null===r?1e-8:r[1]-r[0];var u=function(e){return"function"==typeof i[0].x.getMonth?function(e,t,r){return o(e.x,t)<=r}(e,t,l):function(e,t,r){return Math.abs(e.x-t.x)<=r}(e,s,l)};a=i.filter(u),n=i.map(u);var c=e.filter(function(e,t){return n[t]});return c.forEach(function(e,t){e.point=a[t]}),c}function C(e,t,r){var i=[{x:e,y:0}],a=Object.keys(t.y),n=r.select(".selection").selectAll("line").data(i);n.enter().append("line").merge(n).attr("x1",function(e){return t.zoomedX?t.zoomedX(e.x):t.x(e.x)}).attr("y1",function(e){return t.y[a[0]||c.default.unknownUnits].range()[0]}).attr("x2",function(e){return t.zoomedX?t.zoomedX(e.x):t.x(e.x)}).attr("y2",function(e){return t.y[a[0]||c.default.unknownUnits].range()[1]}),n.exit().remove();var o=r.select(".selection").selectAll("circle").data(i);o.enter().append("circle").merge(o).attr("cx",function(e){return t.zoomedX?t.zoomedX(e.x):t.x(e.x)}).style("fill",function(e){return(0,u.default)(e.color)?e.color:""}),o.exit().remove()}function x(e,t,r,a,n,o){!(arguments.length>6&&void 0!==arguments[6])||arguments[6],!(arguments.length>7&&void 0!==arguments[7])||arguments[7];var s=arguments.length>8&&void 0!==arguments[8]&&arguments[8];if(e){var l=(0,i.mouse)(n.nodes()[0]),u=a.zoomedX?a.zoomedX.invert(l[0]):a.x.invert(l[0]),c=a.zoomedX?[a.zoomedX.invert(l[0]-3),a.zoomedX.invert(l[0]+3)]:[a.x.invert(l[0]-3),a.x.invert(l[0]+3)],d=S(t,u,c);0===d.length?C(u,a,n):C(d[0].point.x,a,n);var p=n._parents[0].getBoundingClientRect();if(0!==d.length){if(f.default.show(f.default.html(d,u),o,r.tooltipSettings,p),s){if(r.dblClickTimer)return clearTimeout(r.dblClickTimer),void(r.dblClickTimer=!1);r.dblClickTimer=setTimeout(function(){r.dblClickTimer=!1,d.forEach(function(e){e.onClick&&e.onClick(u)})},250)}}else f.default.hide(o)}else f.default.hide(o)}e.exports=w},function(e,t,r){"use strict";var i=r(135),a=r(1989),n=s(r(8)),o=s(r(260));function s(e){return e&&e.__esModule?e:{default:e}}var l=void 0,u={calculate:function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=(0,o.default)(r.map(function(e){return e.units||l}));if(0!==r.length&&((0,n.default)(t)||(t=function(){if(0!==r[0].points.length){var e=0===r.filter(function(e){return e.showAll}).length,t=r.filter(function(e){return e.points.length>0}),a=t.map(function(e){var t=e.getDomain();return e.yAxisMin=t.y[0],e.yAxisMax=t.y[1],{units:e.units||l,domain:t}}),o=a.filter(function(r,i){return e||t[i].showAll}),s={x:[(0,i.min)(o.map(function(e){return e.domain.x}),function(e){return e[0]}),(0,i.max)(o.map(function(e){return e.domain.x}),function(e){return e[1]})],y:{}};u.forEach(function(e){var t=a.filter(function(t){return t.units===e});s.y[e]=[(0,i.min)(t,function(e){return e.domain.y[0]}),(0,i.max)(t,function(e){return e.domain.y[1]})]});var c=function(e){if(s.y.hasOwnProperty(e)){var t=s.y[e];t[0]>0&&t[0]/t[1]<.4&&(t[0]=0),t[1]<0&&t[0]/t[1]<.4&&(t[1]=0);var i=r.filter(function(t){return t.units===e}),a=Math.min.apply(Math,i.filter(function(e){return(0,n.default)(e.yAxisMin)}).map(function(e){return e.yAxisMin}));isFinite(a)&&t[0]<a&&(t[0]=a);var o=Math.max.apply(Math,i.filter(function(e){return(0,n.default)(e.yAxisMax)}).map(function(e){return e.yAxisMax}));isFinite(o)&&t[1]>o&&(t[1]=o)}};for(var d in s.y)c(d);return s}}())))return{x:(t.x[0]instanceof Date?(0,a.scaleTime)():(0,a.scaleLinear)()).range([s,e.width-s]).domain(t.x),y:function(){var r=t.y[u[0]];if(r[0]<0&&r[1]>0){var i=(0,a.scaleLinear)().range([e.plotHeight,0]).domain([0,r[1]]);i(r[0])<e.heightMinusXAxisLabelHeight?e.plotHeight=i(r[0]):e.plotHeight=e.heightMinusXAxisLabelHeight}else r[0]<0&&r[1]<0&&(e.plotHeight=e.heightMinusXAxisLabelHeight);var n={};for(var o in t.y)if(t.y.hasOwnProperty(o)){var s=t.y[o];n[o]=(0,a.scaleLinear)().range([e.plotHeight,0]).domain(s)}return n}()}},unknownUnits:l,truncatedTickValues:function(e,t){var r=e.ticks(t);return(r[r.length-1]-e.domain()[0])/(e.domain()[1]-e.domain()[0])>1-.4/r.length&&r.pop(),r}};e.exports=u},function(e,t,r){"use strict";var i=o(r(9)),a=o(r(8)),n=o(r(663));function o(e){return e&&e.__esModule?e:{default:e}}var s={calculate:function(e,t,r,o){var s=(0,i.default)(r.xAxisHeight,14),l=(0,i.default)(r.xAxisLabelHeight,20),u=45*o,c=n.default.getHeight(r.titleSettings),d=e.offsetWidth-t.left-t.right-u,p=e.offsetHeight-t.top-t.bottom-c,f=p-((0,a.default)(r.axisLabel)&&(0,a.default)(r.axisLabel.x)?l:0);return{width:d,yAxesWidth:u,height:p,heightMinusXAxisLabelHeight:f,plotHeight:f-(r.mini?0:s),xAxisHeight:s,xAxisLabelHeight:l}},yAxisWidth:45};e.exports=s},function(e,t,r){"use strict";var i=r(505),a=r(82),n=(r(504),l(r(9))),o=l(r(8)),s=l(r(211));function l(e){return e&&e.__esModule?e:{default:e}}var u={top:10,right:10,bottom:10,left:10},c={defaultClassName:"base-chart-tooltip",defaultId:"base-chart-tooltip-id",id:function(e){return(0,n.default)(e.id,"base-chart-tooltip-id")},select:function(e){return(0,a.select)("#"+c.id(e))},create:function(e,t){(0,o.default)(t)&&e.append("div").attr("id",c.id(t)).attr("class",(0,n.default)(t.className,"base-chart-tooltip")).style("opacity",1e-6).style("position","absolute").style("display","none")},destroy:function(e){if((0,o.default)(e)){var t=c.id(e);(0,a.select)("#"+t).nodes()&&(0,a.select)("#"+t).remove()}},singleRowHtml:function(e,t,r,i){if(null!==r){var a=(0,o.default)(e)?'style="background-color: '+e+'" ':"",n=isNaN(r)?r:r.toFixed(2);return'<tr class="dataRow">\n      <td class="dataIcon">\n        <span class="color" '.concat(a,'></span>\n      </td>\n      <td class="dataVal">\n        <span class="name">').concat(t,'</span>\n      </td>\n      <td class="value">\n        ').concat(n,'\n        <span class="units">').concat(i||"","</span>\n      </td>\n    </tr>")}},html:function(e,t){var r,a=this,n="function"==typeof t.getMonth?(0,s.default)(t,"dd/mm/yyyy, HH:MMTT"):t;if(r='<p class="x-value">'+n+"</p>",1===e.length&&("moment"===e[0].type||"momentPoints"===e[0].type))return r;if(1===e.length){var o=e[0];return r+='<p class="category-name">'+o.categoryName+"</p>",r+="<tbody><table>",r+=this.singleRowHtml(o.color,"".concat(o.name),"moment"===o.type||"momentPoints"===o.type?n:o.point.y,o.units),r+="</tbody></table>",r}return(0,i.nest)().key(function(e){return e.categoryName}).entries(e).forEach(function(e){"moment"!==e.values[0].type&&"momentPoints"!==e.values[0].type&&(r+='<p class="category-name">'+e.key+"</p>",r+='<table class="mouseover categoryTable"><tbody>',e.values.forEach(function(e){r+=a.singleRowHtml(e.color,e.name,e.point.y,e.units)}),r+="</tbody></table>")}),r},show:function(e,t,r,i){t.html(e).style("display","block").transition().duration(250).style("opacity",1).style("max-width","300px").style("visibility","visible");var o,s,l,c=+t.nodes()[0].offsetWidth,d=(0,n.default)(r.offset,u),p=(0,a.clientPoint)(t.node().parentNode,a.event),f=p[0],h=p[1];switch(r.align){case"left":o=d.top,s=d.left;break;case"right":o=d.top,l=d.right;break;case"prefer-right":o=d.top;var m=i.width-d.right-c,g=d.left+c;f>=m&&f>g?s=d.left:l=d.right;break;case"hover":default:o=a.event.clientY-d.top,s=a.event.clientX+(-c-d.left)}h<t.node().offsetHeight+d.top?(t.style("bottom","60px"),t.style("top",null)):(t.style("top",o+"px"),t.style("bottom",null)),void 0!==s?t.style("left",s+"px"):t.style("left","auto"),void 0!==l?t.style("right",l+"px"):t.style("right","auto")},hide:function(e){e.transition().duration(250).style("opacity",1e-6),setTimeout(function(){+e.style("opacity")<.002&&e.style("visibility","hidden")},300)}};e.exports=c},function(e,t,r){e.exports={chart:"tjs-chart__chart","tool-tip":"tjs-chart__tool-tip",toolTip:"tjs-chart__tool-tip",concepts:"tjs-chart__concepts",conceptsList:"tjs-chart__conceptsList"}},function(e,t,r){"use strict";var i=S(r(35)),a=S(r(13)),n=S(r(15)),o=S(r(19)),s=S(r(9)),l=S(r(8)),u=S(r(41)),c=S(r(26)),d=S(r(14)),p=S(r(79)),f=S(r(374)),h=S(r(179)),m=S(r(661)),g=S(r(451)),v=S(r(522)),y=S(r(137)),b=S(r(269)),_=S(r(39)),w=S(r(1259));function S(e){return e&&e.__esModule?e:{default:e}}var C=(0,o.default)({displayName:"ChartExpandAndDownloadButtons",propTypes:{terria:n.default.object.isRequired,sources:n.default.array,sourceNames:n.default.array,downloads:n.default.array,downloadNames:n.default.array,pollSources:n.default.array,pollSeconds:n.default.oneOfType([n.default.string,n.default.number]),pollReplace:n.default.bool,updateCounter:n.default.any,tableStructure:n.default.object,catalogItem:n.default.object,title:n.default.string,colors:n.default.array,feature:n.default.object,id:n.default.oneOfType([n.default.string,n.default.number]),columnNames:n.default.array,columnUnits:n.default.array,xColumn:n.default.oneOfType([n.default.string,n.default.number]),yColumns:n.default.array,canDownload:n.default.bool,raiseToTitle:n.default.bool},expandButton:function(){(0,l.default)(this.props.sources)?x(this.props,this.props.sources.length-1):x(this.props)},expandDropdown:function(e,t){x(this.props,t)},render:function(){if(!(0,l.default)(this.props.sources)&&!(0,l.default)(this.props.tableStructure))return null;var e,t,r,n,o=this.props.downloads||this.props.sources,s=this.props.downloadNames||this.props.sourceNames;if((0,l.default)(this.props.sourceNames)){var c={dropdown:w.default.dropdown,list:w.default.dropdownList,button:w.default.dropdownBtn,btnOption:w.default.dropdownBtnOption},d=this.props.sourceNames.map(function(e){return{name:e}}),p=s.map(function(e,t){return{name:e,href:o[t]}});if(this.props.canDownload){var f=(0,u.default)(c);f.button=(0,i.default)(w.default.btnSmall,w.default.btnDownload),e=a.default.createElement(g.default,{selectOption:this.downloadDropdown,options:p,theme:f},"Download ▾")}return a.default.createElement("div",{className:(0,i.default)(w.default.chartExpand,(t={},r=w.default.raiseToTitle,n=this.props.raiseToTitle,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t))},a.default.createElement("div",{className:w.default.chartDropdownButton},a.default.createElement(g.default,{selectOption:this.expandDropdown,options:d,theme:c},"Expand ▾"),e))}if(this.props.canDownload&&(0,l.default)(o)){var h=o[0];e=a.default.createElement("a",{className:(0,i.default)(w.default.btnSmall,w.default.aDownload),href:h},a.default.createElement(_.default,{glyph:_.default.GLYPHS.download}))}return a.default.createElement("div",{className:w.default.chartExpand},a.default.createElement("button",{type:"button",className:w.default.btnChartExpand,onClick:this.expandButton},"Expand"),e)}});function x(e,t){var r,i,a=e.feature;function n(){for(var t={columns:{}},r=Math.max((e.columnNames||[]).length,(e.columnUnits||[]).length),i=0;i<r;i++)t.columns[i]={},(0,l.default)(e.columnNames)&&e.columnNames[i]&&(t.columns[i].name=e.columnNames[i]),(0,l.default)(e.columnUnits)&&e.columnUnits[i]&&(t.columns[i].units=e.columnUnits[i]);return(0,l.default)(e.xColumn)&&(t.xAxis=e.xColumn),(0,l.default)(e.yColumns)&&e.yColumns.forEach(function(e){t.columns[e]=(0,s.default)(t.columns[e],{}),t.columns[e].active=!0}),new b.default(t)}var o=e.terria,u=function(){var u=(0,l.default)(t)?e.sources[t]:void 0,g=new h.default(o,u,{tableStyle:n(),isCsvForCharting:!0}),y=new p.default(o,null);y.isUserSupplied=!0,y.style={"stroke-width":3,"marker-size":30,stroke:"#ffffff","marker-color":g.colors[0],"marker-opacity":1};var b=c.default.WGS84.cartesianToCartographic(a.position._value);y.data={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[d.default.toDegrees(b.longitude),d.default.toDegrees(b.latitude)]}};var _=new f.default(o,[g,y]),w=e.tableStructure;if((0,l.default)(e.colors)&&e.colors.length>=w.columns.length&&(g.getNextColor=function(t){return e.colors[t]}),!(0,l.default)(w)&&(0,l.default)(e.catalogItem)&&(0,l.default)(e.catalogItem.loadIntoTableStructure)&&(w=e.catalogItem.loadIntoTableStructure(u),"sos"===e.catalogItem.type&&(g.sourceCatalogItemId=e.catalogItem.uniqueId,e.catalogItem.activeConcepts&&1===e.catalogItem.activeConcepts.length))){var S=m.default.getObjectCorrespondingToSelectedConcept(e.catalogItem,"procedures");g.regenerationOptions={procedure:S}}g.data=w,g.cacheDuration=(0,s.default)(e.catalogItem.cacheDuration,"1m"),g.name=e.title||e.feature&&e.feature.name||"Chart";var C=o.catalog.chartDataGroup;if(g.id=C.uniqueId+"/"+g.name,(0,l.default)(e.pollSeconds)){var x=e.pollSources;g.polling=new v.default({seconds:e.pollSeconds,url:(0,l.default)(t)&&(0,l.default)(x)?x[Math.min(t,x.length-1)]:void 0,replace:e.pollReplace})}C.isOpen=!0;var E=C.items.map(function(e){return e.uniqueId}).indexOf(g.uniqueId);if(E>=0){var I=C.items[E];(0,l.default)(I.tableStructure)&&(0,l.default)(I.tableStructure.columns)?(i=I.tableStructure.columns.map(function(e){return e.isActive}),r=I.tableStructure.columns.map(function(e){return e.color})):(i=void 0,r=void 0),I.isEnabled=!1,C.remove(I)}return C.add(g),g.isLoading=!0,g.isMappable=!1,g.isEnabled=!0,g.creatorCatalogItem=_,o.catalog.addChartableItem(g),y.isMappable=!0,_.isEnabled=!0,_.nowViewingCatalogItem=g,y.style["marker-color"]=g.getNextColor(),_}();u.load().then(function(){try{u.sourceCatalogItem=e.catalogItem;for(var t=null,a=0;a<u.items.length;a++)"csv"===u.items[a].type&&(t=u.items[a]);var n=t.tableStructure;n.sourceFeature=e.feature,(0,l.default)(r)&&n.columns.forEach(function(e,t){e.color=r[t]}),(0,l.default)(i)&&i.some(function(e){return e})&&n.columns.forEach(function(e,t){e.isActive=i[t]}),t.setChartable()}catch(e){return(0,y.default)(o,e)}})}e.exports=C},function(e,t,r){e.exports={dropdown:"tjs-dropdown__dropdown",list:"tjs-dropdown__list tjs-_base__list-reset","is-open":"tjs-dropdown__is-open",isOpen:"tjs-dropdown__is-open","btn--dropdown":"tjs-dropdown__btn--dropdown tjs-_buttons__btn tjs-_buttons__btn-primary tjs-_buttons__btn-transparent",btnDropdown:"tjs-dropdown__btn--dropdown tjs-_buttons__btn tjs-_buttons__btn-primary tjs-_buttons__btn-transparent","btn--option":"tjs-dropdown__btn--option tjs-_buttons__btn tjs-_buttons__btn-transparent tjs-_buttons__btn--small",btnOption:"tjs-dropdown__btn--option tjs-_buttons__btn tjs-_buttons__btn-transparent tjs-_buttons__btn--small","is-selected":"tjs-dropdown__is-selected",isSelected:"tjs-dropdown__is-selected",myDataDropdown:"tjs-dropdown__myDataDropdown"}},function(e,t,r){e.exports={svg:"tjs-icon__svg"}},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"calendar",use:"calendar-usage",viewBox:"0 0 16 17",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17" id="calendar">\n  <g fill-rule="evenodd" transform="translate(-2 -1)">\n    <path fill="#FFFFFF" d="M12,5 L8,5 C8,5.55228475 7.55228475,6 7,6 C6.44771525,6 6,5.55228475 6,5 L4,5 L4,8 L16,8 L16,5 L14,5 C14,5.55228475 13.5522847,6 13,6 C12.4477153,6 12,5.55228475 12,5 Z M14,3 L17,3 C17.5522847,3 18,3.44771525 18,4 L18,17 C18,17.5522847 17.5522847,18 17,18 L3,18 C2.44771525,18 2,17.5522847 2,17 L2,4 C2,3.44771525 2.44771525,3 3,3 L6,3 L6,2 C6,1.44771525 6.44771525,1 7,1 C7.55228475,1 8,1.44771525 8,2 L8,3 L12,3 L12,2 C12,1.44771525 12.4477153,1 13,1 C13.5522847,1 14,1.44771525 14,2 L14,3 Z M16,10 L4,10 L4,16 L16,16 L16,10 Z" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"add",use:"add-usage",viewBox:"20 20 60 60",content:'<symbol viewBox="20 20 60 60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="add">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>add</title>\n    <path d="M50,72.4137931 L50,72.4137931 C62.3787961,72.4137931 72.4137931,62.3787961 72.4137931,50 C72.4137931,37.6212039 62.3787961,27.5862069 50,27.5862069 C37.6212039,27.5862069 27.5862069,37.6212039 27.5862069,50 C27.5862069,62.3787961 37.6212039,72.4137931 50,72.4137931 L50,72.4137931 Z M50,76 L50,76 C35.6405965,76 24,64.3594035 24,50 C24,35.6405965 35.6405965,24 50,24 C64.3594035,24 76,35.6405965 76,50 C76,64.3594035 64.3594035,76 50,76 L50,76 Z M38.7931034,51.7931034 L62.1034483,51.7931034 C63.093752,51.7931034 63.8965517,50.9903037 63.8965517,50 C63.8965517,49.0096963 63.093752,48.2068966 62.1034483,48.2068966 L38.7931034,48.2068966 C37.8027998,48.2068966 37,49.0096963 37,50 C37,50.9903037 37.8027998,51.7931034 38.7931034,51.7931034 L38.7931034,51.7931034 Z M48.6551724,38.3448276 L48.6551724,61.6551724 C48.6551724,62.6454761 49.4579722,63.4482759 50.4482759,63.4482759 C51.4385796,63.4482759 52.2413793,62.6454761 52.2413793,61.6551724 L52.2413793,38.3448276 C52.2413793,37.3545239 51.4385796,36.5517241 50.4482759,36.5517241 C49.4579722,36.5517241 48.6551724,37.3545239 48.6551724,38.3448276 L48.6551724,38.3448276 Z" id="add_remove" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"ar-hover0",use:"ar-hover0-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" id="ar-hover0">\n  <g fill="none" fill-rule="evenodd">\n    <rect width="100" height="100" />\n    <path fill="#000000" fill-rule="nonzero" d="M87.4516129,29.8870968 C87.4516129,31.4192416 88.6936617,32.6612903 90.2258065,32.6612903 C91.7579512,32.6612903 93,31.4192416 93,29.8870968 L93,9.77419355 C93,8.24204876 91.7579512,7 90.2258065,7 L70.1129032,7 C68.5807584,7 67.3387097,8.24204876 67.3387097,9.77419355 C67.3387097,11.3063383 68.5807584,12.5483871 70.1129032,12.5483871 L87.4516129,12.5483871 L87.4516129,29.8870968 Z M70.1129032,87.4516129 C68.5807584,87.4516129 67.3387097,88.6936617 67.3387097,90.2258065 C67.3387097,91.7579512 68.5807584,93 70.1129032,93 L90.2258065,93 C91.7579512,93 93,91.7579512 93,90.2258065 L93,70.1129032 C93,68.5807584 91.7579512,67.3387097 90.2258065,67.3387097 C88.6936617,67.3387097 87.4516129,68.5807584 87.4516129,70.1129032 L87.4516129,87.4516129 L70.1129032,87.4516129 Z M12.5483871,70.1129032 C12.5483871,68.5807584 11.3063383,67.3387097 9.77419355,67.3387097 C8.24204876,67.3387097 7,68.5807584 7,70.1129032 L7,90.2258065 C7,91.7579512 8.24204876,93 9.77419355,93 L29.8870968,93 C31.4192416,93 32.6612903,91.7579512 32.6612903,90.2258065 C32.6612903,88.6936617 31.4192416,87.4516129 29.8870968,87.4516129 L12.5483871,87.4516129 L12.5483871,70.1129032 Z M29.8870968,12.5483871 C31.4192416,12.5483871 32.6612903,11.3063383 32.6612903,9.77419355 C32.6612903,8.24204876 31.4192416,7 29.8870968,7 L9.77419355,7 C8.24204876,7 7,8.24204876 7,9.77419355 L7,29.8870968 C7,31.4192416 8.24204876,32.6612903 9.77419355,32.6612903 C11.3063383,32.6612903 12.5483871,31.4192416 12.5483871,29.8870968 L12.5483871,12.5483871 L29.8870968,12.5483871 Z" />\n    <path fill="#000000" fill-rule="nonzero" d="M73.5116279 37.4651163C73.5116279 38.9806884 74.7402418 40.2093023 76.255814 40.2093023 77.7713861 40.2093023 79 38.9806884 79 37.4651163L79 23.744186C79 22.2286139 77.7713861 21 76.255814 21L62.5348837 21C61.0193116 21 59.7906977 22.2286139 59.7906977 23.744186 59.7906977 25.2597582 61.0193116 26.4883721 62.5348837 26.4883721L73.5116279 26.4883721 73.5116279 37.4651163zM62.5348837 74.5116279C61.0193116 74.5116279 59.7906977 75.7402418 59.7906977 77.255814 59.7906977 78.7713861 61.0193116 80 62.5348837 80L76.255814 80C77.7713861 80 79 78.7713861 79 77.255814L79 63.5348837C79 62.0193116 77.7713861 60.7906977 76.255814 60.7906977 74.7402418 60.7906977 73.5116279 62.0193116 73.5116279 63.5348837L73.5116279 74.5116279 62.5348837 74.5116279zM25.4883721 63.5348837C25.4883721 62.0193116 24.2597582 60.7906977 22.744186 60.7906977 21.2286139 60.7906977 20 62.0193116 20 63.5348837L20 77.255814C20 78.7713861 21.2286139 80 22.744186 80L36.4651163 80C37.9806884 80 39.2093023 78.7713861 39.2093023 77.255814 39.2093023 75.7402418 37.9806884 74.5116279 36.4651163 74.5116279L25.4883721 74.5116279 25.4883721 63.5348837zM36.4651163 26.4883721C37.9806884 26.4883721 39.2093023 25.2597582 39.2093023 23.744186 39.2093023 22.2286139 37.9806884 21 36.4651163 21L22.744186 21C21.2286139 21 20 22.2286139 20 23.744186L20 37.4651163C20 38.9806884 21.2286139 40.2093023 22.744186 40.2093023 24.2597582 40.2093023 25.4883721 38.9806884 25.4883721 37.4651163L25.4883721 26.4883721 36.4651163 26.4883721zM62.3333333 44.2894737C62.3333333 45.8542805 63.6018599 47.122807 65.1666667 47.122807 66.7314735 47.122807 68 45.8542805 68 44.2894737L68 36.8333333C68 35.2685265 66.7314735 34 65.1666667 34L57.7105263 34C56.1457195 34 54.877193 35.2685265 54.877193 36.8333333 54.877193 38.3981401 56.1457195 39.6666667 57.7105263 39.6666667L62.3333333 39.6666667 62.3333333 44.2894737zM62.3333333 62.3333333L57.7105263 62.3333333C56.1457195 62.3333333 54.877193 63.6018599 54.877193 65.1666667 54.877193 66.7314735 56.1457195 68 57.7105263 68L65.1666667 68C66.7314735 68 68 66.7314735 68 65.1666667L68 57.7105263C68 56.1457195 66.7314735 54.877193 65.1666667 54.877193 63.6018599 54.877193 62.3333333 56.1457195 62.3333333 57.7105263L62.3333333 62.3333333zM39.6666667 57.7105263C39.6666667 56.1457195 38.3981401 54.877193 36.8333333 54.877193 35.2685265 54.877193 34 56.1457195 34 57.7105263L34 65.1666667C34 66.7314735 35.2685265 68 36.8333333 68L44.2894737 68C45.8542805 68 47.122807 66.7314735 47.122807 65.1666667 47.122807 63.6018599 45.8542805 62.3333333 44.2894737 62.3333333L39.6666667 62.3333333 39.6666667 57.7105263zM44.2894737 39.6666667C45.8542805 39.6666667 47.122807 38.3981401 47.122807 36.8333333 47.122807 35.2685265 45.8542805 34 44.2894737 34L36.8333333 34C35.2685265 34 34 35.2685265 34 36.8333333L34 44.2894737C34 45.8542805 35.2685265 47.122807 36.8333333 47.122807 38.3981401 47.122807 39.6666667 45.8542805 39.6666667 44.2894737L39.6666667 39.6666667 44.2894737 39.6666667z" opacity=".15" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"ar-hover1",use:"ar-hover1-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" id="ar-hover1">\n  <g fill="none" fill-rule="evenodd">\n    <rect width="100" height="100" />\n    <path fill="#000000" fill-rule="nonzero" d="M87.4516129,29.8870968 C87.4516129,31.4192416 88.6936617,32.6612903 90.2258065,32.6612903 C91.7579512,32.6612903 93,31.4192416 93,29.8870968 L93,9.77419355 C93,8.24204876 91.7579512,7 90.2258065,7 L70.1129032,7 C68.5807584,7 67.3387097,8.24204876 67.3387097,9.77419355 C67.3387097,11.3063383 68.5807584,12.5483871 70.1129032,12.5483871 L87.4516129,12.5483871 L87.4516129,29.8870968 Z M70.1129032,87.4516129 C68.5807584,87.4516129 67.3387097,88.6936617 67.3387097,90.2258065 C67.3387097,91.7579512 68.5807584,93 70.1129032,93 L90.2258065,93 C91.7579512,93 93,91.7579512 93,90.2258065 L93,70.1129032 C93,68.5807584 91.7579512,67.3387097 90.2258065,67.3387097 C88.6936617,67.3387097 87.4516129,68.5807584 87.4516129,70.1129032 L87.4516129,87.4516129 L70.1129032,87.4516129 Z M12.5483871,70.1129032 C12.5483871,68.5807584 11.3063383,67.3387097 9.77419355,67.3387097 C8.24204876,67.3387097 7,68.5807584 7,70.1129032 L7,90.2258065 C7,91.7579512 8.24204876,93 9.77419355,93 L29.8870968,93 C31.4192416,93 32.6612903,91.7579512 32.6612903,90.2258065 C32.6612903,88.6936617 31.4192416,87.4516129 29.8870968,87.4516129 L12.5483871,87.4516129 L12.5483871,70.1129032 Z M29.8870968,12.5483871 C31.4192416,12.5483871 32.6612903,11.3063383 32.6612903,9.77419355 C32.6612903,8.24204876 31.4192416,7 29.8870968,7 L9.77419355,7 C8.24204876,7 7,8.24204876 7,9.77419355 L7,29.8870968 C7,31.4192416 8.24204876,32.6612903 9.77419355,32.6612903 C11.3063383,32.6612903 12.5483871,31.4192416 12.5483871,29.8870968 L12.5483871,12.5483871 L29.8870968,12.5483871 Z" opacity=".15" />\n    <path fill="#000000" fill-rule="nonzero" d="M74.2741935,36.8225806 C74.2741935,38.3547254 75.5162423,39.5967742 77.0483871,39.5967742 C78.5805319,39.5967742 79.8225806,38.3547254 79.8225806,36.8225806 L79.8225806,22.9516129 C79.8225806,21.4194681 78.5805319,20.1774194 77.0483871,20.1774194 L63.1774194,20.1774194 C61.6452746,20.1774194 60.4032258,21.4194681 60.4032258,22.9516129 C60.4032258,24.4837577 61.6452746,25.7258065 63.1774194,25.7258065 L74.2741935,25.7258065 L74.2741935,36.8225806 Z M63.1774194,74.2741935 C61.6452746,74.2741935 60.4032258,75.5162423 60.4032258,77.0483871 C60.4032258,78.5805319 61.6452746,79.8225806 63.1774194,79.8225806 L77.0483871,79.8225806 C78.5805319,79.8225806 79.8225806,78.5805319 79.8225806,77.0483871 L79.8225806,63.1774194 C79.8225806,61.6452746 78.5805319,60.4032258 77.0483871,60.4032258 C75.5162423,60.4032258 74.2741935,61.6452746 74.2741935,63.1774194 L74.2741935,74.2741935 L63.1774194,74.2741935 Z M25.7258065,63.1774194 C25.7258065,61.6452746 24.4837577,60.4032258 22.9516129,60.4032258 C21.4194681,60.4032258 20.1774194,61.6452746 20.1774194,63.1774194 L20.1774194,77.0483871 C20.1774194,78.5805319 21.4194681,79.8225806 22.9516129,79.8225806 L36.8225806,79.8225806 C38.3547254,79.8225806 39.5967742,78.5805319 39.5967742,77.0483871 C39.5967742,75.5162423 38.3547254,74.2741935 36.8225806,74.2741935 L25.7258065,74.2741935 L25.7258065,63.1774194 Z M36.8225806,25.7258065 C38.3547254,25.7258065 39.5967742,24.4837577 39.5967742,22.9516129 C39.5967742,21.4194681 38.3547254,20.1774194 36.8225806,20.1774194 L22.9516129,20.1774194 C21.4194681,20.1774194 20.1774194,21.4194681 20.1774194,22.9516129 L20.1774194,36.8225806 C20.1774194,38.3547254 21.4194681,39.5967742 22.9516129,39.5967742 C24.4837577,39.5967742 25.7258065,38.3547254 25.7258065,36.8225806 L25.7258065,25.7258065 L36.8225806,25.7258065 Z" />\n    <path fill="#000000" fill-rule="nonzero" d="M61.0967742,43.4295416 C61.0967742,44.9616864 62.338823,46.2037352 63.8709677,46.2037352 C65.4031125,46.2037352 66.6451613,44.9616864 66.6451613,43.4295416 L66.6451613,36.1290323 C66.6451613,34.5968875 65.4031125,33.3548387 63.8709677,33.3548387 L56.5704584,33.3548387 C55.0383136,33.3548387 53.7962648,34.5968875 53.7962648,36.1290323 C53.7962648,37.661177 55.0383136,38.9032258 56.5704584,38.9032258 L61.0967742,38.9032258 L61.0967742,43.4295416 Z M61.0967742,61.0967742 L56.5704584,61.0967742 C55.0383136,61.0967742 53.7962648,62.338823 53.7962648,63.8709677 C53.7962648,65.4031125 55.0383136,66.6451613 56.5704584,66.6451613 L63.8709677,66.6451613 C65.4031125,66.6451613 66.6451613,65.4031125 66.6451613,63.8709677 L66.6451613,56.5704584 C66.6451613,55.0383136 65.4031125,53.7962648 63.8709677,53.7962648 C62.338823,53.7962648 61.0967742,55.0383136 61.0967742,56.5704584 L61.0967742,61.0967742 Z M38.9032258,56.5704584 C38.9032258,55.0383136 37.661177,53.7962648 36.1290323,53.7962648 C34.5968875,53.7962648 33.3548387,55.0383136 33.3548387,56.5704584 L33.3548387,63.8709677 C33.3548387,65.4031125 34.5968875,66.6451613 36.1290323,66.6451613 L43.4295416,66.6451613 C44.9616864,66.6451613 46.2037352,65.4031125 46.2037352,63.8709677 C46.2037352,62.338823 44.9616864,61.0967742 43.4295416,61.0967742 L38.9032258,61.0967742 L38.9032258,56.5704584 Z M43.4295416,38.9032258 C44.9616864,38.9032258 46.2037352,37.661177 46.2037352,36.1290323 C46.2037352,34.5968875 44.9616864,33.3548387 43.4295416,33.3548387 L36.1290323,33.3548387 C34.5968875,33.3548387 33.3548387,34.5968875 33.3548387,36.1290323 L33.3548387,43.4295416 C33.3548387,44.9616864 34.5968875,46.2037352 36.1290323,46.2037352 C37.661177,46.2037352 38.9032258,44.9616864 38.9032258,43.4295416 L38.9032258,38.9032258 L43.4295416,38.9032258 Z" opacity=".15" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"ar-hover2",use:"ar-hover2-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" id="ar-hover2">\n  <g fill="none" fill-rule="evenodd">\n    <rect width="100" height="100" />\n    <path fill="#000000" fill-rule="nonzero" d="M87.4516129,29.8870968 C87.4516129,31.4192416 88.6936617,32.6612903 90.2258065,32.6612903 C91.7579512,32.6612903 93,31.4192416 93,29.8870968 L93,9.77419355 C93,8.24204876 91.7579512,7 90.2258065,7 L70.1129032,7 C68.5807584,7 67.3387097,8.24204876 67.3387097,9.77419355 C67.3387097,11.3063383 68.5807584,12.5483871 70.1129032,12.5483871 L87.4516129,12.5483871 L87.4516129,29.8870968 Z M70.1129032,87.4516129 C68.5807584,87.4516129 67.3387097,88.6936617 67.3387097,90.2258065 C67.3387097,91.7579512 68.5807584,93 70.1129032,93 L90.2258065,93 C91.7579512,93 93,91.7579512 93,90.2258065 L93,70.1129032 C93,68.5807584 91.7579512,67.3387097 90.2258065,67.3387097 C88.6936617,67.3387097 87.4516129,68.5807584 87.4516129,70.1129032 L87.4516129,87.4516129 L70.1129032,87.4516129 Z M12.5483871,70.1129032 C12.5483871,68.5807584 11.3063383,67.3387097 9.77419355,67.3387097 C8.24204876,67.3387097 7,68.5807584 7,70.1129032 L7,90.2258065 C7,91.7579512 8.24204876,93 9.77419355,93 L29.8870968,93 C31.4192416,93 32.6612903,91.7579512 32.6612903,90.2258065 C32.6612903,88.6936617 31.4192416,87.4516129 29.8870968,87.4516129 L12.5483871,87.4516129 L12.5483871,70.1129032 Z M29.8870968,12.5483871 C31.4192416,12.5483871 32.6612903,11.3063383 32.6612903,9.77419355 C32.6612903,8.24204876 31.4192416,7 29.8870968,7 L9.77419355,7 C8.24204876,7 7,8.24204876 7,9.77419355 L7,29.8870968 C7,31.4192416 8.24204876,32.6612903 9.77419355,32.6612903 C11.3063383,32.6612903 12.5483871,31.4192416 12.5483871,29.8870968 L12.5483871,12.5483871 L29.8870968,12.5483871 Z" opacity=".15" />\n    <path fill="#000000" fill-rule="nonzero" d="M74.2741935,36.8225806 C74.2741935,38.3547254 75.5162423,39.5967742 77.0483871,39.5967742 C78.5805319,39.5967742 79.8225806,38.3547254 79.8225806,36.8225806 L79.8225806,22.9516129 C79.8225806,21.4194681 78.5805319,20.1774194 77.0483871,20.1774194 L63.1774194,20.1774194 C61.6452746,20.1774194 60.4032258,21.4194681 60.4032258,22.9516129 C60.4032258,24.4837577 61.6452746,25.7258065 63.1774194,25.7258065 L74.2741935,25.7258065 L74.2741935,36.8225806 Z M63.1774194,74.2741935 C61.6452746,74.2741935 60.4032258,75.5162423 60.4032258,77.0483871 C60.4032258,78.5805319 61.6452746,79.8225806 63.1774194,79.8225806 L77.0483871,79.8225806 C78.5805319,79.8225806 79.8225806,78.5805319 79.8225806,77.0483871 L79.8225806,63.1774194 C79.8225806,61.6452746 78.5805319,60.4032258 77.0483871,60.4032258 C75.5162423,60.4032258 74.2741935,61.6452746 74.2741935,63.1774194 L74.2741935,74.2741935 L63.1774194,74.2741935 Z M25.7258065,63.1774194 C25.7258065,61.6452746 24.4837577,60.4032258 22.9516129,60.4032258 C21.4194681,60.4032258 20.1774194,61.6452746 20.1774194,63.1774194 L20.1774194,77.0483871 C20.1774194,78.5805319 21.4194681,79.8225806 22.9516129,79.8225806 L36.8225806,79.8225806 C38.3547254,79.8225806 39.5967742,78.5805319 39.5967742,77.0483871 C39.5967742,75.5162423 38.3547254,74.2741935 36.8225806,74.2741935 L25.7258065,74.2741935 L25.7258065,63.1774194 Z M36.8225806,25.7258065 C38.3547254,25.7258065 39.5967742,24.4837577 39.5967742,22.9516129 C39.5967742,21.4194681 38.3547254,20.1774194 36.8225806,20.1774194 L22.9516129,20.1774194 C21.4194681,20.1774194 20.1774194,21.4194681 20.1774194,22.9516129 L20.1774194,36.8225806 C20.1774194,38.3547254 21.4194681,39.5967742 22.9516129,39.5967742 C24.4837577,39.5967742 25.7258065,38.3547254 25.7258065,36.8225806 L25.7258065,25.7258065 L36.8225806,25.7258065 Z" opacity=".15" />\n    <path fill="#000000" fill-rule="nonzero" d="M61.0967742,43.4295416 C61.0967742,44.9616864 62.338823,46.2037352 63.8709677,46.2037352 C65.4031125,46.2037352 66.6451613,44.9616864 66.6451613,43.4295416 L66.6451613,36.1290323 C66.6451613,34.5968875 65.4031125,33.3548387 63.8709677,33.3548387 L56.5704584,33.3548387 C55.0383136,33.3548387 53.7962648,34.5968875 53.7962648,36.1290323 C53.7962648,37.661177 55.0383136,38.9032258 56.5704584,38.9032258 L61.0967742,38.9032258 L61.0967742,43.4295416 Z M61.0967742,61.0967742 L56.5704584,61.0967742 C55.0383136,61.0967742 53.7962648,62.338823 53.7962648,63.8709677 C53.7962648,65.4031125 55.0383136,66.6451613 56.5704584,66.6451613 L63.8709677,66.6451613 C65.4031125,66.6451613 66.6451613,65.4031125 66.6451613,63.8709677 L66.6451613,56.5704584 C66.6451613,55.0383136 65.4031125,53.7962648 63.8709677,53.7962648 C62.338823,53.7962648 61.0967742,55.0383136 61.0967742,56.5704584 L61.0967742,61.0967742 Z M38.9032258,56.5704584 C38.9032258,55.0383136 37.661177,53.7962648 36.1290323,53.7962648 C34.5968875,53.7962648 33.3548387,55.0383136 33.3548387,56.5704584 L33.3548387,63.8709677 C33.3548387,65.4031125 34.5968875,66.6451613 36.1290323,66.6451613 L43.4295416,66.6451613 C44.9616864,66.6451613 46.2037352,65.4031125 46.2037352,63.8709677 C46.2037352,62.338823 44.9616864,61.0967742 43.4295416,61.0967742 L38.9032258,61.0967742 L38.9032258,56.5704584 Z M43.4295416,38.9032258 C44.9616864,38.9032258 46.2037352,37.661177 46.2037352,36.1290323 C46.2037352,34.5968875 44.9616864,33.3548387 43.4295416,33.3548387 L36.1290323,33.3548387 C34.5968875,33.3548387 33.3548387,34.5968875 33.3548387,36.1290323 L33.3548387,43.4295416 C33.3548387,44.9616864 34.5968875,46.2037352 36.1290323,46.2037352 C37.661177,46.2037352 38.9032258,44.9616864 38.9032258,43.4295416 L38.9032258,38.9032258 L43.4295416,38.9032258 Z" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"ar-off",use:"ar-off-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" id="ar-off">\n  <g fill="none" fill-rule="evenodd">\n    <rect width="100" height="100" />\n    <path fill="#000000" fill-rule="nonzero" d="M44.8369093,36 L42.095994,29.7353362 L29.7407913,29.7353362 L26.9998759,36 L20,36 L32.7347141,7 L39.1020711,7 L51.8367852,36 L44.8369093,36 Z M35.9394766,15.6294708 L32.228699,24.0515022 L39.6080863,24.0515022 L35.9394766,15.6294708 Z M78.1446113,16.6251788 C78.1446113,21.2718401 76.2751851,24.2727639 72.5362768,25.6280401 L80,36 L71.903758,36 L65.3677292,26.7482118 L60.813593,26.7482118 L60.813593,36 L54.2353963,36 L54.2353963,7 L65.409897,7 C69.9921681,7 73.2601499,7.76060284 75.2139402,9.28183126 C77.1677308,10.8030597 78.1446113,13.2508177 78.1446113,16.6251788 Z M70.2170409,20.0686695 C71.0322916,19.3495434 71.4399107,18.2086393 71.4399107,16.6459227 C71.4399107,15.0832063 71.0182357,14.0114479 70.1748729,13.4306152 C69.3315102,12.8497826 67.8556474,12.5593706 65.7472406,12.5593706 L60.813593,12.5593706 L60.813593,21.1473533 L65.6207368,21.1473533 C67.8697042,21.1473533 69.4017902,20.7877958 70.2170409,20.0686695 Z" />\n    <g fill="#000000" fill-rule="nonzero" transform="translate(14 46)">\n      <path d="M5.90625,23.2670454 C5.90625,33.3653785 14.0889616,41.5482954 24.1849648,41.5482954 L47.8150351,41.5482954 C57.9025788,41.5482954 66.09375,33.3591228 66.09375,23.2670454 C66.09375,13.1687123 57.9110383,4.98579546 47.8150351,4.98579546 L24.1849648,4.98579546 C14.0974212,4.98579546 5.90625,13.1749681 5.90625,23.2670454 Z M0.920454546,23.2670454 C0.920454546,10.4170111 11.3482216,0 24.1849648,0 L47.8150351,0 C60.6636694,0 71.0795454,10.4141857 71.0795454,23.2670454 C71.0795454,36.1170798 60.6517785,46.5340909 47.8150351,46.5340909 L24.1849648,46.5340909 C11.3363306,46.5340909 0.920454546,36.1199052 0.920454546,23.2670454 Z" />\n      <ellipse cx="24.307" cy="23.443" rx="14.032" ry="13.96" />\n    </g>\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"ar-on",use:"ar-on-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" id="ar-on">\n  <g fill="none" fill-rule="evenodd">\n    <rect width="100" height="100" />\n    <path fill="#FFFFFF" fill-rule="nonzero" d="M44.8369093 36L42.095994 29.7353362 29.7407913 29.7353362 26.9998759 36 20 36 32.7347141 7 39.1020711 7 51.8367852 36 44.8369093 36zM35.9394766 15.6294708L32.228699 24.0515022 39.6080863 24.0515022 35.9394766 15.6294708zM78.1446113 16.6251788C78.1446113 21.2718401 76.2751851 24.2727639 72.5362768 25.6280401L80 36 71.903758 36 65.3677292 26.7482118 60.813593 26.7482118 60.813593 36 54.2353963 36 54.2353963 7 65.409897 7C69.9921681 7 73.2601499 7.76060284 75.2139402 9.28183126 77.1677308 10.8030597 78.1446113 13.2508177 78.1446113 16.6251788zM70.2170409 20.0686695C71.0322916 19.3495434 71.4399107 18.2086393 71.4399107 16.6459227 71.4399107 15.0832063 71.0182357 14.0114479 70.1748729 13.4306152 69.3315102 12.8497826 67.8556474 12.5593706 65.7472406 12.5593706L60.813593 12.5593706 60.813593 21.1473533 65.6207368 21.1473533C67.8697042 21.1473533 69.4017902 20.7877958 70.2170409 20.0686695zM14.9200001 69.2670454C14.9200001 56.4170111 25.3479028 46 38.184813 46L61.8151908 46C74.6639921 46 85.0800037 56.4141857 85.0800037 69.2670454 85.0800037 82.1170798 74.652101 92.534091 61.8151908 92.534091L38.184813 92.534091C25.3360116 92.534091 14.9200001 82.1199052 14.9200001 69.2670454zM62.3069802 83.2272727C70.0566402 83.2272727 76.3389808 76.9770661 76.3389808 69.2670454 76.3389808 61.5570248 70.0566402 55.3068182 62.3069802 55.3068182 54.5573202 55.3068182 48.2749794 61.5570248 48.2749794 69.2670454 48.2749794 76.9770661 54.5573202 83.2272727 62.3069802 83.2272727z" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"ar-realign",use:"ar-realign-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" id="ar-realign">\n  <g fill="none" fill-rule="evenodd">\n    <rect width="100" height="100" />\n    <path fill="#000000" fill-rule="nonzero" d="M50,64.5 C41.9918711,64.5 35.5,58.0081289 35.5,50 C35.5,41.9918711 41.9918711,35.5 50,35.5 C58.0081289,35.5 64.5,41.9918711 64.5,50 C64.5,58.0081289 58.0081289,64.5 50,64.5 Z M50,59.5 C55.2467051,59.5 59.5,55.2467051 59.5,50 C59.5,44.7532949 55.2467051,40.5 50,40.5 C44.7532949,40.5 40.5,44.7532949 40.5,50 C40.5,55.2467051 44.7532949,59.5 50,59.5 Z" />\n    <path fill="#000000" fill-rule="nonzero" d="M74.116503,70.0129771 C73.5431557,71.8604295 71.8125919,73.5882603 69.9699494,74.1569275 L12.4131808,91.9198116 C9.44603579,92.8355172 7.05384791,90.4488885 7.97086453,87.4774953 L25.7337487,29.9207268 C26.3009779,28.0827438 28.0372484,26.3453475 29.877699,25.7741731 L87.5788313,7.86692517 C90.5642603,6.94041274 92.9470404,9.33680109 92.023751,12.3118448 L74.116503,70.0129771 Z M31.3596951,30.5494938 C31.0943324,30.6318477 30.5917854,31.1347206 30.5114029,31.3951827 L13.5563604,86.3343157 L68.4954935,69.3792733 C68.7614492,69.2971953 69.2569137,68.8025132 69.3411823,68.5309811 L86.4328516,13.4578246 L31.3596951,30.5494938 Z" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"ar-reset-alignment",use:"ar-reset-alignment-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" id="ar-reset-alignment">\n  <g fill="none" fill-rule="evenodd">\n    <rect width="100" height="100" />\n    <path fill="#000000" fill-rule="nonzero" d="M78.1528224,26.0850208 C71.2252031,17.6083867 60.8039236,12.5 49.5,12.5 C29.0654643,12.5 12.5,29.0654643 12.5,49.5 C12.5,69.9345357 29.0654643,86.5 49.5,86.5 C69.9345357,86.5 86.5,69.9345357 86.5,49.5 C86.5,48.1192881 87.6192881,47 89,47 C90.3807119,47 91.5,48.1192881 91.5,49.5 C91.5,72.6959595 72.6959595,91.5 49.5,91.5 C26.3040405,91.5 7.5,72.6959595 7.5,49.5 C7.5,26.3040405 26.3040405,7.5 49.5,7.5 C62.2770762,7.5 74.0650758,13.2534402 81.9272602,22.8025931 L82.6221935,12.864584 C82.718507,11.4872355 83.9131462,10.4487515 85.2904948,10.5450651 C86.6678433,10.6413787 87.7063273,11.8360179 87.6100137,13.2133664 L86.4939101,29.1743912 C86.3975965,30.5517397 85.2029573,31.5902237 83.8256088,31.4939101 L67.864584,30.3778065 C66.4872355,30.281493 65.4487515,29.0868538 65.5450651,27.7095052 C65.6413787,26.3321567 66.8360179,25.2936727 68.2133664,25.3899863 L78.1528224,26.0850208 Z" />\n    <path fill="#000000" d="M69.1932999,32.0773029 L60.9928,58.501136 C60.6642078,59.559933 59.5428575,60.6806778 58.4875853,61.0063507 L32.1298626,69.1407402 C31.0737147,69.4666833 30.4831333,68.874956 30.8088062,67.8196838 L38.9431957,41.4619611 C39.2691388,40.4058132 40.3904914,39.2850661 41.4484104,38.9567464 L67.8722435,30.7562465 C68.9310404,30.4276544 69.5216196,31.0193839 69.1932999,32.0773029 Z M50.0033122,55.9016393 C53.2626977,55.9016393 55.9049516,53.2593854 55.9049516,50 C55.9049516,46.7406146 53.2626977,44.0983607 50.0033122,44.0983607 C46.7439268,44.0983607 44.1016729,46.7406146 44.1016729,50 C44.1016729,53.2593854 46.7439268,55.9016393 50.0033122,55.9016393 Z" transform="matrix(-1 0 0 1 100.003 0)" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"back-to-start",use:"back-to-start-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="back-to-start">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>back-to-start</title>\n    <path d="M66.0383766,75.4605888 C67.6690388,76.5794619 69,75.902509 69,73.9409137 L69,26.0593234 C69,24.1037025 67.674036,23.4173465 66.0383766,24.5396483 L43.7025424,42.5215564 C43.6824988,42.5376928 43.6662503,42.5388157 43.6662503,42.5034444 L43.6662503,26.0518587 C43.6662503,25.0686362 42.8537524,24.2812557 41.8514855,24.2812557 L32.8147649,24.2812557 C31.8115992,24.2812557 31,25.0739817 31,26.0518587 L31,73.9483784 C31,74.9316009 31.8124979,75.7189814 32.8147649,75.7189814 L41.8514855,75.7189814 C42.8546512,75.7189814 43.6662503,74.9262554 43.6662503,73.9483784 L43.6662503,57.8907692 C43.6662503,57.6470426 43.8210593,57.5740952 44.017663,57.7323749 L66.0383766,75.4605888 Z" id="back-to-start_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"backward",use:"backward-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="backward">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>backward</title>\n    <path d="M48.3803476,44.969474 L48.3803476,26.3463056 C48.3803476,24.3511185 47.2702251,23.9033983 45.9008198,25.3451112 L23.0179163,49.4362805 C22.3259342,50.1648008 22.3287897,51.338085 23.0179163,52.0635989 L45.9008198,76.1547682 C47.2708188,77.5971061 48.3803476,77.1482311 48.3803476,75.1535738 L48.3803476,56.5304054 L67.0204722,76.1547682 C68.3904713,77.5971061 69.5,77.1482311 69.5,75.1535738 L69.5,26.3463056 C69.5,24.3511185 68.3898776,23.9033983 67.0204722,25.3451112 L48.3803476,44.969474 L48.3803476,44.969474 Z" id="backward_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"bar-chart",use:"bar-chart-usage",viewBox:"20 20 60 60",content:'<symbol viewBox="20 20 60 60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="bar-chart">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>linechart</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="bar-chart_Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="bar-chart_linechart">\n            <rect id="bar-chart_bounds" x="0" y="0" width="100" height="100" />\n            <path d="M74.163652,72.327304 L27.672696,72.327304 L27.672696,25.836348 C27.672696,24.8062016 26.8664944,24 25.836348,24 C24.8062016,24 24,24.8062016 24,25.836348 L24,74.163652 C24,75.1937984 24.8062016,76 25.836348,76 L74.163652,76 C75.1937984,76 76,75.1937984 76,74.163652 C76,73.1335056 75.1937984,72.327304 74.163652,72.327304 Z M45.453919,65.250646 L45.453919,38.8251507 C45.453919,37.7950043 44.6477175,36.9888028 43.6175711,36.9888028 C42.5874246,36.9888028 41.7812231,37.7950043 41.7812231,38.8251507 L41.7812231,65.250646 C41.7812231,66.2807924 42.5874246,67.086994 43.6175711,67.086994 C44.6477175,67.086994 45.453919,66.2807924 45.453919,65.250646 Z M36.585702,65.250646 L36.585702,38.8251507 C36.585702,37.7950043 35.7795004,36.9888028 34.749354,36.9888028 C33.7192076,36.9888028 32.913006,37.7950043 32.913006,38.8251507 L32.913006,65.250646 C32.913006,66.2807924 33.7192076,67.086994 34.749354,67.086994 C35.7795004,67.086994 36.585702,66.2807924 36.585702,65.250646 Z M63.1903531,65.250646 L63.1903531,38.8251507 C63.1903531,37.7950043 62.3841516,36.9888028 61.3540052,36.9888028 C60.3238587,36.9888028 59.5176572,37.7950043 59.5176572,38.8251507 L59.5176572,65.250646 C59.5176572,66.2807924 60.3238587,67.086994 61.3540052,67.086994 C62.3841516,67.086994 63.1903531,66.2807924 63.1903531,65.250646 Z M72.0585702,65.250646 L72.0585702,52.0378984 C72.0585702,51.0077519 71.2523686,50.2015504 70.2222222,50.2015504 C69.1920758,50.2015504 68.3858742,51.0077519 68.3858742,52.0378984 L68.3858742,65.250646 C68.3858742,66.2807924 69.1920758,67.086994 70.2222222,67.086994 C71.2523686,67.086994 72.0585702,66.2807924 72.0585702,65.250646 Z M54.3221361,65.250646 L54.3221361,52.0378984 C54.3221361,51.0077519 53.5159345,50.2015504 52.4857881,50.2015504 C51.4556417,50.2015504 50.6494401,51.0077519 50.6494401,52.0378984 L50.6494401,65.250646 C50.6494401,66.2807924 51.4556417,67.086994 52.4857881,67.086994 C53.5159345,67.086994 54.3221361,66.2807924 54.3221361,65.250646 Z" id="bar-chart_bar-chart" fill="#000000" />\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"bulb",use:"bulb-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="bulb">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>bulb</title>\n    <path d="M43.905493,68.0184989 L43.905493,68.0184989 L43.9418118,68.0728245 C43.8533487,67.9378572 43.8367111,67.9235498 43.8550792,67.9334282 C43.877113,67.945278 43.8626956,67.9411762 43.713445,67.9411762 L56.2226972,67.9411764 C55.9836047,67.9411764 56.0772981,67.8898072 55.9780413,68.0491334 C56.0381946,67.9575444 56.1594473,67.7699763 56.3329844,67.4967044 C56.6270204,67.0336809 56.9559062,66.5052293 57.3107945,65.9217167 C58.3257273,64.2529485 59.340726,62.4853157 60.2842754,60.7044058 C61.0112358,59.3322986 61.6656364,58.0078206 62.22927,56.7547122 C63.5971929,53.7134535 64.3448826,51.2544474 64.3448826,49.8463469 C64.3448826,42.0112382 57.9150521,35.6470588 49.968071,35.6470588 C42.0210899,35.6470588 35.5912594,42.0112382 35.5912594,49.8463469 C35.5912594,51.3096771 36.2226369,53.5744869 37.4011703,56.3190228 C38.0224453,57.7658309 38.7763482,59.3060334 39.6336549,60.9031695 C40.5706178,62.6487024 41.578674,64.3668995 42.5864878,65.978189 C42.9386833,66.5412781 43.264928,67.0496178 43.5563873,67.4936034 C43.7278606,67.7548119 43.8471634,67.9329462 43.905493,68.0184989 L43.905493,68.0184989 Z M40.9342714,70.0375497 C40.9342714,70.0375497 31.9970565,56.9292414 31.9970565,49.8463469 C31.9970565,40.022569 40.0429537,32.0588235 49.968071,32.0588235 C59.8931882,32.0588235 67.9390855,40.022569 67.9390855,49.8463469 C67.9390855,56.3813114 58.9837479,70.0166534 58.9837479,70.0166534 C58.4628734,70.8455998 57.217553,71.5294117 56.2226971,71.5294117 L43.7134449,71.5294115 C42.7110928,71.5294114 41.4743107,70.8614822 40.9342714,70.0375497 Z M42.7796652,76.0147059 L57.1564768,76.0147059 C58.1489885,76.0147059 58.9535782,75.2114521 58.9535782,74.2205882 C58.9535782,73.2297244 58.1489885,72.4264706 57.1564768,72.4264706 L42.7796652,72.4264706 C41.7871535,72.4264706 40.9825637,73.2297244 40.9825637,74.2205882 C40.9825637,75.2114521 41.7871535,76.0147059 42.7796652,76.0147059 Z M42.7796652,80.5 L57.1564768,80.5 C58.1489885,80.5 58.9535782,79.6967462 58.9535782,78.7058824 C58.9535782,77.7150185 58.1489885,76.9117647 57.1564768,76.9117647 L42.7796652,76.9117647 C41.7871535,76.9117647 40.9825637,77.7150185 40.9825637,78.7058824 C40.9825637,79.6967462 41.7871535,80.5 42.7796652,80.5 Z M70.7437501,28.5156677 L66.9315223,32.321566 C66.2297105,33.0222125 66.2297105,34.158185 66.9315223,34.8588315 C67.633334,35.559478 68.7711957,35.559478 69.4730075,34.8588315 L73.2852354,31.0529332 C73.9870471,30.3522867 73.9870471,29.2163142 73.2852354,28.5156677 C72.5834236,27.8150212 71.4455619,27.8150212 70.7437501,28.5156677 Z M25.5981889,31.0529332 L29.4104168,34.8588315 C30.1122286,35.559478 31.2500903,35.559478 31.951902,34.8588315 C32.6537138,34.158185 32.6537138,33.0222125 31.951902,32.321566 L28.1396742,28.5156677 C27.4378624,27.8150212 26.3000007,27.8150212 25.5981889,28.5156677 C24.8963772,29.2163142 24.8963772,30.3522867 25.5981889,31.0529332 Z M79.2028986,49.5833466 L73.8115942,49.5833466 C72.8190825,49.5833466 72.0144928,50.3866004 72.0144928,51.3774642 C72.0144928,52.3683281 72.8190825,53.1715819 73.8115942,53.1715819 L79.2028986,53.1715819 C80.1954103,53.1715819 81,52.3683281 81,51.3774642 C81,50.3866004 80.1954103,49.5833466 79.2028986,49.5833466 Z M26.1884058,49.5833466 L20.7971014,49.5833466 C19.8045897,49.5833466 19,50.3866004 19,51.3774642 C19,52.3683281 19.8045897,53.1715819 20.7971014,53.1715819 L26.1884058,53.1715819 C27.1809175,53.1715819 27.9855072,52.3683281 27.9855072,51.3774642 C27.9855072,50.3866004 27.1809175,49.5833466 26.1884058,49.5833466 Z M48.1709695,21.2941176 L48.1709695,26.6764706 C48.1709695,27.6673344 48.9755593,28.4705882 49.968071,28.4705882 C50.9605827,28.4705882 51.7651724,27.6673344 51.7651724,26.6764706 L51.7651724,21.2941176 C51.7651724,20.3032538 50.9605827,19.5 49.968071,19.5 C48.9755593,19.5 48.1709695,20.3032538 48.1709695,21.2941176 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"checkbox-off",use:"checkbox-off-usage",viewBox:"0 0 52 52",content:'<symbol viewBox="0 0 52 52" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="checkbox-off">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>checkbox-off</title>\n    <path d="M4,2.0065993 L4,2.0065993 L4,49.9934007 C4,48.8910287 3.1102492,48 2.0065993,48 L49.9934007,48 C48.8910287,48 48,48.8897508 48,49.9934007 L48,2.0065993 C48,3.1089713 48.8897508,4 49.9934007,4 L2.0065993,4 C3.1089713,4 4,3.1102492 4,2.0065993 L4,2.0065993 L4,2.0065993 L4,2.0065993 Z M0,2.0065993 C0,0.8983851 0.9025574,0 2.0065993,0 L49.9934007,0 C51.1016149,0 52,0.9025574 52,2.0065993 L52,49.9934007 C52,51.1016149 51.0974426,52 49.9934007,52 L2.0065993,52 C0.8983851,52 0,51.0974426 0,49.9934007 L0,2.0065993 L0,2.0065993 L0,2.0065993 L0,2.0065993 Z" id="checkbox-off_Combined-Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"checkbox-on",use:"checkbox-on-usage",viewBox:"0 0 52 52",content:'<symbol viewBox="0 0 52 52" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="checkbox-on">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>checkbox-on</title>\n    <path d="M4,2.0065993 L4,2.0065993 L4,49.9934007 C4,48.8910287 3.1102492,48 2.0065993,48 L49.9934007,48 C48.8910287,48 48,48.8897508 48,49.9934007 L48,2.0065993 C48,3.1089713 48.8897508,4 49.9934007,4 L2.0065993,4 C3.1089713,4 4,3.1102492 4,2.0065993 L4,2.0065993 L4,2.0065993 L4,2.0065993 Z M0,2.0065993 C0,0.8983851 0.9025574,0 2.0065993,0 L49.9934007,0 C51.1016149,0 52,0.9025574 52,2.0065993 L52,49.9934007 C52,51.1016149 51.0974426,52 49.9934007,52 L2.0065993,52 C0.8983851,52 0,51.0974426 0,49.9934007 L0,2.0065993 L0,2.0065993 L0,2.0065993 L0,2.0065993 Z M8,9.9997073 C8,8.8952994 8.8898926,8 9.9997073,8 L42.0002927,8 C43.1047006,8 44,8.8898926 44,9.9997073 L44,42.0002927 C44,43.1047006 43.1101074,44 42.0002927,44 L9.9997073,44 C8.8952994,44 8,43.1101074 8,42.0002927 L8,9.9997073 L8,9.9997073 Z" id="checkbox-on_checkbox-on" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"close",use:"close-usage",viewBox:"0 0 10 10",content:'<symbol viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="close">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>path-1</title>\n    <desc>Created with Sketch.</desc>\n            <path d="M6.4142136,5 L9.2426407,7.8284271 C9.633165,8.2189514 9.633165,8.8521164 9.2426407,9.2426407 C8.8521164,9.633165 8.2189514,9.633165 7.8284271,9.2426407 L5,6.4142136 L2.17157288,9.2426407 C1.78104858,9.633165 1.1478836,9.633165 0.75735931,9.2426407 C0.36683502,8.8521164 0.36683502,8.2189514 0.75735931,7.8284271 L3.58578644,5 L0.75735931,2.17157288 C0.36683502,1.78104858 0.36683502,1.1478836 0.75735931,0.75735931 C1.1478836,0.36683502 1.78104858,0.36683502 2.17157288,0.75735931 L5,3.58578644 L7.8284271,0.75735931 C8.2189514,0.36683502 8.8521164,0.36683502 9.2426407,0.75735931 C9.633165,1.1478836 9.633165,1.78104858 9.2426407,2.17157288 L6.4142136,5 Z" id="close_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"closed",use:"closed-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="closed">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>closed</title>\n    <path d="M41.0634084,72.7146574 C39.647677,74.1014485 38.5,73.6041667 38.5,71.5972562 L38.5,28.4017241 C38.5,26.3978094 39.6481621,25.898007 41.0634084,27.2843228 L62.9667215,48.7398895 C63.6768971,49.4355477 63.6786213,50.5617436 62.9667215,51.2590908 L41.0634084,72.7146574 L41.0634084,72.7146574 Z" id="closed_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"decrease",use:"decrease-usage",viewBox:"0 0 50 6",content:'<symbol viewBox="0 0 50 6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="decrease">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>decrease</title>\n    <path d="M46.6183575,0.657894737 L3.30112724,0.657894737 C1.44927539,0.657894737 0,1.66880618 0,2.96052632 C0,4.25224645 1.44927539,5.26315789 3.30112724,5.26315789 L46.6988728,5.26315789 C48.5507246,5.26315789 50,4.25224645 50,2.96052632 C49.9194847,1.66880618 48.4702093,0.657894737 46.6183575,0.657894737 L46.6183575,0.657894737 L46.6183575,0.657894737 Z" id="decrease_Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"download",use:"download-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="download">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>download</title>\n    <path d="M48.6146237,69.0577089 C48.7941056,69.2368648 49.0184581,69.3712317 49.2428105,69.4608096 L49.287681,69.4608096 C49.5120334,69.5503876 49.7363859,69.5951766 50.0056088,69.5951766 C50.2748317,69.5951766 50.4991842,69.5503876 50.7235366,69.4608096 L50.7684071,69.4608096 C50.9927595,69.3712317 51.217112,69.2368648 51.3965939,69.0577089 L76.9279013,43.5727821 C77.6906996,42.8113695 77.6906996,41.6020672 76.9279013,40.8406546 C76.165103,40.079242 74.9535998,40.079242 74.1908016,40.8406546 L51.8901693,63.0111972 L51.8901693,25.9259259 C51.8901693,24.8509905 51.03763,24 49.9607383,24 C48.8838466,24 48.0313074,24.8509905 48.0313074,25.9259259 L48.0313074,63.0559862 L25.8204161,40.8406546 C25.0576178,40.079242 23.8461146,40.079242 23.0833163,40.8406546 C22.3205181,41.6020672 22.3205181,42.8113695 23.0833163,43.5727821 L48.6146237,69.0577089 Z M24.429431,76 L75.4920457,76 C76.5689374,76 77.4214766,75.1490095 77.4214766,74.0740741 C77.4214766,72.9991387 76.5689374,72.1481481 75.4920457,72.1481481 L24.429431,72.1481481 C23.3525393,72.1481481 22.5,72.9991387 22.5,74.0740741 C22.5,75.1042205 23.3525393,76 24.429431,76 L24.429431,76 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"expand",use:"expand-usage",viewBox:"0 0 52 51",content:'<symbol viewBox="0 0 52 51" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="expand">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>expand</title>\n    <path d="M1.7243713,50.7200889 C1.9874281,50.8076567 2.206642,50.8514407 2.4258561,50.8514407 L21.7118791,50.8514407 C22.7202635,50.8514407 23.509434,50.0633298 23.509434,49.0562993 C23.509434,48.0492687 22.7202635,47.2611578 21.7118791,47.2611578 L6.7662934,47.2611578 L22.4067219,31.6405647 C23.1082067,30.9400217 23.1082067,29.8016394 22.4067219,29.1010964 C22.0559795,28.7508249 21.6175514,28.5756892 21.1352807,28.5756892 C20.6968527,28.5756892 20.2145818,28.7508249 19.8638394,29.1010964 L4.2234109,44.7216894 L4.2234109,29.7951414 C4.2234109,28.7881108 3.4342405,28 2.4258561,28 C1.4174717,28 0.6283012,28.7881108 0.6283012,29.7951414 L0.6283012,49.0562993 C0.5844584,49.275219 0.672144,49.4941387 0.7159868,49.7130583 C0.9352008,50.1508977 1.2859433,50.5011692 1.7243713,50.7200889 L1.7243713,50.7200889 L1.7243713,50.7200889 Z M50.4014149,0.1313518 C50.1383581,0.043784 49.9191441,0 49.6999301,0 L30.413907,0 C29.4055226,0 28.6163522,0.788111 28.6163522,1.7951415 C28.6163522,2.802172 29.4055226,3.5902829 30.413907,3.5902829 L45.3594927,3.5902829 L29.7190643,19.210876 C29.0175795,19.911419 29.0175795,21.0498014 29.7190643,21.7503444 C30.0698066,22.1006159 30.5082347,22.2757516 30.9905055,22.2757516 C31.4289335,22.2757516 31.9112043,22.1006159 32.2619467,21.7503444 L47.9023752,6.1297513 L47.9023752,21.0562993 C47.9023752,22.0633299 48.6915457,22.8514408 49.6999301,22.8514408 C50.7083145,22.8514408 51.4974849,22.0633299 51.4974849,21.0562993 L51.4974849,1.7951415 C51.5413278,1.5762218 51.4536421,1.3573021 51.4097994,1.1383825 C51.1905853,0.7005431 50.8398429,0.3502716 50.4014149,0.1313518 L50.4014149,0.1313518 L50.4014149,0.1313518 Z" id="expand_shrink" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"eye",use:"eye-usage",viewBox:"0 0 50 33",content:'<symbol viewBox="0 0 50 33" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="eye">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>eye</title>\n    <path d="M42.1662242,24.3586406 C44.0435399,22.7016904 45.7449706,20.9295613 47.2427557,19.1567113 C47.7678617,18.5351709 48.2306906,17.9570072 48.6275649,17.4365285 C48.868826,17.120128 49.0364997,16.8903077 49.1268396,16.7613928 L49.6424337,16.025641 L49.1268396,15.2898892 C49.0364997,15.1609744 48.868826,14.931154 48.6275649,14.6147535 C48.2306906,14.0942748 47.7678617,13.5161112 47.2427557,12.8945707 C45.7449706,11.1217208 44.0435399,9.34959167 42.1662242,7.69264141 C36.7338884,2.89797058 30.9453653,0 25,0 C19.0546347,0 13.2661116,2.89797058 7.83377577,7.69264141 C5.95646013,9.34959167 4.25502942,11.1217208 2.75724429,12.8945707 C2.23213833,13.5161112 1.76930942,14.0942748 1.37243506,14.6147535 C1.13117404,14.931154 0.963500256,15.1609744 0.873160385,15.2898892 L0.357566346,16.025641 L0.873160385,16.7613928 C0.963500256,16.8903077 1.13117404,17.120128 1.37243506,17.4365285 C1.76930942,17.9570072 2.23213833,18.5351709 2.75724429,19.1567113 C4.25502942,20.9295613 5.95646013,22.7016904 7.83377577,24.3586406 C13.2661116,29.1533115 19.0546347,32.0512821 25,32.0512821 C30.9453653,32.0512821 36.7338884,29.1533115 42.1662242,24.3586406 L42.1662242,24.3586406 Z M23.3974359,17.6990553 C25.3445937,17.6990553 26.9230769,16.1205721 26.9230769,14.1734143 C26.9230769,12.2262565 25.3445937,10.6477733 23.3974359,10.6477733 C21.4502781,10.6477733 19.8717949,12.2262565 19.8717949,14.1734143 C19.8717949,16.1205721 21.4502781,17.6990553 23.3974359,17.6990553 L23.3974359,17.6990553 Z M9.53052667,22.4362312 C7.75375327,20.8680212 3.4114009,16.3133615 3.4114009,16.025641 C3.4114009,16.025641 7.75375327,11.1832609 9.53052667,9.6150509 C14.538445,5.19497814 19.7934617,2.56410256 25,2.56410256 C30.2065383,2.56410256 35.461555,5.19497814 40.4694733,9.6150509 C42.2462467,11.1832609 43.8624879,12.8666606 45.2840924,14.5493396 C45.7807728,15.1372342 46.5885991,16.025641 46.5885991,16.025641 C46.5885991,16.025641 45.7807728,16.9140478 45.2840924,17.5019425 C43.8624879,19.1846214 42.2462467,20.8680212 40.4694733,22.4362312 C35.461555,26.8563039 30.2065383,29.4871795 25,29.4871795 C19.7934617,29.4871795 14.538445,26.8563039 9.53052667,22.4362312 L9.53052667,22.4362312 Z M25.1282051,24.8785425 L25.1282051,24.8785425 C30.0846067,24.8785425 34.1025641,20.8605851 34.1025641,15.9041835 C34.1025641,10.9477819 30.0846067,6.92982455 25.1282051,6.92982455 C20.1718035,6.92982455 16.1538462,10.9477819 16.1538462,15.9041835 C16.1538462,20.8605851 20.1718035,24.8785425 25.1282051,24.8785425 L25.1282051,24.8785425 L25.1282051,24.8785425 Z M25.1282051,27.4426451 L25.1282051,27.4426451 C18.7556888,27.4426451 13.5897436,22.2766999 13.5897436,15.9041835 C13.5897436,9.53166718 18.7556888,4.36572199 25.1282051,4.36572199 C31.5007215,4.36572199 36.6666667,9.53166718 36.6666667,15.9041835 C36.6666667,22.2766999 31.5007215,27.4426451 25.1282051,27.4426451 L25.1282051,27.4426451 L25.1282051,27.4426451 Z" id="eye_Combined-Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"external-link",use:"external-link-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="external-link">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Mask</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="external-link_Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="external-link_external-20" fill-rule="nonzero">\n            <g id="external-link_Mask">\n                <path d="M12.4659351,2 L10,2 C9.4477153,2 9,1.55228475 9,1 C9,0.44771525 9.4477153,0 10,0 L15,0 C15.5522847,0 16,0.44771525 16,1 L16,6 C16,6.55228475 15.5522847,7 15,7 C14.4477153,7 14,6.55228475 14,6 L14,3.29436222 L8.7071068,8.5872554 C8.3165825,8.9777797 7.68341751,8.9777797 7.29289322,8.5872554 C6.90236893,8.1967311 6.90236893,7.56356617 7.29289322,7.17304188 L12.4659351,2 Z M14,11 C14,10.4477153 14.4477153,10 15,10 C15.5522847,10 16,10.4477153 16,11 L16,15 C16,15.5522847 15.5522847,16 15,16 L1,16 C0.44771525,16 0,15.5522847 0,15 L0,1 C0,0.44771525 0.44771525,0 1,0 L5,0 C5.55228475,0 6,0.44771525 6,1 C6,1.55228475 5.55228475,2 5,2 L2,2 L2,14 L14,14 L14,11 Z" id="external-link_path-1" />\n            </g>\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"feedback",use:"feedback-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="feedback">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>feedback</title>\n    <path d="M74.1652324,64.1460446 L68.2581756,64.1460446 L68.2581756,70.1703854 C68.2581756,70.8843813 67.8554217,71.5091278 67.2289157,71.821501 C66.9604131,71.9553753 66.6919105,72 66.4234079,72 C66.020654,72 65.6179002,71.8661258 65.3046472,71.643002 L55.4595525,64.1906694 L25.8347676,64.1906694 C24.8055077,64.1906694 24,63.3874239 24,62.3610548 L24,29.8296146 C24,28.8032454 24.8055077,28 25.8347676,28 L74.1652324,28 C75.1944923,28 76,28.8032454 76,29.8296146 L76,62.31643 C76,63.3427992 75.1497418,64.1460446 74.1652324,64.1460446 Z M27.7142857,31.6592292 L27.7142857,60.4868154 L56.0860585,60.4868154 C56.4888124,60.4868154 56.8915663,60.6206897 57.2048193,60.8438134 L64.5886403,66.4665314 L64.5886403,62.31643 C64.5886403,61.2900609 65.394148,60.4868154 66.4234079,60.4868154 L72.3304647,60.4868154 L72.3304647,31.6592292 L27.7142857,31.6592292 Z M62.5517241,50.4489796 C64.5323315,50.4489796 66.137931,48.8408595 66.137931,46.8571429 C66.137931,44.8734262 64.5323315,43.2653061 62.5517241,43.2653061 C60.5711168,43.2653061 58.9655172,44.8734262 58.9655172,46.8571429 C58.9655172,48.8408595 60.5711168,50.4489796 62.5517241,50.4489796 Z M37.4482759,50.4489796 C39.4288832,50.4489796 41.0344828,48.8408595 41.0344828,46.8571429 C41.0344828,44.8734262 39.4288832,43.2653061 37.4482759,43.2653061 C35.4676685,43.2653061 33.862069,44.8734262 33.862069,46.8571429 C33.862069,48.8408595 35.4676685,50.4489796 37.4482759,50.4489796 Z M50,50.4489796 C51.9806074,50.4489796 53.5862069,48.8408595 53.5862069,46.8571429 C53.5862069,44.8734262 51.9806074,43.2653061 50,43.2653061 C48.0193926,43.2653061 46.4137931,44.8734262 46.4137931,46.8571429 C46.4137931,48.8408595 48.0193926,50.4489796 50,50.4489796 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"folder",use:"folder-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="folder">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>folder</title>\n    <path d="M27.1,28.6064707 L27.1,28.6064707 L27.1,66.3935293 C27.1,66.3996507 27.1003481,66.4 27.094687,66.4 L71.905313,66.4 C71.8988831,66.4 71.9,66.3988818 71.9,66.398371 L71.9,34.001629 C71.9,34.0002686 71.8997318,34 71.9032879,34 L50.3965517,34 L48.8087966,34 L47.738151,32.8275307 L44.0260242,28.7623625 C44.0342721,28.7713948 43.6470637,28.6 43.6679868,28.6 L27.102562,28.6 C27.103149,28.6 27.1,28.603151 27.1,28.6064707 L27.1,28.6064707 Z M23.5,28.6064707 C23.5,26.614672 25.1151769,25 27.102562,25 L43.6679868,25 C44.6607354,25 46.0120647,25.5985268 46.6844249,26.3348318 L50.3965517,30.4 L71.9032879,30.4 C73.8896972,30.4 75.5,32.0137821 75.5,34.001629 L75.5,66.398371 C75.5,68.3874958 73.8867221,70 71.905313,70 L27.094687,70 C25.1093962,70 23.5,68.3851586 23.5,66.3935293 L23.5,28.6064707 L23.5,28.6064707 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"folder-open",use:"folder-open-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="folder-open">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>folder-open</title>\n    <path d="M27.2973939,57.8759716 C27.2986637,46.6766371 27.3,28.7961507 27.3,28.7961507 C27.3,28.8024306 45.7920728,28.8 45.7920728,28.8 C46.2780001,28.8 47.1532477,29.1854728 47.4782069,29.5401519 L51.2244511,33.629016 L51.7595409,34.2130435 L52.5516326,34.2130435 L76.0042761,34.2130435 C76.0015922,34.2130435 76.0002609,38.8333645 75.9999157,40.25 L40.2758955,40.25 C37.6004436,40.25 34.7003543,42.0780781 33.5807464,44.4673177 L33.5807464,44.4673177 L27.2973939,57.8759716 Z M79.5998231,40.25 L79.5998231,34.2214526 C79.5998231,32.227922 77.9937518,30.6130435 76.0042761,30.6130435 L52.5516326,30.6130435 L53.8788142,31.197071 L50.1325701,27.1082069 C49.1259789,26.009556 47.2878159,25.2 45.7920728,25.2 L27.3078947,25.2 C25.3203886,25.2 23.7,26.8079885 23.7,28.7961507 L23.7,66.7038493 C23.7,66.7986415 23.7081779,66.8843838 23.7237536,66.9617238 C23.933794,68.8394517 25.5213409,70.25 27.8681473,70.25 L72.124106,70.25 C74.7995579,70.25 77.6996472,68.4219219 78.8192551,66.0326823 L88.2336747,45.9423416 C89.6094306,43.0064828 87.812512,40.25 84.5318542,40.25 L79.5998231,40.25 Z M36.8301463,45.9423416 C37.3652329,44.8004686 38.9969601,43.7719056 40.2758955,43.7719056 L84.5318542,43.7719056 C85.2036204,43.7719056 85.2655967,43.8669775 84.9842747,44.4673177 L75.5698552,64.5576584 C75.0347686,65.6995314 73.4030415,66.7280944 72.124106,66.7280944 L27.8681473,66.7280944 C27.1963811,66.7280944 27.1344048,66.6330225 27.4157268,66.0326823 L36.8301463,45.9423416 L36.8301463,45.9423416 Z" id="folder-open_Combined-Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"forward",use:"forward-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="forward">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>backward</title>\n    <path d="M48.3803476,44.969474 L48.3803476,26.3463056 C48.3803476,24.3511185 47.2702251,23.9033983 45.9008198,25.3451112 L23.0179163,49.4362805 C22.3259342,50.1648008 22.3287897,51.338085 23.0179163,52.0635989 L45.9008198,76.1547682 C47.2708188,77.5971061 48.3803476,77.1482311 48.3803476,75.1535738 L48.3803476,56.5304054 L67.0204722,76.1547682 C68.3904713,77.5971061 69.5,77.1482311 69.5,75.1535738 L69.5,26.3463056 C69.5,24.3511185 68.3898776,23.9033983 67.0204722,25.3451112 L48.3803476,44.969474 L48.3803476,44.969474 Z" id="forward_path-1" transform="scale(-1,1) translate(-100,0)" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"geolocation",use:"geolocation-usage",viewBox:"0 0 50 50",content:'<symbol viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="geolocation">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>geolocation</title>\n    <path d="M25.2083333,40.9848485 L25.2083333,40.9848485 C33.9214621,40.9848485 40.9848485,33.9214621 40.9848485,25.2083333 C40.9848485,16.4952046 33.9214621,9.43181817 25.2083333,9.43181817 C16.4952046,9.43181817 9.43181817,16.4952046 9.43181817,25.2083333 C9.43181817,33.9214621 16.4952046,40.9848485 25.2083333,40.9848485 L25.2083333,40.9848485 L25.2083333,40.9848485 Z M6.485903,23.7069504 C7.21162342,14.5314545 14.5314545,7.21162342 23.7069504,6.485903 C23.7061912,6.46628533 23.7058081,6.44657125 23.7058081,6.42676767 L23.7058081,1.91919192 C23.7058081,1.08937017 24.3785116,0.416666667 25.2083333,0.416666667 C26.0381551,0.416666667 26.7108586,1.08937017 26.7108586,1.91919192 L26.7108586,6.42676767 C26.7108586,6.44657125 26.7104755,6.46628533 26.7097162,6.485903 C35.8852122,7.21162342 43.2050433,14.5314545 43.9307637,23.7069504 C43.9503813,23.7061912 43.9700954,23.7058081 43.989899,23.7058081 L48.4974747,23.7058081 C49.3272965,23.7058081 50,24.3785116 50,25.2083333 C50,26.0381551 49.3272965,26.7108586 48.4974747,26.7108586 L43.989899,26.7108586 C43.9700954,26.7108586 43.9503813,26.7104755 43.9307637,26.7097162 C43.2050433,35.8852122 35.8852122,43.2050433 26.7097162,43.9307637 C26.7104755,43.9503813 26.7108586,43.9700954 26.7108586,43.989899 L26.7108586,48.4974747 C26.7108586,49.3272965 26.0381551,50 25.2083333,50 C24.3785116,50 23.7058081,49.3272965 23.7058081,48.4974747 L23.7058081,43.989899 C23.7058081,43.9700954 23.7061912,43.9503813 23.7069504,43.9307637 C14.5314545,43.2050433 7.21162342,35.8852122 6.485903,26.7097162 C6.46628533,26.7104755 6.44657125,26.7108586 6.42676767,26.7108586 L1.91919192,26.7108586 C1.08937017,26.7108586 0.416666667,26.0381551 0.416666667,25.2083333 C0.416666667,24.3785116 1.08937017,23.7058081 1.91919192,23.7058081 L6.42676767,23.7058081 C6.44657125,23.7058081 6.46628533,23.7061912 6.485903,23.7069504 L6.485903,23.7069504 Z M25.2083333,29.7159091 C27.6977987,29.7159091 29.7159091,27.6977987 29.7159091,25.2083333 C29.7159091,22.718868 27.6977987,20.7007576 25.2083333,20.7007576 C22.718868,20.7007576 20.7007576,22.718868 20.7007576,25.2083333 C20.7007576,27.6977987 22.718868,29.7159091 25.2083333,29.7159091 L25.2083333,29.7159091 Z" id="geolocation_Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"gallery",use:"gallery-usage",viewBox:"0 0 18 18",content:'<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="gallery">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>path-1</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="gallery_Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="gallery_gallery-20" fill-rule="nonzero">\n            <g id="gallery_Mask">\n                <path d="M2,2 L2,6 L6,6 L6,2 L2,2 Z M1,0 L7,0 C7.55228475,0 8,0.44771525 8,1 L8,7 C8,7.55228475 7.55228475,8 7,8 L1,8 C0.44771525,8 0,7.55228475 0,7 L0,1 C0,0.44771525 0.44771525,0 1,0 Z M11,0 L17,0 C17.5522847,0 18,0.44771525 18,1 L18,7 C18,7.55228475 17.5522847,8 17,8 L11,8 C10.4477153,8 10,7.55228475 10,7 L10,1 C10,0.44771525 10.4477153,0 11,0 Z M12,2 L12,6 L16,6 L16,2 L12,2 Z M1,10 L7,10 C7.55228475,10 8,10.4477153 8,11 L8,17 C8,17.5522847 7.55228475,18 7,18 L1,18 C0.44771525,18 0,17.5522847 0,17 L0,11 C0,10.4477153 0.44771525,10 1,10 Z M2,12 L2,16 L6,16 L6,12 L2,12 Z M11,10 L17,10 C17.5522847,10 18,10.4477153 18,11 L18,17 C18,17.5522847 17.5522847,18 17,18 L11,18 C10.4477153,18 10,17.5522847 10,17 L10,11 C10,10.4477153 10.4477153,10 11,10 Z M12,12 L12,16 L16,16 L16,12 L12,12 Z" id="gallery_path-1" />\n            </g>\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"increase",use:"increase-usage",viewBox:"0 0 50 50",content:'<symbol viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="increase">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>increase</title>\n    <path d="M0,25 C0,25.3514939 0.131810207,25.659051 0.373462207,25.900703 C0.615114207,26.142355 0.922671379,26.2741652 1.27416517,26.2741652 L23.7258348,26.2741652 L23.7258348,48.7258348 C23.7258348,49.0773286 23.857645,49.3848858 24.099297,49.6265378 C24.3189807,49.8462214 24.6485061,50 25,50 C25.7029877,50 26.2741652,49.4288225 26.2741652,48.7258348 L26.2741652,26.2741652 L48.7258348,26.2741652 C49.4288225,26.2741652 50,25.7029877 50,25 C50,24.2970123 49.4288225,23.7258348 48.7258348,23.7258348 L26.2741652,23.7258348 L26.2741652,1.27416517 C26.2741652,0.571177517 25.7029877,0 25,0 C24.2970123,0 23.7258348,0.571177517 23.7258348,1.27416517 L23.7258348,23.7258348 L1.27416517,23.7258348 C0.571177517,23.7258348 0,24.2970123 0,25 L0,25 L0,25 L0,25 Z" id="increase_Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"left",use:"left-usage",viewBox:"0 0 7 11",content:'<symbol viewBox="0 0 7 11" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="left">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>path-1</title>\n    <desc>Created with Sketch.</desc>\n        <path d="M2.41421356,5 L5.7071068,8.2928932 C6.0976311,8.6834175 6.0976311,9.3165825 5.7071068,9.7071068 C5.3165825,10.0976311 4.6834175,10.0976311 4.2928932,9.7071068 L0.29289322,5.7071068 C-0.09763107,5.3165825 -0.09763107,4.68341751 0.29289322,4.29289322 L4.2928932,0.29289322 C4.6834175,-0.09763107 5.3165825,-0.09763107 5.7071068,0.29289322 C6.0976311,0.68341751 6.0976311,1.31658249 5.7071068,1.70710678 L2.41421356,5 Z" id="left_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"line-chart",use:"line-chart-usage",viewBox:"0 0 95 95",content:'<symbol viewBox="0 0 95 95" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="line-chart">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>line-chart</title>\n    <path d="M8.70973308,9.55172414 L8.70973308,34.1206897 L14.2844827,34.1206897 C16.0936914,34.1206897 17.5603449,35.587343 17.5603449,37.3965517 C17.5603449,39.2057604 16.0936914,40.6724139 14.2844827,40.6724139 L8.70973308,40.6724139 L8.70973308,65.2413793 L14.2844827,65.2413793 C16.0936914,65.2413793 17.5603449,66.7080328 17.5603449,68.5172414 C17.5603449,70.3264501 16.0936914,71.7931034 14.2844827,71.7931034 L8.70973308,71.7931034 L8.70973308,91.2902669 L93.6451335,91.2902669 C95.5271317,91.2902669 97,92.7631352 97,94.6451335 C97,96.5271317 95.5271317,98 93.6451335,98 L5.35486654,98 C3.47286831,98 2,96.5271317 2,94.6451335 L2,6.35486654 C2,4.47286831 3.47286831,3 5.35486654,3 C5.48233827,3 5.6079332,3.00675706 5.73132066,3.0199405 C5.85067501,3.00676418 5.97196133,3 6.09482757,3 L14.2844827,3 C16.0936914,3 17.5603449,4.46665348 17.5603449,6.27586198 C17.5603449,8.08507066 16.0936914,9.55172414 14.2844827,9.55172414 L8.70973308,9.55172414 L8.70973308,9.55172414 Z M44.7942486,50.500076 L59.188643,59.0842764 C60.6746426,59.9638112 62.5882088,59.5388313 63.5622056,58.1129609 L89.877419,19.5891397 C90.897909,18.0952066 90.5141074,16.0568639 89.0201743,15.0363739 C87.526241,14.0158841 85.4878984,14.3996858 84.4674085,15.8936189 L59.1886428,51.7251627 L45.9168667,43.6156383 C44.3774009,42.7044577 42.3916334,43.1967776 41.4561045,44.7215696 L18.8629675,81.5454762 C17.916824,83.0875685 18.3999359,85.1046821 19.9420279,86.0508256 C21.4841202,86.9969692 23.5012338,86.5138573 24.4473774,84.971765 L44.7942486,50.500076 L44.7942486,50.500076 Z" id="line-chart_Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"link",use:"link-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="link">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>link</title>\n    <path d="M37.1900258,44.7016337 L26.1461737,55.7901978 C23.2846088,58.6517627 23.2846088,63.2570937 26.1461737,66.1186586 L33.8813414,73.8538263 C35.2674119,75.2398968 37.1006019,76 39.0679278,76 C41.0352537,76 42.8684437,75.2398968 44.2545142,73.8538263 L55.2536543,62.7652623 C56.6397248,61.3791917 57.399828,59.5460017 57.399828,57.5786758 C57.399828,57.4892519 57.399828,57.44454 57.3551161,57.3551161 C57.44454,57.3551161 57.4892519,57.399828 57.5786758,57.399828 C59.5460017,57.399828 61.3791917,56.6397248 62.7652623,55.2536543 L73.8538263,44.1650903 C76.7153912,41.3035254 76.7153912,36.6981943 73.8538263,33.8366294 L66.1186586,26.1014617 C64.7325881,24.7601032 62.8993981,24 60.9320722,24 C58.9647463,24 57.1762683,24.7601032 55.7901978,26.1461737 L44.7016337,37.1900258 C43.3155632,38.5760963 42.55546,40.4092863 42.55546,42.3766122 C42.55546,42.4660361 42.55546,42.5107481 42.600172,42.600172 C42.5107481,42.600172 42.4660361,42.55546 42.3766122,42.55546 C40.4092863,42.55546 38.5760963,43.3155632 37.1900258,44.7016337 L37.1900258,44.7016337 Z M47.5184867,40.0068788 L58.6070507,28.9183147 C59.2330181,28.2923474 60.0825451,27.9346518 60.9767842,27.9346518 C61.8710232,27.9346518 62.7205503,28.2923474 63.3465176,28.9183147 L71.0816853,36.6534824 C72.3783319,37.950129 72.3783319,40.0515907 71.0816853,41.3482373 L59.9484093,52.4368014 C58.6964746,53.688736 56.505589,53.688736 55.2536543,52.4368014 L52.794497,49.977644 L55.0300946,47.7420464 C55.7901978,46.9819433 55.7901978,45.6852966 55.0300946,44.9251935 C54.2699914,44.1650903 52.9733448,44.1650903 52.2132416,44.9251935 L49.977644,47.1607911 L47.5184867,44.7016337 C46.8925193,44.0756664 46.5348237,43.2261393 46.5348237,42.3319003 C46.5348237,41.4376612 46.8925193,40.6328461 47.5184867,40.0068788 L47.5184867,40.0068788 Z M44.7016337,47.5184867 L47.1607911,49.977644 L44.9251935,52.2132416 C44.1650903,52.9733448 44.1650903,54.2699914 44.9251935,55.0300946 C45.327601,55.4325021 45.8194325,55.61135 46.311264,55.61135 C46.8030954,55.61135 47.3396389,55.4325021 47.6973345,55.0300946 L49.9329321,52.794497 L52.3920894,55.2536543 C53.0180567,55.8796217 53.3757524,56.7291488 53.3757524,57.6233878 C53.3757524,58.5176268 53.0180567,59.3671539 52.3920894,59.9931212 L41.3035254,71.0816853 C40.0515907,72.3336199 37.8607051,72.3336199 36.6087704,71.0816853 L28.9183147,63.3018057 C27.6216681,62.0051591 27.6216681,59.9036973 28.9183147,58.6070507 L40.0068788,47.5184867 C40.6328461,46.8925193 41.4823732,46.5348237 42.3766122,46.5348237 C43.2261393,46.5348237 44.0756664,46.8925193 44.7016337,47.5184867 L44.7016337,47.5184867 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"loader",use:"loader-usage",viewBox:"20 20 60 60",content:'<symbol viewBox="20 20 60 60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="loader">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>loader</title>\n    <path d="M48.1935484,23.8064516 L48.1935484,34.283871 C48.1935484,35.2815466 49.0023243,36.0903226 50,36.0903226 C50.9976757,36.0903226 51.8064516,35.2815466 51.8064516,34.283871 L51.8064516,23.8064516 C51.8064516,22.8087759 50.9976757,22 50,22 C49.0023243,22 48.1935484,22.8087759 48.1935484,23.8064516 L48.1935484,23.8064516 Z M67.2442815,30.2010101 L59.8356272,37.6096644 C59.130164,38.3151276 59.130164,39.4589095 59.8356272,40.1643728 C60.5410905,40.869836 61.6848724,40.869836 62.3903356,40.1643728 L69.7989899,32.7557185 C70.5044531,32.0502553 70.5044531,30.9064734 69.7989899,30.2010101 C69.0935266,29.4955469 67.9497447,29.4955469 67.2442815,30.2010101 L67.2442815,30.2010101 Z M76.1935484,48.1935484 L65.716129,48.1935484 C64.7184534,48.1935484 63.9096774,49.0023243 63.9096774,50 C63.9096774,50.9976757 64.7184534,51.8064516 65.716129,51.8064516 L76.1935484,51.8064516 C77.1912241,51.8064516 78,50.9976757 78,50 C78,49.0023243 77.1912241,48.1935484 76.1935484,48.1935484 L76.1935484,48.1935484 Z M69.7989899,67.2442815 L62.3903356,59.8356272 C61.6848724,59.130164 60.5410905,59.130164 59.8356272,59.8356272 C59.130164,60.5410905 59.130164,61.6848724 59.8356272,62.3903356 L67.2442815,69.7989899 C67.9497447,70.5044531 69.0935266,70.5044531 69.7989899,69.7989899 C70.5044531,69.0935266 70.5044531,67.9497447 69.7989899,67.2442815 L69.7989899,67.2442815 Z M51.8064516,76.1935484 L51.8064516,65.716129 C51.8064516,64.7184534 50.9976757,63.9096774 50,63.9096774 C49.0023243,63.9096774 48.1935484,64.7184534 48.1935484,65.716129 L48.1935484,76.1935484 C48.1935484,77.1912241 49.0023243,78 50,78 C50.9976757,78 51.8064516,77.1912241 51.8064516,76.1935484 L51.8064516,76.1935484 Z M32.7557185,69.7989899 L40.1643728,62.3903356 C40.869836,61.6848724 40.869836,60.5410905 40.1643728,59.8356272 C39.4589095,59.130164 38.3151276,59.130164 37.6096644,59.8356272 L30.2010101,67.2442815 C29.4955469,67.9497447 29.4955469,69.0935266 30.2010101,69.7989899 C30.9064734,70.5044531 32.0502553,70.5044531 32.7557185,69.7989899 L32.7557185,69.7989899 Z M23.8064516,51.8064516 L34.283871,51.8064516 C35.2815466,51.8064516 36.0903226,50.9976757 36.0903226,50 C36.0903226,49.0023243 35.2815466,48.1935484 34.283871,48.1935484 L23.8064516,48.1935484 C22.8087759,48.1935484 22,49.0023243 22,50 C22,50.9976757 22.8087759,51.8064516 23.8064516,51.8064516 L23.8064516,51.8064516 Z M30.2010101,32.7557185 L37.6096644,40.1643728 C38.3151276,40.869836 39.4589095,40.869836 40.1643728,40.1643728 C40.869836,39.4589095 40.869836,38.3151276 40.1643728,37.6096644 L32.7557185,30.2010101 C32.0502553,29.4955469 30.9064734,29.4955469 30.2010101,30.2010101 C29.4955469,30.9064734 29.4955469,32.0502553 30.2010101,32.7557185 L30.2010101,32.7557185 Z" id="loader_Line" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"location",use:"location-usage",viewBox:"0 0 14 18",content:'<symbol viewBox="0 0 14 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="location">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>path-1</title>\n    <desc>Created with Sketch.</desc>\n        <path d="M7,17.4285714 C4.73872363,17.4285714 0,11.5474484 0,7 C0,3.13400675 3.13400675,0 7,0 C10.8659932,0 14,3.13400675 14,7 C14,11.5474484 9.2612764,17.4285714 7,17.4285714 Z M7.6673993,14.8872122 C8.2734276,14.3933661 8.9379548,13.7229582 9.5427492,12.9723615 C11.0737002,11.0723328 12,8.97944642 12,7 C12,4.23857625 9.7614237,2 7,2 C4.23857625,2 2,4.23857625 2,7 C2,8.97944642 2.92629984,11.0723328 4.4572508,12.9723615 C5.06204521,13.7229582 5.72657241,14.3933661 6.33260067,14.8872122 C6.58918949,15.0963038 6.82032354,15.2607994 7,15.3659049 C7.1796765,15.2607994 7.4108105,15.0963038 7.6673993,14.8872122 Z M7,10.5 C5.06700338,10.5 3.5,8.93299662 3.5,7 C3.5,5.06700338 5.06700338,3.5 7,3.5 C8.9329966,3.5 10.5,5.06700338 10.5,7 C10.5,8.93299662 8.9329966,10.5 7,10.5 Z M7,8.5 C7.8284271,8.5 8.5,7.82842712 8.5,7 C8.5,6.17157288 7.8284271,5.5 7,5.5 C6.17157288,5.5 5.5,6.17157288 5.5,7 C5.5,7.82842712 6.17157288,8.5 7,8.5 Z" id="location_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"loop",use:"loop-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="loop">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>repeat</title>\n    <path d="M67.6153315,36 L36.0056329,36 C32.6827817,36 30,38.6797175 30,41.990671 L30,53.1924192 C30,54.2969887 29.1045695,55.1924192 28,55.1924192 C26.8954305,55.1924192 26,54.2969887 26,53.1924192 L26,41.990671 C26,36.4695546 30.4746653,32 36.0056329,32 L67.7522248,32 L62.6178634,26.963241 C61.9276151,26.2853586 61.9276151,25.1862941 62.6178634,24.5084118 C63.3081117,23.8305294 64.4272253,23.8305294 65.1174736,24.5084118 L73.4823138,32.7233942 C74.1725621,33.4012765 74.1725621,34.500341 73.4823138,35.1782234 L65.0172965,43.4915882 C64.3270482,44.1694706 63.2079345,44.1694706 62.5176862,43.4915882 C61.8274379,42.8137059 61.8274379,41.7146414 62.5176862,41.036759 L67.6153315,36 Z M32.3846685,64 L63.9943671,64 C67.3172183,64 70,61.3202825 70,58.009329 L70,46.8075808 C70,45.7030113 70.8954305,44.8075808 72,44.8075808 C73.1045695,44.8075808 74,45.7030113 74,46.8075808 L74,58.009329 C74,63.5304454 69.5253347,68 63.9943671,68 L32.2477752,68 L37.3821366,73.036759 C38.0723849,73.7146414 38.0723849,74.8137059 37.3821366,75.4915882 C36.6918883,76.1694706 35.5727747,76.1694706 34.8825264,75.4915882 L26.5176862,67.2766058 C25.8274379,66.5987235 25.8274379,65.499659 26.5176862,64.8217766 L34.9827035,56.5084118 C35.6729518,55.8305294 36.7920655,55.8305294 37.4823138,56.5084118 C38.1725621,57.1862941 38.1725621,58.2853586 37.4823138,58.963241 L32.3846685,64 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"menu",use:"menu-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="menu">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>menu</title>\n    <path d="M25.2931034,38.1111111 L73.7068966,38.1111111 C74.6972002,38.1111111 75.5,37.3027364 75.5,36.3055556 C75.5,35.3083748 74.6972002,34.5 73.7068966,34.5 L25.2931034,34.5 C24.3027998,34.5 23.5,35.3083748 23.5,36.3055556 C23.5,37.3027364 24.3027998,38.1111111 25.2931034,38.1111111 Z M25.2931034,52.5555556 L73.7068966,52.5555556 C74.6972002,52.5555556 75.5,51.7471808 75.5,50.75 C75.5,49.7528192 74.6972002,48.9444444 73.7068966,48.9444444 L25.2931034,48.9444444 C24.3027998,48.9444444 23.5,49.7528192 23.5,50.75 C23.5,51.7471808 24.3027998,52.5555556 25.2931034,52.5555556 Z M25.2931034,67 L73.7068966,67 C74.6972002,67 75.5,66.1916252 75.5,65.1944444 C75.5,64.1972636 74.6972002,63.3888889 73.7068966,63.3888889 L25.2931034,63.3888889 C24.3027998,63.3888889 23.5,64.1972636 23.5,65.1944444 C23.5,66.1916252 24.3027998,67 25.2931034,67 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"measure",use:"measure-usage",viewBox:"0 0 50 35",content:'<symbol viewBox="0 0 50 35" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="measure">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>measure</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="measure_Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="measure_measure" fill-rule="nonzero">\n            <polygon id="measure_Line-Copy-13" points="23.763771 23.4664354 23.763771 34.4511477 26.2362287 34.4511477 26.2362287 23.4664354" />\n            <polygon id="measure_Line-Copy-14" points="9.70980093 23.4664354 9.70980093 34.4511477 12.1822586 34.4511477 12.1822586 23.4664354" />\n            <polygon id="measure_Line-Copy-15" points="16.7367858 23.4664354 16.7367858 31.2203501 19.2092435 31.2203501 19.2092435 23.4664354" />\n            <polygon id="measure_Line-Copy-20" points="2.68281582 23.4664354 2.68281582 31.2203501 5.15527352 31.2203501 5.15527352 23.4664354" />\n            <polygon id="measure_Line-Copy-17" points="37.8177422 23.4664354 37.8177422 34.4511477 40.2901999 34.4511477 40.2901999 23.4664354" />\n            <polygon id="measure_Line-Copy-19" points="30.7907553 23.4664354 30.7907553 31.2203501 33.263213 31.2203501 33.263213 23.4664354" />\n            <polygon id="measure_Line-Copy-21" points="44.8447266 23.4664354 44.8447266 31.2203501 47.3171843 31.2203501 47.3171843 23.4664354" />\n            <path d="M41.0709748,16.9977683 C36.4145825,16.9977683 32.6398306,13.2230164 32.6398306,8.56662405 C32.6398306,3.91023166 36.4145825,0.1354798 41.0709748,0.1354798 C45.7273672,0.1354798 49.5021191,3.91023166 49.5021191,8.56662405 C49.5021191,13.2230164 45.7273672,16.9977683 41.0709748,16.9977683 Z M41.0709748,12.4977683 C43.2420859,12.4977683 45.0021191,10.7377351 45.0021191,8.56662405 C45.0021191,6.39551303 43.2420859,4.6354798 41.0709748,4.6354798 C38.8998638,4.6354798 37.1398306,6.39551303 37.1398306,8.56662405 C37.1398306,10.7377351 38.8998638,12.4977683 41.0709748,12.4977683 Z" id="measure_Oval-46" />\n            <path d="M8.92902475,16.9977683 C4.27263236,16.9977683 0.4978805,13.2230164 0.4978805,8.56662405 C0.4978805,3.91023166 4.27263236,0.1354798 8.92902475,0.1354798 C13.5854171,0.1354798 17.360169,3.91023166 17.360169,8.56662405 C17.360169,13.2230164 13.5854171,16.9977683 8.92902475,16.9977683 Z M8.92902475,12.4977683 C11.1001358,12.4977683 12.860169,10.7377351 12.860169,8.56662405 C12.860169,6.39551303 11.1001358,4.6354798 8.92902475,4.6354798 C6.75791373,4.6354798 4.9978805,6.39551303 4.9978805,8.56662405 C4.9978805,10.7377351 6.75791373,12.4977683 8.92902475,12.4977683 Z" id="measure_Oval-46-Copy" />\n            <polygon id="measure_Line" points="33.263213 7.00507169 16.7367858 7.00507169 16.7367858 9.47752939 33.263213 9.47752939" />\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"opened",use:"opened-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="opened">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>open</title>\n    <desc>Created with Sketch.</desc>\n    <path d="M27.2853426,40.0634084 C25.8985515,38.647677 26.3958333,37.5 28.4027438,37.5 L71.5982759,37.5 C73.6021906,37.5 74.101993,38.6481621 72.7156772,40.0634084 L51.2601105,61.9667215 C50.5644523,62.6768971 49.4382564,62.6786213 48.7409092,61.9667215 L27.2853426,40.0634084 L27.2853426,40.0634084 L27.2853426,40.0634084 Z" id="opened_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"pause",use:"pause-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="pause">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>pause</title>\n    <path d="M27.5,28.2993347 C27.5,27.3055896 28.296663,26.5 29.2917156,26.5 L43.7082844,26.5 C44.6978216,26.5 45.5,27.315773 45.5,28.2993347 L45.5,71.7006653 C45.5,72.6944104 44.703337,73.5 43.7082844,73.5 L29.2917156,73.5 C28.3021784,73.5 27.5,72.684227 27.5,71.7006653 L27.5,28.2993347 Z M54.5,28.2993347 C54.5,27.3055896 55.296663,26.5 56.2917156,26.5 L70.7082844,26.5 C71.6978216,26.5 72.5,27.315773 72.5,28.2993347 L72.5,71.7006653 C72.5,72.6944104 71.703337,73.5 70.7082844,73.5 L56.2917156,73.5 C55.3021784,73.5 54.5,72.684227 54.5,71.7006653 L54.5,28.2993347 Z" id="pause_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"play",use:"play-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="play">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>play</title>\n    <path d="M35.9973499,73.0785037 C34.0658169,74.1397168 32.5,73.2090253 32.5,70.9911368 L32.5,29.5088632 C32.5,27.2948292 34.0768654,26.3663534 35.9973499,27.4214963 L74.0505688,48.3285037 C75.9821018,49.3897168 75.9710533,51.1163534 74.0505688,52.1714963 L35.9973499,73.0785037 Z" id="play_Triangle-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"radio-off",use:"radio-off-usage",viewBox:"0 0 52 52",content:'<symbol viewBox="0 0 52 52" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="radio-off">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>radio-off</title>\n    <path d="M26,48.4137931 L26,48.4137931 C38.3787961,48.4137931 48.4137931,38.3787961 48.4137931,26 C48.4137931,13.6212039 38.3787961,3.5862069 26,3.5862069 C13.6212039,3.5862069 3.5862069,13.6212039 3.5862069,26 C3.5862069,38.3787961 13.6212039,48.4137931 26,48.4137931 L26,48.4137931 L26,48.4137931 Z M26,52 L26,52 C11.6405965,52 0,40.3594035 0,26 C0,11.6405965 11.6405965,0 26,0 C40.3594035,0 52,11.6405965 52,26 C52,40.3594035 40.3594035,52 26,52 L26,52 L26,52 Z" id="radio-off_Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"radio-on",use:"radio-on-usage",viewBox:"0 0 52 52",content:'<symbol viewBox="0 0 52 52" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="radio-on">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>radio-on</title>\n    <path d="M26,48.4137931 L26,48.4137931 C38.3787961,48.4137931 48.4137931,38.3787961 48.4137931,26 C48.4137931,13.6212039 38.3787961,3.5862069 26,3.5862069 C13.6212039,3.5862069 3.5862069,13.6212039 3.5862069,26 C3.5862069,38.3787961 13.6212039,48.4137931 26,48.4137931 L26,48.4137931 L26,48.4137931 Z M26,52 L26,52 C11.6405965,52 0,40.3594035 0,26 C0,11.6405965 11.6405965,0 26,0 C40.3594035,0 52,11.6405965 52,26 C52,40.3594035 40.3594035,52 26,52 L26,52 L26,52 Z M26,43.9310345 C35.9030369,43.9310345 43.9310345,35.9030369 43.9310345,26 C43.9310345,16.0969631 35.9030369,8.0689655 26,8.0689655 C16.0969631,8.0689655 8.0689655,16.0969631 8.0689655,26 C8.0689655,35.9030369 16.0969631,43.9310345 26,43.9310345 L26,43.9310345 Z" id="radio-on_Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"refresh",use:"refresh-usage",viewBox:"0 0 50 50",content:'<symbol viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="refresh">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>refresh</title>\n    <path d="M48.2758621,0 C47.2844828,0 46.5086207,0.775193846 46.5086207,1.76571923 L46.5086207,12.2308355 C42.0689655,4.78036173 34.0086207,0 25,0 C11.2068965,0 0,11.1972438 0,25.0215332 C0,38.8458226 11.2068965,50 25,50 C38.7931035,50 50,38.8027562 50,25.0215332 C50,24.0310078 49.2241379,23.2558139 48.2327587,23.2558139 C47.2413793,23.2558139 46.4655172,24.0310078 46.4655172,25.0215332 C46.4655172,36.8647717 36.8103448,46.5116279 24.9568965,46.5116279 C13.1034483,46.5116279 3.49137933,36.8217054 3.49137933,24.9784668 C3.49137933,13.1352283 13.1465517,3.48837212 25,3.48837212 C33.4913793,3.48837212 41.0775862,8.44099913 44.5258621,16.0206718 L32.1551724,16.0206718 C31.1637931,16.0206718 30.3879311,16.7958657 30.3879311,17.7863911 C30.3879311,18.7769164 31.1637931,19.5521103 32.1551724,19.5521103 L48.2327587,19.5521103 C49.2241379,19.5521103 50,18.7769164 50,17.7863911 L50,1.72265288 C50,0.775193846 49.2241379,0 48.2758621,0 L48.2758621,0 L48.2758621,0 Z" id="refresh_Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"remove",use:"remove-usage",viewBox:"20 20 60 60",content:'<symbol viewBox="20 20 60 60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="remove">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>remove</title>\n    <path d="M50,72.4137931 L50,72.4137931 C62.3787961,72.4137931 72.4137931,62.3787961 72.4137931,50 C72.4137931,37.6212039 62.3787961,27.5862069 50,27.5862069 C37.6212039,27.5862069 27.5862069,37.6212039 27.5862069,50 C27.5862069,62.3787961 37.6212039,72.4137931 50,72.4137931 L50,72.4137931 Z M50,76 L50,76 C35.6405965,76 24,64.3594035 24,50 C24,35.6405965 35.6405965,24 50,24 C64.3594035,24 76,35.6405965 76,50 C76,64.3594035 64.3594035,76 50,76 L50,76 Z M38.7931034,51.7931034 L62.1034483,51.7931034 C63.093752,51.7931034 63.8965517,50.9903037 63.8965517,50 C63.8965517,49.0096963 63.093752,48.2068966 62.1034483,48.2068966 L38.7931034,48.2068966 C37.8027998,48.2068966 37,49.0096963 37,50 C37,50.9903037 37.8027998,51.7931034 38.7931034,51.7931034 L38.7931034,51.7931034 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"right",use:"right-usage",viewBox:"0 0 7 11",content:'<symbol viewBox="0 0 7 11" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="right">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>path-1</title>\n    <desc>Created with Sketch.</desc>\n            <path d="M3.5857864,5 L0.29289322,1.70710678 C-0.09763107,1.31658249 -0.09763107,0.68341751 0.29289322,0.29289322 C0.68341751,-0.09763107 1.31658249,-0.09763107 1.70710678,0.29289322 L5.7071068,4.29289322 C6.0976311,4.68341751 6.0976311,5.3165825 5.7071068,5.7071068 L1.70710678,9.7071068 C1.31658249,10.0976311 0.68341751,10.0976311 0.29289322,9.7071068 C-0.09763107,9.3165825 -0.09763107,8.6834175 0.29289322,8.2928932 L3.5857864,5 Z" id="right_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"search",use:"search-usage",viewBox:"0 0 100 100",content:'<symbol viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="search">\n    \x3c!-- Generator: Sketch 3.8.3 (29802) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>search</title>\n    <path d="M44.2346851,66.9693701 C49.1699741,66.9693701 53.6566005,65.2195858 57.1561691,62.2584124 L72.8593615,77.9616048 C73.2182916,78.3205349 73.6669543,78.5 74.1604832,78.5 C74.6540121,78.5 75.1026747,78.3205349 75.4616048,77.9616048 C76.1794651,77.2437446 76.1794651,76.0772217 75.4616048,75.3593615 L59.7584124,59.6561691 C62.6747196,56.1566005 64.4693701,51.6251079 64.4693701,46.7346851 C64.4693701,35.5629853 55.4063848,26.5 44.2346851,26.5 C33.1078516,26.5 24,35.6078516 24,46.7346851 C24,57.9063848 33.1078516,66.9693701 44.2346851,66.9693701 L44.2346851,66.9693701 Z M44.2346851,30.1790336 C53.3874029,30.1790336 60.7903365,37.6268335 60.7903365,46.7346851 C60.7903365,55.8874029 53.3874029,63.2903365 44.2346851,63.2903365 C35.0819672,63.2903365 27.6790336,55.8425367 27.6790336,46.7346851 C27.6790336,37.6268335 35.1268335,30.1790336 44.2346851,30.1790336 L44.2346851,30.1790336 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"selected",use:"selected-usage",viewBox:"0 0 52 52",content:'<symbol viewBox="0 0 52 52" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="selected">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>selected</title>\n    <path d="M26,48.4137931 L26,48.4137931 C38.3787961,48.4137931 48.4137931,38.3787961 48.4137931,26 C48.4137931,13.6212039 38.3787961,3.5862069 26,3.5862069 C13.6212039,3.5862069 3.5862069,13.6212039 3.5862069,26 C3.5862069,38.3787961 13.6212039,48.4137931 26,48.4137931 L26,48.4137931 L26,48.4137931 Z M26,52 L26,52 C11.6405965,52 0,40.3594035 0,26 C0,11.6405965 11.6405965,0 26,0 C40.3594035,0 52,11.6405965 52,26 C52,40.3594035 40.3594035,52 26,52 L26,52 L26,52 Z M22.0875285,34.554843 C22.8334132,35.2939316 24.0519185,35.2367977 24.7253731,34.4311582 L37.019606,19.7238267 C37.6547446,18.9640239 37.5536842,17.8332004 36.7938814,17.1980618 C36.0340785,16.5629233 34.903255,16.6639836 34.2681165,17.4237865 L23.4064508,30.5968304 L17.1904443,24.6537674 C16.4869965,23.956729 15.3516781,23.9619248 14.6546397,24.6653726 C13.9576012,25.3688204 13.962797,26.5041388 14.6662448,27.2011772 L22.0875285,34.554843 L22.0875285,34.554843 Z" id="selected_Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"settings",use:"settings-usage",viewBox:"0 0 49 48",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49 48" id="settings">\n  <g>\n    <polygon points="38.097 34.47 38.097 48 42.681 48 42.681 34.47" />\n    <polygon points="38.097 0 38.097 22.518 42.681 22.518 42.681 0" />\n    <path d="M40.3888889,35.85 C45.0296149,35.85 48.7916667,32.1563493 48.7916667,27.6 C48.7916667,23.0436508 45.0296149,19.35 40.3888889,19.35 C35.7481629,19.35 31.9861111,23.0436508 31.9861111,27.6 C31.9861111,32.1563493 35.7481629,35.85 40.3888889,35.85 Z M40.3888889,31.35 C38.279468,31.35 36.5694444,29.6710678 36.5694444,27.6 C36.5694444,25.5289322 38.279468,23.85 40.3888889,23.85 C42.4983098,23.85 44.2083333,25.5289322 44.2083333,27.6 C44.2083333,29.6710678 42.4983098,31.35 40.3888889,31.35 Z" />\n    <polygon points="22.208 0 22.208 7.65 26.792 7.65 26.792 0" />\n    <polygon points="22.208 19.461 22.208 48 26.792 48 26.792 19.461" />\n    <path d="M24.5,22.05 C29.140726,22.05 32.9027778,18.3563492 32.9027778,13.8 C32.9027778,9.24365082 29.140726,5.55 24.5,5.55 C19.859274,5.55 16.0972222,9.24365082 16.0972222,13.8 C16.0972222,18.3563492 19.859274,22.05 24.5,22.05 Z M24.5,17.55 C22.3905791,17.55 20.6805556,15.8710678 20.6805556,13.8 C20.6805556,11.7289322 22.3905791,10.05 24.5,10.05 C26.6094209,10.05 28.3194444,11.7289322 28.3194444,13.8 C28.3194444,15.8710678 26.6094209,17.55 24.5,17.55 Z" />\n    <polygon points="6.319 40.446 6.319 48 10.903 48 10.903 40.446" />\n    <polygon points="6.319 0 6.319 28.515 10.903 28.515 10.903 0" />\n    <path d="M8.61111111,43.05 C13.2518371,43.05 17.0138889,39.3563493 17.0138889,34.8 C17.0138889,30.2436507 13.2518371,26.55 8.61111111,26.55 C3.97038509,26.55 0.208333333,30.2436507 0.208333333,34.8 C0.208333333,39.3563493 3.97038509,43.05 8.61111111,43.05 Z M8.61111111,38.55 C6.50169018,38.55 4.79166667,36.8710677 4.79166667,34.8 C4.79166667,32.7289323 6.50169018,31.05 8.61111111,31.05 C10.720532,31.05 12.4305556,32.7289323 12.4305556,34.8 C12.4305556,36.8710677 10.720532,38.55 8.61111111,38.55 Z" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"share",use:"share-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="share">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Mask</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="share_Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="share_share-20" fill-rule="nonzero">\n            <g id="share_Mask">\n                <path d="M5.97733131,7.62936833 C5.99229467,7.75081434 6,7.87450733 6,8 C6,8.1254927 5.99229467,8.2491857 5.97733131,8.3706317 L10.9173886,10.8406603 C11.456951,10.3201529 12.1910876,10 13,10 C14.6568542,10 16,11.3431458 16,13 C16,14.6568542 14.6568542,16 13,16 C11.3431458,16 10,14.6568542 10,13 C10,12.8745073 10.0077053,12.7508143 10.0226687,12.6293683 L5.08261143,10.1593397 C4.54304902,10.6798471 3.80891237,11 3,11 C1.34314575,11 0,9.6568542 0,8 C0,6.34314575 1.34314575,5 3,5 C3.80891237,5 4.54304902,5.32015293 5.08261143,5.84066029 L10.0226687,3.37063167 C10.0077053,3.24918566 10,3.12549267 10,3 C10,1.34314575 11.3431458,0 13,0 C14.6568542,0 16,1.34314575 16,3 C16,4.65685425 14.6568542,6 13,6 C12.1910876,6 11.456951,5.67984707 10.9173886,5.15933971 L5.97733131,7.62936833 Z M13,14 C13.5522847,14 14,13.5522847 14,13 C14,12.4477153 13.5522847,12 13,12 C12.4477153,12 12,12.4477153 12,13 C12,13.5522847 12.4477153,14 13,14 Z M13,4 C13.5522847,4 14,3.55228475 14,3 C14,2.44771525 13.5522847,2 13,2 C12.4477153,2 12,2.44771525 12,3 C12,3.55228475 12.4477153,4 13,4 Z M3,9 C3.55228475,9 4,8.5522847 4,8 C4,7.44771525 3.55228475,7 3,7 C2.44771525,7 2,7.44771525 2,8 C2,8.5522847 2.44771525,9 3,9 Z" id="share_path-1" />\n            </g>\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"show-less",use:"show-less-usage",viewBox:"0 0 51 50",content:'<symbol viewBox="0 0 51 50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="show-less">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>show-less</title>\n    <path d="M6.85127796,50 L43.2020234,50 C45.0834576,50 46.6897764,49.3343983 48.0209798,48.0031949 C49.3521832,46.6719915 50.0177849,45.0656727 50.0177849,43.1842386 L50.0177849,6.83349308 C50.0177849,4.95205893 49.3521832,3.34574015 48.0209798,2.01453674 C46.6897764,0.683333333 45.0834576,0.0177316294 43.2020234,0.0177316294 L6.85127796,0.0177316294 C4.96984381,0.0177316294 3.36352503,0.683333333 2.03232162,2.01453674 C0.701118211,3.34574015 0.0355165069,4.95205893 0.0355165069,6.83349308 L0.0355165069,43.1842386 C0.0355165069,45.0656727 0.701118211,46.6719915 2.03232162,48.0031949 C3.36352503,49.3343983 4.96984381,50 6.85127796,50 L6.85127796,50 Z M43.2019702,45.4561768 L6.85122471,45.4561768 C6.22406816,45.4561768 5.68862265,45.2343095 5.24488818,44.7905751 C4.80115371,44.3468406 4.57928647,43.8113951 4.57928647,43.1842386 L4.57928647,6.83349308 C4.57928647,6.20633653 4.80115371,5.67089102 5.24488818,5.22715655 C5.68862265,4.78342208 6.22406816,4.56155485 6.85122471,4.56155485 L43.2019702,4.56155485 C43.8291267,4.56155485 44.3645722,4.78342208 44.8083067,5.22715655 C45.2520412,5.67089102 45.4739084,6.20633653 45.4739084,6.83349308 L45.4739084,43.1842386 C45.4739084,43.8113951 45.2520412,44.3468406 44.8083067,44.7905751 C44.3645722,45.2343095 43.8291267,45.4561768 43.2019702,45.4561768 L43.2019702,45.4561768 Z M15.9389244,27.2808307 L34.1142705,27.2808307 C34.7414271,27.2808307 35.2768726,27.0589634 35.720607,26.615229 C36.1643415,26.1714945 36.3862087,25.636049 36.3862087,25.0088924 C36.3862087,24.3817359 36.1643415,23.8462904 35.720607,23.4025559 C35.2768726,22.9588214 34.7414271,22.7369542 34.1142705,22.7369542 L15.9389244,22.7369542 C15.3117678,22.7369542 14.7763223,22.9588214 14.3325879,23.4025559 C13.8888534,23.8462904 13.6669862,24.3817359 13.6669862,25.0088924 C13.6669862,25.636049 13.8888534,26.1714945 14.3325879,26.615229 C14.7763223,27.0589634 15.3117678,27.2808307 15.9389244,27.2808307 L15.9389244,27.2808307 Z" id="show-less_Shape" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"show-more",use:"show-more-usage",viewBox:"0 0 51 50",content:'<symbol viewBox="0 0 51 50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="show-more">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>show-more</title>\n    <path d="M6.85127796,50 L43.2020234,50 C45.0834576,50 46.6897764,49.3343983 48.0209798,48.0031949 C49.3521832,46.6719915 50.0177849,45.0656727 50.0177849,43.1842386 L50.0177849,6.83349308 C50.0177849,4.95205893 49.3521832,3.34574015 48.0209798,2.01453674 C46.6897764,0.683333333 45.0834576,0.0177316294 43.2020234,0.0177316294 L6.85127796,0.0177316294 C4.96984381,0.0177316294 3.36352503,0.683333333 2.03232162,2.01453674 C0.701118211,3.34574015 0.0355165069,4.95205893 0.0355165069,6.83349308 L0.0355165069,43.1842386 C0.0355165069,45.0656727 0.701118211,46.6719915 2.03232162,48.0031949 C3.36352503,49.3343983 4.96984381,50 6.85127796,50 L6.85127796,50 Z M43.2019702,45.4561768 L6.85122471,45.4561768 C6.22406816,45.4561768 5.68862265,45.2343095 5.24488818,44.7905751 C4.80115371,44.3468406 4.57928647,43.8113951 4.57928647,43.1842386 L4.57928647,6.83349308 C4.57928647,6.20633653 4.80115371,5.67089102 5.24488818,5.22715655 C5.68862265,4.78342208 6.22406816,4.56155485 6.85122471,4.56155485 L43.2019702,4.56155485 C43.8291267,4.56155485 44.3645722,4.78342208 44.8083067,5.22715655 C45.2520412,5.67089102 45.4739084,6.20633653 45.4739084,6.83349308 L45.4739084,43.1842386 C45.4739084,43.8113951 45.2520412,44.3468406 44.8083067,44.7905751 C44.3645722,45.2343095 43.8291267,45.4561768 43.2019702,45.4561768 L43.2019702,45.4561768 Z M25.0266241,36.3684771 C25.6537806,36.3684771 26.1892261,36.1466099 26.6329606,35.7028754 C27.0766951,35.2591409 27.2985623,34.7236954 27.2985623,34.0965389 L27.2985623,27.2807774 L34.1143237,27.2807774 C34.7414803,27.2807774 35.2769258,27.0589102 35.7206603,26.6151757 C36.1643947,26.1714412 36.386262,25.6359957 36.386262,25.0088392 C36.386262,24.3816826 36.1643947,23.8462371 35.7206603,23.4025027 C35.2769258,22.9587682 34.7414803,22.736901 34.1143237,22.736901 L27.2985623,22.736901 L27.2985623,15.9211395 C27.2985623,15.293983 27.0766951,14.7585375 26.6329606,14.314803 C26.1892261,13.8710685 25.6537806,13.6492013 25.0266241,13.6492013 C24.3994675,13.6492013 23.864022,13.8710685 23.4202875,14.314803 C22.9765531,14.7585375 22.7546858,15.293983 22.7546858,15.9211395 L22.7546858,22.736901 L15.9389244,22.736901 C15.3117678,22.736901 14.7763223,22.9587682 14.3325879,23.4025027 C13.8888534,23.8462371 13.6669862,24.3816826 13.6669862,25.0088392 C13.6669862,25.6359957 13.8888534,26.1714412 14.3325879,26.6151757 C14.7763223,27.0589102 15.3117678,27.2807774 15.9389244,27.2807774 L22.7546858,27.2807774 L22.7546858,34.0965389 C22.7546858,34.7236954 22.9765531,35.2591409 23.4202875,35.7028754 C23.864022,36.1466099 24.3994675,36.3684771 25.0266241,36.3684771 L25.0266241,36.3684771 Z" id="show-more_Shape" />\n\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"sphere",use:"sphere-usage",viewBox:"0 0 18 16",content:'<symbol viewBox="0 0 18 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="sphere">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <g id="sphere_Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="sphere_settings-20" fill-rule="nonzero" fill="#F8E81C">\n            <path d="M14,6.17070571 L14,1 C14,0.44771525 14.4477153,0 15,0 C15.5522847,0 16,0.44771525 16,1 L16,6.17070571 C17.1651924,6.58254212 18,7.69378117 18,9 C18,10.3062188 17.1651924,11.4174579 16,11.8292943 L16,15 C16,15.5522847 15.5522847,16 15,16 C14.4477153,16 14,15.5522847 14,15 L14,11.8292943 C12.8348076,11.4174579 12,10.3062188 12,9 C12,7.69378117 12.8348076,6.58254212 14,6.17070571 Z M8,1.17070571 L8,1 C8,0.44771525 8.44771525,0 9,0 C9.5522847,0 10,0.44771525 10,1 L10,1.17070571 C11.1651924,1.58254212 12,2.69378117 12,4 C12,5.30621883 11.1651924,6.41745788 10,6.82929429 L10,15 C10,15.5522847 9.5522847,16 9,16 C8.44771525,16 8,15.5522847 8,15 L8,6.82929429 C6.83480763,6.41745788 6,5.30621883 6,4 C6,2.69378117 6.83480763,1.58254212 8,1.17070571 Z M2,9.1707057 L2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 L4,9.1707057 C5.16519237,9.5825421 6,10.6937812 6,12 C6,13.3062188 5.16519237,14.4174579 4,14.8292943 L4,15 C4,15.5522847 3.55228475,16 3,16 C2.44771525,16 2,15.5522847 2,15 L2,14.8292943 C0.83480763,14.4174579 0,13.3062188 0,12 C0,10.6937812 0.83480763,9.5825421 2,9.1707057 Z M3,13 C3.55228475,13 4,12.5522847 4,12 C4,11.4477153 3.55228475,11 3,11 C2.44771525,11 2,11.4477153 2,12 C2,12.5522847 2.44771525,13 3,13 Z M9,5 C9.5522847,5 10,4.55228475 10,4 C10,3.44771525 9.5522847,3 9,3 C8.44771525,3 8,3.44771525 8,4 C8,4.55228475 8.44771525,5 9,5 Z M15,10 C15.5522847,10 16,9.5522847 16,9 C16,8.4477153 15.5522847,8 15,8 C14.4477153,8 14,8.4477153 14,9 C14,9.5522847 14.4477153,10 15,10 Z" id="sphere_path-1" />\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"map",use:"map-usage",viewBox:"0 0 18 16",content:'<symbol viewBox="0 0 18 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="map">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <g id="map_Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <path d="M14,6.17070571 L14,1 C14,0.44771525 14.4477153,0 15,0 C15.5522847,0 16,0.44771525 16,1 L16,6.17070571 C17.1651924,6.58254212 18,7.69378117 18,9 C18,10.3062188 17.1651924,11.4174579 16,11.8292943 L16,15 C16,15.5522847 15.5522847,16 15,16 C14.4477153,16 14,15.5522847 14,15 L14,11.8292943 C12.8348076,11.4174579 12,10.3062188 12,9 C12,7.69378117 12.8348076,6.58254212 14,6.17070571 Z M8,1.17070571 L8,1 C8,0.44771525 8.44771525,0 9,0 C9.5522847,0 10,0.44771525 10,1 L10,1.17070571 C11.1651924,1.58254212 12,2.69378117 12,4 C12,5.30621883 11.1651924,6.41745788 10,6.82929429 L10,15 C10,15.5522847 9.5522847,16 9,16 C8.44771525,16 8,15.5522847 8,15 L8,6.82929429 C6.83480763,6.41745788 6,5.30621883 6,4 C6,2.69378117 6.83480763,1.58254212 8,1.17070571 Z M2,9.1707057 L2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 L4,9.1707057 C5.16519237,9.5825421 6,10.6937812 6,12 C6,13.3062188 5.16519237,14.4174579 4,14.8292943 L4,15 C4,15.5522847 3.55228475,16 3,16 C2.44771525,16 2,15.5522847 2,15 L2,14.8292943 C0.83480763,14.4174579 0,13.3062188 0,12 C0,10.6937812 0.83480763,9.5825421 2,9.1707057 Z M3,13 C3.55228475,13 4,12.5522847 4,12 C4,11.4477153 3.55228475,11 3,11 C2.44771525,11 2,11.4477153 2,12 C2,12.5522847 2.44771525,13 3,13 Z M9,5 C9.5522847,5 10,4.55228475 10,4 C10,3.44771525 9.5522847,3 9,3 C8.44771525,3 8,3.44771525 8,4 C8,4.55228475 8.44771525,5 9,5 Z M15,10 C15.5522847,10 16,9.5522847 16,9 C16,8.4477153 15.5522847,8 15,8 C14.4477153,8 14,8.4477153 14,9 C14,9.5522847 14.4477153,10 15,10 Z" id="map_path-1" />\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"splitter",use:"splitter-usage",viewBox:"0 0 19 28",content:'<symbol viewBox="0 0 19 28" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="splitter">\n    <path d="M0.6551724,2.3448276 L0.6551724,25.6551724 C0.6551724,26.6454761 1.4579722,27.4482759 2.4482759,27.4482759 C3.4385796,27.4482759 4.2413793,26.6454761 4.2413793,25.6551724 L4.2413793,2.3448276 C4.2413793,1.3545239 3.4385796,0.5517241 2.4482759,0.5517241 C1.4579722,0.5517241 0.6551724,1.3545239 0.6551724,2.3448276 L0.6551724,2.3448276 Z M7.6551724,2.3448276 L7.6551724,25.6551724 C7.6551724,26.6454761 8.4579722,27.4482759 9.4482759,27.4482759 C10.4385796,27.4482759 11.2413793,26.6454761 11.2413793,25.6551724 L11.2413793,2.3448276 C11.2413793,1.3545239 10.4385796,0.5517241 9.4482759,0.5517241 C8.4579722,0.5517241 7.6551724,1.3545239 7.6551724,2.3448276 L7.6551724,2.3448276 Z M14.6551724,2.3448276 L14.6551724,25.6551724 C14.6551724,26.6454761 15.4579722,27.4482759 16.4482759,27.4482759 C17.4385796,27.4482759 18.2413793,26.6454761 18.2413793,25.6551724 L18.2413793,2.3448276 C18.2413793,1.3545239 17.4385796,0.5517241 16.4482759,0.5517241 C15.4579722,0.5517241 14.6551724,1.3545239 14.6551724,2.3448276 L14.6551724,2.3448276 Z" id="splitter_splitter" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"splitterOn",use:"splitterOn-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="splitterOn">\n  <path fill-rule="evenodd" d="M8.46666667,9.6 L8.46666667,9.6 C8.5045695,9.62842712 8.53823954,9.66209717 8.56666667,9.7 C8.73235209,9.9209139 8.68758057,10.2343146 8.46666667,10.4 L5.8,12.4 C5.71345191,12.4649111 5.60818511,12.5 5.5,12.5 C5.22385763,12.5 5,12.2761424 5,12 L5,8 C5,7.89181489 5.03508894,7.78654809 5.1,7.7 C5.26568542,7.4790861 5.5790861,7.43431458 5.8,7.6 L8.46666667,9.6 Z M11.5333333,10.4 L11.5333333,10.4 C11.4954305,10.3715729 11.4617605,10.3379028 11.4333333,10.3 C11.2676479,10.0790861 11.3124194,9.76568542 11.5333333,9.6 L14.2,7.6 C14.2865481,7.53508894 14.3918149,7.5 14.5,7.5 C14.7761424,7.5 15,7.72385763 15,8 L15,12 C15,12.1081851 14.9649111,12.2134519 14.9,12.3 C14.7343146,12.5209139 14.4209139,12.5656854 14.2,12.4 L11.5333333,10.4 Z M16,16 L16,4 L11,4 L11,2 L18,2 L18,18 L11,18 L11,16 L16,16 Z M4,16 L9,16 L9,18 L2,18 L2,2 L9,2 L9,4 L4,4 L4,16 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"splitterOff",use:"splitterOff-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="splitterOff">\n  <path fill-rule="evenodd" d="M11,2 L18,2 L18,18 L11,18 L11,2 Z M16.4666667,10.4 L16.4666667,10.4 C16.5045695,10.3715729 16.5382395,10.3379028 16.5666667,10.3 C16.7323521,10.0790861 16.6875806,9.76568542 16.4666667,9.6 L16.4666667,9.6 L13.8,7.6 C13.7134519,7.53508894 13.6081851,7.5 13.5,7.5 C13.2238576,7.5 13,7.72385763 13,8 L13,8 L13,12 C13,12.1081851 13.0350889,12.2134519 13.1,12.3 C13.2656854,12.5209139 13.5790861,12.5656854 13.8,12.4 L16.4666667,10.4 Z M9,2 L9,18 L2,18 L2,2 L9,2 Z M3.53333333,10.4 L6.2,12.4 L6.2,12.4 C6.4209139,12.5656854 6.73431458,12.5209139 6.9,12.3 C6.96491106,12.2134519 7,12.1081851 7,12 L7,8 L7,8 C7,7.72385763 6.77614237,7.5 6.5,7.5 C6.39181489,7.5 6.28654809,7.53508894 6.2,7.6 L3.53333333,9.6 L3.53333333,9.6 C3.31241943,9.76568542 3.26764791,10.0790861 3.43333333,10.3 C3.46176046,10.3379028 3.4954305,10.3715729 3.53333333,10.4 L3.53333333,10.4 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"previous",use:"previous-usage",viewBox:"0 0 6 8",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 8" id="previous">\n  <g fill="none" fill-rule="evenodd" transform="translate(-7 -6)">\n    <path fill="#FFFFFF" d="M6.11431886,12.0400056 C5.92496489,12.3051008 5.97613213,12.6811794 6.2286041,12.8800007 C6.32751578,12.9578935 6.4478202,13 6.5714598,13 L13.4285738,13 C13.7441638,13 14,12.7313724 14,12.4000035 C14,12.2701822 13.9598985,12.1438627 13.8857148,12.0400056 L10.4571578,7.2400339 C10.2678038,6.97493878 9.90963308,6.92121326 9.65716111,7.1200346 C9.61384377,7.15414695 9.57536389,7.19455077 9.54287588,7.2400339 L6.11431886,12.0400056 Z" transform="rotate(-90 10 10)" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"next",use:"next-usage",viewBox:"0 0 6 8",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 8" id="next">\n  <g fill="none" fill-rule="evenodd" transform="translate(-7 -6)">\n    <path fill="#FFFFFF" d="M6.11431886,12.0400056 C5.92496489,12.3051008 5.97613213,12.6811794 6.2286041,12.8800007 C6.32751578,12.9578935 6.4478202,13 6.5714598,13 L13.4285738,13 C13.7441638,13 14,12.7313724 14,12.4000035 C14,12.2701822 13.9598985,12.1438627 13.8857148,12.0400056 L10.4571578,7.2400339 C10.2678038,6.97493878 9.90963308,6.92121326 9.65716111,7.1200346 C9.61384377,7.15414695 9.57536389,7.19455077 9.54287588,7.2400339 L6.11431886,12.0400056 Z" transform="matrix(0 -1 -1 0 20 20)" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"timeline",use:"timeline-usage",viewBox:"0 0 18 17",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 17" id="timeline">\n  <g fill="none" fill-rule="evenodd" transform="translate(-1 -1)">\n    <path fill="#FFFFFF" d="M1,11 L3,11 L3,18 L1,18 L1,11 Z M5,14 L7,14 L7,18 L5,18 L5,14 Z M9,14 L11,14 L11,18 L9,18 L9,14 Z M13,14 L15,14 L15,18 L13,18 L13,14 Z M17,11 L19,11 L19,18 L17,18 L17,11 Z M14.1055728,5.4472136 L7.7236068,8.6381966 C7.47661755,8.76169123 7.17628103,8.66157905 7.0527864,8.4145898 C7.01807255,8.34516209 7,8.26860555 7,8.19098301 L7,1.80901699 C7,1.53287462 7.22385763,1.30901699 7.5,1.30901699 C7.57762255,1.30901699 7.65417908,1.32708954 7.7236068,1.3618034 L14.1055728,4.5527864 C14.3525621,4.67628103 14.4526742,4.97661755 14.3291796,5.2236068 C14.2807978,5.3203705 14.2023365,5.39883174 14.1055728,5.4472136 Z" />\n  </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"data",use:"data-usage",viewBox:"0 0 18 18",content:'<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="data">\n    \x3c!-- Generator: sketchtool 49 (51002) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>C84EA82A-FCC4-4A77-800E-3939EAD09123</title>\n    <desc>Created with sketchtool.</desc>\n    <defs></defs>\n    <g id="data_Symbols" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="data_icon/data-20" transform="translate(-1.000000, -1.000000)" fill="#FFFFFF" fill-rule="nonzero">\n            <path d="M9,11 L9,13 L17,13 L17,11 L9,11 Z M7,11 L3,11 L3,13 L7,13 L7,11 Z M9,17 L17,17 L17,15 L9,15 L9,17 Z M7,17 L7,15 L3,15 L3,17 L7,17 Z M9,7 L9,9 L17,9 L17,7 L9,7 Z M7,7 L3,7 L3,9 L7,9 L7,7 Z M9,3 L9,5 L17,5 L17,3 L9,3 Z M7,3 L3,3 L3,5 L7,5 L7,3 Z M3,1 L17,1 C18.1045695,1 19,1.8954305 19,3 L19,17 C19,18.1045695 18.1045695,19 17,19 L3,19 C1.8954305,19 1,18.1045695 1,17 L1,3 C1,1.8954305 1.8954305,1 3,1 Z" />\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"upload",use:"upload-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="upload">\n        <path d="M11,10.4142136 L11,19 C11,19.5522847 10.5522847,20 10,20 C9.4477153,20 9,19.5522847 9,19 L9,10.4142136 L6.70710678,12.7071068 C6.31658249,13.0976311 5.68341751,13.0976311 5.29289322,12.7071068 C4.90236893,12.3165825 4.90236893,11.6834175 5.29289322,11.2928932 L9.2928932,7.29289322 C9.6834175,6.90236893 10.3165825,6.90236893 10.7071068,7.29289322 L14.7071068,11.2928932 C15.0976311,11.6834175 15.0976311,12.3165825 14.7071068,12.7071068 C14.3165825,13.0976311 13.6834175,13.0976311 13.2928932,12.7071068 L11,10.4142136 Z M4.43737186,18.311193 C3.89552498,17.9478914 3.39022438,17.53236 2.92893219,17.0710678 C1.06632038,15.208456 0,12.6873915 0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C20,12.6873915 18.9336796,15.208456 17.0710678,17.0710678 C16.6097756,17.53236 16.104475,17.9478914 15.5626281,18.311193 C15.10391,18.6187579 14.4827149,18.4962239 14.1751501,18.0375058 C13.8675853,17.5787877 13.9901192,16.9575926 14.4488374,16.6500278 C14.8826488,16.3591626 15.2873497,16.0263588 15.6568542,15.6568542 C17.1481115,14.165597 18,12.1515064 18,10 C18,5.581722 14.418278,2 10,2 C5.581722,2 2,5.581722 2,10 C2,12.1515064 2.85188851,14.165597 4.34314575,15.6568542 C4.71265033,16.0263588 5.11735121,16.3591626 5.55116264,16.6500278 C6.00988077,16.9575926 6.13241472,17.5787877 5.82484989,18.0375058 C5.51728507,18.4962239 4.89608999,18.6187579 4.43737186,18.311193 Z" id="upload_path-1" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"trashcan",use:"trashcan-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" id="trashcan">\n    <path id="trashcan_path-1" d="M12,5 C12,4.41149708 11.6570858,4 11.3333333,4 L8.66666667,4 C8.34291423,4 8,4.41149708 8,5 L12,5 Z M6,5 C6,3.37936392 7.14946993,2 8.66666667,2 L11.3333333,2 C12.8505301,2 14,3.37936392 14,5 L17,5 L17,7 L3,7 L3,5 L6,5 Z M14,8 L16,8 L16,15 C16,16.6206361 14.8505301,18 13.3333333,18 L6.66666667,18 C5.14946993,18 4,16.6206361 4,15 L4,8 L6,8 L6,15 C6,15.5885029 6.34291423,16 6.66666667,16 L13.3333333,16 C13.6570858,16 14,15.5885029 14,15 L14,8 Z" />\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"localfile",use:"localfile-usage",viewBox:"0 0 512 512",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" id="localfile">\r\n<g>\r\n\t<g>\r\n\t\t<path d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008\r\n\t\t\tC350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237\r\n\t\t\th333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931\r\n\t\t\tl50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278\r\n\t\t\tc-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239\r\n\t\t\th66.527V486.763z" />\r\n\t</g>\r\n</g>\r\n<g>\r\n\t<g>\r\n\t\t<path d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175\r\n\t\t\tc6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z" />\r\n\t</g>\r\n</g>\r\n<g>\r\n\t<g>\r\n\t\t<path d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175\r\n\t\t\tc6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z" />\r\n\t</g>\r\n</g>\r\n<g>\r\n\t<g>\r\n\t\t<path d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175\r\n\t\t\tc6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z" />\r\n\t</g>\r\n</g>\r\n<g>\r\n\t<g>\r\n\t\t<path d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256\r\n\t\t\tc6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z" />\r\n\t</g>\r\n</g>\r\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"remotefile",use:"remotefile-usage",viewBox:"0 0 22 21",content:'<symbol viewBox="0 0 22 21" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="remotefile">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>path-1</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M5,6 L4.75,6 C3.21638786,6 2,7.13529533 2,8.5 C2,9.2406078 2.35687492,9.9321837 2.97412801,10.4079651 C3.4115493,10.7451313 3.49282208,11.3730585 3.15565585,11.8104798 C2.81848963,12.2479011 2.19056238,12.3291739 1.7531411,11.9920077 C0.65548811,11.145932 0,9.8756836 0,8.5 C0,5.99871142 2.14147652,4 4.75,4 L5.34141142,4 C6.16508423,1.66961525 8.38756235,0 11,0 C13.6124377,0 15.8349158,1.66961525 16.6585886,4 L17.25,4 C19.8585235,4 22,5.99871142 22,8.5 C22,11.0012886 19.8585235,13 17.25,13 C16.6977153,13 16.25,12.5522847 16.25,12 C16.25,11.4477153 16.6977153,11 17.25,11 C18.7836121,11 20,9.8647047 20,8.5 C20,7.13529533 18.7836121,6 17.25,6 L17,6 L15,6 C15,3.790861 13.209139,2 11,2 C8.790861,2 7,3.790861 7,6 L5,6 Z M5,16 L5,12 C5,11.4477153 5.44771525,11 6,11 L10,11 C10.5522847,11 11,11.4477153 11,12 L11,17 C11,17.5522847 10.5522847,18 10,18 C9.4477153,18 9,17.5522847 9,17 L9,13 L7,13 L7,17 C7,17.5522847 6.55228475,18 6,18 L4,18 C3.44771525,18 3,17.5522847 3,17 C3,16.4477153 3.44771525,16 4,16 L5,16 Z M15,16 L18,16 C18.5522847,16 19,16.4477153 19,17 C19,17.5522847 18.5522847,18 18,18 L14,18 C13.4477153,18 13,17.5522847 13,17 L13,12 C13,11.4477153 13.4477153,11 14,11 C14.5522847,11 15,11.4477153 15,12 L15,16 Z M21,18 C20.4477153,18 20,17.5522847 20,17 C20,16.4477153 20.4477153,16 21,16 C21.5522847,16 22,16.4477153 22,17 C22,17.5522847 21.5522847,18 21,18 Z M10,21 C9.4477153,21 9,20.5522847 9,20 C9,19.4477153 9.4477153,19 10,19 C10.5522847,19 11,19.4477153 11,20 C11,20.5522847 10.5522847,21 10,21 Z M1,18 C0.44771525,18 0,17.5522847 0,17 C0,16.4477153 0.44771525,16 1,16 C1.55228475,16 2,16.4477153 2,17 C2,17.5522847 1.55228475,18 1,18 Z" id="remotefile_path-1" />\n    </defs>\n    <g id="remotefile_Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="remotefile_cloud-24">\n            <g id="remotefile_colour/@black-Clipped">\n                <mask id="remotefile_mask-2" fill="white">\n                    <use xlink:href="#remotefile_path-1" />\n                </mask>\n                <use id="remotefile_path-1" xlink:href="#remotefile_path-1" />\n            </g>\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"compass-inner",use:"compass-inner-usage",viewBox:"0 0 17 17",content:'<symbol viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="compass-inner">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>compass-inner</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="compass-inner_Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="compass-inner_compass-inner" fill-rule="nonzero">\n            <path d="M8.5,16.5 C4.081722,16.5 0.5,12.918278 0.5,8.5 C0.5,4.081722 4.081722,0.5 8.5,0.5 C12.918278,0.5 16.5,4.081722 16.5,8.5 C16.5,12.918278 12.918278,16.5 8.5,16.5 Z M8.5,15.5 C12.3659932,15.5 15.5,12.3659932 15.5,8.5 C15.5,4.63400675 12.3659932,1.5 8.5,1.5 C4.63400675,1.5 1.5,4.63400675 1.5,8.5 C1.5,12.3659932 4.63400675,15.5 8.5,15.5 Z" id="compass-inner_Oval-96" />\n            <path d="M9.92599835,7.09066832 C12.7122872,9.87695712 14.3709388,12.5452228 13.4497471,13.4664145 C12.5285555,14.3876061 9.86028979,12.7289545 7.074001,9.94266568 C4.2877122,7.15637688 2.62906055,4.48811119 3.55025221,3.56691953 C4.47144386,2.64572788 7.13970955,4.30437952 9.92599835,7.09066832 Z M9.21889157,7.7977751 C6.92836458,5.50724811 4.52075769,4.01062761 4.25735899,4.27402631 C3.99396029,4.53742501 5.49058078,6.9450319 7.78110778,9.2355589 C10.0716348,11.5260859 12.4792417,13.0227064 12.7426404,12.7593077 C13.0060391,12.495909 11.5094186,10.0883021 9.21889157,7.7977751 Z" id="compass-inner_Oval-96-Copy-2" />\n            <path d="M9.92599835,9.94266568 C7.13970955,12.7289545 4.47144386,14.3876061 3.55025221,13.4664145 C2.62906055,12.5452228 4.2877122,9.87695712 7.074001,7.09066832 C9.86028979,4.30437952 12.5285555,2.64572788 13.4497471,3.56691953 C14.3709388,4.48811119 12.7122872,7.15637688 9.92599835,9.94266568 Z M9.21889157,9.2355589 C11.5094186,6.9450319 13.0060391,4.53742501 12.7426404,4.27402631 C12.4792417,4.01062761 10.0716348,5.50724811 7.78110778,7.7977751 C5.49058078,10.0883021 3.99396029,12.495909 4.25735899,12.7593077 C4.52075769,13.0227064 6.92836458,11.5260859 9.21889157,9.2355589 Z" id="compass-inner_Oval-96-Copy-3" />\n            <path d="M15.1464466,1.1464466 L14.3453364,1.94755684 L13.9608692,2.33202401 L14.667976,3.03913077 L15.0524431,2.65466362 L15.8535534,1.8535534 L15.1464466,1.1464466 Z M2.29760014,13.995293 L1.85311902,14.4397742 L1.004311,15.2885822 L1.71141776,15.995689 L2.56022581,15.146881 L3.00470698,14.7023998 L2.29760014,13.995293 Z" id="compass-inner_Line" />\n            <circle id="compass-inner_Oval-432" cx="16" cy="1" r="1" />\n            <circle id="compass-inner_Oval-432-Copy" cx="1" cy="16" r="1" />\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"compass-outer",use:"compass-outer-usage",viewBox:"0 0 162 162",content:'<symbol viewBox="0 0 162 162" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="compass-outer">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>compass-outer</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="compass-outer_Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="compass-outer_compass-outer" fill-rule="nonzero">\n            <path d="M80.8410544,161.682109 C36.1937731,161.682109 0,125.488336 0,80.8410544 C0,36.1937731 36.1937731,0 80.8410544,0 C125.488336,0 161.682109,36.1937731 161.682109,80.8410544 C161.682109,125.488336 125.488336,161.682109 80.8410544,161.682109 Z M81.1836011,134.620909 C110.696211,134.620909 134.620909,110.696211 134.620909,81.1836011 C134.620909,51.6709916 110.696211,27.7462941 81.1836011,27.7462941 C51.6709916,27.7462941 27.7462941,51.6709916 27.7462941,81.1836011 C27.7462941,110.696211 51.6709916,134.620909 81.1836011,134.620909 Z" id="compass-outer_Oval-108" />\n            <circle id="compass-outer_Oval-74" fill="#FFFFFF" cx="129.493683" cy="127.952092" r="1.54159147" />\n            <circle id="compass-outer_Oval-74-Copy-3" fill="#FFFFFF" cx="129.493683" cy="35.4566038" r="1.54159147" />\n            <circle id="compass-outer_Oval-74-Copy-5" fill="#FFFFFF" cx="30.8318294" cy="127.952092" r="1.54159147" />\n            <circle id="compass-outer_Oval-74-Copy-4" fill="#FFFFFF" cx="30.8318294" cy="35.4566038" r="1.54159147" />\n            <polygon id="compass-outer_N" fill="#FFFFFF" points="84.9318072 23.1238721 84.9318072 13.1321362 82.5623385 13.1321362 82.5623385 19.2984646 77.951866 13.1321362 75.7108625 13.1321362 75.7108625 23.1238721 78.0946053 23.1238721 78.0946053 16.9718176 82.6908037 23.1238721" />\n            <polygon id="compass-outer_Line" fill="#FFFFFF" points="143.368007 82.1093476 152.617555 82.1093476 152.617555 81.2993476 143.368007 81.2993476" />\n            <polygon id="compass-outer_Line-Copy-8" fill="#FFFFFF" points="9.24954884 82.1093476 18.4990976 82.1093476 18.4990976 81.2993476 9.24954884 81.2993476" />\n            <polygon id="compass-outer_Line" fill="#FFFFFF" points="81.2993476 143.368007 81.2993476 152.617555 82.1093476 152.617555 82.1093476 143.368007" />\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"compass-rotation-marker",use:"compass-rotation-marker-usage",viewBox:"0 0 53 53",content:'<symbol viewBox="0 0 53 53" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" id="compass-rotation-marker">\n    \x3c!-- Generator: Sketch 3.4.3 (16044) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>compass-rotation-marker</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="compass-rotation-marker_Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="compass-rotation-marker_compass-rotation-marker">\n            <path d="M52.4399986,26.2199993 C52.4399986,11.7390936 40.7009051,0 26.2199993,0 C11.7390936,0 0,11.7390936 0,26.2199993 C0,40.7009051 11.7390936,52.4399986 26.2199993,52.4399986 C40.7009051,52.4399986 52.4399986,40.7009051 52.4399986,26.2199993 Z" id="compass-rotation-marker_rotator" stroke-opacity="0.135841259" stroke="#E2A549" stroke-width="9" opacity="0.201434235" />\n            <path d="M0,26.2199993 C0,11.7390936 11.7390936,0 26.2199993,0 L26.2199993,9 C16.7096563,9 9,16.7096563 9,26.2199993" id="compass-rotation-marker_Shape" opacity="0.634561567" fill="#4990E2" />\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"circlef-full",use:"circlef-full-usage",viewBox:"0 0 512 512",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" id="circlef-full">\r\n\t\t<path d="M256,0C114.837,0,0,114.837,0,256s114.837,256,256,256s256-114.837,256-256S397.163,0,256,0z" />\r\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"circle-empty",use:"circle-empty-usage",viewBox:"0 0 512 512",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" id="circle-empty">\r\n\t\t<path d="M256,0C114.618,0,0,114.618,0,256s114.618,256,256,256s256-114.618,256-256S397.382,0,256,0z M256,469.333\r\n\t\t\tc-117.818,0-213.333-95.515-213.333-213.333S138.182,42.667,256,42.667S469.333,138.182,469.333,256S373.818,469.333,256,469.333z\r\n\t\t\t" />\r\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"story",use:"story-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="story">\n    \x3c!-- Generator: Sketch 43.2 (39069) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>path-1</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="story_Page-1" stroke-width="1" fill-rule="evenodd">\n        <path d="M11,2 C10.4477153,2 10,1.55228475 10,1 C10,0.44771525 10.4477153,0 11,0 L14,0 C15.1045695,0 16,0.8954305 16,2 L16,5 C16,5.55228475 15.5522847,6 15,6 C14.4477153,6 14,5.55228475 14,5 L14,2 L11,2 Z M14,11 C14,10.4477153 14.4477153,10 15,10 C15.5522847,10 16,10.4477153 16,11 L16,14 C16,15.1045695 15.1045695,16 14,16 L11,16 C10.4477153,16 10,15.5522847 10,15 C10,14.4477153 10.4477153,14 11,14 L14,14 L14,11 Z M5,14 C5.55228475,14 6,14.4477153 6,15 C6,15.5522847 5.55228475,16 5,16 L2,16 C0.8954305,16 0,15.1045695 0,14 L0,11 C0,10.4477153 0.44771525,10 1,10 C1.55228475,10 2,10.4477153 2,11 L2,14 L5,14 Z M2,5 C2,5.55228475 1.55228475,6 1,6 C0.44771525,6 0,5.55228475 0,5 L0,2 C0,0.8954305 0.8954305,0 2,0 L5,0 C5.55228475,0 6,0.44771525 6,1 C6,1.55228475 5.55228475,2 5,2 L2,2 L2,5 Z M9,7 L11,7 C11.5522847,7 12,7.44771525 12,8 C12,8.5522847 11.5522847,9 11,9 L9,9 L9,11 C9,11.5522847 8.5522847,12 8,12 C7.44771525,12 7,11.5522847 7,11 L7,9 L5,9 C4.44771525,9 4,8.5522847 4,8 C4,7.44771525 4.44771525,7 5,7 L7,7 L7,5 C7,4.44771525 7.44771525,4 8,4 C8.5522847,4 9,4.44771525 9,5 L9,7 Z" id="story_path-1" fill-rule="nonzero" />\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"recapture",use:"recapture-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="recapture">\n    \x3c!-- Generator: Sketch 54.1 (76490) - https://sketchapp.com --\x3e\n    <title>icon/recapture-20</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M13,4 C12.4477153,4 12,3.55228475 12,3 C12,2.44771525 12.4477153,2 13,2 L16,2 C17.1045695,2 18,2.8954305 18,4 L18,7 C18,7.55228475 17.5522847,8 17,8 C16.4477153,8 16,7.55228475 16,7 L16,4 L13,4 Z M16,13 C16,12.4477153 16.4477153,12 17,12 C17.5522847,12 18,12.4477153 18,13 L18,16 C18,17.1045695 17.1045695,18 16,18 L13,18 C12.4477153,18 12,17.5522847 12,17 C12,16.4477153 12.4477153,16 13,16 L16,16 L16,13 Z M7,16 C7.55228475,16 8,16.4477153 8,17 C8,17.5522847 7.55228475,18 7,18 L4,18 C2.8954305,18 2,17.1045695 2,16 L2,13 C2,12.4477153 2.44771525,12 3,12 C3.55228475,12 4,12.4477153 4,13 L4,16 L7,16 Z M4,7 C4,7.55228475 3.55228475,8 3,8 C2.44771525,8 2,7.55228475 2,7 L2,4 C2,2.8954305 2.8954305,2 4,2 L7,2 C7.55228475,2 8,2.44771525 8,3 C8,3.55228475 7.55228475,4 7,4 L4,4 L4,7 Z M12.2474165,7.34147387 C12.6110985,6.92583724 13.2428612,6.88371973 13.6584978,7.24740179 C14.0741344,7.61108384 14.1162519,8.24284646 13.7525699,8.65848309 L10.2525699,12.6584831 C9.87164859,13.0938217 9.20192229,13.1161212 8.7928864,12.7070853 L6.7928864,10.7070853 C6.4023621,10.316561 6.4023621,9.68339599 6.7928864,9.2928717 C7.18341069,8.90234741 7.81657567,8.90234741 8.20709996,9.2928717 L9.45128312,10.5370549 L12.2474165,7.34147387 Z" id="recapture_path-1" />\n    </defs>\n    <g id="recapture_icon/recapture-20" stroke="none" stroke-width="1">\n        <mask id="recapture_mask-2" fill="white">\n            <use xlink:href="#recapture_path-1" />\n        </mask>\n        <use id="recapture_Rectangle-2" fill="#4D5766" fill-rule="nonzero" xlink:href="#recapture_path-1" />\n        <g id="recapture_colour/@black" mask="url(#recapture_mask-2)">\n            <rect id="recapture_Fill" x="0" y="0" width="20" height="20" />\n        </g>\n    </g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"menu-dotted",use:"menu-dotted-usage",viewBox:"0 0 512 512",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" id="menu-dotted">\n<g>\n\t<g>\n\t\t<g>\n\t\t\t<circle cx="256" cy="256" r="64" />\n\t\t\t<circle cx="256" cy="448" r="64" />\n\t\t\t<circle cx="256" cy="64" r="64" />\n\t\t</g>\n\t</g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n<g>\n</g>\n</symbol>'});a.add(n);e.exports=n},function(e,t,r){var i=r(30),a=r(31),n=new i({id:"areameasure",use:"areameasure-usage",viewBox:"0 0 512 512",content:'<symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="areameasure"><path d="m497.027344 209.589844h-9.8125l-69.691406-119.765625h9.640624c8.269532 0 14.972657-6.703125 14.972657-14.96875v-59.882813c0-8.269531-6.703125-14.972656-14.972657-14.972656h-59.882812c-8.265625 0-14.96875 6.703125-14.96875 14.972656v16.253906h-192.625v-16.253906c0-8.269531-6.703125-14.972656-14.96875-14.972656h-59.882812c-8.269532 0-14.972657 6.703125-14.972657 14.972656v59.882813c0 8.265625 6.703125 14.96875 14.972657 14.96875h7.925781l-69.148438 119.765625h-8.640625c-8.269531 0-14.972656 6.703125-14.972656 14.972656v59.882812c0 8.265626 6.703125 14.96875 14.972656 14.96875h8.640625l70.300781 121.761719h-9.078124c-8.269532 0-14.972657 6.703125-14.972657 14.972657v59.882812c0 8.269531 6.703125 14.96875 14.972657 14.96875h59.882812c8.265625 0 14.96875-6.699219 14.96875-14.96875v-18.253906h192.625v18.253906c0 8.269531 6.703125 14.96875 14.96875 14.96875h59.882812c8.269532 0 14.972657-6.699219 14.972657-14.96875v-59.882812c0-8.269532-6.703125-14.972657-14.972657-14.972657h-10.074218l70.296875-121.761719h9.640625c8.269531 0 14.972656-6.703124 14.972656-14.96875v-59.882812c0-8.269531-6.703125-14.972656-14.972656-14.972656zm-14.96875 29.941406v29.941406h-29.941406v-29.941406zm-99.804688-209.589844h29.941406v29.941406h-29.941406zm-282.449218 0h29.941406v29.941406h-29.941406zm-69.863282 239.53125v-29.941406h29.941406v29.941406zm99.804688 211.585938h-29.941406v-29.941406h29.941406zm282.449218 0h-29.941406v-29.941406h29.941406zm-29.679687-59.882813h-15.234375c-8.265625 0-14.96875 6.703125-14.96875 14.972657v11.6875h-192.625v-11.6875c0-8.269532-6.703125-14.972657-14.96875-14.972657h-16.230469l-70.300781-121.761719h16.667969c8.265625 0 14.96875-6.703124 14.96875-14.96875v-59.882812c0-8.269531-6.703125-14.972656-14.96875-14.972656h-16.667969l69.148438-119.765625h17.382812c8.265625 0 14.96875-6.703125 14.96875-14.96875v-13.6875h192.625v13.6875c0 8.265625 6.703125 14.96875 14.96875 14.96875h15.597656l69.695313 119.765625h-15.429688c-8.265625 0-14.96875 6.703125-14.96875 14.972656v59.882812c0 8.265626 6.703125 14.96875 14.96875 14.96875h15.671875zm0 0" /></symbol>'});a.add(n);e.exports=n},function(e,t,r){e.exports={dropdown:"tjs-chart-expand-and-download-buttons__dropdown",dropdown__list:"tjs-chart-expand-and-download-buttons__dropdown__list",dropdownList:"tjs-chart-expand-and-download-buttons__dropdown__list",dropdown__btn:"tjs-chart-expand-and-download-buttons__dropdown__btn tjs-_buttons__btn--small",dropdownBtn:"tjs-chart-expand-and-download-buttons__dropdown__btn tjs-_buttons__btn--small","dropdown__btn--option":"tjs-chart-expand-and-download-buttons__dropdown__btn--option",dropdownBtnOption:"tjs-chart-expand-and-download-buttons__dropdown__btn--option","chart-expand":"tjs-chart-expand-and-download-buttons__chart-expand",chartExpand:"tjs-chart-expand-and-download-buttons__chart-expand","raise-to-title":"tjs-chart-expand-and-download-buttons__raise-to-title",raiseToTitle:"tjs-chart-expand-and-download-buttons__raise-to-title","chart-dropdown-button":"tjs-chart-expand-and-download-buttons__chart-dropdown-button",chartDropdownButton:"tjs-chart-expand-and-download-buttons__chart-dropdown-button","btn--dropdown":"tjs-chart-expand-and-download-buttons__btn--dropdown",btnDropdown:"tjs-chart-expand-and-download-buttons__btn--dropdown","btn-small":"tjs-chart-expand-and-download-buttons__btn-small tjs-_buttons__btn--small",btnSmall:"tjs-chart-expand-and-download-buttons__btn-small tjs-_buttons__btn--small","btn-download":"tjs-chart-expand-and-download-buttons__btn-download tjs-_buttons__btn",btnDownload:"tjs-chart-expand-and-download-buttons__btn-download tjs-_buttons__btn","btn--chart-expand":"tjs-chart-expand-and-download-buttons__btn--chart-expand tjs-_buttons__btn tjs-_buttons__btn-primary",btnChartExpand:"tjs-chart-expand-and-download-buttons__btn--chart-expand tjs-_buttons__btn tjs-_buttons__btn-primary","a--download":"tjs-chart-expand-and-download-buttons__a--download undefined tjs-_buttons__btn-primary",aDownload:"tjs-chart-expand-and-download-buttons__a--download undefined tjs-_buttons__btn-primary"}},function(e,t,r){e.exports={root:"tjs-collapsible__root",body:"tjs-collapsible__body",header:"tjs-collapsible__header",btn:"tjs-collapsible__btn tjs-_buttons__btn undefined","is-open":"tjs-collapsible__is-open tjs-_buttons__is-open",isOpen:"tjs-collapsible__is-open tjs-_buttons__is-open","is-inverse":"tjs-collapsible__is-inverse",isInverse:"tjs-collapsible__is-inverse"}},function(e,t,r){"use strict";var i=n(r(8)),a=n(r(11));function n(e){return e&&e.__esModule?e:{default:e}}e.exports=function(e){if(!(0,i.default)(e.name))throw new a.default("Custom components must have a name.");if(!(0,i.default)(e.processNode))throw new a.default("Custom components must have a processNode method.");this.name=e.name.toLowerCase(),this.attributes=e.attributes,this.processNode=e.processNode,this.furtherProcessing=e.furtherProcessing,this.isCorresponding=e.isCorresponding||function(e){},this.selfUpdateSeconds=e.selfUpdateSeconds||function(e){}}},,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAASdEVYdFRpdGxlAG1hcC1sb2NhdGlvbq/0KoQAAAm5SURBVHic7Z1bbBTXHYe/zXptjy8Y1jGxMeZio8QMlxqEoDJUGFJRqUSloRMe8tBKqfLQ5AGpl1RBlZqWCqSqrUgU3tJWjao+oAVEE6qICoQToIUS1XHwmhRsg2PHDsaXBdtje724DztGG7RzZi9zZmbRfpJlyWf2/H+H355z5lzxzc3Nkcc7POG2gDxfJW+Ix8gb4jHyhniMvCEeI2+Ix8gb4jHyhniMvCEeo8BtAemghMLrgGeBOqAGWJLwG+ALYCDh9+fAWV1TP3VebWb4vDx1ooTCfmAbsMf4qc8wq27glPFzQdfUmD0K7ceThiihcAnwE2A/UGlz9sPAEeAPuqZO2px31njKEKNGvAT8inhTJJMB4JfAn7xUYzxjiBIKfxv4HbDa4dCdwE91Tf2Hw3GT4rohSij8BPAb4HVXhcBh4Be6pj5wU4SrhiihcDnwN+A510R8lfeBF3VNve+WANcMUULhBuDvgOqKAHPCwHd0Te1yI7grhhhmXCaDN6jieyMs7P2Msrv9BCbvUzhxn4Ae/0JHlXJmSsuJlpQz/mQtY8ueYWpBMBOJw8AWN0xx3BCjmfo3adSMgD5OdcdlFt3uRBkbSiuevrCK0eWrGVyzhahSls5Hw8DXnW6+HDXE6MBPkWKf4Y9OU9N+keprl/DPRrOKHSsIMLi2mYH1W4kFilL92PvAHic7eqcNOUSKb1PBng5WXjpNwdSErRpmi0vpad7NyMo1qX7ksK6pB2wVIcAxQ4xxxmnLB+fmqPv4HEs++VCqnv6m7fRt3AE+XyqP73ZqnOKIIcYI/FMsBn3+2Sj150MEb1+XrglgZIVKV8teHvgDVo92AuucGNE7Nf3+ElYj8Lm5tM2IFSlMVFYzVvc0Y3VPM1FZTaxISfnzwVthGlpPgvWXcjXxMkhHeg0xJgpvYjE3VXf1bErN1ExZBUOrmhhZsZrJyuRZlowMErzVSdWN/1I4HrHMs39DS7z5EjMArJI9IenEesiPsTAj2NORkhl3GjfRu3mX5VvSZLCayWA1A+uaWXblDIuvXxU+X9vWyuSixVYdfQ3xGeiDlkKzQGoNMfqOLxEMAP3RaZqOvSl8m5opq6B72x4itQ0Z6ajo76L+wilhbZktLqVt334rs4eBp2T2JbL7kG1YjMZr2i8KzRhdvpr2va9mbAZApLaB9r2vMrrcvBsrmJqgpv2iVVaVxMskDdmG7BElBvRxqq9dMk2fKauga/vz6QzkTIkFiuja/jwzZRWmz1Rfu0RAH7fKSlimbHHVkOqOy8IRePe2PbaYMU8sUET3NnNJ/tko1R2XrbLJTUOMDQnCNfBFtztN0+40bsqqmTIjUtvAncZNGWkyqDfKJgWZNeRZUWLxvRHTicKZsgp6N++SIgqgd/Mu06ZLGRui+N6IVRbCsmWDTEPqRIkLez8zTRta1WRrU/UosUARQ6uaTNNF2gyEZcsGmYYIxx5ld/tN00ZWyF9WF8UQaTOQtgFDpiFLRImByeTLDLEixXQEbieTlTWm0yxm2hIQli0bXKshhRPJCz0leC21G7NYZtoSeAxriJ680NGSBVLEpBPLTFsCOVlDcmrfcJpIK5tMQ0ZFiVGlPOnfA5P3pIhJJ5aZtgSEZcsG1wyZKU1e6OIUpsvtwiyWmbYEctKQMVFitCR5of3TOiXDA1IEJVIyPIB/Wk+aZqYtAWHZskGmIcLh7viTtaZpwVuW0xdZI4oh0mZgOZTPFJmG/E+UOLbsGdO0qptt+KPTtguaxx+dpupmm2m6SJuBsGzZINMQ4amlqQVB9IVVSdMKxyMsu3JGiiiAZVfOmC5W6QurUtntKO1ElkxD2q0eEC0YLb5+lYp++3dyVvR3CZd0RZoSsCxbpsg0JAwIlzoH12whVmC+Baf+wilbmy5/dJr6C6dM02MFAQbXbLHKJka8bFKQZoiuqVPE9zOZElXKGFzbbJpeOB6hofWkLab4o9M0tJ4UrqsPrm1OZf9vp1E2KcheMTT/OhoMrN/KbHGpafqi252sP3E0q+aror+L9SeOChefZotLGVi/NZXsLMuUDbINOW71QCxQRE/zbuEzheMRGj94l5UX30urtvij06y8+B6NH7wr3p/l89Gz9blU12Asy5QNTmyU6yKF48xLPz5HbVurZX4yNsr1bdxJ/4btls8B3bqm2r+unIATE4DHgZ9ZPdS3cQfK2BDBW+L+snA8Qm1bK7VtrcSKFKbKKh7O2gYm71E8HjEdgSdjuGFdqmaA5NoBHjIEn4+ulr3Q6iPY05FSxv5pndJpHYYHMxI23LCO7m98N52PSDfEic3WV4hfcWHJA3+AGzteoH9DS6rHBDLD56Nv405utmg88Kf8nfyceFmkIt0QXVPngBMpf8Dno2/jDm7seEH49pUps8Wl3Ni5L51map4TRlmk4tQi0nHi12SkzMjKNUSWrnL7SFsi0psrcO7AzhNAHxmuRbt06DORAWCpE2cNnTzS9jpwKNt8HDoW/SgHdE09bEdGVjhpSDlwG1jkSED7GAWWO3U82rEb5YwCHXEqno0ccfKsutNX/L0JOLdonj0R4podw1FDdE2NAG85GTNL3jI0O4Ybl2AeAVy7bScNXGliHTdE19QR4KjTcTPgqKHVUdy6Jvb3gL13ZtjLBHGNjuOKIbqm3gXediN2irxtaHQcNy9SPgj0uhjfjF4kn0UX4ZohuqZOAK+4FV/AK4Y2V3D1qnFdU08Dx9zU8AjHDE2u4YW73/cjca9sGoyR5oy0DFw3RNfUQeA1t3UArxlaXMV1QwzeAT5yMf5HhgbXcf0i5XmUULgR+AQodDj0DPA1XVOduTXNAq/UEIx/EDdeNw96xQzwkCEGh4BzDsY7iw2LZnbimSZrHiUUrgbagKckhxoANuia+qXkOGnhtRoy/9b1IiBz/TpG/I53T5kBHjQEQNfUc8jtT97QNfW8xPwzxpOGGPwaOf3JGTzWbyTiuT4kEQn9yRdAk66p6e0lchAv15D5/mQf8bFCtkwBmpfNAI8bAqBr6ofAD7PMZg74ga6p/7JBklQ8bwiArql/Bd7IIosDuqZ6aVbZFE/3IY+ihMJ/Ab6f5sfe0TX1ZRl6ZJATNSSBl4HzaTz/T+BHcqTIIadqCIASCi8i/jpsfmlinP8A39Q11bnrhWwg12oIuqaOAi2A6LL4s8DOXDMDctAQeLgD8lskP6J8gvh/wGJ5RbUXyUlD4OHFBN8D/pzw5z8C+3RNlXdzjWRyrg9JhhIK/xaY0zX1525ryZbHwpDHiZxtsh5X8oZ4jLwhHiNviMfIG+Ix8oZ4jLwhHiNviMfIG+Ix/g8n327yzDR9pAAAAABJRU5ErkJggg=="},function(e,t,r){"use strict";var i=r(12),a=r(32),n=r(14),o=r(8),s=r(10),l=r(11),u=r(26),c=r(338),d=r(265),p=r(43),f=r(28),h=r(54),m=r(29),g=r(60),v=function(e,t,r,i){if(!o(e))throw new l("rectangle is required.");if((o(t)||o(r)||o(i))&&(!o(t)||!o(r)||!o(i)))throw new l("If any of position, direction, or up are specified, all must be specified.");this._rectangle=e,this._position=t,this._direction=r,this._up=i};s(v.prototype,{rectangle:{get:function(){return this._rectangle}},position:{get:function(){return this._position}},direction:{get:function(){return this._direction}},up:{get:function(){return this._up}}}),v.fromJson=function(e){if(o(e.lookAt)){var t=a.fromDegrees(e.lookAt.targetLongitude,e.lookAt.targetLatitude,e.lookAt.targetHeight),r=new c(n.toRadians(e.lookAt.heading),n.toRadians(e.lookAt.pitch),e.lookAt.range);return v.fromLookAt(t,r)}if(o(e.positionHeadingPitchRoll)){var s=a.fromDegrees(e.positionHeadingPitchRoll.cameraLongitude,e.positionHeadingPitchRoll.cameraLatitude,e.positionHeadingPitchRoll.cameraHeight);return v.fromPositionHeadingPitchRoll(s,n.toRadians(e.positionHeadingPitchRoll.heading),n.toRadians(e.positionHeadingPitchRoll.pitch),n.toRadians(e.positionHeadingPitchRoll.roll))}return o(e.position)&&o(e.direction)&&o(e.up)?new v(m.fromDegrees(e.west,e.south,e.east,e.north),new i(e.position.x,e.position.y,e.position.z),new i(e.direction.x,e.direction.y,e.direction.z),new i(e.up.x,e.up.y,e.up.z)):new v(m.fromDegrees(e.west,e.south,e.east,e.north))};var y=new i,b=new i,_=new i,w=new i,S=new i,C=new i,x=new f;v.fromLookAt=function(e,t){if(!o(e))throw new l("targetPosition is required.");if(!o(t))throw new l("headingPitchRange is required.");var r=function(e,t,r,a){t=n.clamp(t,-n.PI_OVER_TWO,n.PI_OVER_TWO),e=n.zeroToTwoPi(e)-n.PI_OVER_TWO;var o=h.fromAxisAngle(i.UNIT_Y,-t,k),s=h.fromAxisAngle(i.UNIT_Z,-e,L),l=h.multiply(s,o,s),u=p.fromQuaternion(l,P),c=i.clone(i.UNIT_X,a);return p.multiplyByVector(u,c,c),i.negate(c,c),i.multiplyByScalar(c,r,c),c}(t.heading,-t.pitch,t.range,y),a=i.normalize(i.negate(r,_),_),s=i.cross(a,i.UNIT_Z,w);i.magnitudeSquared(s)<n.EPSILON10&&i.clone(i.UNIT_X,s),i.normalize(s,s);var c=i.cross(s,a,S);i.normalize(c,c);var d=u.WGS84.cartographicToCartesian(e,C),E=g.eastNorthUpToFixedFrame(d,u.WGS84,x),I=f.multiplyByPointAsVector(E,r,b),T=i.add(d,I,new i),M=i.normalize(i.negate(I,new i),new i),A=f.multiplyByPointAsVector(E,c,new i),j=n.toRadians(30),D=Math.tan(j)*(t.range+e.height)/u.WGS84.minimumRadius,N=new m(e.longitude-D,e.latitude-D,e.longitude+D,e.latitude+D);return new v(N,T,M,A)};var E=new h,I=new p;v.fromPositionHeadingPitchRoll=function(e,t,r,a){if(!o(e))throw new l("cameraPosition is required.");if(!o(t))throw new l("heading is required.");if(!o(r))throw new l("pitch is required.");if(!o(a))throw new l("roll is required.");var s=new d(t-n.PI_OVER_TWO,r,a),c=h.fromHeadingPitchRoll(s,E),y=p.fromQuaternion(c,I),b=p.getColumn(y,0,_),w=p.getColumn(y,2,S),k=u.WGS84.cartographicToCartesian(e,C),L=g.eastNorthUpToFixedFrame(k,u.WGS84,x),P=f.multiplyByPointAsVector(L,b,new i),T=f.multiplyByPointAsVector(L,w,new i),M=n.toRadians(30),A=Math.tan(M)*e.height/u.WGS84.minimumRadius,j=new m(e.longitude-A,e.latitude-A,e.longitude+A,e.latitude+A);return new v(j,k,P,T)};var k=new h,L=new h,P=new p;e.exports=v},function(e,t,r){"use strict";var i=r(8),a=r(9),n=r(10),o=r(11),s=r(23),l=r(179),u=r(104),c=r(339).USER_ADDED_CATEGORY_NAME,d=r(665).CHART_DATA_CATEGORY_NAME,p=r(18),f=function(e){if(!i(e))throw new o("terria is required");this._terria=e,this._shareKeyIndex={},this._group=new u(e),this._group.name="Root Group",this._group.preserveOrder=!0,this.isLoading=!1,this._chartableItems=[],s.track(this,["isLoading","_chartableItems"]),s.defineProperty(this,"userAddedDataGroup",{get:this.upsertCatalogGroup.bind(this,u,c,"The group for data that was added by the user via the Add Data panel.")}),s.defineProperty(this,"chartDataGroup",{get:this.upsertCatalogGroup.bind(this,u,d,"A group for chart data.")}),s.defineProperty(this,"chartableItems",{get:function(){return this._chartableItems}})};n(f.prototype,{terria:{get:function(){return this._terria}},group:{get:function(){return this._group}},shareKeyIndex:{get:function(){return this._shareKeyIndex}}}),f.prototype.updateFromJson=function(e,t){var r=this;return t=a(t,{}),u.updateItems(e,t,this.group).then(function(){r.terria.nowViewing.sortByNowViewingIndices()})},f.prototype.serializeToJson=function(e){return this.terria.nowViewing.recordNowViewingIndices(),this.group.serializeToJson(e).items},f.prototype.updateByShareKeys=function(e){var t=this;return Object.keys(e).reduce(function(t,r){var i=e[r];return t.then(this._loadInSerial.bind(this,i.parents||[])).then(this._updateAndEnable.bind(this,r,i))}.bind(this),p()).then(function(){t.terria.nowViewing.sortByNowViewingIndices()})},f.prototype._loadInSerial=function(e){return e.reduce(function(e,t){return e.then(function(){if(this.shareKeyIndex[t])return this.shareKeyIndex[t].load()}.bind(this))}.bind(this),p())},f.prototype._updateAndEnable=function(e,t){var r=this.shareKeyIndex[e];return r?r.updateFromJson(t).then(r.load.bind(r)).then(r.enableWithParents.bind(r)):!0===t.isCsvForCharting&&(i(t.url)||i(t.dataUrl))?l.regenerateChartItem(t,this.terria):void console.warn("Share link has a catalog member with shareKey "+e+" but could not find this in the catalog")},f.prototype.upsertCatalogGroup=function(e,t,r){for(var i,a=this.group.items,n=0;n<a.length;++n)if((i=a[n]).name===t)return i;return(i=new e(this.terria)).name=t,i.description=r,i.isUserSupplied=!0,this.group.add(i),i},f.prototype.addChartableItem=function(e){-1===this._chartableItems.indexOf(e)&&this._chartableItems.push(e)},f.prototype.removeChartableItem=function(e){var t=this._chartableItems.indexOf(e);t>=0&&this._chartableItems.splice(t,1)},e.exports=f},function(e,t,r){"use strict";var i=r(373),a=r(107),n=r(27),o=r(8),s=function(e){i.call(this,e);var t=Object.getOwnPropertyDescriptor(i.prototype,"currentTime");Object.defineProperty(this,"currentTime",{get:function(){return t.get.call(this)},set:function(e){var r=this.determineGap(e);t.set.call(this,o(r)?r.stop:e)}}),this.onTick.addEventListener(function(){var e=this.currentTime,t=this.determineGap(e);this._currentTime=o(t)?t.stop:e},this)};n(i,s),s.prototype.setCatalogItem=function(e){this.catalogItem=e,e.clock.getValue(this)},s.prototype.determineGap=function(e){var t=this.catalogItem&&this.catalogItem.intervals;if(o(t)){var r=t.indexOf(e);if(r>=0)return;var i,n,s=~r;return 0===s?(i=this.catalogItem.clock.startTime,n=t.get(0).start):s===t.length&&(n=this.catalogItem.clock.stopTime),new a({start:i||t.get(s-1).stop,stop:n||t.get(s).start,isStartIncluded:!1,isStopIncluded:!1})}},s.prototype.tick=function(){return i.prototype.tick.call(this),this._currentTime},e.exports=s},function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(51),n=r(8),o=r(9),s=r(70),l=r(48);function u(e){this.loadJson=o(e,s),this.baseProxyUrl=void 0,this.proxyDomains=void 0,this.isOpenProxy=!1,this.corsDomains=[],this.alwaysUseProxy=l.isInternetExplorer()&&l.internetExplorerVersion()[0]<10,this.pageIsHttps="undefined"!=typeof window&&n(window.location)&&n(window.location.href)&&"https"===new a(window.location.href).protocol()}function c(e,t){if(!n(t))return!1;e=e.toLowerCase();for(var r=0;r<t.length;r++)if(e.match("(^|\\.)"+t[r]+"$"))return!0;return!1}u.prototype.init=function(e,t,r){this.baseProxyUrl=o(t,"proxy/"),this.proxyDomains=o(r,[]),e&&"object"===i(e)&&(this.isOpenProxy=!!e.proxyAllDomains,Array.isArray(e.allowProxyFor)&&(this.proxyDomains=e.allowProxyFor))},u.prototype.shouldUseProxy=function(e){if(!n(e))return!1;var t=new a(e),r=t.host();return""!==r&&(!(!this.isOpenProxy&&!c(r,this.proxyDomains))&&(!!this.alwaysUseProxy||(!(!this.pageIsHttps||"http"!==t.protocol())||!c(r,this.corsDomains))))},u.prototype.getURL=function(e,t){var r=void 0===t?"":"_"+t+"/";return this.baseProxyUrl+r+e},u.prototype.getURLProxyIfNecessary=function(e,t){return this.shouldUseProxy(e)?this.getURL(e,t):e},e.exports=u},function(e,t,r){"use strict";var i=r(8);e.exports=function(e){return i(e)||(e=window.navigator.userAgent),/(Android|iPhone|iPad|Windows Phone|IEMobile)/.test(e)}},function(e,t,r){"use strict";var i=r(586),a=r(37),n={Accept:"application/json5,application/json;q=0.8,*/*;q=0.01"};function o(e){return(e instanceof a?e:new a({url:e,headers:n})).fetchText().then(function(e){return i.parse(e)})}o.defaultHeaders=n,e.exports=o},function(e,t,r){"use strict";var i=r(25),a=r(9),n=r(8),o=r(10),s=r(11),l=r(153),u=r(23),c=r(137),d=function(e){this._terria=e,this._eventSubscriptions=new l,this.items=[],u.track(this,["items"]),this.showNowViewingRequested=new i,this._eventSubscriptions.add(this.terria.beforeViewerChanged,function(){!function(e){for(var t=e.items,r=0;r<t.length;++r){var i=t[r];n(i._loadForEnablePromise)||(i.isShown&&i._hide(),i.isEnabled&&i._disable())}}(this)},this),this._eventSubscriptions.add(this.terria.afterViewerChanged,function(){!function(e){for(var t=e.items,r=t.length-1;r>=0;--r){var i=t[r];if(!n(i._loadForEnablePromise)){if(i.isEnabled){try{i._enable()}catch(t){c(e.terria,t)}e.terria.currentViewer.addAttribution(i.attribution)}if(i.isShown)try{i._show()}catch(t){c(e.terria,t)}}}}(this)},this)};o(d.prototype,{terria:{get:function(){return this._terria}},hasItems:{get:function(){return this.items.length>0}},hasShownItems:{get:function(){for(var e=0;e<this.items.length;++e)if(this.items[e].isShown)return!0;return!1}},hasChildren:{get:function(){return this.items.length>0}}}),d.prototype.destroy=function(){this._eventSubscriptions.removeAll()},d.prototype.add=function(e,t){if(t=a(t,0),e.supportsReordering)for(;t<this.items.length&&!this.items[t].supportsReordering;)++t;else for(;t>0&&this.items.length>0&&this.items[t-1].supportsReordering;)--t;if(e.keepOnTop)for(;t>0&&this.items.length>0&&this.items[t-1].keepOnTop&&this.items[t-1]===e.supportsReordering;)--t;else for(;t<this.items.length&&this.items[t].keepOnTop&&this.items[t].supportsReordering===e.supportsReordering;)++t;this.items.splice(t,0,e)},d.prototype.remove=function(e){e.isEnabled=!1,this.items.remove(e)},d.prototype.removeAll=function(){for(var e=this.items.length-1;e>=0;--e)this.items[e].isEnabled=!1;this.items.removeAll()},d.prototype.raise=function(e,t){if(n(t)){if(this.items[t]!==e)throw new s("The provided index is not correct.")}else if((t=this.items.indexOf(e))<0)return;if(0!==t&&(!e.supportsReordering||this.items[t-1].supportsReordering)){var r=this.terria;r.currentViewer.raise(t),this.items.splice(t,1),this.items.splice(t-1,0,e),r.currentViewer.updateLayerOrderAfterReorder(),r.currentViewer.notifyRepaintRequired()}},d.prototype.lower=function(e,t){if(n(t)){if(this.items[t]!==e)throw new s("The provided index is not correct.")}else if((t=this.items.indexOf(e))<0)return;if(t!==this.items.length-1){var r=this.items[t+1];if(e.supportsReordering||!r.supportsReordering){var i=this.terria;i.currentViewer.lower(t),this.items.splice(t,1),this.items.splice(t+1,0,e),i.currentViewer.updateLayerOrderAfterReorder(),i.currentViewer.notifyRepaintRequired()}}},d.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},d.prototype.recordNowViewingIndices=function(){for(var e=0;e<this.items.length;++e)this.items[e].nowViewingIndex=e},d.prototype.sortByNowViewingIndices=function(){var e=this.items.slice();e.sort(function(e,t){return e.nowViewingIndex-t.nowViewingIndex});for(var t=0;t<e.length;++t)for(var r,i=e[t],a=this.items.indexOf(i);a>t&&a!==r;)r=a,this.raise(i,r),a=this.items.indexOf(i);n(this.terria.currentViewer)&&this.terria.currentViewer.notifyRepaintRequired()},e.exports=d},function(e,t,r){"use strict";var i=r(9),a=r(70),n=r(18);function o(){this.config=void 0}o.prototype.init=function(e){if(void 0!==this.config)return n(this.config);this.serverConfigUrl=i(e,"serverconfig/");var t=this;return a(this.serverConfigUrl).then(function(e){return t.config=e,t.config}).otherwise(function(e){console.error("Failed to get server config from  "+t.serverConfigUrl+". This means services such as proxy, convert and URL shortening may not work.")})},e.exports=o},function(e,t,r){"use strict";e.exports=function(e){this.services=[]}},function(e,t,r){"use strict";var i=r(23),a=r(8),n=function(e){this.clock=e,this._layerStack=[],i.track(this,["_layerStack"]),i.defineProperty(this,"topLayer",{get:function(){if(this._layerStack.length)return this._layerStack[this._layerStack.length-1]}}),i.getObservable(this,"topLayer").subscribe(function(e){a(e)?this.clock.setCatalogItem(this.topLayer):this.clock.shouldAnimate=!1},this)};n.prototype.addLayerToTop=function(e){var t=this._layerStack.indexOf(e);this._layerStack.push(e),t>-1&&this._layerStack.splice(t,1)},n.prototype.removeLayer=function(e){var t=this._layerStack.indexOf(e);this._layerStack.splice(t,1)},n.prototype.promoteLayerToTop=function(e){this._layerStack.indexOf(e)>-1&&this.addLayerToTop(e)},e.exports=n},function(e,t,r){"use strict";var i,a=(i=r(8))&&i.__esModule?i:{default:i};e.exports=function(e,t){if(!(0,a.default)(e))throw new TypeError("findIndex called on null or undefined");if(!Array.isArray(e))throw new TypeError("findIndex only works on array");if("function"!=typeof t)throw new TypeError("findIndex predicate must be a function");for(var r,i=Object(e),n=i.length>>>0,o=arguments[2],s=0;s<n;s++)if(r=i[s],t.call(o,r,s,i))return s;return-1}},function(e,t,r){"use strict";var i=r(137);e.exports=function(e,t,r){t.addEventListener("hashchange",function(){e.updateApplicationUrl(t.location,r).otherwise(function(t){i(e,t)})},!1)}},function(e,t,r){"use strict";var i=r(8),a=r(137);e.exports=function(e,t){var r;t.addEventListener("message",function(n){var o=n.origin;!i(o)&&i(n.originalEvent)&&(o=n.originalEvent.origin),(i(r)&&o===r||n.source===t.parent||n.source===t.opener)&&(n.source!==t.opener&&n.source!==t.parent||!n.data.allowOrigin||(r=n.data.allowOrigin,delete n.data.allowOrigin),/^react-devtools/gi.test(n.data.source)||e.updateFromStartData(n.data).otherwise(function(t){a(e,t)}))},!1),t.parent!==t&&t.parent.postMessage("ready","*"),t.opener&&t.opener.postMessage("ready","*")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(8)),a=n(r(58));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.terria=t,this.viewState=r,this._pending={},this.terria.disclaimerListener=this._handleInitialMessage.bind(this)}var t,r,n;return t=e,n=[{key:"_generateOptions",value:function(e){return{title:e.initialMessage.title,message:e.initialMessage.content,confirmText:e.initialMessage.confirmText,width:e.initialMessage.width,height:e.initialMessage.height}}}],(r=[{key:"dispose",value:function(){this.terria.disclaimerListener=void 0}},{key:"_handleInitialMessage",value:function(e,t){var r=(0,i.default)(e.initialMessage.key);if(r&&this.terria.getLocalProperty(e.initialMessage.key))t();else if(e.initialMessage.confirmation)if(r){var a=e.initialMessage.key;(0,i.default)(this._pending[a])?this._pending[a].push(t):(this._pending[a]=[t],this._openConfirmationModal(e,this._executeCallbacksForKey.bind(this,a)))}else this._openConfirmationModal(e,t);else r&&this.terria.setLocalProperty(e.initialMessage.key,!0),this._openNotificationModel(e),t()}},{key:"_openConfirmationModal",value:function(t,r){this.viewState.notifications.push((0,a.default)({confirmAction:r},e._generateOptions(t)))}},{key:"_openNotificationModel",value:function(t){this.viewState.notifications.push(e._generateOptions(t))}},{key:"_executeCallbacksForKey",value:function(e){(this._pending[e]||[]).forEach(function(e){e()}),this._pending[e]=void 0,this.terria.setLocalProperty(e,!0)}}])&&o(t.prototype,r),n&&o(t,n),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=m(r(32)),a=m(r(14)),n=m(r(453)),o=m(r(8)),s=m(r(1279)),l=m(r(341)),u=m(r(643)),c=m(r(23)),d=m(r(337)),p=m(r(1280)),f=m(r(671)),h=m(r(18));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geoidModel=new s.default(r(1281)),this.proj4Projection="+proj=utm +ellps=GRS80 +units=m +no_defs",this.projectionUnits="m",this.proj4longlat="+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs",this.lastHeightSamplePosition=new i.default,this.accurateSamplingDebounceTime=250,this.tileRequestInFlight=void 0,this.elevation=void 0,this.utmZone=void 0,this.latitude=void 0,this.longitude=void 0,this.north=void 0,this.east=void 0,this.useProjection=!1,this.debounceSampleAccurateHeight=(0,n.default)(this.sampleAccurateHeight,this.accurateSamplingDebounceTime),c.default.track(this,["elevation","utmZone","latitude","longitude","north","east","useProjection"])}var t,m,v;return t=e,(m=[{key:"toggleUseProjection",value:function(){this.useProjection=!this.useProjection}},{key:"updateCoordinatesFromCesium",value:function(e,t){var r=e.cesium.scene,a=r.camera.getPickRay(t),n=r.globe,s=n.pickTriangle(a,r);if((0,o.default)(s)){var c,d=n.ellipsoid,p=d.cartesianToCartographic(s.v0),f=d.cartesianToCartographic(s.v1),h=d.cartesianToCartographic(s.v2),m=d.cartesianToCartographic(s.intersection);if(n.terrainProvider instanceof l.default)m.height=void 0;else{var g=u.default.computeBarycentricCoordinates(m.longitude,m.latitude,p.longitude,p.latitude,f.longitude,f.latitude,h.longitude,h.latitude);if(g.x>=-1e-15&&g.y>=-1e-15&&g.z>=-1e-15){var v=g.x*p.height+g.y*f.height+g.z*h.height;m.height=v}var y=n.terrainProvider.getLevelMaximumGeometricError(s.tile.level),b=m.height,_=Math.max(s.tile.data.tileBoundingRegion.minimumHeight,b-y),w=Math.min(s.tile.data.tileBoundingRegion.maximumHeight,b+y),S=_-(this.geoidModel?this.geoidModel.minimumHeight:0),C=w+(this.geoidModel?this.geoidModel.maximumHeight:0);c=Math.max(Math.abs(b-S),Math.abs(C-b))}i.default.clone(m,this.lastHeightSamplePosition);var x=n.terrainProvider;this.cartographicToFields(m,c),x instanceof l.default||this.debounceSampleAccurateHeight(x,m)}else this.elevation=void 0,this.utmZone=void 0,this.latitude=void 0,this.longitude=void 0,this.north=void 0,this.east=void 0}},{key:"updateCoordinatesFromLeaflet",value:function(e,t){var r=e.leaflet.map.mouseEventToLatLng(t),a=i.default.fromDegrees(r.lng,r.lat);a.height=void 0,this.cartographicToFields(a)}},{key:"cartographicToFields",value:function(e,t){var r=a.default.toDegrees(e.latitude),i=a.default.toDegrees(e.longitude);if(this.useProjection){var n=(0,p.default)(i,r,this.proj4Projection,this.proj4longlat,this.projectionUnits);this.utmZone=n.utmZone,this.north=n.north,this.east=n.east}var o=(0,d.default)(i,r,{height:e.height,errorBar:t});this.latitude=o.latitude,this.longitude=o.longitude,this.elevation=o.elevation}},{key:"sampleAccurateHeight",value:function(e,t){var r=this;if(this.tileRequestInFlight)return this.debounceSampleAccurateHeight.cancel(),void this.debounceSampleAccurateHeight(e,t);var a=i.default.clone(t),n=this.geoidModel?this.geoidModel.getHeight(t.longitude,t.latitude):void 0,o=(0,f.default)(e,[a]);this.tileRequestInFlight=h.default.all([n,o],function(e){var n=e[0]||0;r.tileRequestInFlight=void 0,i.default.equals(t,r.lastHeightSamplePosition)&&(t.height=a.height-n,r.cartographicToFields(t))},function(){r.tileRequestInFlight=void 0})}}])&&g(t.prototype,m),v&&g(t,v),e}();t.default=v},function(e,t,r){"use strict";var i=r(14),a=r(8),n=r(550),o=r(18),s=function(e){this.gridFileUrl=e,this.data=void 0,this.minimumHeight=-106.99,this.maximumHeight=85.39};function l(e){return a(e.data)||(e.data=n(e.gridFileUrl)),o(e.data,function(t){if(!(e.data instanceof Int16Array)){for(var r=new Uint8Array(t),i=0;i<r.length;i+=2){var a=r[i];r[i]=r[i+1],r[i+1]=a}e.data=new Int16Array(t)}return e.data})}function u(e,t,r){var a=720*(i.PI_OVER_TWO-r)/Math.PI;a<0?a=0:a>720&&(a=720);var n=1440*(t=i.zeroToTwoPi(t))/i.TWO_PI;n<0?n=0:n>1440&&(n=1440);var o=0|n,s=0|a,l=n-o,u=a-s,d=1-l,p=1-u;return(c(e,s,o)*d*p+c(e,s,o+1)*l*p+c(e,s+1,o)*d*u+c(e,s+1,o+1)*l*u)/100}function c(e,t,r){return t>720?t=720:t<0&&(t=0),r>1439?r-=1440:r<0&&(r+=1440),e[1440*t+r]}s.isSupported=function(){return"undefined"!=typeof Int16Array&&"undefined"!=typeof Uint8Array},s.prototype.getHeight=function(e,t){return l(this).then(function(r){return u(r,e,t)})},s.prototype.getHeights=function(e){return l(this).then(function(t){for(var r=0;r<e.length;++r){var i=e[r];i.height=u(t,i.longitude,i.latitude)}return e})},e.exports=s},function(e,t,r){"use strict";var i,a=(i=r(503))&&i.__esModule?i:{default:i};e.exports=function(e,t,r,i,n){var o=1+Math.floor((e+180)/6),s=r+" +zone="+o+(t<0?" +south":""),l=(0,a.default)(i,s,[e,t]);return{utmZone:o+(t<0?"S":"N"),north:l[1].toFixed(2)+n,east:l[0].toFixed(2)+n}}},function(e,t,r){e.exports=r.p+"a22e6e4f04234b080bfffee8e4993335.DAC"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(1283)),a=n(r(23));function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.catalogSearchProvider=t.catalogSearchProvider||new i.default({terria:t.terria}),this.locationSearchProviders=t.locationSearchProviders||[],this.catalogSearchText="",this.isWaitingToStartCatalogSearch=!1,this.locationSearchText="",this.isWaitingToStartLocationSearch=!1,this.unifiedSearchText="",this.isWaitingToStartUnifiedSearch=!1,this.showLocationSearchResults=!0,this.showMobileLocationSearch=!1,this.showMobileCatalogSearch=!1,a.default.track(this,["catalogSearchProvider","locationSearchProviders","catalogSearchText","isWaitingToStartCatalogSearch","locationSearchText","isWaitingToStartLocationSearch","unifiedSearchText","isWaitingToStartUnifiedSearch","showLocationSearchResults","showMobileLocationSearch","showMobileCatalogSearch","sourcePinDataSource"]),a.default.getObservable(this,"catalogSearchText").subscribe(function(){r.isWaitingToStartCatalogSearch=!0,r.catalogSearchProvider.search("")}),a.default.getObservable(this,"locationSearchText").subscribe(function(){r.isWaitingToStartLocationSearch=!0,r.locationSearchProviders.forEach(function(e){e.search("")})}),a.default.getObservable(this,"unifiedSearchText").subscribe(function(){r.isWaitingToStartUnifiedSearch=!0,r.unifiedSearchProviders.forEach(function(e){e.search("")})}),a.default.defineProperty(this,"unifiedSearchProviders",{get:function(){return[this.catalogSearchProvider].concat(this.locationSearchProviders)}})}var t,r,n;return t=e,(r=[{key:"searchCatalog",value:function(){if(this.isWaitingToStartCatalogSearch)return this.isWaitingToStartCatalogSearch=!1,this.catalogSearchProvider.search(this.catalogSearchText)}},{key:"searchLocations",value:function(){var e=this;if(this.isWaitingToStartLocationSearch)return this.isWaitingToStartLocationSearch=!1,this.locationSearchProviders.map(function(t){return t.search(e.locationSearchText)})}},{key:"searchUnified",value:function(){var e=this;if(this.isWaitingToStartUnifiedSearch)return this.isWaitingToStartUnifiedSearch=!1,this.unifiedSearchProviders.map(function(t){return t.search(e.unifiedSearchText)})}}])&&o(t.prototype,r),n&&o(t,n),e}();t.default=s},function(e,t,r){"use strict";var i=r(27),a=r(139),n=r(342),o=r(343),s=r(9),l=r(8),u=r(18),c=function(e){n.call(this),e=s(e,s.EMPTY_OBJECT),this.terria=e.terria,this._searchInProgress=void 0,this.name="Catalogue Items",this.maxResults=s(e.maxResults,1e4)};function d(e,t){if(t.typeIs.length>0&&t.typeIs.indexOf(e.type.toLowerCase())<0)return!1;if(t.typeIsNot.length>0&&t.typeIsNot.indexOf(e.type.toLowerCase())>=0)return!1;if(!e.url)return 0===t.urlMatches.length;var r=!0;return t.urlDoesNotMatch.forEach(function(t){e.url.toLowerCase().indexOf(t)>=0&&(r=!1)}),!!r&&(0===t.urlMatches.length||(r=!1,t.urlMatches.forEach(function(t){e.url.toLowerCase().indexOf(t)>=0&&(r=!0)}),r))}function p(e,t,r,i,a,n,o){a.push(i),l(o)||(o={});for(var s=i.items,u=l(o.maxResults)?o.maxResults:e.maxResults,c=0;!t.cancel&&e.searchResults.length<u&&c<s.length;++c){var p=s[c];p.isHidden||(r.test(p.name)&&d(p,o)&&m(e.searchResults,p,a),l(p.items)&&(n=f(e,p,t,r,a,n,o)))}return a.pop(),n}function f(e,t,r,i,n,o,s){return n=n.slice(),u(o).then(function(){if(!r.cancel)return a(function(){if(!r.cancel){var a=t.load();return l(a)&&t.isLoading?a.then(function(){return p(e,r,i,t,n,void 0,s)}).otherwise(h):p(e,r,i,t,n,void 0,s)}})})}function h(){}function m(e,t,r){for(var i=-1,a=0;a<e.length;++a)if(t===e[a].catalogItem){i=a;break}var n="In multiple locations including: ";i>=0?0!==e[i].tooltip.indexOf(n)&&(e[i].tooltip=e[i].tooltip.replace(/^In /,n)):e.push(new o({name:t.name,isImportant:!0,catalogItem:t,tooltip:g(r)}))}function g(e){for(var t="In Data Catalogue",r=1;r<e.length;++r)t+=" -> "+e[r].name;return t}i(n,c),c.prototype.search=function(e){if(this._searchInProgress&&(this._searchInProgress.cancel=!0,this._searchInProgress=void 0),!l(e)||/^\s*$/.test(e))return this.isSearching=!1,void this.searchResults.removeAll();var t={typeIs:[],typeIsNot:[],urlMatches:[],urlDoesNotMatch:[]};!function(){for(var r=/(^|\s)(-?)is:([a-zA-Z0-9_-]+)\b/i;e.match(r);)e.match(r)[2]?t.typeIsNot.push(e.match(r)[3].toLowerCase()):t.typeIs.push(e.match(r)[3].toLowerCase()),e=e.replace(r,"").trim();for(var i=/\bshow:(all|[0-9]+)\b/i;e.match(i);)t.maxResults=e.match(i)[1].toLowerCase(),"all"===t.maxResults?t.maxResults=1e4:t.maxResults=parseInt(t.maxResults,10),e=e.replace(i,"").trim();for(var a=/(^|\s)(-?)url:([^ ]+)(\b|$)/i;e.match(a);)e.match(a)[2]?t.urlDoesNotMatch.push(e.match(a)[3].toLowerCase()):t.urlMatches.push(e.match(a)[3].toLowerCase()),e=e.replace(a,"").trim()}(),this.isSearching=!0,this.searchResults.removeAll(),this.searchMessage=void 0,this.terria.analytics.logEvent("search","catalogue",e);var r=this._searchInProgress={cancel:!1},i=this.terria.catalog.group,a=p(this,r,new RegExp(e,"i"),i,[],void 0,t),n=this;return u(a).then(function(){n.isSearching=!1,r.cancel||0===n.searchResults.length&&(n.searchMessage="Sorry, no catalogue items match your search query.")})},e.exports=c},function(e,t,r){"use strict";var i=r(27),a=r(342),n=r(343),o=r(424),s=r(14),l=r(9),u=r(8),c=r(26),d=r(1285),p=r(29),f=r(37),h=function(e){a.call(this),e=l(e,l.EMPTY_OBJECT),this.terria=e.terria,this._geocodeInProgress=void 0,this.name="Locations",this.url=l(e.url,"//dev.virtualearth.net/"),this.url.length>0&&"/"!==this.url[this.url.length-1]&&(this.url+="/"),this.key=o.getKey(e.key),this.flightDurationSeconds=l(e.flightDurationSeconds,1.5),this.primaryCountry=l(e.primaryCountry,"Australia"),this.culture=l(e.culture,"en-au"),this.key||console.warn("The "+this.name+" geocoder will always return no results because a Bing Maps key has not been provided. Please get a Bing Maps key from bingmapsportal.com and add it to parameters.bingMapsKey in config.json.")};function m(e,t){var r=t.bbox,i=r[0],a=r[1],n=r[2],o=r[3],s=p.fromDegrees(a,i,o,n);return function(){e.terria.currentViewer.zoomTo(s,e.flightDurationSeconds)}}i(a,h),h.prototype.search=function(e){if(!u(e)||/^\s*$/.test(e))return this.isSearching=!1,void this.searchResults.removeAll();var t,r;if(this.isSearching=!0,this.searchResults.removeAll(),this.searchMessage=void 0,this.terria.analytics.logEvent("search","bing",e),u(this._geocodeInProgress)&&(this._geocodeInProgress.cancel=!0,this._geocodeInProgress=void 0),u(this.terria.cesium)){var i=this.terria.cesium.scene.camera.positionWC,a=c.WGS84.cartesianToCartographic(i);t=s.toDegrees(a.longitude),r=s.toDegrees(a.latitude)}else if(u(this.terria.leaflet)){var o=this.terria.leaflet.map.getCenter();t=o.lng,r=o.lat}var l=d(new f({url:this.url+"REST/v1/Locations?culture="+this.culture+"&userLocation="+r+","+t,queryParameters:{query:e,key:this.key}}),"jsonp"),p=this,h=this._geocodeInProgress=l.then(function(e){if(!h.cancel)if(p.isSearching=!1,0!==e.resourceSets.length){var t=e.resourceSets[0];if(0!==t.resources.length){for(var r=[],i=[],a=0;a<t.resources.length;++a){var o=t.resources[a],s=o.name;if(u(s)){var l=r,c=!0,d=o.address?o.address.countryRegion:void 0;u(p.primaryCountry)&&d!==p.primaryCountry&&(l=i,c=!1,u(d)&&s.lastIndexOf(d)!==s.length-d.length&&(s+=", "+d)),l.push(new n({name:s,isImportant:c,clickAction:m(p,o),location:{latitude:o.point.coordinates[0],longitude:o.point.coordinates[1]}}))}}p.searchResults.push.apply(p.searchResults,r),p.searchResults.push.apply(p.searchResults,i),0===p.searchResults.length&&(p.searchMessage="Sorry, no locations match your search query.")}else p.searchMessage="Sorry, no locations match your search query."}else p.searchMessage="Sorry, no locations match your search query."}).otherwise(function(){h.cancel||(p.isSearching=!1,p.searchMessage="An error occurred while searching.  Please check your internet connection or try again later.")});return h},e.exports=h},function(e,t,r){"use strict";var i=r(10),a=r(37);function n(e,t){return a.createIfNeeded(e).fetchJsonp(t)}i(n,{loadAndExecuteScript:{get:function(){return a._Implementations.loadAndExecuteScript},set:function(e){a._Implementations.loadAndExecuteScript=e}},defaultLoadAndExecuteScript:{get:function(){return a._DefaultImplementations.loadAndExecuteScript}}}),e.exports=n},function(e,t,r){"use strict";var i=r(27),a=r(342),n=r(343),o=r(672),s=r(9),l=r(8),u=r(70),c=function(e){a.call(this),e=s(e,s.EMPTY_OBJECT),this.terria=e.terria,this._geocodeInProgress=void 0,this.name="Official Place Names",this.url=s(e.url,"http://www.ga.gov.au/gazetteer-search/gazetteer2012/select/"),this.forceUseOfProxy=s(e.forceUseOfProxy,!0),this.flightDurationSeconds=s(e.flightDurationSeconds,1.5)};function d(e,t){var r=["CONT","STAT","URBN","LOCB","LOCU","SUB","DI","CNTY","DI"];r.push("HBR","CAPE","PEN","PT","BAY","PORT","GULF","BGHT","COVE","MT","HILL","PEAK","OCEN","SEA","RESV","LAKE","RES","STRM"),r.push("PLN","REEF","VAL","PRSH");var i=1e4-100*(r.indexOf(e.feature_code)+1);return 1e4===i&&(i=0),e.name.toUpperCase()===t.toUpperCase()?i+=1e3:e.name.match(new RegExp("^"+t+"\\b","i"))?i+=800:e.name.match(new RegExp("\\b"+t+"\\b","i"))?i+=400:e.name.match(new RegExp("^"+t,"i"))&&(i+=200),"N/A"===e.state_id&&(i-=1e3),"U"===e.status&&(i-=500),"H"===e.status&&(i-=1e3),i}function p(e,t,r){var i=o(t,r,.2);return function(){e.terria.currentViewer.zoomTo(i,e.flightDurationSeconds)}}i(a,c),c.prototype.search=function(e){if(!l(e)||/^\s*$/.test(e))return this.isSearching=!1,void this.searchResults.removeAll();this.isSearching=!0,this.searchResults.removeAll(),this.searchMessage=void 0,this.terria.analytics.logEvent("search","gazetteer",e),l(this._geocodeInProgress)&&(this._geocodeInProgress.cancel=!0,this._geocodeInProgress=void 0);var t=this.url+"?q=name:*"+e+"*";t+="%20-class_code:(D%20E%20G%20J%20T)%20-feature_code:PRS",t+="&rows=200",(this.forceUseOfProxy||this.terria.corsProxy.shouldUseProxy(t))&&(t=this.terria.corsProxy.getURL(t));var r=u(t),i=this,a=this._geocodeInProgress=r.then(function(t){if(!a.cancel){if(i.isSearching=!1,l(t.response)&&t.response.numFound>0){var r=t.response.docs.sort(function(t,r){return function(e,t,r){return d(t,r)-d(e,r)}(t,r,e)});(r=function(e){var t,r={},i=[];for(t=0;t<e.length;t++){var a=Number(e[t].location.split(",")[0]).toFixed(1),n=Number(e[t].location.split(",")[1]).toFixed(1),o=e[t].name+"_"+a+" "+n;l(r[o])||(r[o]=e[t],i.push(e[t]))}return i}(r)).slice(0,10).forEach(function(e){var t=e.location.split(",")[0],r=e.location.split(",")[1];i.searchResults.push(new n({name:e.name+("N/A"!==e.state_id?" ("+e.state_id+")":""),isImportant:!!e.feature_code.match("^(CNTY|CONT|DI|PRSH|STAT|LOCB|LOCU|SUB|URBN)$"),clickAction:p(i,t,r),location:{latitude:t,longitude:r}}))})}else i.searchMessage="Sorry, no official place names match your search query";i.isSearching=!1}}).otherwise(function(){a.cancel||(i.isSearching=!1,i.searchMessage="An error occurred while searching.  Please check your internet connection or try again later.")});return a},e.exports=c},function(e,t,r){"use strict";var i=r(27),a=r(342),n=r(343),o=r(672),s=r(1288),l=r(9),u=r(8),c=function(e){a.call(this),e=l(e,l.EMPTY_OBJECT),this.terria=e.terria;var t=l(e.url,this.terria.configParameters.gnafSearchUrl);this.name="Addresses",this.gnafApi=l(e.gnafApi,new s(this.terria.corsProxy,t)),this._geocodeInProgress=void 0,this.flightDurationSeconds=l(e.flightDurationSeconds,1.5)};i(a,c),c.prototype.search=function(e){if(this.isSearching=!0,this.searchResults.removeAll(),u(e)&&!/^\s*$/.test(e)){this.searchMessage=void 0,this.terria.analytics.logEvent("search","gnaf",e),u(this._geocodeInProgress)&&(this._geocodeInProgress.cancel=!0,this._geocodeInProgress=void 0);var t=this.gnafApi.geoCode(e).then(function(e){t.cancel||(this.isSearching=!1,0!==e.length?this.searchResults=e.map(function(e){return new n({name:e.name,isImportant:e.locational,clickAction:(t=this.terria,r=e.location,i=this.flightDurationSeconds,a=o(r.latitude,r.longitude,.01),function(){t.currentViewer.zoomTo(a,i)}),location:e.location});var t,r,i,a}.bind(this)):this.searchMessage="Sorry, no locations match your search query.")}.bind(this)).otherwise(function(){t.cancel||(this.isSearching=!1,this.searchMessage="An error occurred while searching.  Please check your internet connection or try again later.")}.bind(this));this._geocodeInProgress=t}},e.exports=c},function(e,t,r){"use strict";var i=r(154),a=r(8),n=r(9),o=r(14),s=r(18),l=function(e,t){this.url=e.getURLProxyIfNecessary(n(t,"http://gnaf.nationalmap.nicta.com.au/v2/search")),this.bulk_url=e.getURLProxyIfNecessary(n(t,"http://gnaf.nationalmap.nicta.com.au/v2/bulkSearch"))};function u(e,t){var r=JSON.parse(t.json);return{score:t.score,locational:e,name:t.d61Address.slice(0,3).filter(function(e){return e.length>0}).join(", "),flatNumber:c(r.flat.number),level:c(r.level.number),numberFirst:c(r.numberFirst.number),numberLast:c(r.numberLast.number),street:r.street,localityName:r.localityName,localityVariantNames:r.localityVariant.map(function(e){return e.localityName}),state:{abbreviation:r.stateAbbreviation,name:r.stateName},postCode:r.postcode,location:{latitude:r.location.lat,longitude:r.location.lon}}}function c(e){return e>0?e:void 0}function d(e,t){var r={numHits:t,fuzzy:{maxEdits:2,minLength:5,prefixLength:2}};return e instanceof Array?r.addresses=e.map(p):r.addr=p(e),r}function p(e){return e.replace(/,/gi," ").replace(/\//gi," ")}function f(e,t){e.box={minLat:o.toDegrees(t.south),maxLon:o.toDegrees(t.east),maxLat:o.toDegrees(t.north),minLon:o.toDegrees(t.west)}}function h(e,t){for(var r=[],i=0,a=!1,n=t;n<1/0&&(n>=e.length&&(n=e.length,a=!0),r.push(e.slice(i,n)),i=n,!a);n+=t);return r}l.prototype.geoCode=function(e,t,r){var n=d(e,r=r||10);return a(t)&&f(n,t),i({url:this.url,method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"application/json"},responseType:"json"}).then(function(e){return e.hits.map(u.bind(void 0,a(t)))}.bind(this))},l.prototype.bulkGeoCode=function(e,t,r,i){i=i||1;var a=h(e,r=r||40),n=h(a,i);return this._runThrottledRequests(0,[],n,t)},l.prototype._runThrottledRequests=function(e,t,r,i){if(e===r.length)return t;var a=this,n=r[e].map(function(e){return a._bulkGeocodeSingleRequest(e,i)});return s.all(n).then(function(n){for(var o=0;o<n.length;o++)t=t.concat(n[o]);return a._runThrottledRequests(e+1,t,r,i)}).otherwise(function(e){throw e})},l.prototype._bulkGeocodeSingleRequest=function(e,t){var r=d(e,1);return a(t)&&f(r,t),i({url:this.bulk_url,method:"POST",data:JSON.stringify(r),headers:{"Content-Type":"application/json"},responseType:"json"}).then(function(e){for(var r=[],i=0;i<e.length;i++){var n=e[i];a(n.hits)&&r.push(n.hits.map(u.bind(void 0,a(t)))[0])}return r}.bind(this))},l._splitIntoBatches=h,e.exports=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){0;o=r(1299).default,i.default.render(a.default.createElement(o,{terria:e,allBaseMaps:t,viewState:n}),document.getElementById("ui"));var o};var i=n(r(124)),a=(n(r(1293)),n(r(13)));function n(e){return e&&e.__esModule?e:{default:e}}},,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var i=r(673),a=f(r(1300)),n=f(r(1306)),o=f(r(1307)),s=f(r(15)),l=f(r(13)),u=f(r(1311)),c=f(r(1319)),d=f(r(1320)),p=f(r(1675));function f(e){return e&&e.__esModule?e:{default:e}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function m(e){r.e(1).then(function(){var t=r(743);e(t)}.bind(null,r)).catch(r.oe)}function g(e){return l.default.createElement(d.default,h({},e,{version:p.default}),l.default.createElement(i.Menu,null,e.terria.configParameters.relatedMapsEnabled?l.default.createElement(u.default,{viewState:e.viewState}):null,e.terria.configParameters.aboutButtonEnabled?l.default.createElement(o.default,{caption:"About",href:"about.html",key:"about-link"}):null,e.terria.configParameters.helpButtonEnabled?l.default.createElement(o.default,{caption:"Help / FAQ",href:"help/help.html",key:"help-link"}):null),l.default.createElement(i.Nav,null,l.default.createElement(a.default,{terria:e.viewState.terria,key:"measure-tool"})),l.default.createElement(i.Nav,null,l.default.createElement(n.default,{terria:e.viewState.terria,key:"measure-tool"})),l.default.createElement(i.ExperimentalMenu,null,/Android|iPhone|iPad/i.test(navigator.userAgent)?l.default.createElement(c.default,{loadComponent:m,viewState:e.viewState,terria:e.viewState.terria,experimentalWarning:!0}):null))}r(1676),g.propTypes={terria:s.default.object,viewState:s.default.object}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(13)),a=u(r(15)),n=u(r(19)),o=u(r(21)),s=u(r(454)),l=u(r(39));function u(e){return e&&e.__esModule?e:{default:e}}var c=r(344),d=r(209),p=r(26),f=r(186),h=r(14),m=r(246),g=r(188),v=r(12),y=r(76),b=(0,n.default)({displayName:"MeasureTool",mixins:[o.default],propTypes:{terria:a.default.object},getInitialState:function(){return{totalDistanceMetres:0,totalAreaMetresSquared:0,userDrawing:new c({terria:this.props.terria,messageHeader:"Measure Tool",allowPolygon:!1,onPointClicked:this.onPointClicked,onPointMoved:this.onPointMoved,onCleanUp:this.onCleanUp,onMakeDialogMessage:this.onMakeDialogMessage})}},prettifyNumber:function(e,t){if(e<=0)return"";var r="m";t?e>999999&&(r="km",e/=1e6):e>999&&(r="km",e/=1e3);var i=(e=(e=e.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))+" "+r;return t&&(i+="²"),i},updateDistance:function(e){if(this.setState({totalDistanceMetres:0}),!(e.entities.values.length<1)){for(var t=e.entities.values[0].position.getValue(this.props.terria.clock.currentTime),r=1;r<e.entities.values.length;r++){var i=e.entities.values[r].position.getValue(this.props.terria.clock.currentTime);this.setState({totalDistanceMetres:this.state.totalDistanceMetres+this.getGeodesicDistance(t,i)}),t=i}if(this.state.userDrawing.closeLoop){var a=e.entities.values[0].position.getValue(this.props.terria.clock.currentTime);this.setState({totalDistanceMetres:this.state.totalDistanceMetres+this.getGeodesicDistance(t,a)})}}},updateArea:function(e){if(this.setState({totalAreaMetresSquared:0}),this.state.userDrawing.closeLoop&&!(e.entities.values.length<3)){for(var t=[],r=0;r<e.entities.values.length;r++){var i=e.entities.values[r].position.getValue(this.props.terria.clock.currentTime);t.push(i)}var a=f.fromPoints(t,p.WGS84),n=m.polygonsFromHierarchy(new g(t),a.projectPointsOntoPlane.bind(a),!1,p.WGS84),o=m.createGeometryFromPositions(p.WGS84,n.polygons[0],h.RADIANS_PER_DEGREE,!0,y.POSITION_ONLY);if(o.indices.length%3==0&&o.attributes.position.values.length%3==0){for(var s=[],l=0;l<o.attributes.position.values.length;l+=3)s.push(new v(o.attributes.position.values[l],o.attributes.position.values[l+1],o.attributes.position.values[l+2]));for(var u=0,c=0;c<o.indices.length;c+=3){var d=o.indices[c],b=o.indices[c+1],_=o.indices[c+2],w=v.distance(s[d],s[b]),S=v.distance(s[b],s[_]),C=v.distance(s[_],s[d]),x=(w+S+C)/2;u+=Math.sqrt(x*(x-w)*(x-S)*(x-C))}this.setState({totalAreaMetresSquared:u})}}},getGeodesicDistance:function(e,t){var r=p.WGS84.cartesianToCartographic(e),i=p.WGS84.cartesianToCartographic(t);return new d(r,i).surfaceDistance},onCleanUp:function(){this.setState({totalDistanceMetres:0}),this.setState({totalAreaMetresSquared:0})},onPointClicked:function(e){this.updateDistance(e),this.updateArea(e)},onPointMoved:function(e){this.onPointClicked(e)},onMakeDialogMessage:function(){var e=this.prettifyNumber(this.state.totalDistanceMetres,!1);return 0!==this.state.totalAreaMetresSquared&&(e+="<br>"+this.prettifyNumber(this.state.totalAreaMetresSquared,!0)),e},handleClick:function(){this.state.userDrawing.enterDrawMode()},render:function(){return i.default.createElement("div",{className:s.default.toolButton},i.default.createElement("button",{type:"button",className:s.default.btn,title:"Measure distance between locations",onClick:this.handleClick},i.default.createElement(l.default,{glyph:l.default.GLYPHS.measure})))}});t.default=b},,,function(e,t,r){"use strict";var i=r(8),a=r(1304),n=r(1305),o=r(177),s=function(e,t){this._terria=e,this._createDragPointsHelper(t);var r=this;this._terria.afterViewerChanged.addEventListener(function(){r._createDragPointsHelper(t),r.setUp()})};s.prototype.setUp=function(){this._dragPointsHelper.setUp(),i(this._entities)&&this._dragPointsHelper.updateDraggableObjects(this._entities)},s.prototype.getDragCount=function(){return this._dragPointsHelper.dragCount},s.prototype.resetDragCount=function(){this._dragPointsHelper.dragCount=0},s.prototype.updateDraggableObjects=function(e){this._entities=e,this._dragPointsHelper.updateDraggableObjects(e)},s.prototype._createDragPointsHelper=function(e){i(this._dragPointsHelper)&&this._dragPointsHelper.destroy(),this._terria.viewerMode===o.Leaflet?this._dragPointsHelper=new n(this._terria,e):this._dragPointsHelper=new a(this._terria,e)},e.exports=s},function(e,t,r){"use strict";var i=r(8),a=r(276),n=r(216),o=r(215),s=function(e,t){this._terria=e,this._setUp=!1,this.type="Cesium",this._pointMovedCallback=t,this._draggableObjects=new o,this._dragInProgress=!1,this.dragCount=0};s.prototype.setUp=function(){if(!this._setUp&&i(this._terria.cesium)&&i(this._terria.cesium.scene)&&i(this._terria.cesium.viewer)){this._scene=this._terria.cesium.scene,this._viewer=this._terria.cesium.viewer,this._mouseHandler=new a(this._scene.canvas,!1);var e=this;this._mouseHandler.setInputAction(function(t){if(i(e._draggableObjects.entities)&&0!==e._draggableObjects.entities.length){var r=e._scene.pick(t.position);if(e._originalPosition=t.position,i(r)){var a=r.id,n=e._draggableObjects.entities.values.filter(function(e){return e.id===a.id})[0];n&&(e._dragInProgress=!0,e._entityDragged=n,e._setCameraMotion(!1))}}},n.LEFT_DOWN),this._mouseHandler.setInputAction(function(t){if(e._dragInProgress){e.dragCount=e.dragCount+1;var r=e._viewer.camera.pickEllipsoid(t.endPosition,e._scene.globe.ellipsoid);e._entityDragged.position=r;for(var i=0;i<e._draggableObjects.entities.values.length;i++)e._draggableObjects.entities.values[i].id===e._entityDragged.id&&(e._draggableObjects.entities.values[i].position=r)}},n.MOUSE_MOVE),this._mouseHandler.setInputAction(function(t){e._dragInProgress&&t.position!==e._originalPosition&&e._pointMovedCallback(e._draggableObjects),e._dragInProgress=!1,e._setCameraMotion(!0)},n.LEFT_UP),this._setUp=!0}},s.prototype.updateDraggableObjects=function(e){this._draggableObjects=e},s.prototype.destroy=function(){i(this._mouseHandler)&&(this._mouseHandler.destroy(),this._setUp=!1)},s.prototype._setCameraMotion=function(e){this._scene.screenSpaceCameraController.enableRotate=e,this._scene.screenSpaceCameraController.enableZoom=e,this._scene.screenSpaceCameraController.enableLook=e,this._scene.screenSpaceCameraController.enableTilt=e,this._scene.screenSpaceCameraController.enableTranslate=e},e.exports=s},function(e,t,r){"use strict";var i=r(8),a=r(12),n=r(215),o=function(e,t){this._terria=e,this._setUp=!1,this.type="Leaflet",this._pointMovedCallback=t,this._draggableObjects=new n,this._dragInProgress=!1,this.dragCount=0};o.prototype.setUp=function(){this._setUp||i(this._terria.leaflet)&&i(this._terria.leaflet.map)&&(this._terria.leaflet.scene.featureMousedown.addEventListener(this._onMouseDownOnPoint,this),this._setUp=!0)},o.prototype._onMouseDownOnPoint=function(e){if(i(this._draggableObjects.entities)&&0!==this._draggableObjects.entities.length){var t=this._draggableObjects.entities.values.filter(function(t){return t.id===e.id})[0];i(t)&&(this._terria.leaflet.map.on("mousemove",this._onMouseMove,this),this._terria.leaflet.map.on("touchmove",this._onMouseMove,this),this._terria.leaflet.map.on("mouseup",this._onMouseUp,this),this._terria.leaflet.map.on("touchend",this._onMouseUp,this),this._dragInProgress=!0,this._entityDragged=t,this._terria.currentViewer.pauseMapInteraction(),this._originalPosition=t.position)}},o.prototype._onMouseMove=function(e){this._dragInProgress&&(this.dragCount=this.dragCount+1,i(this._entityDragged)&&(this._entityDragged.position=a.fromDegrees(e.latlng.lng,e.latlng.lat)))},o.prototype._onMouseUp=function(e){this._dragInProgress&&a.fromDegrees(e.latlng.lng,e.latlng.lat)!==this._originalPosition&&this._pointMovedCallback(this._draggableObjects),this._terria.leaflet.map.off("mousemove",this._onMouseMove,this),this._terria.leaflet.map.off("touchmove",this._onMouseMove,this),this._terria.leaflet.map.off("mouseup",this._onMouseUp,this),this._terria.leaflet.map.off("touchend",this._onMouseUp,this),this._dragInProgress=!1,this._terria.currentViewer.resumeMapInteraction()},o.prototype.updateDraggableObjects=function(e){this._draggableObjects=e},o.prototype.destroy=function(){this._setUp=!1},e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(13)),a=u(r(15)),n=u(r(19)),o=u(r(21)),s=u(r(454)),l=u(r(39));function u(e){return e&&e.__esModule?e:{default:e}}var c=r(344),d=r(209),p=r(26),f=r(186),h=r(14),m=r(246),g=r(188),v=r(12),y=r(76),b=(0,n.default)({displayName:"AreaTool",mixins:[o.default],propTypes:{terria:a.default.object},getInitialState:function(){return{totalDistanceMetres:0,totalAreaMetresSquared:0,userDrawing:new c({terria:this.props.terria,messageHeader:"Area Calculation Tool",allowPolygon:!0,onPointClicked:this.onPointClicked,onPointMoved:this.onPointMoved,onCleanUp:this.onCleanUp,onMakeDialogMessage:this.onMakeDialogMessage})}},prettifyNumber:function(e,t){if(e<=0)return"";var r="m";t?e>999999&&(r="km",e/=1e6):e>999&&(r="km",e/=1e3);var i=(e=(e=e.toFixed(2)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))+" "+r;return t&&(i+="²"),i},updateDistance:function(e){if(this.setState({totalDistanceMetres:0}),!(e.entities.values.length<1)){for(var t=e.entities.values[0].position.getValue(this.props.terria.clock.currentTime),r=1;r<e.entities.values.length;r++){var i=e.entities.values[r].position.getValue(this.props.terria.clock.currentTime);this.setState({totalDistanceMetres:this.state.totalDistanceMetres+this.getGeodesicDistance(t,i)}),t=i}if(this.state.userDrawing.closeLoop){var a=e.entities.values[0].position.getValue(this.props.terria.clock.currentTime);this.setState({totalDistanceMetres:this.state.totalDistanceMetres+this.getGeodesicDistance(t,a)})}}},updateArea:function(e){if(this.setState({totalAreaMetresSquared:0}),this.state.userDrawing.closeLoop&&!(e.entities.values.length<3)){for(var t=[],r=0;r<e.entities.values.length;r++){var i=e.entities.values[r].position.getValue(this.props.terria.clock.currentTime);t.push(i)}var a=f.fromPoints(t,p.WGS84),n=m.polygonsFromHierarchy(new g(t),a.projectPointsOntoPlane.bind(a),!1,p.WGS84),o=m.createGeometryFromPositions(p.WGS84,n.polygons[0],h.RADIANS_PER_DEGREE,!0,y.POSITION_ONLY);if(o.indices.length%3==0&&o.attributes.position.values.length%3==0){for(var s=[],l=0;l<o.attributes.position.values.length;l+=3)s.push(new v(o.attributes.position.values[l],o.attributes.position.values[l+1],o.attributes.position.values[l+2]));for(var u=0,c=0;c<o.indices.length;c+=3){var d=o.indices[c],b=o.indices[c+1],_=o.indices[c+2],w=v.distance(s[d],s[b]),S=v.distance(s[b],s[_]),C=v.distance(s[_],s[d]),x=(w+S+C)/2;u+=Math.sqrt(x*(x-w)*(x-S)*(x-C))}this.setState({totalAreaMetresSquared:u})}}},getGeodesicDistance:function(e,t){var r=p.WGS84.cartesianToCartographic(e),i=p.WGS84.cartesianToCartographic(t);return new d(r,i).surfaceDistance},onCleanUp:function(){this.setState({totalDistanceMetres:0}),this.setState({totalAreaMetresSquared:0})},onPointClicked:function(e){this.updateDistance(e),this.updateArea(e)},onPointMoved:function(e){this.onPointClicked(e)},onMakeDialogMessage:function(){var e=this.prettifyNumber(this.state.totalDistanceMetres,!1);return 0!==this.state.totalAreaMetresSquared&&(e+="<br>"+this.prettifyNumber(this.state.totalAreaMetresSquared,!0)),e},handleClick:function(){this.state.userDrawing.enterDrawMode()},render:function(){return i.default.createElement("div",{className:s.default.toolButton},i.default.createElement("button",{type:"button",className:s.default.btn,title:"Calculate Area",onClick:this.handleClick},i.default.createElement(l.default,{glyph:l.default.GLYPHS.areaMeasure})))}});t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(r(1308)),a=o(r(674)),n=o(r(456));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,a.default)(i.default,n.default);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(r(13)),a=s(r(39)),n=s(r(15)),o=s(r(1309));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return i.default.createElement("div",null,i.default.createElement("a",{className:o.default.btnAboutLink,href:e.href,target:"#"!==e.href?"_blank":void 0,title:e.caption},"#"!==e.href&&i.default.createElement(a.default,{glyph:a.default.GLYPHS.externalLink}),i.default.createElement("span",null,e.caption)))}l.defaultProps={href:"#"},l.propTypes={href:n.default.string,caption:n.default.string.isRequired};var u=l;t.default=u},function(e,t,r){e.exports={"btn--about-link":"tjs-menu-button__btn--about-link tjs-_buttons__btn tjs-_buttons__btn--map",btnAboutLink:"tjs-menu-button__btn--about-link tjs-_buttons__btn tjs-_buttons__btn--map"}},function(e,t,r){e.exports={root:"tjs-mobile-menu-item__root",link:"tjs-mobile-menu-item__link tjs-_buttons__btn"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(13)),a=u(r(15)),n=u(r(345)),o=u(r(217)),s=u(r(1314)),l=u(r(35));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t={inner:s.default.dropdownInner,icon:"gallery"};return i.default.createElement(n.default,{theme:t,btnText:"Related Maps",smallScreen:e.smallScreen,viewState:e.viewState,btnTitle:"See related maps"},i.default.createElement("div",{className:(0,l.default)(o.default.header)},i.default.createElement("label",{className:o.default.heading},"Related Maps")),i.default.createElement("p",null,"Clicking on a map below will open it in a separate window or tab."),i.default.createElement("div",{className:(0,l.default)(o.default.section,s.default.section)},i.default.createElement("a",{target:"_blank",href:"//renewables/"},i.default.createElement("img",{className:s.default.image,src:r(1315),alt:"AREMI"})),i.default.createElement("a",{target:"_blank",className:s.default.link,href:"//renewables/"},"AREMI"),i.default.createElement("p",null,"AREMI provides access to Australian spatial data relevant to the Renewable Energy industry, sourced from Government, Industry and Research.")),i.default.createElement("div",{className:(0,l.default)(o.default.section,s.default.section)},i.default.createElement("a",{target:"_blank",href:"//northernaustralia/"},i.default.createElement("img",{className:s.default.image,src:r(1316),alt:"Northern Australia"})),i.default.createElement("a",{target:"_blank",className:s.default.link,href:"//northernaustralia/"},"Northern Australia"),i.default.createElement("p",null,"The Northern Australia PPBCHA forms part of the Government's commitment to developing northern Australia by providing easy access to authoritative and other spatial data on northern Australia to governments, business and the public. More information on the Government's White Paper on Developing Northern Australia is available here:"," ",i.default.createElement("a",{target:"_blank",className:s.default.link,href:"https://northernaustralia.dpmc.gov.au"},"https://northernaustralia.dpmc.gov.au"),".")),i.default.createElement("div",{className:(0,l.default)(o.default.section,s.default.section)},i.default.createElement("a",{target:"_blank",href:"http://neiiviewer.nicta.com.au"},i.default.createElement("img",{className:s.default.image,src:r(1317),alt:"NEII Viewer"})),i.default.createElement("a",{target:"_blank",className:s.default.link,href:"http://www.neii.gov.au/viewer/"},"NEII Viewer"),i.default.createElement("p",null,"The National Environmental Information Infrastructure (NEII) is an information platform designed to improve discovery, access and re-use of nationally significant environmental data. More information on the NEII is available here:"," ",i.default.createElement("a",{target:"_blank",className:s.default.link,href:"http://neii.gov.au/data-viewer"},"neii.gov.au/data-viewer"),".")),i.default.createElement("div",{className:(0,l.default)(o.default.section,s.default.section)},i.default.createElement("a",{target:"_blank",href:"http://map.aurin.org.au"},i.default.createElement("img",{className:s.default.image,src:r(1318),alt:"AURIN Map"})),i.default.createElement("a",{target:"_blank",className:s.default.link,href:"http://map.aurin.org.au"},"AURIN Map"),i.default.createElement("p",null,"AURIN Map provides access to datasets on urban infrastructure for urban researchers, policy and decision makers.")))}c.propTypes={viewState:a.default.object.isRequired,smallScreen:a.default.bool};var d=c;t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(r(13)),a=d(r(19)),n=d(r(35)),o=d(r(39)),s=d(r(675)),l=d(r(676)),u=d(r(217)),c=d(r(8));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,a.default)({displayName:"DropdownPanel",mixins:[l.default],getInitialState:function(){return{localIsOpen:!1,caretOffset:void 0,dropdownOffset:void 0}},onInnerMounted:function(e){if(e){var t=this.buttonElement.offsetLeft-e.offsetLeft,r=t<e.offsetLeft?t:e.offsetLeft,i=Math.max(this.buttonElement.clientWidth/2-10-(r-this.buttonElement.offsetLeft),0);this.setState({caretOffset:i>=0&&i+"px",dropdownOffset:r+"px"})}else this.setState({caretOffset:void 0,dropdownOffset:void 0})},UNSAFE_componentWillReceiveProps:function(e){e.forceClosed&&this.onDismissed()},render:function(){var e,t=this;return e=(0,c.default)(o.default.GLYPHS[this.props.theme.icon])?o.default.GLYPHS[this.props.theme.icon]:this.props.theme.icon,i.default.createElement("div",{className:(0,n.default)(u.default.panel,this.props.theme.outer)},i.default.createElement("button",{onClick:this.openPanel,type:"button",className:(0,n.default)(u.default.button,this.props.theme.btn),title:this.props.btnTitle,ref:function(e){return t.buttonElement=e}},this.props.theme.icon?i.default.createElement(o.default,{glyph:e}):null,this.props.btnText?i.default.createElement("span",null,this.props.btnText):null),this.isOpen()?i.default.createElement(s.default,{showDropdownAsModal:this.props.showDropdownAsModal,modalWidth:this.props.modalWidth,onDismissed:this.onDismissed,innerRef:this.onInnerMounted,doNotCloseFlag:this.getDoNotCloseFlag(),theme:this.props.theme,caretOffset:this.state.caretOffset,dropdownOffset:this.state.dropdownOffset},this.props.children):null)}});t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(13)),a=u(r(19)),n=u(r(456)),o=u(r(676)),s=u(r(675)),l=u(r(217));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.default)({displayName:"MobilePanel",mixins:[o.default],getInitialState:function(){return{localIsOpen:!1}},render:function(){return i.default.createElement("div",null,i.default.createElement(n.default,{onClick:this.openPanel,caption:this.props.btnText}),this.isOpen()?[i.default.createElement("div",{className:l.default.overlay,key:"0"}),i.default.createElement(s.default,{theme:this.props.theme,caretOffset:"15px",doNotCloseFlag:this.getDoNotCloseFlag(),onDismissed:this.onDismissed,key:"1"},this.props.children)]:null)}});t.default=c},function(e,t,r){e.exports={"dropdown-inner":"tm-related-maps__dropdown-inner",dropdownInner:"tm-related-maps__dropdown-inner",section:"tm-related-maps__section tm-_base__clearfix",image:"tm-related-maps__image",link:"tm-related-maps__link tm-_base__link"}},function(e,t,r){e.exports=r.p+"8edfbe49f85e6994ebb732a110a3c502.jpg"},function(e,t,r){e.exports=r.p+"f5ad078d6d4ff7fc08ef6a3105dc2ef9.jpg"},function(e,t,r){e.exports=r.p+"8fc6de49c8bef0a89f25ca9ba37deb81.jpg"},function(e,t,r){e.exports=r.p+"4bc9b143747260dad71fd9951b364e3a.jpg"},function(e,t,r){"use strict";var i=o(r(13)),a=o(r(19)),n=o(r(15));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,a.default)({displayName:"SplitPoint",propTypes:{loadComponent:n.default.func.isRequired},getInitialState:function(){return{component:null}},componentDidMount:function(){var e=this;this.props.loadComponent(function(t){return e.setState({component:t})})},render:function(){var e=this.state.component;return e&&i.default.createElement(e,this.props)}});e.exports=s},function(e,t,r){"use strict";var i=T(r(13)),a=T(r(19)),n=T(r(15)),o=T(r(1321)),s=T(r(677)),l=T(r(1363)),u=T(r(1365)),c=T(r(1367)),d=T(r(701)),p=T(r(1487)),f=T(r(1490)),h=T(r(1522)),m=T(r(1524)),g=T(r(1533)),v=T(r(1597)),y=T(r(1599)),b=T(r(1645)),_=T(r(21)),w=T(r(1648)),S=T(r(1650)),C=T(r(1660)),x=T(r(734)),E=T(r(1661)),I=T(r(1664)),k=r(349),L=T(r(35));r(1673);var P=T(r(1674));function T(e){return e&&e.__esModule?e:{default:e}}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=(0,a.default)({displayName:"StandardUserInterface",mixins:[_.default],propTypes:{terria:n.default.object.isRequired,allBaseMaps:n.default.array,viewState:n.default.object.isRequired,minimumLargeScreenWidth:n.default.number,version:n.default.string,children:n.default.oneOfType([n.default.arrayOf(n.default.element),n.default.element])},getDefaultProps:function(){return{minimumLargeScreenWidth:768}},UNSAFE_componentWillMount:function(){var e=this,t=this;this.dragOverListener=function(e){e.dataTransfer.types&&(0,o.default)(e.dataTransfer.types,"Files")&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",t.acceptDragDropFile())},this.resizeListener=function(){e.props.viewState.useSmallScreenInterface=e.shouldUseMobileInterface()},window.addEventListener("resize",this.resizeListener,!1),this.resizeListener(),this.props.terria.configParameters.storyEnabled&&this.props.terria.stories&&this.props.terria.stories.length&&!this.props.viewState.storyShown&&this.props.viewState.notifications.push({title:"This map contains a story",message:"Would you like to view it now?",confirmText:"Yes",denyText:"Maybe later",confirmAction:function(){e.props.viewState.storyShown=!0},denyAction:function(){e.props.viewState.storyShown=!1},type:"story",width:300})},componentDidMount:function(){this._wrapper.addEventListener("dragover",this.dragOverListener,!1),this.props.terria.configParameters.storyEnabled&&0===this.props.terria.stories.length&&this.props.viewState.toggleFeaturePrompt("story",!0)},componentWillUnmount:function(){window.removeEventListener("resize",this.resizeListener,!1),document.removeEventListener("dragover",this.dragOverListener,!1)},acceptDragDropFile:function(){this.props.viewState.isDraggingDroppingFile=!0,this.props.viewState.explorerPanelIsVisible&&this.props.viewState.openUserData()},shouldUseMobileInterface:function(){return document.body.clientWidth<this.props.minimumLargeScreenWidth},render:function(){var e,t=this,r=(0,C.default)(this.props.viewState.useSmallScreenInterface,this.props.children),a=this.props.terria,n=this.props.allBaseMaps,o=this.props.viewState.storyBuilderShown&&!this.shouldUseMobileInterface(),_=this.props.terria.configParameters.storyEnabled&&this.props.terria.stories.length&&this.props.viewState.storyShown&&!this.props.viewState.explorerPanelIsVisible&&!this.props.viewState.storyBuilderShown;return i.default.createElement("div",{className:P.default.storyWrapper},i.default.createElement("div",{className:(0,L.default)(P.default.uiRoot,M({},P.default.withStoryBuilder,o)),ref:function(e){return t._wrapper=e}},i.default.createElement("div",{className:P.default.ui},i.default.createElement("div",{className:P.default.uiInner},this.props.viewState.hideMapUi()?null:[i.default.createElement(k.Small,{key:"0"},i.default.createElement(y.default,{terria:a,menuItems:r.menu,viewState:this.props.viewState,version:this.props.version,allBaseMaps:n})),i.default.createElement(k.Medium,{key:"1"},i.default.createElement("div",{className:(0,L.default)(P.default.sidePanel,"SidePanel"===this.props.viewState.topElement?"top-element":"",M({},P.default.sidePanelHide,this.props.viewState.isMapFullScreen)),tabIndex:0,onClick:function(){t.props.viewState.topElement="SidePanel"}},i.default.createElement(s.default,{terria:a,version:this.props.version}),i.default.createElement(S.default,{terria:a,viewState:this.props.viewState})))],i.default.createElement(k.Medium,null,i.default.createElement("div",{className:(0,L.default)(P.default.showWorkbenchButton,(e={},M(e,P.default.showWorkbenchButtonisVisible,this.props.viewState.isMapFullScreen),M(e,P.default.showWorkbenchButtonisNotVisible,!this.props.viewState.isMapFullScreen),e))},i.default.createElement(x.default,{terria:this.props.terria,viewState:this.props.viewState,minified:!1,btnText:"Show workbench",animationDuration:250}))),i.default.createElement("section",{className:P.default.map},i.default.createElement(w.default,{terria:a}),i.default.createElement(f.default,{terria:a,viewState:this.props.viewState,customFeedbacks:r.feedback}),i.default.createElement("main",null,i.default.createElement(c.default,{terria:a,viewState:this.props.viewState}),this.props.terria.configParameters.experimentalFeatures&&!this.props.viewState.hideMapUi()?i.default.createElement(v.default,{terria:a,viewState:this.props.viewState,experimentalItems:r.experimentalMenu}):null)))),this.props.viewState.hideMapUi()?null:i.default.createElement("div",{className:(0,L.default)(M({},P.default.explorerPanelIsVisible,this.props.viewState.explorerPanelIsVisible))},i.default.createElement(g.default,{terria:a,viewState:this.props.viewState,allBaseMaps:n,menuItems:r.menu,animationDuration:250}),i.default.createElement(m.default,{terria:a,viewState:this.props.viewState,navItems:r.nav})),i.default.createElement(b.default,{viewState:this.props.viewState}),i.default.createElement(h.default,{terria:a,viewState:this.props.viewState}),r.feedback.length||!this.props.terria.configParameters.feedbackUrl||this.props.viewState.hideMapUi()?null:i.default.createElement("aside",{className:P.default.feedback},i.default.createElement(p.default,{viewState:this.props.viewState})),i.default.createElement("div",{className:(0,L.default)(P.default.featureInfo,"FeatureInfo"===this.props.viewState.topElement?"top-element":"",M({},P.default.featureInfoFullScreen,this.props.viewState.isMapFullScreen)),tabIndex:0,onClick:function(){t.props.viewState.topElement="FeatureInfo"}},i.default.createElement(d.default,{terria:a,viewState:this.props.viewState})),i.default.createElement(l.default,{terria:this.props.terria,viewState:this.props.viewState}),i.default.createElement(u.default,{lastUploadedFiles:this.props.viewState.lastUploadedFiles,viewState:this.props.viewState}),_&&i.default.createElement(E.default,{terria:a,viewState:this.props.viewState})),this.props.terria.configParameters.storyEnabled&&i.default.createElement(I.default,{isVisible:o,terria:a,viewState:this.props.viewState,animationDuration:250}))}});e.exports=A},function(e,t,r){"use strict";e.exports=function(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports={branding:"tjs-branding__branding"}},function(e,t,r){"use strict";var i=c(r(13)),a=c(r(19)),n=c(r(15)),o=c(r(35)),s=c(r(21)),l=c(r(686)),u=c(r(1364));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,a.default)({displayName:"DragDropFile",mixins:[s.default],propTypes:{terria:n.default.object,viewState:n.default.object},target:null,handleDrop:function(e){var t=this;e.preventDefault(),e.stopPropagation(),(0,l.default)(e.dataTransfer.files,this.props.terria,this.props.viewState,null).then(function(e){e.length>0&&(t.props.viewState.myDataIsUploadView=!1,t.props.viewState.explorerPanelIsVisible?(t.props.viewState.viewCatalogMember(e[0]),t.props.viewState.openUserData()):t.notifyUpload(e))}),this.props.viewState.isDraggingDroppingFile=!1},notifyUpload:function(e){this.props.viewState.lastUploadedFiles=e.map(function(e){return e.name})},handleDragEnter:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",this.lastTarget=e.target},handleDragOver:function(e){e.preventDefault()},handleDragLeave:function(e){e.preventDefault(),0===e.screenX&&0===e.screenY&&(this.props.viewState.isDraggingDroppingFile=!1),e.target!==document&&e.target!==this.lastTarget||(this.props.viewState.isDraggingDroppingFile=!1)},handleMouseLeave:function(){this.props.viewState.isDraggingDroppingFile=!1},render:function(){return i.default.createElement("div",{onDrop:this.handleDrop,onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onMouseLeave:this.handleMouseLeave,className:(0,o.default)(u.default.dropZone,(e={},t=u.default.isActive,r=this.props.viewState.isDraggingDroppingFile,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},this.props.viewState.isDraggingDroppingFile?i.default.createElement("div",{className:u.default.inner},i.default.createElement("h3",{className:u.default.heading},"Drag & Drop"),i.default.createElement("div",{className:u.default.caption},"Your data anywhere to view on the map")):null);var e,t,r}});e.exports=d},function(e,t,r){e.exports={"drop-zone":"tjs-drag-drop-file__drop-zone tjs-_drop_zone__drop-zone",dropZone:"tjs-drag-drop-file__drop-zone tjs-_drop_zone__drop-zone","is-active":"tjs-drag-drop-file__is-active tjs-_drop_zone__is-active",isActive:"tjs-drag-drop-file__is-active tjs-_drop_zone__is-active",inner:"tjs-drag-drop-file__inner",heading:"tjs-drag-drop-file__heading",caption:"tjs-drag-drop-file__caption"}},function(e,t,r){"use strict";var i=c(r(21)),a=c(r(13)),n=c(r(19)),o=c(r(15)),s=c(r(35)),l=c(r(39)),u=c(r(1366));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,n.default)({displayName:"DragDropNotification",mixins:[i.default],propTypes:{viewState:o.default.object,lastUploadedFiles:o.default.array},notificationTimeout:null,getInitialState:function(){return{showNotification:!1}},UNSAFE_componentWillReceiveProps:function(e){var t=this;this.props.lastUploadedFiles!==e.lastUploadedFiles&&(clearTimeout(this.notificationTimeout),this.setState({showNotification:!0}),this.notificationTimeout=setTimeout(function(){t.setState({showNotification:!1})},5e3))},componentWillUnmount:function(){clearTimeout(this.notificationTimeout)},handleHover:function(){clearTimeout(this.notificationTimeout)},handleMouseLeave:function(){var e=this;this.notificationTimeout=setTimeout(function(){e.setState({showNotification:!1})},4e3)},handleClick:function(){this.props.viewState.openUserData()},render:function(){var e,t,r,i=this.props.lastUploadedFiles.join(",");return a.default.createElement("button",{className:(0,s.default)(u.default.notification,(e={},t=u.default.isActive,r=this.state.showNotification&&i.length>0,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),onMouseEnter:this.handleHover,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick},a.default.createElement("div",{className:u.default.icon},a.default.createElement(l.default,{glyph:l.default.GLYPHS.upload})),a.default.createElement("div",{className:u.default.info},a.default.createElement("span",{className:u.default.filename},'"',i,'"')," ",this.props.lastUploadedFiles.length>1?"have":"has"," been added to ",a.default.createElement("span",{className:u.default.action},"My data")))}});e.exports=d},function(e,t,r){e.exports={notification:"tjs-drag-drop-notification__notification",isActive:"tjs-drag-drop-notification__isActive",icon:"tjs-drag-drop-notification__icon",info:"tjs-drag-drop-notification__info",filename:"tjs-drag-drop-notification__filename",action:"tjs-drag-drop-notification__action"}},function(e,t,r){"use strict";var i=d(r(13)),a=d(r(19)),n=d(r(15)),o=d(r(35)),s=d(r(23)),l=d(r(21)),u=d(r(1368)),c=d(r(1486));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,a.default)({displayName:"ExplorerWindow",mixins:[l.default],propTypes:{terria:n.default.object.isRequired,viewState:n.default.object.isRequired},close:function(){this.props.viewState.explorerPanelIsVisible=!1,this.props.viewState.switchMobileView("nowViewing")},UNSAFE_componentWillMount:function(){this.props.viewState.explorerPanelAnimating=!0,this._pickedFeaturesSubscription=s.default.pureComputed(this.isVisible,this).subscribe(this.onVisibilityChange),this.onVisibilityChange(this.isVisible())},componentDidMount:function(){var e=this;this.escKeyListener=function(t){27!==t.keyCode||e.props.viewState.shareModalIsVisible||e.close()},window.addEventListener("keydown",this.escKeyListener,!0)},onVisibilityChange:function(e){e?this.slideIn():this.slideOut()},slideIn:function(){var e=this;this.props.viewState.explorerPanelAnimating=!0,this.setState({visible:!0}),setTimeout(function(){e.setState({slidIn:!0}),setTimeout(function(){return e.props.viewState.explorerPanelAnimating=!1},300)})},slideOut:function(){var e=this;this.setState({slidIn:!1}),setTimeout(function(){e.setState({visible:!1})},300)},componentWillUnmount:function(){window.removeEventListener("keydown",this.escKeyListener,!0),this._pickedFeaturesSubscription.dispose()},isVisible:function(){return!this.props.viewState.useSmallScreenInterface&&!this.props.viewState.hideMapUi()&&this.props.viewState.explorerPanelIsVisible},render:function(){var e,t,r,a=this.state.visible;return a?i.default.createElement("div",{className:(0,o.default)(c.default.modalWrapper,"AddData"===this.props.viewState.topElement?"top-element":""),id:"explorer-panel-wrapper","aria-hidden":!a},i.default.createElement("div",{onClick:this.close,id:"modal-overlay",className:c.default.modalOverlay,tabIndex:"-1"}),i.default.createElement("div",{id:"explorer-panel",className:(0,o.default)(c.default.explorerPanel,c.default.modalContent,(e={},t=c.default.isMounted,r=this.state.slidIn,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),"aria-labelledby":"modalTitle","aria-describedby":"modalDescription",role:"dialog"},i.default.createElement("button",{type:"button",onClick:this.close,className:c.default.btnCloseModal,title:"Close data panel","data-target":"close-modal"},"Done"),i.default.createElement(u.default,{terria:this.props.terria,viewState:this.props.viewState}))):null}});e.exports=p},function(e,t,r){"use strict";var i=p(r(13)),a=p(r(19)),n=p(r(15)),o=p(r(35)),s=p(r(1369)),l=p(r(1479)),u=p(r(21)),c=p(r(8)),d=p(r(1485));function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.default)({displayName:"Tabs",mixins:[u.default],propTypes:{terria:n.default.object.isRequired,viewState:n.default.object.isRequired,tabs:n.default.array},getTabs:function(){var e=this;if(this.props.tabs)return this.props.tabs;var t={name:"My Data",title:"my-data",category:"my-data",panel:i.default.createElement(l.default,{terria:this.props.terria,viewState:this.props.viewState})};return this.props.terria.configParameters.tabbedCatalog?[].concat(this.props.terria.catalog.group.items.filter(function(t){return t!==e.props.terria.catalog.userAddedDataGroup}).map(function(t,r){return{name:t.nameInCatalog,title:"data-catalog-".concat(t.name),category:"data-catalog",idInCategory:t.name,panel:i.default.createElement(s.default,{terria:e.props.terria,viewState:e.props.viewState,items:t.items||[t],searchPlaceholder:"Search whole catalogue"})}}),[t]):[{name:"Data Catalogue",title:"data-catalog",category:"data-catalog",panel:i.default.createElement(s.default,{terria:this.props.terria,viewState:this.props.viewState,items:this.props.terria.catalog.group.items,searchPlaceholder:"Search the catalogue"})},t]},activateTab:function(e,t){if(this.props.viewState.activeTabCategory=e,this.props.terria.configParameters.tabbedCatalog&&(this.props.viewState.activeTabIdInCategory=t,"data-catalog"===e)){var r=this.props.terria.catalog.group.items.filter(function(e){return e.name===t})[0];(0,c.default)(r)&&(r.toggleOpen&&(r.isOpen=!0),this.props.viewState.previewedItem=r)}},render:function(){var e=this,t=this.getTabs(),r=t.filter(function(t){return t.category===e.props.viewState.activeTabCategory}),a=r.filter(function(t){return t.idInCategory===e.props.viewState.activeTabIdInCategory})[0]||r[0]||t[0];return i.default.createElement("div",{className:d.default.tabs},i.default.createElement("ul",{className:d.default.tabList,role:"tablist"},t.map(function(e,t){return i.default.createElement("li",{key:t,id:"tablist--"+e.title,className:d.default.tabListItem,role:"tab","aria-controls":"panel--"+e.title,"aria-selected":e===a},i.default.createElement("button",{type:"button",onClick:this.activateTab.bind(this,e.category,e.idInCategory),className:(0,o.default)(d.default.btnTab,(r={},n=d.default.btnSelected,s=e===a,n in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s,r))},e.name));var r,n,s},this)),i.default.createElement("section",{key:a.title,id:"panel--"+a.title,className:(0,o.default)(d.default.tabPanel,d.default.isActive),"aria-labelledby":"tablist--"+a.title,role:"tabpanel",tabIndex:"0"},i.default.createElement("div",{className:d.default.panelContent},a.panel)))}});e.exports=f},function(e,t,r){"use strict";var i=d(r(13)),a=d(r(19)),n=d(r(15)),o=d(r(464)),s=d(r(465)),l=d(r(21)),u=d(r(472)),c=d(r(1478));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,a.default)({displayName:"DataCatalogTab",mixins:[l.default],propTypes:{terria:n.default.object,viewState:n.default.object,items:n.default.array,searchPlaceholder:n.default.string},getDefaultProps:function(){return{searchPlaceholder:"Search the catalogue"}},changeSearchText:function(e){this.props.viewState.searchState.catalogSearchText=e},search:function(){this.props.viewState.searchState.searchCatalog()},render:function(){var e=this.props.terria;return i.default.createElement("div",{className:c.default.root},i.default.createElement("div",{className:c.default.dataExplorer},i.default.createElement(u.default,{searchText:this.props.viewState.searchState.catalogSearchText,onSearchTextChanged:this.changeSearchText,onDoSearch:this.search,placeholder:this.props.searchPlaceholder}),i.default.createElement(o.default,{terria:this.props.terria,viewState:this.props.viewState,items:this.props.items})),i.default.createElement(s.default,{terria:e,viewState:this.props.viewState,previewed:this.props.viewState.previewedItem}))}});e.exports=p},function(e,t,r){"use strict";var i=f(r(13)),a=f(r(19)),n=f(r(15)),o=f(r(8)),s=f(r(339)),l=f(r(690)),u=f(r(691)),c=f(r(340)),d=f(r(21)),p=f(r(256));function f(e){return e&&e.__esModule?e:{default:e}}var h={loading:"Loading...",remove:"Remove from map",add:'Add this item. Hold down "shift" to keep the data catalogue open.',trash:"Remove from catalogue"},m=(0,a.default)({displayName:"DataCatalogItem",mixins:[d.default],propTypes:{item:n.default.object.isRequired,viewState:n.default.object.isRequired,removable:n.default.bool,terria:n.default.object},onBtnClicked:function(e){(0,o.default)(this.props.viewState.storyShown)&&(this.props.viewState.storyShown=!1),(0,o.default)(this.props.item.invoke)||this.props.viewState.useSmallScreenInterface?this.setPreviewedItem():this.props.removable?(0,l.default)(this.props.terria,this.props.item):this.toggleEnable(e)},toggleEnable:function(e){this.props.item.toggleEnabled(),this.setPreviewedItem(),!0!==this.props.item.isEnabled||e.shiftKey||e.ctrlKey||(this.props.viewState.explorerPanelIsVisible=!1,this.props.viewState.mobileView=null,this.props.viewState.firstTimeAddingData&&(this.props.viewState.featureInfoPanelIsVisible=!0))},setPreviewedItem:function(){(0,p.default)(this.props.item.terria,this.props.item.load()),this.props.viewState.viewCatalogMember(this.props.item),this.props.viewState.switchMobileView(this.props.viewState.mobileViewOptions.preview)},isSelected:function(){return(0,s.default)(this.props.item)?this.props.viewState.userDataPreviewedItem===this.props.item:this.props.viewState.previewedItem===this.props.item},render:function(){var e=this.props.item;return i.default.createElement(u.default,{onTextClick:this.setPreviewedItem,selected:this.isSelected(),text:e.nameInCatalog,title:(0,c.default)(e).map(function(e){return e.nameInCatalog}).join(" → "),btnState:this.getState(),onBtnClick:this.onBtnClicked,titleOverrides:h})},getState:function(){return this.props.item.isLoading?"loading":this.props.viewState.useSmallScreenInterface?"preview":this.props.removable?"trash":(0,s.default)(this.props.item)?null:this.props.item.isEnabled?"remove":(0,o.default)(this.props.item.invoke)?"stats":"add"}});e.exports=m},function(e,t,r){e.exports={"btn-catalog-item":"tjs-data-catalog-item__btn-catalog-item tjs-_buttons__btn",btnCatalogItem:"tjs-data-catalog-item__btn-catalog-item tjs-_buttons__btn",root:"tjs-data-catalog-item__root tjs-_base__clearfix","btn-catalog-item--is-previewed":"tjs-data-catalog-item__btn-catalog-item--is-previewed",btnCatalogItemIsPreviewed:"tjs-data-catalog-item__btn-catalog-item--is-previewed","btn-action":"tjs-data-catalog-item__btn-action tjs-_buttons__btn",btnAction:"tjs-data-catalog-item__btn-action tjs-_buttons__btn","btn-action--loading-on-map":"tjs-data-catalog-item__btn-action--loading-on-map",btnActionLoadingOnMap:"tjs-data-catalog-item__btn-action--loading-on-map"}},function(e,t,r){"use strict";var i=p(r(13)),a=p(r(19)),n=p(r(15)),o=p(r(339)),s=p(r(690)),l=p(r(692)),u=p(r(689)),c=p(r(340)),d=p(r(21));function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.default)({displayName:"DataCatalogGroup",mixins:[d.default],propTypes:{group:n.default.object.isRequired,viewState:n.default.object.isRequired,manageIsOpenLocally:n.default.bool,userData:n.default.bool,removable:n.default.bool,terria:n.default.object},getDefaultProps:function(){return{manageIsOpenLocally:!1,userData:!1}},getInitialState:function(){return{isOpen:!1}},toggleStateIsOpen:function(){this.setState({isOpen:!this.state.isOpen})},isOpen:function(){return this.props.manageIsOpenLocally?this.state.isOpen:this.props.group.isOpen},toggleOpen:function(){this.props.manageIsOpenLocally&&this.toggleStateIsOpen(),this.props.group.toggleOpen()},clickGroup:function(){this.toggleOpen(),this.props.viewState.viewCatalogMember(this.props.group)},isTopLevel:function(){var e=this.props.group.parent;return!e||!e.parent},isSelected:function(){return(0,o.default)(this.props.group)?this.props.viewState.userDataPreviewedItem===this.props.group:this.props.viewState.previewedItem===this.props.group},getNameOrPrettyUrl:function(){var e=this.props.group,t=e.nameInCatalog||"";return""!==t?t:(e.url||"").replace(/^https?:\/\//,"")},render:function(){var e=this.props.group;return i.default.createElement(l.default,{text:this.getNameOrPrettyUrl(),title:(0,c.default)(e).map(function(e){return e.nameInCatalog}).join(" → "),topLevel:this.isTopLevel(),open:this.isOpen(),loading:e.isLoading,emptyMessage:"This group is empty",onClick:this.clickGroup,removable:this.props.removable,removeUserAddedData:s.default.bind(this,this.props.terria,this.props.group),selected:this.isSelected()},this.isOpen()?e.items.map(function(e,t){return i.default.createElement(u.default,{key:e.uniqueId,member:e,viewState:this.props.viewState,userData:this.props.userData,overrideOpen:this.props.manageIsOpenLocally})},this):null)}});e.exports=f},function(e,t,r){e.exports={loader:"tjs-loader__loader",spin:"tjs-loader__spin"}},function(e,t,r){e.exports={"btn--catalog":"tjs-data-catalog-group__btn--catalog tjs-_buttons__btn",btnCatalog:"tjs-data-catalog-group__btn--catalog tjs-_buttons__btn",root:"tjs-data-catalog-group__root",trashGroup:"tjs-data-catalog-group__trashGroup tjs-_buttons__btn",btnCatalogTopLevel:"tjs-data-catalog-group__btnCatalogTopLevel",isPreviewed:"tjs-data-catalog-group__isPreviewed",folder:"tjs-data-catalog-group__folder",caret:"tjs-data-catalog-group__caret",offsetRight:"tjs-data-catalog-group__offsetRight","catalog-group":"tjs-data-catalog-group__catalog-group tjs-_base__list-reset",catalogGroup:"tjs-data-catalog-group__catalog-group tjs-_base__list-reset","catalog-group--lower-level":"tjs-data-catalog-group__catalog-group--lower-level",catalogGroupLowerLevel:"tjs-data-catalog-group__catalog-group--lower-level",label:"tjs-data-catalog-group__label tjs-_labels__label","label--no-results":"tjs-data-catalog-group__label--no-results tjs-data-catalog-group__label tjs-_labels__label",labelNoResults:"tjs-data-catalog-group__label--no-results tjs-data-catalog-group__label tjs-_labels__label"}},function(e,t,r){e.exports={"no-results":"tjs-search-header__no-results tjs-_labels__label",noResults:"tjs-search-header__no-results tjs-_labels__label"}},function(e,t,r){e.exports={"data-catalog":"tjs-data-catalog__data-catalog tjs-_base__list-reset tjs-_base__scrollbars",dataCatalog:"tjs-data-catalog__data-catalog tjs-_base__list-reset tjs-_base__scrollbars",label:"tjs-data-catalog__label tjs-_labels__label"}},function(e,t,r){"use strict";var i=r(8),a=r(1378),n=r(367),o=new a({html:!0,linkify:!0}),s=/^\s*<[^>]+>/;e.exports=function(e,t,r){return i(e)&&0!==e.length?(s.test(e)?a=e:(e&&"string"!=typeof e&&(e=e.toString()),a=o.render(e)),t?a:n.sanitize(a,r)):e;var a}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(r(13)),a=l(r(19)),n=l(r(15)),o=l(r(21)),s=l(r(1431));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,a.default)({displayName:"MetadataTable",mixins:[o.default],propTypes:{metadataItem:n.default.object.isRequired},render:function(){var e=this.props.metadataItem;return i.default.createElement("div",{className:s.default.root},e.items.length>0?i.default.createElement("table",null,i.default.createElement("tbody",null,e.items.map(function(e,t){return i.default.createElement("tr",{key:t},i.default.createElement("th",{className:s.default.name},e.name),i.default.createElement("td",{className:s.default.value},e.items.length>0?i.default.createElement(u,{metadataItem:e}):Array.isArray(e.value)?e.value.length>0&&e.value.every(c)?e.value.join(", "):null:e.value))},this))):null)}});function c(e){return"string"==typeof e||e instanceof String||!isNaN(parseFloat(e))}var d=u;t.default=d},function(e,t,r){e.exports={root:"tjs-metadata-table__root",value:"tjs-metadata-table__value"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=f(r(13)),a=f(r(19)),n=f(r(15)),o=f(r(694)),s=f(r(1433)),l=f(r(700)),u=f(r(21)),c=f(r(470)),d=f(r(192)),p=f(r(347));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,a.default)({displayName:"GroupPreview",mixins:[u.default],propTypes:{previewed:n.default.object.isRequired,terria:n.default.object.isRequired,viewState:n.default.object.isRequired,widthFromMeasureElementHOC:n.default.number},backToMap:function(){this.props.viewState.explorerPanelIsVisible=!1},render:function(){var e=this,t=this.props.previewed.nowViewingCatalogItem||this.props.previewed;return i.default.createElement("div",null,i.default.createElement("div",{className:c.default.titleAndShareWrapper,ref:function(t){return e.refToMeasure=t}},i.default.createElement("h3",null,this.props.previewed.name),i.default.createElement("div",{className:c.default.shareLinkWrapper},i.default.createElement(p.default,{catalogShare:!0,modalWidth:this.props.widthFromMeasureElementHOC,terria:this.props.terria,viewState:this.props.viewState}))),i.default.createElement("div",{className:c.default.previewedInfo},i.default.createElement("div",{className:c.default.url},this.props.previewed.description&&this.props.previewed.description.length>0?i.default.createElement("div",null,i.default.createElement("h4",{className:c.default.h4},"Description"),(0,d.default)(this.props.previewed.description,{catalogItem:this.props.previewed})):null,i.default.createElement(o.default,{metadataItem:t}),t.dataCustodian?i.default.createElement("div",null,i.default.createElement("h4",{className:c.default.h4},"Data Custodian"),(0,d.default)(t.dataCustodian,{catalogItem:t})):null,t.url&&t.url.length&&!t.hideSource?i.default.createElement(s.default,{metadataItem:t}):null)))}}),m=(0,l.default)(h);t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(r(13)),a=l(r(19)),n=l(r(15)),o=l(r(21)),s=l(r(469));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,a.default)({displayName:"DataPreviewUrl",mixins:[o.default],propTypes:{metadataItem:n.default.object.isRequired},selectUrl:function(e){e.target.select()},render:function(){return i.default.createElement("div",null,i.default.createElement("h4",{className:s.default.h4},this.props.metadataItem.typeName," URL"),"wms"===this.props.metadataItem.type?i.default.createElement("p",null,"This is a"," ",i.default.createElement("a",{href:"https://en.wikipedia.org/wiki/Web_Map_Service",target:"_blank",rel:"noopener noreferrer"},"WMS service"),", which generates map images on request. It can be used in GIS software with this URL:"):null,"wfs"===this.props.metadataItem.type?i.default.createElement("p",null,"This is a"," ",i.default.createElement("a",{href:"https://en.wikipedia.org/wiki/Web_Feature_Service",target:"_blank",rel:"noopener noreferrer"},"WFS service"),", which transfers raw spatial data on request. It can be used in GIS software with this URL:"):null,i.default.createElement("input",{readOnly:!0,className:s.default.field,type:"text",value:this.props.metadataItem.url,onClick:this.selectUrl}),"wms"===this.props.metadataItem.type||"esri-mapServer"===this.props.metadataItem.type&&this.props.metadataItem.layers?i.default.createElement("p",null,"Layer name",this.props.metadataItem.layers.split(",").length>1?"s":"",": ",this.props.metadataItem.layers):null,"wfs"===this.props.metadataItem.type?i.default.createElement("p",null,"Type name",this.props.metadataItem.typeNames.split(",").length>1?"s":"",": ",this.props.metadataItem.typeNames):null)}});t.default=u},function(e,t,r){"use strict";var i=r(18),a=r(36);e.exports=function(e){var t=i.defer(),r=0,n=setTimeout(function(){t.reject(new a({title:"Error printing",message:"Printing did not start within 10 seconds. Maybe this web browser does not support printing?"}))},1e4);function o(){clearTimeout(n)}function s(){r<=0&&t.resolve()}return e.matchMedia&&e.matchMedia("print").addListener(function(e){o(),e.matches?(console.log("print media start"),++r):(console.log("print media end"),--r,s())}),e.onbeforeprint=function(){o(),console.log("onbeforeprint"),++r},e.onafterprint=function(){o(),console.log("onafterprint"),--r,s()},e.document.execCommand("print",!0,null)||e.print(),t.promise}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(1436)),a=u(r(13)),n=u(r(1437)),o=u(r(35)),s=u(r(15)),l=u(r(39));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){var r,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(a=p(t).call(this,e))||"object"!==c(a)&&"function"!=typeof a?f(i):a).state={tooltip:null,success:null},r.resetTooltipLater=r.resetTooltipLater.bind(f(r)),r}var r,s,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a["default"].Component),r=t,(s=[{key:"componentDidMount",value:function(){var e=this;this.clipboardBtn=new i.default(".btn-copy-".concat(this.props.id)),this.clipboardBtn.on("success",function(t){e.setState({tooltip:"Copied to clipboard",success:!0}),e.resetTooltipLater()}),this.clipboardBtn.on("error",function(t){e.setState({tooltip:"Copy unsuccessful...",success:!1}),e.resetTooltipLater()})}},{key:"componentWillUnmount",value:function(){this.removeTimeout(),this.clipboardBtn.destroy()}},{key:"removeTimeout",value:function(){void 0!==this._timerID&&(window.clearTimeout(this._timerID),this._timerID=void 0)}},{key:"resetTooltipLater",value:function(){var e=this;this.removeTimeout(),this._timerID=window.setTimeout(function(){e.setState({tooltip:null,success:null})},3e3)}},{key:"render",value:function(){var e,t,r,i="light"===this.props.theme;return a.default.createElement("div",{className:n.default.clipboard},a.default.createElement("div",{className:n.default.title},"Share URL"),a.default.createElement("div",{className:n.default.explanation},"Anyone with this URL will be able to access this map."),a.default.createElement("div",{className:n.default.clipboardBody},this.props.source,a.default.createElement("button",{className:(0,o.default)("btn-copy-".concat(this.props.id),n.default.copyBtn),"data-clipboard-target":"#".concat(this.props.id)},"Copy")),this.state.tooltip&&a.default.createElement("div",{className:(0,o.default)(n.default.tooltipWrapper,(e={},t=n.default.tooltipWrapperLight,r=i,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},a.default.createElement(l.default,{glyph:this.state.success?l.default.GLYPHS.selected:l.default.GLYPHS.close}),a.default.createElement("span",{className:n.default.tooltipText},this.state.tooltip)))}}])&&d(r.prototype,s),u&&d(r,u),t}();t.default=m,m.propTypes={id:s.default.string.isRequired,source:s.default.object.isRequired,theme:s.default.oneOf(["dark","light"])}},,function(e,t,r){e.exports={clipboard:"tjs-clipboard__clipboard",clipboardBody:"tjs-clipboard__clipboardBody",copyBtn:"tjs-clipboard__copyBtn tjs-_buttons__btn tjs-_buttons__btn-primary tjs-_buttons__btn-large",tooltip:"tjs-clipboard__tooltip","tooltip-wrapper":"tjs-clipboard__tooltip-wrapper",tooltipWrapper:"tjs-clipboard__tooltip-wrapper","tooltip-wrapper--light":"tjs-clipboard__tooltip-wrapper--light",tooltipWrapperLight:"tjs-clipboard__tooltip-wrapper--light","tooltip-text":"tjs-clipboard__tooltip-text",tooltipText:"tjs-clipboard__tooltip-text",title:"tjs-clipboard__title",explanation:"tjs-clipboard__explanation"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(r(13)),a=s(r(15)),n=s(r(1439)),o=s(r(35));function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(null==e)return{};var r,i,a=function(e,t){if(null==e)return{};var r,i,a={},n=Object.keys(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var d=function(e){var t,r=e.large,a=e.light,s=e.dark,d=e.className,p=c(e,["large","light","dark","className"]);return i.default.createElement("input",l({},p,{className:(0,o.default)(n.default.input,(t={},u(t,n.default.large,r),u(t,n.default.light,a),u(t,n.default.dark,s),u(t,d,d),t))}))};d.propTypes={className:a.default.string,large:a.default.bool,dark:a.default.bool,light:a.default.bool};var p=d;t.default=p},function(e,t,r){e.exports={input:"tjs-input__input tjs-_form__field tjs-_form__input",large:"tjs-input__large",light:"tjs-input__light",dark:"tjs-input__dark"}},function(e,t,r){"use strict";var i=r(279),a=p(r(19)),n=p(r(466)),o=p(r(367)),s=p(r(701)),l=p(r(702)),u=p(r(15)),c=p(r(13)),d=p(r(124));function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.default)({displayName:"PrintView",propTypes:{terria:u.default.object,viewState:u.default.object,window:u.default.object,readyCallback:u.default.func},getInitialState:function(){return{mapImageDataUrl:void 0,ready:!1,printingStarted:!1}},componentDidMount:function(){var e=this;return this.props.terria.currentViewer.captureScreenshot().then(function(t){var r=e.props.window,i=window,a=r.setInterval(e.checkForImagesReady,200),n=i.setInterval(e.checkForImagesReady,200);e._stopCheckingForImages=function(){r.clearInterval(a),i.clearInterval(n),e._stopCheckingForImages=void 0},e.setState({mapImageDataUrl:t})})},componentWillUnmount:function(){this.stopCheckingForImages()},componentDidUpdate:function(){this.state.ready&&!this.state.printingStarted&&(this.props.readyCallback&&this.props.readyCallback(this.props.window),this.setState({printingStarted:!0}))},stopCheckingForImages:function(){this._stopCheckingForImages&&this._stopCheckingForImages()},checkForImagesReady:function(){if(!this.state.ready){var e=this.props.window.document.getElementsByTagName("img");if(0!==e.length){for(var t=!0,r=0;t&&r<e.length;++r)t=e[r].complete;t&&(this.stopCheckingForImages(),this.setState({ready:t}))}}},render:function(){return this.state.mapImageDataUrl?c.default.createElement("div",null,c.default.createElement("p",null,c.default.createElement("img",{className:"map-image",src:this.state.mapImageDataUrl,alt:"Map snapshot"})),c.default.createElement("h1",null,"Legends"),this.props.terria.nowViewing.items.map(this.renderLegend),this.renderFeatureInfo(),c.default.createElement("h1",null,"Dataset Details"),this.props.terria.nowViewing.items.map(this.renderDetails),c.default.createElement("h1",null,"Map Credits"),c.default.createElement("ul",null,this.props.terria.currentViewer.getAllAttribution().map(this.renderAttribution)),this.props.terria.configParameters.printDisclaimer?[c.default.createElement("h1",{key:"0"},"Print Disclaimer"),c.default.createElement("p",{key:"1"},this.props.terria.configParameters.printDisclaimer.text)]:null):c.default.createElement("div",null,"Creating print view...")},renderAttribution:function(e){var t={__html:o.default.sanitize(e)};return c.default.createElement("li",{key:e,dangerouslySetInnerHTML:t})},renderLegend:function(e){return e.isMappable?c.default.createElement("div",{key:e.uniqueId,className:"layer-legends"},c.default.createElement("div",{className:"layer-title"},e.name),e.discreteTime&&c.default.createElement("div",{className:"layer-time"},"Time: ",(0,i.formatDateTime)(e.discreteTime)),c.default.createElement(l.default,{item:e})):null},renderDetails:function(e){if(!e.isMappable)return null;var t=e.nowViewingCatalogItem||e;return c.default.createElement("div",{key:e.uniqueId,className:"layer-details"},c.default.createElement("h2",null,e.name),c.default.createElement(n.default,{item:t,printView:!0}))},renderFeatureInfo:function(){return this.props.viewState.featureInfoPanelIsVisible&&this.props.terria.pickedFeatures&&this.props.terria.pickedFeatures.features&&0!==this.props.terria.pickedFeatures.features.length?c.default.createElement("div",{className:"feature-info"},c.default.createElement("h1",null,"Feature Information"),c.default.createElement(s.default,{terria:this.props.terria,viewState:this.props.viewState,printView:!0})):null}});f.Styles="\n    .tjs-_base__list-reset {\n        list-style: none;\n        padding-left: 0;\n        margin: 0;\n    }\n\n    .background {\n        width: 100%;\n        fill: rgba(255, 255, 255, 1.0);\n    }\n\n    .map-image {\n        max-width: 95vw;\n        max-height: 95vh;\n    }\n\n    .layer-legends {\n        display: inline;\n        float: left;\n        padding-left: 20px;\n        padding-right: 20px;\n    }\n\n    .layer-title {\n        font-weight: bold;\n    }\n\n    h1, h2, h3 {\n        clear: both;\n    }\n\n    .tjs-_form__input {\n        width: 80%;\n    }\n",f.create=function(e){var t=e.terria,r=e.viewState,i=e.printWindow,a=void 0===i?window.open():i,n=e.readyCallback,o=e.closeCallback;o&&a.addEventListener("unload",function(){o(a)}),a.document.open(),a.document.close(),a.document.head.innerHTML='\n        <meta charset="UTF-8">\n        <title>'.concat(t.appName," Print View</title>\n        <style>").concat(f.Styles,"</style>\n        "),a.document.body.innerHTML='<div id="print"></div>';var s=c.default.createElement(f,{terria:t,viewState:r,window:a,readyCallback:n});d.default.render(s,a.document.getElementById("print"))},e.exports=f},function(e,t,r){"use strict";var i=c(r(8)),a=c(r(1442)),n=c(r(21)),o=c(r(13)),s=c(r(19)),l=c(r(15)),u=c(r(1446));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,s.default)({displayName:"FeatureInfoCatalogItem",mixins:[n.default],propTypes:{features:l.default.array,catalogItem:l.default.object,terria:l.default.object.isRequired,viewState:l.default.object.isRequired,onToggleOpen:l.default.func.isRequired,printView:l.default.bool},render:function(){var e,t,r=this,n=this.props.features,s=this.props.catalogItem,l=this.props.terria,c=null,d=0,p=l.configParameters.defaultMaximumShownFeatureInfos;return(0,i.default)(n)&&(d=n.length,(0,i.default)(s)&&(p=s.maximumShownFeatureInfos,e=s.featureInfoTemplate),t=d-p,c=n.slice(0,p).map(function(t,i){return o.default.createElement(a.default,{key:i,viewState:r.props.viewState,catalogItem:s,feature:t,position:l.pickedFeatures&&l.pickedFeatures.pickPosition,template:e,isOpen:t===l.selectedFeature||r.props.printView,onClickHeader:r.props.onToggleOpen,printView:r.props.printView})})),o.default.createElement("li",{className:u.default.group},o.default.createElement("ul",{className:u.default.sections},1===t?o.default.createElement("li",{className:u.default.messageItem},o.default.createElement("strong",null,"More than ",p," ",s.name," features were found."),o.default.createElement("br",null),"The first ",p," are shown below."):null,t>1?o.default.createElement("li",{className:u.default.messageItem},o.default.createElement("strong",null,d," ",s.name," features were found."),o.default.createElement("br",null),"The first ",p," are shown below."):null,c))}});e.exports=d},function(e,t,r){"use strict";var i=S(r(334)),a=S(r(13)),n=S(r(19)),o=S(r(15)),s=S(r(14)),l=S(r(35)),u=S(r(211)),c=S(r(8)),d=S(r(26)),p=S(r(85)),f=S(r(42)),h=S(r(335)),m=S(r(1443)),g=S(r(295)),v=S(r(39)),y=S(r(21)),b=S(r(668)),_=S(r(192)),w=S(r(1445));function S(e){return e&&e.__esModule?e:{default:e}}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.default.escape=function(e){return e};var x=(0,n.default)({displayName:"FeatureInfoSection",mixins:[y.default],propTypes:{viewState:o.default.object.isRequired,template:o.default.oneOfType([o.default.object,o.default.string]),feature:o.default.object,position:o.default.object,catalogItem:o.default.object,isOpen:o.default.bool,onClickHeader:o.default.func,printView:o.default.bool},getInitialState:function(){return{removeClockSubscription:void 0,timeoutIds:[],showRawData:!1}},UNSAFE_componentWillMount:function(){k(this,this.props.feature)},UNSAFE_componentWillReceiveProps:function(e){e.feature!==this.props.feature&&(L(this),k(this,e.feature))},componentWillUnmount:function(){L(this)},getPropertyValues:function(){return function(e,t,r){var i=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i&&("string"==typeof i||i instanceof String)&&/^\s*[[{]/.test(i))try{i=JSON.parse(i)}catch(e){}t[r]=i}return t}(e.currentProperties||(0,b.default)(e.properties,t));i=function e(t){if(!t||"object"!==C(t)||(0,p.default)(t))return t;var r={};for(var i in t)if(t.hasOwnProperty(i)){var a=i.replace(/[.#]/g,"_");r[a]=e(t[i])}return r}(i),(0,c.default)(r)&&function(e,t){for(var r in t)e.hasOwnProperty(r)&&((!(0,c.default)(t[r].type)||(0,c.default)(t[r].type)&&"number"===t[r].type)&&(e[r]=(0,g.default)(e[r],t[r])),(0,c.default)(t[r].type)&&"dateTime"===t[r].type&&(e[r]=A(e[r],t[r])))}(i,r);return i}(this.props.feature,I(this),this.props.template&&this.props.template.formats)},getTemplateData:function(){var e=this.getPropertyValues();if((0,c.default)(e)){if(e.terria={formatNumber:M,formatDateTime:j,urlEncodeComponent:D,urlEncode:N},this.props.position){var t=d.default.WGS84.cartesianToCartographic(this.props.position);e.terria.coords={latitude:s.default.toDegrees(t.latitude),longitude:s.default.toDegrees(t.longitude)}}this.props.catalogItem&&(e.terria.currentTime=this.props.catalogItem.discreteTime),e.terria.timeSeries=F(this.props.catalogItem,this.props.feature,e._terria_getChartDetails)}return e},clickHeader:function(){(0,c.default)(this.props.onClickHeader)&&this.props.onClickHeader(this.props.feature)},hasTemplate:function(){return this.props.template&&("string"==typeof this.props.template||this.props.template.template)},descriptionFromTemplate:function(){var e=this.props.template,t=this.getTemplateData();if((0,c.default)(t)&&(0,c.default)(t._terria_columnAliases))for(var r=0;r<t._terria_columnAliases.length;r++){var a=t._terria_columnAliases[r];t[a.id]=t[a.name]}return(0,c.default)(t)?"string"==typeof e?i.default.render(e,t):i.default.render(e.template,t,e.partials):"No information available"},descriptionFromFeature:function(){var e=this.props.feature,t=I(this)?I(this):f.default.now(),r=e.currentDescription||P(e,t);return!(0,c.default)(r)&&(0,c.default)(e.properties)&&(r=function e(t,r){var i="";"function"==typeof t.getValue&&(t=t.getValue(r));if("object"===C(t)){for(var a in t)if(t.hasOwnProperty(a)){if(-1!==O.indexOf(a))continue;var n=t[a];(0,c.default)(n)&&("function"==typeof n.getValue&&(n=n.getValue(r)),Array.isArray(t)?i+="<tr><td>"+e(n,r)+"</td></tr>":"object"===C(n)?i+="<tr><th>"+a+"</th><td>"+e(n,r)+"</td></tr>":i+="<tr><th>"+a+"</th><td>"+n+"</td></tr>")}}else i+="<tr><th></th><td>"+t+"</td></tr>";i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>");return i}(e.properties,t)),r},renderDataTitle:function(){var e=this.props.template;if("object"===C(e)&&(0,c.default)(e.name))return i.default.render(e.name,this.getPropertyValues());var t=this.props.feature;return t&&t.name||"Site Data"},isFeatureTimeVarying:function(e){return!(!(0,c.default)(e.description)&&!(0,c.default)(e.properties))&&((0,c.default)(this.props.template)?!function(e){var t=!0;if((0,c.default)(e.isConstant))return e.isConstant;for(var r in e)e.hasOwnProperty(r)&&(t=t&&(0,c.default)(e[r])&&!1!==e[r].isConstant);return t}(e.properties):!!(0,c.default)(e.description)&&!e.description.isConstant)},toggleRawData:function(){this.setState({showRawData:!this.state.showRawData})},render:function(){var e=this.props.catalogItem&&this.props.catalogItem.name||"",t=e;if(this.props.position){var r=d.default.WGS84.cartesianToCartographic(this.props.position),i=s.default.toDegrees(r.latitude),n=s.default.toDegrees(r.longitude);"string"==typeof t&&U(t,i,5)&&U(t,n,5)||(t+=" - Lat "+i.toFixed(5)+" Lon "+n.toFixed(5))}var o=(e?e+" - ":"")+this.renderDataTitle(),u=R(this);return a.default.createElement("li",{className:(0,l.default)(w.default.section)},this.props.printView?a.default.createElement("h2",null,o):null,this.props.printView?null:a.default.createElement("button",{type:"button",onClick:this.clickHeader,className:w.default.title},a.default.createElement("span",null,o),this.props.isOpen?a.default.createElement(v.default,{glyph:v.default.GLYPHS.opened}):a.default.createElement(v.default,{glyph:v.default.GLYPHS.closed})),this.props.isOpen?a.default.createElement("section",{className:w.default.content},!this.props.printView&&this.hasTemplate()?a.default.createElement("button",{type:"button",className:w.default.rawDataButton,onClick:this.toggleRawData},this.state.showRawData?"Show Curated Data":"Show Raw Data"):null,a.default.createElement("div",null,u.showRawData||!this.hasTemplate()?[u.hasRawData?u.rawData:null,u.hasRawData?null:a.default.createElement("div",{ref:"no-info",key:"no-info"},"No information available."),!this.props.printView&&u.timeSeriesChart?a.default.createElement("div",{className:w.default.timeSeriesChart,key:"2"},a.default.createElement("h4",null,u.timeSeriesChartTitle),u.timeSeriesChart):null,!this.props.printView&&(0,c.default)(u.downloadableData)?a.default.createElement(m.default,{key:"download",viewState:this.props.viewState,data:u.downloadableData,name:t}):null]:u.info,x.extraComponents.map(function(e,t){return a.default.createElement(e,{key:t,viewState:this.props.viewState,template:this.props.template,feature:this.props.feature,position:this.props.position,clock:E(this),catalogItem:this.props.catalogItem,isOpen:this.props.isOpen,onClickHeader:this.props.onClickHeader})},this))):null)}});function E(e){if((0,c.default)(e.props.catalogItem))return e.props.catalogItem.clock}function I(e){if((0,c.default)(e.props.catalogItem))return e.props.catalogItem.currentTime}function k(e,t){var r,i;e.setState({removeFeatureChangedSubscription:t.definitionChanged.addEventListener(function(t){!function(e,t){var r=(0,b.default)(e.properties,t);r!==e.currentProperties&&(e.currentProperties=r);var i=P(e,t);i!==e.currentDescription&&(e.currentDescription=i)}(t,I(e))})}),i=R(r=e).info,h.default.find(i).forEach(function(e,t){var i=e.type.selfUpdateSeconds(e.reactComponent);i>0&&function e(t,r,i,a){var n=setTimeout(function(){var o=t.props.feature.updateCounters,s={reactComponent:r,counter:(0,c.default)(o)&&(0,c.default)(o[a])?o[a].counter+1:1};if((0,c.default)(t.props.feature.updateCounters))t.props.feature.updateCounters[a]=s;else{var l={};l[a]=s,t.props.feature.updateCounters=l}setTimeout(function(){e(t,r,i,a),t.setState({timeoutIds:t.state.timeoutIds.filter(function(e){return n!==e})})},5)},1e3*i),o=t.state.timeoutIds;t.setState({timeoutIds:o.concat(n)})}(r,e.reactComponent,i,t)})}function L(e){(0,c.default)(e.state.removeFeatureChangedSubscription)&&(e.state.removeFeatureChangedSubscription(),e.setState({removeFeatureChangedSubscription:void 0})),e.state.timeoutIds.forEach(function(e){clearTimeout(e)})}function P(e,t){return e.description&&"function"==typeof e.description.getValue?e.description.getValue(t):e.description}function T(e){return function(t,r){var i=t.match(/^(\{[^}]+\})([\s\S]*)/),a=t.length>4&&"{"===t[0]&&"{"===t[1];if(!i||a)return e(r(t));var n=i[1].replace(/([{,])(\s*)([A-Za-z0-9_\-]+?)\s*:/g,'$1"$3":'),o=JSON.parse(n);return e(r(i[2]),o)}}function M(){return T(g.default)}function A(e,t){var r=Date.parse(e);return!(0,c.default)(r)||isNaN(r)?e:(0,c.default)(t)&&(0,c.default)(t.format)?(0,u.default)(r,t.format):(0,u.default)(r,"isoDateTime")}function j(){return T(A)}function D(){return function(e,t){return encodeURIComponent(t(e))}}function N(){return function(e,t){return encodeURI(t(e))}}var O=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function F(e,t,r){if((0,c.default)(r)&&(0,c.default)(e)&&e.isSampled&&h.default.isRegistered("chart")){var i=r(),a=e.dataViewId,n=(0,c.default)(a)?a+"--"+t.id:t.id;if(i){var o={xName:i.xName.replace(/\"/g,""),yName:i.yName.replace(/\"/g,""),title:i.yName,id:n.replace(/\"/g,""),data:i.csvData.replace(/\\n/g,"\\n"),units:i.units.join(",").replace(/\"/g,"")},s='x-column="'+o.xName+'" ',l='y-column="'+o.yName+'" ',u='id="'+o.id+'" ',d='column-units = "'+o.units+'" ';return o.chart="<chart "+s+l+d+u+">"+o.data+"</chart>",o}}}function R(e){var t,r,i=e.getPropertyValues(),a=(0,c.default)(i)?i._terria_numericalProperties||i:void 0,n=e.props.feature.updateCounters,o={catalogItem:e.props.catalogItem,feature:e.props.feature,updateCounters:n};if((0,c.default)(i)){var s=F(e.props.catalogItem,e.props.feature,i._terria_getChartDetails);(0,c.default)(s)&&(t=(0,_.default)(s.chart,o),r=s.title)}var l,u,d=!e.hasTemplate()||e.state.showRawData;return d&&(l=e.descriptionFromFeature(),(0,c.default)(l)&&(u=(0,_.default)(l,o))),{info:e.hasTemplate()?(0,_.default)(e.descriptionFromTemplate(),o):u,rawData:u,showRawData:d,hasRawData:!!l,timeSeriesChartTitle:r,timeSeriesChart:t,downloadableData:a}}function U(e,t,r){function i(e,t){var i=Math.pow(10,r);return(e(t*i)/i).toFixed(r)}return-1!==e.indexOf(i(Math.floor,t))||-1!==e.indexOf(i(Math.ceil,t))}x.extraComponents=[],e.exports=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(r(13)),a=d(r(15)),n=d(r(19)),o=d(r(48)),s=d(r(407)),l=d(r(451)),u=d(r(39)),c=d(r(1444));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){if(e){for(var t=[],r=[],i=Object.keys(e),a=0;a<i.length;a++){var n=i[a],o=p(e[n]);if("object"===o&&null!==e[n])return;"function"!==o&&(t.push(h(n)),r.push(h(e[n])))}return t.join(",")+"\n"+r.join(",")}}function h(e){return'"'+(e=e?"".concat(e):"").replace(/"/g,'""')+'"'}var m=(0,n.default)({displayName:"FeatureInfoDownload",propTypes:{data:a.default.object.isRequired,name:a.default.string.isRequired,viewState:a.default.object.isRequired,canUseDataUri:a.default.bool},getDefaultProps:function(){return{canUseDataUri:!(o.default.isInternetExplorer()||/Edge/.exec(navigator.userAgent))}},getLinks:function(){return[{href:s.default.make("csv",f(this.props.data)),download:"".concat(this.props.name,".csv"),label:"CSV"},{href:s.default.make("json",JSON.stringify(this.props.data)),download:"".concat(this.props.name,".json"),label:"JSON"}].filter(function(e){return!!e.href})},render:function(){var e=this.getLinks(),t=i.default.createElement("span",{className:c.default.iconDownload},i.default.createElement(u.default,{glyph:u.default.GLYPHS.opened}));return s.default.checkCompatibility()?i.default.createElement(l.default,{options:e,textProperty:"label",theme:{dropdown:c.default.download,list:c.default.dropdownList,button:c.default.dropdownButton,icon:t},buttonClassName:c.default.btn},"Download this Table "):null}});t.default=m},function(e,t,r){e.exports={download:"tjs-feature-info-download__download",btn:"tjs-feature-info-download__btn undefined tjs-_buttons__btn-primary","icon--download":"tjs-feature-info-download__icon--download",iconDownload:"tjs-feature-info-download__icon--download",dropdown__list:"tjs-feature-info-download__dropdown__list",dropdownList:"tjs-feature-info-download__dropdown__list",dropdown__button:"tjs-feature-info-download__dropdown__button tjs-_buttons__btn--small",dropdownButton:"tjs-feature-info-download__dropdown__button tjs-_buttons__btn--small"}},function(e,t,r){e.exports={content:"tjs-feature-info-section__content","time-series-chart":"tjs-feature-info-section__time-series-chart",timeSeriesChart:"tjs-feature-info-section__time-series-chart",section:"tjs-feature-info-section__section tjs-_base__clearfix",title:"tjs-feature-info-section__title tjs-_buttons__btn","raw-data-button":"tjs-feature-info-section__raw-data-button tjs-_buttons__btn tjs-_buttons__btn-primary tjs-_buttons__btn--small",rawDataButton:"tjs-feature-info-section__raw-data-button tjs-_buttons__btn tjs-_buttons__btn-primary tjs-_buttons__btn--small"}},function(e,t,r){e.exports={sections:"tjs-feature-info-catalog-item__sections tjs-_base__list-reset","message-item":"tjs-feature-info-catalog-item__message-item",messageItem:"tjs-feature-info-catalog-item__message-item"}},function(e,t,r){"use strict";var i=o(r(13)),a=o(r(15)),n=o(r(1448));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=u(this,c(t).call(this,e))).resizeListener=null,r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i["default"].Component),r=t,(a=[{key:"componentDidMount",value:function(){var e=this.node;(0,n.default)(e).draggable({ignoreFrom:"button",allowFrom:".drag-handle",inertia:!0,onmove:function(e){var t=e.target,r=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,i=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+r+"px, "+i+"px)",t.setAttribute("data-x",r),t.setAttribute("data-y",i)},restrict:{restriction:"parent",endOnly:!0,elementRect:{left:0,right:1,top:0,bottom:1}}}),this.resizeListener=function(){(0,n.default)(e).reflow({name:"drag",axis:"xy"})},window.addEventListener("resize",this.resizeListener,!1)}},{key:"componentWillUnmount",value:function(){n.default.isSet(this.node)&&(0,n.default)(this.node).unset(),window.removeEventListener("resize",this.resizeListener,!1)}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{ref:function(t){return e.node=t}},this.props.children)}}])&&l(r.prototype,a),o&&l(r,o),t}();p.propTypes={children:a.default.node.isRequired},e.exports=p},,function(e,t,r){e.exports={panel:"tjs-feature-info-panel__panel","is-collapsed":"tjs-feature-info-panel__is-collapsed",isCollapsed:"tjs-feature-info-panel__is-collapsed",body:"tjs-feature-info-panel__body tjs-_base__list-reset tjs-_base__scrollbars","is-visible":"tjs-feature-info-panel__is-visible",isVisible:"tjs-feature-info-panel__is-visible","is-translucent":"tjs-feature-info-panel__is-translucent",isTranslucent:"tjs-feature-info-panel__is-translucent",header:"tjs-feature-info-panel__header",btnPanelHeading:"tjs-feature-info-panel__btnPanelHeading","btn--download":"tjs-feature-info-panel__btn--download",btnDownload:"tjs-feature-info-panel__btn--download","btn--close-feature":"tjs-feature-info-panel__btn--close-feature tjs-_buttons__btn",btnCloseFeature:"tjs-feature-info-panel__btn--close-feature tjs-_buttons__btn",btnToggleFeature:"tjs-feature-info-panel__btnToggleFeature tjs-_buttons__btn","no-results":"tjs-feature-info-panel__no-results tjs-_labels__no-results",noResults:"tjs-feature-info-panel__no-results tjs-_labels__no-results",location:"tjs-feature-info-panel__location","btn-location":"tjs-feature-info-panel__btn-location tjs-_buttons__btn",btnLocation:"tjs-feature-info-panel__btn-location tjs-_buttons__btn","btn-location-selected":"tjs-feature-info-panel__btn-location-selected tjs-feature-info-panel__btn-location tjs-_buttons__btn",btnLocationSelected:"tjs-feature-info-panel__btn-location-selected tjs-feature-info-panel__btn-location tjs-_buttons__btn",satelliteSuggestionBtn:"tjs-feature-info-panel__satelliteSuggestionBtn tjs-_buttons__btn tjs-_buttons__btn-primary"}},function(e,t,r){e.exports={legend:"tjs-legend__legend tjs-_base__clearfix tjs-_base__list-reset",legendImagehasError:"tjs-legend__legendImagehasError",legend__inner:"tjs-legend__legend__inner",legendInner:"tjs-legend__legend__inner","legend--svg":"tjs-legend__legend--svg",legendSvg:"tjs-legend__legend--svg",loader:"tjs-legend__loader",imageAnchor:"tjs-legend__imageAnchor"}},function(e,t,r){e.exports={"share-panel":"tjs-share-panel__share-panel",sharePanel:"tjs-share-panel__share-panel","catalog-share":"tjs-share-panel__catalog-share",catalogShare:"tjs-share-panel__catalog-share","catalog-share-inner":"tjs-share-panel__catalog-share-inner",catalogShareInner:"tjs-share-panel__catalog-share-inner","dropdown-inner":"tjs-share-panel__dropdown-inner",dropdownInner:"tjs-share-panel__dropdown-inner","btn--catalogShare":"tjs-share-panel__btn--catalogShare",btnCatalogShare:"tjs-share-panel__btn--catalogShare","btn--withoutText":"tjs-share-panel__btn--withoutText",btnWithoutText:"tjs-share-panel__btn--withoutText","btn--wrapper":"tjs-share-panel__btn--wrapper",btnWrapper:"tjs-share-panel__btn--wrapper","btn--advanced":"tjs-share-panel__btn--advanced",btnAdvanced:"tjs-share-panel__btn--advanced","img--share":"tjs-share-panel__img--share",imgShare:"tjs-share-panel__img--share","link-wrapper":"tjs-share-panel__link-wrapper",linkWrapper:"tjs-share-panel__link-wrapper",link:"tjs-share-panel__link",paragraph:"tjs-share-panel__paragraph","clipboard-for-catalog-share":"tjs-share-panel__clipboard-for-catalog-share",clipboardForCatalogShare:"tjs-share-panel__clipboard-for-catalog-share",shareUrlfield:"tjs-share-panel__shareUrlfield",mobileHeader:"tjs-share-panel__mobileHeader","shorten-url":"tjs-share-panel__shorten-url",shortenUrl:"tjs-share-panel__shorten-url",explanation:"tjs-share-panel__explanation","format-button":"tjs-share-panel__format-button tjs-_buttons__btn tjs-_buttons__btn-primary",formatButton:"tjs-share-panel__format-button tjs-_buttons__btn tjs-_buttons__btn-primary","print-button":"tjs-share-panel__print-button tjs-_buttons__btn tjs-_buttons__btn-primary",printButton:"tjs-share-panel__print-button tjs-_buttons__btn tjs-_buttons__btn-primary","print-view-loader":"tjs-share-panel__print-view-loader",printViewLoader:"tjs-share-panel__print-view-loader",warning:"tjs-share-panel__warning","warning-link":"tjs-share-panel__warning-link",warningLink:"tjs-share-panel__warning-link"}},function(e,t,r){"use strict";var i=m(r(19)),a=m(r(15)),n=m(r(13)),o=m(r(8)),s=m(r(23)),l=m(r(18)),u=m(r(36)),c=m(r(192)),d=m(r(132)),p=m(r(21)),f=m(r(1453)),h=m(r(1465));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(t){g(this,e),this.catalogFunction=t,this._parameters={}}var t,r,i;return t=e,(r=[{key:"getParameter",value:function(e){var t=this._parameters[e.id];return t&&t.parameter===e||(t=this._parameters[e.id]=new b(e)),t}}])&&v(t.prototype,r),i&&v(t,i),e}(),b=function e(t){g(this,e),this.parameter=t,this.userValue=void 0,this.isValueValid=!0,this.wasEverBlurredWhileInvalid=!1,s.default.track(this,["userValue","isValueValid","wasEverBlurredWhileInvalid"])},_=(0,i.default)({displayName:"InvokeFunction",mixins:[p.default],propTypes:{terria:a.default.object,previewed:a.default.object,viewState:a.default.object},UNSAFE_componentWillMount:function(){this.parametersViewModel=new y(this.props.previewed)},UNSAFE_componentWillUpdate:function(e,t){e.previewed!==this.parametersViewModel.catalogFunction&&(this.parametersViewModel=new y(e.previewed))},submit:function(){var e=this;try{var t=(0,l.default)(this.props.previewed.invoke()).otherwise(function(t){t instanceof u.default&&e.props.previewed.terria.error.raiseEvent(t)});return this.props.previewed.terria.nowViewing.showNowViewingRequested.raiseEvent(),this.props.viewState.explorerPanelIsVisible=!1,this.props.viewState.switchMobileView(this.props.viewState.mobileViewOptions.preview),t}catch(e){return void(e instanceof u.default&&this.props.previewed.terria.error.raiseEvent(e))}},getParams:function(){var e=this;return this.props.previewed.parameters.map(function(t,r){return n.default.createElement(f.default,{key:t.id+e.props.previewed.uniqueId,parameter:t,viewState:e.props.viewState,previewed:e.props.previewed,parameterViewModel:e.parametersViewModel.getParameter(t)})})},validateParameter:function(e){return!!this.parametersViewModel.getParameter(e).isValueValid&&!(e.isRequired&&!(0,o.default)(e.value))},render:function(){if(this.props.previewed.isLoading)return n.default.createElement(d.default,null);var e=!1;return(0,o.default)(this.props.previewed.parameters)&&(e=!this.props.previewed.parameters.every(this.validateParameter)),n.default.createElement("div",{className:h.default.invokeFunction},n.default.createElement("div",{className:h.default.content},n.default.createElement("h3",null,this.props.previewed.name),n.default.createElement("div",{className:h.default.description},(0,c.default)(this.props.previewed.description,{catalogItem:this.props.previewed})),this.getParams()),n.default.createElement("div",{className:h.default.footer},n.default.createElement("button",{type:"button",className:h.default.btn,onClick:this.submit,disabled:e},"Run Analysis")))}});e.exports=_},function(e,t,r){"use strict";var i=S(r(13)),a=S(r(19)),n=S(r(15)),o=S(r(21)),s=S(r(703)),l=S(r(1454)),u=S(r(1455)),c=S(r(704)),d=S(r(1456)),p=S(r(706)),f=S(r(1457)),h=S(r(707)),m=S(r(1458)),g=S(r(1460)),v=S(r(1461)),y=S(r(1462)),b=S(r(1463)),_=S(r(8)),w=S(r(98));function S(e){return e&&e.__esModule?e:{default:e}}var C=(0,a.default)({displayName:"ParameterEditor",mixins:[o.default],propTypes:{parameter:n.default.object,viewState:n.default.object,previewed:n.default.object,parameterViewModel:n.default.object},fieldId:(new Date).getTime(),renderLabel:function(){return i.default.createElement("label",{key:this.props.parameter.id,className:w.default.label,htmlFor:this.fieldId+this.props.parameter.type},this.props.parameter.name,this.props.parameter.isRequired&&i.default.createElement("span",null," (required)"))},renderEditor:function(){for(var e=0;e<C.parameterTypeConverters.length;++e){var t=C.parameterTypeConverters[e].parameterTypeToDiv(this.props.parameter.type,this);if((0,_.default)(t))return t}return C.parameterTypeConverters.filter(function(e){return"generic"===e.id})[0].parameterTypeToDiv("generic",this)},render:function(){return i.default.createElement("div",{id:this.fieldId+this.props.parameter.type,className:w.default.fieldParameterEditor},this.renderEditor())}});C.parameterTypeConverters=[{id:"point",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(s.default,{previewed:t.props.previewed,viewState:t.props.viewState,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"line",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(l.default,{previewed:t.props.previewed,viewState:t.props.viewState,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"rectangle",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(u.default,{previewed:t.props.previewed,viewState:t.props.viewState,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"polygon",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(c.default,{previewed:t.props.previewed,viewState:t.props.viewState,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"enumeration",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(v.default,{previewed:t.props.previewed,viewState:t.props.viewState,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"dateTime",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(g.default,{previewed:t.props.previewed,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"region",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(d.default,{previewed:t.props.previewed,viewState:t.props.viewState,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"regionType",parameterTypeToDiv:function(e,t){if(e===this.id){var r=t.props.previewed.parameters.filter(function(e){return(0,_.default)(e.regionTypeParameter)&&e.regionTypeParameter===t.props.parameter})[0];return i.default.createElement("div",null,void 0===r?[t.renderLabel(),i.default.createElement(p.default,{previewed:t.props.previewed,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel,key:"1"})]:null,t.props.parameter.showInUi?null:i.default.createElement("div",{className:"Placeholder for regionType"}))}}},{id:"regionData",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(f.default,{previewed:t.props.previewed,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"boolean",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(h.default,{previewed:t.props.previewed,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"boolean-group",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(m.default,{previewed:t.props.previewed,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}},{id:"geojson",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(b.default,{previewed:t.props.previewed,viewState:t.props.viewState,parameter:t.props.parameter}))}},{id:"generic",parameterTypeToDiv:function(e,t){if(e===this.id)return i.default.createElement("div",null,t.renderLabel(),i.default.createElement(y.default,{previewed:t.props.previewed,parameter:t.props.parameter,parameterViewModel:t.props.parameterViewModel}))}}],e.exports=C},function(e,t,r){"use strict";var i=p(r(13)),a=p(r(19)),n=p(r(15)),o=p(r(14)),s=p(r(8)),l=p(r(26)),u=p(r(344)),c=p(r(21)),d=p(r(98));function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.default)({displayName:"LineParameterEditor",mixins:[c.default],propTypes:{previewed:n.default.object,parameter:n.default.object,viewState:n.default.object},getInitialState:function(){return{userDrawing:new u.default({terria:this.props.previewed.terria,onPointClicked:this.onPointClicked,onCleanUp:this.onCleanUp,allowPolygon:!1})}},onCleanUp:function(){this.props.viewState.openAddData()},setValueFromText:function(e){f.setValueFromText(e,this.props.parameter)},onPointClicked:function(e){for(var t=e.entities.values,r=[],i=0;i<t.length;i++){var a=t[i].position.getValue(this.props.previewed.terria.clock.currentTime),n=l.default.WGS84.cartesianToCartographic(a),s=[];s.push(o.default.toDegrees(n.longitude)),s.push(o.default.toDegrees(n.latitude)),r.push(s)}this.props.parameter.value=r},selectLineOnMap:function(){this.state.userDrawing.enterDrawMode(),this.props.viewState.explorerPanelIsVisible=!1},render:function(){return i.default.createElement("div",null,i.default.createElement("input",{className:d.default.field,type:"text",onChange:this.setValueFromText,value:f.getDisplayValue(this.props.parameter.value)}),i.default.createElement("button",{type:"button",onClick:this.selectLineOnMap,className:d.default.btnSelector},"Click to draw line"))}});f.setValueFromText=function(e,t){for(var r=e.target.value.split("], ["),i=[],a=0;a<r.length;a++){var n=r[a].replace("[","").replace("]","");if((n=n.split(",")).length>=2){var o=[];o.push(parseFloat(n[0])),o.push(parseFloat(n[1])),i.push(o)}}t.value=i},f.getDisplayValue=function(e){var t=e;if(!(0,s.default)(t)||t.length<1)return"";for(var r="",i=0;i<t.length;i++)r+="["+t[i][0].toFixed(3)+", "+t[i][1].toFixed(3)+"]",i!==t.length-1&&(r+=", ");return r.length>0?r:""},e.exports=f},function(e,t,r){"use strict";var i=h(r(13)),a=h(r(19)),n=h(r(15)),o=h(r(32)),s=h(r(14)),l=h(r(8)),u=h(r(29)),c=h(r(23)),d=h(r(183)),p=h(r(21)),f=h(r(98));function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,a.default)({displayName:"RectangleParameterEditor",mixins:[p.default],propTypes:{previewed:n.default.object,parameter:n.default.object,viewState:n.default.object},getInitialState:function(){return{value:this.getValue()}},onTextChange:function(e){this.setValue(e.target.value),this.setState({value:e.target.value})},getValue:function(){var e=this.props.parameter.value;return(0,l.default)(e)?this.outputDegrees(u.default.southwest(e).longitude)+","+this.outputDegrees(u.default.southwest(e).latitude)+" "+this.outputDegrees(u.default.northeast(e).longitude)+","+this.outputDegrees(u.default.northeast(e).latitude):""},outputDegrees:function(e){return s.default.toDegrees(e).toFixed(2)},setValue:function(e){for(var t=e.split(" "),r=[],i=0;i<t.length;i++){var a=t[i].split(",");a.length>=2&&r.push(o.default.fromDegrees(parseFloat(a[0]),parseFloat(a[1])))}this.props.parameter.value=u.default.fromCartographicArray(r)},selectRectangleOnMap:function(){var e=this.props.previewed.terria,t=this;e.pickedFeatures=void 0;var r=new d.default({message:"Press the SHIFT key and hold down the left mouse button to draw a rectangle",drawRectangle:!0,onCancel:function(){e.mapInteractionModeStack.pop(),e.selectBox=!1,t.props.viewState.openAddData()}});e.selectBox=!0,e.mapInteractionModeStack.push(r),c.default.getObservable(r,"pickedFeatures").subscribe(function(r){r instanceof u.default&&(t.props.parameter.value=r,e.mapInteractionModeStack.pop(),e.selectBox=!1,t.props.viewState.openAddData())}),t.props.viewState.explorerPanelIsVisible=!1},render:function(){return i.default.createElement("div",null,i.default.createElement("input",{className:f.default.field,type:"text",onChange:this.onTextChange,value:this.state.value}),i.default.createElement("button",{type:"button",onClick:this.selectRectangleOnMap,className:f.default.btnSelector},"Click to draw rectangle"))}});e.exports=m},function(e,t,r){"use strict";var i=c(r(13)),a=c(r(19)),n=c(r(15)),o=c(r(21)),s=c(r(98)),l=c(r(705)),u=c(r(183));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,a.default)({displayName:"RegionParameterEditor",mixins:[o.default],propTypes:{previewed:n.default.object,viewState:n.default.object,parameter:n.default.object},selectRegionOnMap:function(){d.selectOnMap(this.props.viewState,this.props.parameter,this.props.previewed)},render:function(){return i.default.createElement("div",null,i.default.createElement("input",{className:s.default.field,type:"text",readOnly:!0,value:l.default.getDisplayValue(this.props.parameter.value,this.props.parameter)}),i.default.createElement("button",{type:"button",onClick:this.selectRegionOnMap,className:s.default.btnSelector},"Select region"))}});d.selectOnMap=function(e,t,r){var a=r.terria;a.pickedFeatures=void 0;var n=new u.default({message:"Select a region on the map",onCancel:function(){a.mapInteractionModeStack.pop(),e.openAddData()},buttonText:"Done",customUi:function(){return i.default.createElement(l.default,{className:s.default.parameterEditor,previewed:r,parameter:t})}});a.mapInteractionModeStack.push(n),e.explorerPanelIsVisible=!1},e.exports=d},function(e,t,r){"use strict";var i=f(r(13)),a=f(r(19)),n=f(r(15)),o=f(r(8)),s=f(r(23)),l=f(r(128)),u=f(r(21)),c=f(r(691)),d=f(r(692)),p=f(r(98));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,a.default)({displayName:"RegionDataParameterEditor",mixins:[u.default],propTypes:{previewed:n.default.object,parameter:n.default.object},UNSAFE_componentWillMount:function(){this.catalogItemDetails={}},UNSAFE_componentWillReceiveProps:function(e){this.catalogItemDetails={}},getValue:function(){return this.props.parameter.value},setValue:function(e){this.props.parameter.value=e},regionProvider:function(){return this.props.parameter.regionProvider},catalogItemsWithMatchingRegion:function(){return this.props.parameter.getEnabledItemsWithMatchingRegionType()},toggleActive:function(e,t){var r=this.getValue();if(!this.isActive(e,t)){if(r[t.name]={regionProvider:this.regionProvider(),regionColumn:e.regionMapping.tableStructure.getColumnWithNameOrId(e.regionMapping.regionDetails[0].columnName),valueColumn:t},this.props.parameter.singleSelect)for(var i in r)r.hasOwnProperty(i)&&i!==t.name&&(r[i]=!1)}else r[t.name]=!1,this.getCatalogItemDetails(this.catalogItemDetails,e).isEntirelyActive=!1},isActive:function(e,t){var r=this.getValue();return(0,o.default)(r)||(r={},this.setValue(r)),(0,o.default)(r[t.name])||(r[t.name]=!1,s.default.track(r,[t.name]),this.props.parameter.singleSelect&&1!==Object.keys(r).length||(r[t.name]={regionProvider:this.regionProvider(),regionColumn:e.regionMapping.tableStructure.getColumnWithNameOrId(e.regionMapping.regionDetails[0].columnName),valueColumn:t})),(0,o.default)(r[t.name])&&r[t.name]&&r[t.name].regionColumn===e.regionMapping.tableStructure.getColumnWithNameOrId(e.regionMapping.regionDetails[0].columnName)&&r[t.name].valueColumn===t},getCatalogItemDetails:function(e,t){return(0,o.default)(e[t.uniqueId])||(e[t.uniqueId]={isOpen:!0,isEntirelyActive:!0},s.default.track(e,[t.uniqueId]),s.default.track(e[t.uniqueId],["isOpen","isEntirelyActive"])),e[t.uniqueId]},toggleEntireCatalogItem:function(e){var t=this.getCatalogItemDetails(this.catalogItemDetails,e);t.isEntirelyActive=!t.isEntirelyActive;for(var r=e.regionMapping.tableStructure.columns,i=0;i<r.length;++i){var a=r[i];if(this.columnIsScalar(e,a)){var n=this.isActive(e,a);(!n&&t.isEntirelyActive||n&&!t.isEntirelyActive)&&this.toggleActive(e,a)}}},catalogItemIsOpen:function(e){return this.getCatalogItemDetails(this.catalogItemDetails,e).isOpen},toggleOpenCatalogItem:function(e){var t=this.getCatalogItemDetails(this.catalogItemDetails,e);t.isOpen=!t.isOpen},isEntireCatalogItemActive:function(e){return this.getCatalogItemDetails(this.catalogItemDetails,e).isEntirelyActive},render:function(){return i.default.createElement("div",{className:p.default.parameterEditor},this.renderContent())},renderContent:function(){return this.catalogItemsWithMatchingRegion().length>0?i.default.createElement("div",{className:p.default.data},i.default.createElement("ul",{className:p.default.tree},this.catalogItemsWithMatchingRegion().map(function(e,t){return i.default.createElement(d.default,{key:e.uniqueId,text:e.name,topLevel:!1,open:this.catalogItemIsOpen(e),onClick:this.toggleOpenCatalogItem.bind(this,e),loading:!1},this.renderItemChildren(e))},this))):i.default.createElement("div",{className:p.default.parameterEditorImportantNote},"No characteristics are available because you have not added any data to the map for this region type,"," ",this.regionProvider()?this.regionProvider().regionType:"None",". You may use your own data with this analysis by creating a CSV following the"," ",i.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/TerriaJS/nationalmap/wiki/csv-geo-au"},"csv-geo-au")," ","guidelines and dragging and dropping it onto the map.")},renderItemChildren:function(e){var t=this;return i.default.createElement("ul",{className:p.default.tree},e.regionMapping.tableStructure.columns.map(function(r,a){if(r.type===l.default.SCALAR)return i.default.createElement(c.default,{key:r.id,onTextClick:t.toggleActive.bind(t,e,r),selected:t.isActive(e,r),text:r.name,onBtnClick:t.toggleActive.bind(t,e,r),btnState:t.isActive(e,r)?"remove":"add"})}))}});e.exports=h},function(e,t,r){"use strict";var i=c(r(13)),a=c(r(19)),n=c(r(15)),o=c(r(1459)),s=c(r(21)),l=c(r(707)),u=c(r(98));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,a.default)({displayName:"BooleanParameterGroupEditor",mixins:[s.default],propTypes:{previewed:n.default.object,parameter:n.default.object},toggleDiv:function(e,t){var r=document.getElementById(e);"none"===r.style.display?r.style.display="block":r.style.display="none"},toggleAll:function(e,t){for(var r=document.getElementById(e.OneForAllId).children[0];0!==r.childElementCount;)r=r.children[0];var i="off"!==r.href.baseVal.split("-")[1],a=[];Array.from(document.getElementById(e.ParameterListId).children).forEach(function(e){a.push(e.children[0].children[0])}),!1===i?a.forEach(function(e){var t=e.children[0];"off"===t.children[0].children[0].href.baseVal.split("-")[1]&&t[Object.keys(t).filter(function(e){return/__reactEventHandlers/.test(e)})].onClick(),t.disabled=!0}):a.forEach(function(e){var t=e.children[0];"off"!==t.children[0].children[0].href.baseVal.split("-")[1]&&t[Object.keys(t).filter(function(e){return/__reactEventHandlers/.test(e)})].onClick(),t.disabled=!1})},renderCheckboxGroup:function(){var e,t=this.props.parameter.OneForAll,r=(e=this.props.parameter.name?this.props.parameter.name+"_Group":this.props.parameter.id+"_Group")+"_OneForAllDiv",a=this.toggleDiv.bind(this,e),n=this.toggleAll.bind(this,{OneForAllId:r,ParameterListId:e});return i.default.createElement("fieldset",null,i.default.createElement("legend",null,i.default.createElement("div",{style:{display:"inline-block"},onClick:a},i.default.createElement(o.default,{initialopen:!0,myclass:u.default.btnRadio})),i.default.createElement("div",{id:r,style:{display:"inline-block"},onClick:n},i.default.createElement(l.default,{parameter:t}))),i.default.createElement("div",{id:e,style:{display:"block"}},this.props.parameter.ParameterList.map(function(e,t){return i.default.createElement("div",{key:t},i.default.createElement(l.default,{parameter:e}))})))},render:function(){return i.default.createElement("div",null,this.renderCheckboxGroup())}});e.exports=d},function(e,t,r){"use strict";var i=s(r(13)),a=s(r(19)),n=s(r(15)),o=s(r(39));function s(e){return e&&e.__esModule?e:{default:e}}var l=(0,a.default)({getInitialState:function(){return{isOpen:this.props.initialopen}},displayName:"MoreOrLess",propTypes:{initialopen:n.default.bool,myclass:n.default.string},toggleIcon:function(){this.setState({isOpen:!this.state.isOpen})},render:function(){return i.default.createElement("button",{type:"button",onClick:this.toggleIcon,className:this.props.myclass},i.default.createElement(o.default,{glyph:this.state.isOpen?o.default.GLYPHS.showLess:o.default.GLYPHS.showMore}))}});e.exports=l},function(e,t,r){"use strict";var i=u(r(13)),a=u(r(8)),n=u(r(19)),o=u(r(15)),s=u(r(21)),l=u(r(98));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)({displayName:"DateTimeParameterEditor",mixins:[s.default],propTypes:{previewed:o.default.object,parameter:o.default.object},getInitialState:function(){return this.getDateTime()},getDateTime:function(){var e={},t=this.props.parameter.value;if(void 0!==t){var r=t.split("T");e.date=r[0],0===r[1].length?e.time="00:00":e.time=r[1]}else e.date="",e.time="00:00";return this.setDateTime(e),e},setDateTime:function(e){var t;e.date&&e.time&&(t=e.date+"T"+e.time),this.props.parameter.value=t},onChangeDate:function(e){var t=this.getDateTime();t.date=e.target.value,this.setDateTime(t),this.setState(t)},onChangeTime:function(e){var t=this.getDateTime();t.time=e.target.value,this.setDateTime(t),this.setState(t)},render:function(){var e=(0,a.default)(this.props.parameter)&&(0,a.default)(this.props.parameter.value)?l.default.field:l.default.fieldDatePlaceholder;return i.default.createElement("div",null,i.default.createElement("input",{className:e,type:"date",placeholder:"YYYY-MM-DD",onChange:this.onChangeDate,value:this.state.date}),i.default.createElement("input",{className:e,type:"time",placeholder:"HH:mm:ss.sss",onChange:this.onChangeTime,value:this.state.time}))}});e.exports=c},function(e,t,r){"use strict";var i=l(r(13)),a=l(r(19)),n=l(r(15)),o=l(r(21)),s=l(r(98));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,a.default)({displayName:"EnumerationParameterEditor",mixins:[o.default],propTypes:{previewed:n.default.object,parameter:n.default.object},getInitialState:function(){return{value:this.props.parameter.value}},onChange:function(e){this.props.parameter.value=e.target.value},render:function(){return i.default.createElement("select",{className:s.default.field,onChange:this.onChange,value:this.props.parameter.value},this.props.parameter.possibleValues.map(function(e,t){return i.default.createElement("option",{value:e,key:t},e)}))}});e.exports=u},function(e,t,r){"use strict";var i=l(r(13)),a=l(r(19)),n=l(r(15)),o=l(r(21)),s=l(r(98));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,a.default)({displayName:"GenericParameterEditor",mixins:[o.default],propTypes:{previewed:n.default.object,parameter:n.default.object},onChange:function(e){this.props.parameter.value=e.target.value},render:function(){return i.default.createElement("input",{className:s.default.field,type:"text",onChange:this.onChange,value:this.props.parameter.value})}});e.exports=u},function(e,t,r){"use strict";var i=h(r(13)),a=h(r(15)),n=h(r(8)),o=h(r(21)),s=h(r(98)),l=h(r(703)),u=h(r(704)),c=h(r(1464)),d=h(r(705)),p=h(r(19)),f=h(r(448));function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,p.default)({displayName:"GeoJsonParameterEditor",mixins:[o.default],propTypes:{previewed:a.default.object,parameter:a.default.object,viewState:a.default.object},onCleanUp:function(){this.props.viewState.openAddData()},selectPointOnMap:function(){this.props.parameter.value=void 0,l.default.selectOnMap(this.props.previewed.terria,this.props.viewState,this.props.parameter),this.props.parameter.subtype=f.default.PointType},selectPolygonOnMap:function(){this.props.parameter.value=void 0,u.default.selectOnMap(this.props.previewed.terria,this.props.viewState,this.props.parameter),this.props.parameter.subtype=f.default.PolygonType},selectExistingPolygonOnMap:function(){this.props.parameter.value=void 0,c.default.selectOnMap(this.props.previewed.terria,this.props.viewState,this.props.parameter),this.props.parameter.subtype=f.default.SelectAPolygonType},render:function(){return i.default.createElement("div",null,i.default.createElement("div",null,i.default.createElement("strong",null,"Select Location")),i.default.createElement("div",{className:"container",style:{marginTop:"10px",marginBottom:"10px",display:"table",width:"100%"}},i.default.createElement("button",{type:"button",onClick:this.selectPointOnMap,className:s.default.btnLocationSelector},i.default.createElement("strong",null,"Point (lat/lon)")),i.default.createElement("button",{type:"button",style:{marginLeft:"2%",marginRight:"2%"},onClick:this.selectPolygonOnMap,className:s.default.btnLocationSelector},i.default.createElement("strong",null,"Polygon")),i.default.createElement("button",{type:"button",onClick:this.selectExistingPolygonOnMap,className:s.default.btnLocationSelector},i.default.createElement("strong",null,"Existing Polygon"))),i.default.createElement("input",{className:s.default.field,type:"text",readOnly:!0,value:m.getDisplayValue(this.props.parameter.value,this.props.parameter)}),""===m.getDisplayValue(this.props.parameter.value,this.props.parameter)?i.default.createElement("div",null,"Nothing has been selected, please use the buttons above to make a selection."):null)}});m.getDisplayValue=function(e,t){return(0,n.default)(t.subtype)?t.subtype===f.default.PointType?l.default.getDisplayValue(e):t.subtype===f.default.SelectAPolygonType?c.default.getDisplayValue(e):t.subtype===f.default.PolygonType?u.default.getDisplayValue(e):d.default.getDisplayValue(e,t):""},e.exports=m},function(e,t,r){"use strict";var i=m(r(14)),a=m(r(8)),n=m(r(26)),o=m(r(314)),s=m(r(79)),l=m(r(23)),u=m(r(183)),c=m(r(21)),d=m(r(13)),p=m(r(15)),f=m(r(98)),h=m(r(18));function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,m(r(19)).default)({displayName:"SelectAPolygonParameterEditor",mixins:[c.default],propTypes:{previewed:p.default.object,parameter:p.default.object,viewState:p.default.object},setDisplayValue:function(e){g.setDisplayValue(e,this.props.parameter)},selectExistingPolygonOnMap:function(){this.selectAPolygonParameterEditorCore.selectOnMap(this.props.previewed.terria,this.props.viewState,this.props.parameter)},render:function(){return d.default.createElement("div",null,d.default.createElement("input",{className:f.default.field,type:"text",value:this.state.value}),d.default.createElement("button",{type:"button",onClick:this.selectExistingPolygonOnMap,className:f.default.btnSelector},"Select existing polygon"))}});g.selectOnMap=function(e,t,r){e.pickedFeatures=void 0;var c=new u.default({message:'<div>Select existing polygon<div style="font-size:12px"><p><i>If there are no polygons to select, add a layer that provides polygons.</i></p></div></div>',onCancel:function(){e.mapInteractionModeStack.pop(),t.openAddData()}});e.mapInteractionModeStack.push(c),l.default.getObservable(c,"pickedFeatures").subscribe(function(l){(0,h.default)(l.allFeaturesAvailablePromise,function(){if(!(0,a.default)(l.pickPosition))return[];var t=l.features.map(function(t){var r;if(t.data)r=(0,o.default)(t.data),(0,a.default)(r)&&!(0,a.default)(r.id)&&(0,a.default)(t.id)&&(r.id=t.id);else if((0,a.default)(t.polygon)){var l=t.polygon.hierarchy.getValue().positions.map(function(e){var t=n.default.WGS84.cartesianToCartographic(e);return[i.default.toDegrees(t.longitude),i.default.toDegrees(t.latitude)]});r={id:t.id,type:"Feature",properties:t.properties,geometry:{coordinates:[[l]],type:"MultiPolygon"}}}if((0,a.default)(r)){var u=new s.default(e);return u.data=r,u}}).filter(function(e){return(0,a.default)(e)}),r=t.map(function(e){return e.load()});return h.default.all(r).then(function(){return t})}).then(function(i){r.value=i.map(function(e){return e._readyData}),e.mapInteractionModeStack.pop(),t.openAddData()})}),t.explorerPanelIsVisible=!1},g.getDisplayValue=function(e){return(0,a.default)(e)&&""!==e?e.map(function(e){return e.id}).join(", "):""},e.exports=g},function(e,t,r){e.exports={"invoke-function":"tjs-invoke-function__invoke-function",invokeFunction:"tjs-invoke-function__invoke-function",footer:"tjs-invoke-function__footer",content:"tjs-invoke-function__content tjs-_base__scrollbars",description:"tjs-invoke-function__description",btn:"tjs-invoke-function__btn tjs-_buttons__btn tjs-_buttons__btn-primary"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=f(r(13)),a=f(r(19)),n=f(r(15)),o=f(r(8)),s=f(r(1467)),l=f(r(466)),u=f(r(700)),c=f(r(21)),d=f(r(470)),p=f(r(347));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,a.default)({displayName:"MappablePreview",mixins:[c.default],propTypes:{previewed:n.default.object.isRequired,terria:n.default.object.isRequired,viewState:n.default.object.isRequired,widthFromMeasureElementHOC:n.default.number},toggleOnMap:function(e){this.props.previewed.toggleEnabled(),(0,o.default)(this.props.viewState.storyShown)&&(this.props.viewState.storyShown=!1),!0!==this.props.previewed.isEnabled||e.shiftKey||e.ctrlKey||(this.props.viewState.explorerPanelIsVisible=!1,this.props.viewState.mobileView=null)},backToMap:function(){this.props.viewState.explorerPanelIsVisible=!1},render:function(){var e=this,t=this.props.previewed.nowViewingCatalogItem||this.props.previewed;return i.default.createElement("div",{className:d.default.root},t.isMappable&&!t.disablePreview?i.default.createElement(s.default,{terria:this.props.terria,previewedCatalogItem:t,showMap:!this.props.viewState.explorerPanelAnimating||this.props.viewState.useSmallScreenInterface}):null,i.default.createElement("button",{type:"button",onClick:this.toggleOnMap,className:d.default.btnAdd},this.props.previewed.isEnabled?"Remove from the map":"Add to the map"),i.default.createElement("div",{className:d.default.previewedInfo},i.default.createElement("div",{className:d.default.titleAndShareWrapper,ref:function(t){return e.refToMeasure=t}},i.default.createElement("h3",{className:d.default.h3},t.name),"local"===t.dataUrlType||this.props.viewState.useSmallScreenInterface?null:i.default.createElement("div",{className:d.default.shareLinkWrapper},i.default.createElement(p.default,{catalogShare:!0,catalogShareWithoutText:!0,modalWidth:this.props.widthFromMeasureElementHOC,terria:this.props.terria,viewState:this.props.viewState}))),i.default.createElement(l.default,{item:t})))}}),m=(0,u.default)(h);t.default=m},function(e,t,r){"use strict";var i=n(r(35)),a=n(r(1468));function n(e){return e&&e.__esModule?e:{default:e}}var o=r(14),s=r(666),l=r(9),u=r(8),c=r(79),d=r(21),p=r(449),f=r(13),h=r(19),m=r(15),g=r(452),v=r(708),y=r(177),b=r(18),_=h({displayName:"DataPreviewMap",mixins:[d],propTypes:{terria:m.object.isRequired,previewedCatalogItem:m.object,showMap:m.bool},getInitialState:function(){return{previewBadgeText:"PREVIEW LOADING..."}},UNSAFE_componentWillMount:function(){var e=this,t=this.props.terria;this.terriaPreview=new g({appName:t.appName+" preview",supportEmail:t.supportEmail,baseUrl:t.baseUrl,cesiumBaseUrl:t.cesiumBaseUrl,analytics:new s}),this.terriaPreview.configParameters.hideTerriaLogo=!0,this.terriaPreview.viewerMode=y.Leaflet,this.terriaPreview.homeView=t.homeView,this.terriaPreview.initialView=t.homeView,this.terriaPreview.regionMappingDefinitionsUrl=t.regionMappingDefinitionsUrl,this._unsubscribeErrorHandler=this.terriaPreview.error.addEventListener(function(t){(t.sender===e.props.previewedCatalogItem||t.sender&&t.sender.nowViewingCatalogItem===e.props.previewedCatalogItem)&&(e._errorPreviewingCatalogItem=!0,e.setState({previewBadgeText:"NO PREVIEW AVAILABLE"}))});var r=new p(this.terriaPreview);r.name="Positron (Light)",r.url="//global.ssl.fastly.net/light_all/",r.attribution="© OpenStreetMap contributors ODbL, © CartoDB CC-BY 3.0",r.opacity=1,r.subdomains=["cartodb-basemaps-a","cartodb-basemaps-b","cartodb-basemaps-c","cartodb-basemaps-d"],this.terriaPreview.baseMap=r,this.isZoomedToExtent=!1,this.lastPreviewedCatalogItem=void 0,this.removePreviewFromMap=void 0},componentWillUnmount:function(){this.destroyPreviewMap(),this._unsubscribeErrorHandler&&(this._unsubscribeErrorHandler(),this._unsubscribeErrorHandler=void 0)},UNSAFE_componentWillReceiveProps:function(e){e.showMap&&!this.props.showMap?this.initMap(e.previewedCatalogItem):this.updatePreview(e.previewedCatalogItem)},updatePreview:function(e){var t=this;if(this.lastPreviewedCatalogItem!==e){e&&this.props.terria.analytics.logEvent("dataSource","preview",e.name),this.lastPreviewedCatalogItem=e,this.setState({previewBadgeText:"DATA PREVIEW LOADING..."}),this.isZoomedToExtent=!1,this.terriaPreview.currentViewer.zoomTo(this.terriaPreview.homeView),u(this.removePreviewFromMap)&&(this.removePreviewFromMap(),this.removePreviewFromMap=void 0),u(this.rectangleCatalogItem)&&(this.rectangleCatalogItem.isEnabled=!1);var r=e;if(r&&u(r.type)&&r.isMappable){var i=this;return b(r.load()).then(function(){var e,a;return u(r.nowViewingCatalogItem)?(e=r.nowViewingCatalogItem,a=b(e.load())):(e=r,a=b()),a.then(function(){i._unsubscribeErrorHandler&&r===i.lastPreviewedCatalogItem&&(u(e.showOnSeparateMap)?(u(e.clock)&&u(e.clock.currentTime)&&(i.terriaPreview.clock.currentTime=e.clock.currentTime),t._errorPreviewingCatalogItem=!1,i.removePreviewFromMap=e.showOnSeparateMap(i.terriaPreview.currentViewer),t._errorPreviewingCatalogItem?t.setState({previewBadgeText:"NO PREVIEW AVAILABLE"}):i.removePreviewFromMap?t.setState({previewBadgeText:"DATA PREVIEW"}):t.setState({previewBadgeText:"NO PREVIEW AVAILABLE"})):t.setState({previewBadgeText:"NO PREVIEW AVAILABLE"}),i.updateBoundingRectangle(r))})}).otherwise(function(e){console.error(e),t.setState({previewBadgeText:"DATA PREVIEW ERROR"})})}}},clickMap:function(){if(u(this.props.previewedCatalogItem)){if(this.isZoomedToExtent=!this.isZoomedToExtent,this.isZoomedToExtent){var e=l(this.props.previewedCatalogItem.nowViewingCatalogItem,this.props.previewedCatalogItem);u(e.rectangle)&&this.terriaPreview.currentViewer.zoomTo(e.rectangle)}else this.terriaPreview.currentViewer.zoomTo(this.terriaPreview.homeView);this.updateBoundingRectangle(this.props.previewedCatalogItem)}},updateBoundingRectangle:function(e){if(u(this.rectangleCatalogItem)&&(this.rectangleCatalogItem.isEnabled=!1,this.rectangleCatalogItem=void 0),e=l(e.nowViewingCatalogItem,e),u(e)&&u(e.rectangle)){var t=e.rectangle.west,r=e.rectangle.south,i=e.rectangle.east,a=e.rectangle.north;if(!this.isZoomedToExtent){var n=this.terriaPreview.homeView.rectangle,s=.05*(n.east-n.west);if(i-t<s){var d=.5*(i+t);t=d-.5*s,i=d+.5*s}var p=.05*(n.north-n.south);if(a-r<p){var f=.5*(a+r);r=f-.5*p,a=f+.5*p}}t=o.toDegrees(t),r=o.toDegrees(r),i=o.toDegrees(i),a=o.toDegrees(a),this.rectangleCatalogItem=new c(this.terriaPreview),this.rectangleCatalogItem.data={type:"FeatureCollection",features:[{type:"Feature",properties:{stroke:"#08ABD5","stroke-width":2,"stroke-opacity":1,fill:"#555555","fill-opacity":0},geometry:{type:"Polygon",coordinates:[[[t,r],[t,a],[i,a],[i,r],[t,r]]]}}]},this.rectangleCatalogItem.isEnabled=!0}},mapIsReady:function(e){e&&(this.mapElement=e,this.props.showMap&&this.initMap(this.props.previewedCatalogItem))},destroyPreviewMap:function(){this.terriaViewer&&this.terriaViewer.destroy(),this.mapElement&&(this.mapElement.innerHTML="")},initMap:function(e){if(this.mapElement){this.terriaViewer=v.create(this.terriaPreview,{mapContainer:this.mapElement});var t=this.terriaViewer.terria.leaflet.map;t.touchZoom.disable(),t.doubleClickZoom.disable(),t.scrollWheelZoom.disable(),t.boxZoom.disable(),t.keyboard.disable(),t.dragging.disable(),this.updatePreview(e)}},render:function(){return f.createElement("div",{className:a.default.map,onClick:this.clickMap},this.props.showMap?f.createElement("div",{className:(0,i.default)(a.default.terriaPreview),ref:this.mapIsReady}):f.createElement("div",{className:(0,i.default)(a.default.terriaPreview,a.default.placeholder)}),f.createElement("label",{className:a.default.badge},this.state.previewBadgeText))}});e.exports=_},function(e,t,r){e.exports={map:"tjs-data-preview-map__map",badge:"tjs-data-preview-map__badge","terria-preview":"tjs-data-preview-map__terria-preview",terriaPreview:"tjs-data-preview-map__terria-preview",placeholder:"tjs-data-preview-map__placeholder"}},function(e,t,r){"use strict";var i=r(86);e.exports=function(e,t){if(e||t){if(e&&!t)return new i(e);e=e||t;var r=document.createElement("a");return r.href=t,r.target="_blank",r.innerText=e,new i(r.outerHTML)}}},,function(e,t,r){"use strict";var i=r(180),a=r(14),n=r(22),o=r(215),s=r(9),l=r(8),u=r(277),c=r(29),d=r(276),p=r(216),f=function(e,t,r,i){this._terria=e,this._scene=t,this._ellipsoid=t.globe.ellipsoid,this._finishHandler=r,this._mouseHandler=new d(t.canvas,!1),this._stopHandler=void 0,this._interHandler=void 0,this._dataSource=void 0,this._click1=void 0,this._click2=void 0,this.active=!1,this.keyboardModifier=s(i,u.SHIFT)};f.prototype.enableInput=function(){this._scene.screenSpaceCameraController.enableInputs=!0},f.prototype.disableInput=function(){this._scene.screenSpaceCameraController.enableInputs=!1},f.prototype.getExtent=function(e,t){var r=Math.min(e.latitude,t.latitude),i=Math.max(e.latitude,t.latitude),n=Math.min(e.longitude,t.longitude),o=Math.max(e.longitude,t.longitude);o-n>Math.PI&&(n=Math.max(e.longitude,t.longitude),o=Math.min(e.longitude,t.longitude));var s=a.EPSILON6;return Math.abs(o-n)<s&&(o+=2*s),Math.abs(i-r)<s&&(i+=2*s),new c(n,r,o,i)},f.prototype.handleRegionStop=function(e){var t;if(l(this._dataSource)&&(this._terria.dataSources.remove(this._dataSource,!0),this._dataSource=void 0),this._mouseHandler.removeInputAction(p.LEFT_UP,this.keyboardModifier),this._mouseHandler.removeInputAction(p.MOUSE_MOVE,this.keyboardModifier),this._mouseHandler.removeInputAction(p.LEFT_UP),this._mouseHandler.removeInputAction(p.MOUSE_MOVE),this.enableInput(),e){var r=this._scene.camera.getPickRay(e.position),i=this._scene.globe.pick(r,this._scene);i&&(this._click2=this._ellipsoid.cartesianToCartographic(i)),t=this.getExtent(this._click1,this._click2)}this._scene.primitives.remove(this._extentPrimitive),this.active=!1,this._finishHandler(t)},f.prototype.handleRegionInter=function(e){var t=this._scene.camera.getPickRay(e.endPosition),r=this._scene.globe.pick(t,this._scene);if(r){var i=this._ellipsoid.cartesianToCartographic(r);this._click2=i}},f.prototype.handleRegionStart=function(e){var t=this._scene.camera.getPickRay(e.position),r=this._scene.globe.pick(t,this._scene);if(r){if(this.disableInput(),this.active=!0,!l(this._dataSource)){var a=this;this._click1=void 0,this._click2=void 0,this._dataSource=new o("Draw Extent"),this._dataSource.entities.add({name:"Extent",rectangle:{coordinates:new i(function(e,t){if(l(a._click1)&&l(a._click2))return a.getExtent(a._click1,a._click2)},!1),material:new n(1,1,1,.5)}}),this._terria.dataSources.add(this._dataSource)}this._click1=this._ellipsoid.cartesianToCartographic(r),this._mouseHandler.setInputAction(function(e){a.handleRegionStop(e)},p.LEFT_UP,this.keyboardModifier),this._mouseHandler.setInputAction(function(e){a.handleRegionInter(e)},p.MOUSE_MOVE,this.keyboardModifier),this._mouseHandler.setInputAction(function(e){a.handleRegionStop(e)},p.LEFT_UP),this._mouseHandler.setInputAction(function(e){a.handleRegionInter(e)},p.MOUSE_MOVE)}},f.prototype.start=function(){var e=this;this._mouseHandler.setInputAction(function(t){e.handleRegionStart(t)},p.LEFT_DOWN,this.keyboardModifier)},f.prototype.destroy=function(){this._mouseHandler.destroy(),this._scene=void 0},e.exports=f},,function(e,t,r){"use strict";var i=r(33),a=r(90),n=r(16),o=r(72),s=r(215),l=r(9),u=r(8),c=r(10),d=r(20),p=r(153),f=r(42),h=r(184);function m(e){n.typeOf.object("options",e),n.typeOf.object("options.scene",e.scene),n.typeOf.object("options.dataSourceCollection",e.dataSourceCollection),this._displayID=o();var t=e.scene,r=e.dataSourceCollection;this._eventHelper=new p,this._eventHelper.add(r.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(r.dataSourceRemoved,this._onDataSourceRemoved,this),this._eventHelper.add(r.dataSourceMoved,this._onDataSourceMoved,this),this._dataSourceCollection=r,this._scene=t,this._visualizersCallback=l(e.visualizersCallback,m.defaultVisualizersCallback);for(var i=0,a=r.length;i<a;i++)this._onDataSourceAdded(r,r.get(i));var u=new s;this._onDataSourceAdded(void 0,u),this._defaultDataSource=u,this._ready=!1,this._lastTime=f.now()}m.defaultVisualizersCallback=function(e,t,r){return[]},c(m.prototype,{scene:{get:function(){return this._scene}},dataSources:{get:function(){return this._dataSourceCollection}},defaultDataSource:{get:function(){return this._defaultDataSource}},ready:{get:function(){return this._ready}}}),m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){this._eventHelper.removeAll();for(var e=this._dataSourceCollection,t=0,r=e.length;t<r;++t)this._onDataSourceRemoved(this._dataSourceCollection,e.get(t));return this._onDataSourceRemoved(void 0,this._defaultDataSource),d(this)},m.prototype.update=function(e){n.defined("time",e);var t,r,i,a,o=!0,s=this._dataSourceCollection,l=s.length;for(t=0;t<l;t++){var c=s.get(t);for(u(c.update)&&(o=c.update(e)&&o),a=(i=c._visualizersByDisplayID[this._displayID]).length,r=0;r<a;r++)o=i[r].update(e)&&o}for(a=(i=this._defaultDataSource._visualizersByDisplayID[this._displayID]).length,r=0;r<a;r++)o=i[r].update(e)&&o;return this._ready=o,this._lastTime=f.clone(e,this._lastTime),o},m.prototype.getLatLngBounds=function(e){this.update(this._lastTime);var t=e._visualizersByDisplayID[this._displayID];if(void 0!==t){for(var r,i=0,a=t.length;i<a;i++){var n=t[i].getLatLngBounds();void 0!==n&&(r=void 0===r?h.latLngBounds(n.getSouthWest(),n.getNorthEast()):r.extend(n))}return r}};var g=[],v=new i;m.prototype.getBoundingSphere=function(e,t,r){if(n.defined("entity",e),n.typeOf.bool("allowPartial",t),n.defined("result",r),!this._ready)return a.PENDING;var o,s,l=this._defaultDataSource;if(!l.entities.contains(e)){l=void 0;var c=this._dataSourceCollection;for(s=c.length,o=0;o<s;o++){var d=c.get(o);if(d.entities.contains(e)){l=d;break}}}if(!u(l))return a.FAILED;var p=g,f=v,h=0,m=a.DONE,y=l._visualizers,b=y.length;for(o=0;o<b;o++){var _=y[o];if(u(_.getBoundingSphere)){if(m=y[o].getBoundingSphere(e,f),!t&&m===a.PENDING)return a.PENDING;m===a.DONE&&(p[h]=i.clone(f,p[h]),h++)}}return 0===h?a.FAILED:(p.length=h,i.fromBoundingSpheres(p,r),a.DONE)},m.prototype._onDataSourceAdded=function(e,t){var r=this._visualizersCallback(this._scene,void 0,t);t._visualizersByDisplayID=t._visualizersByDisplayID||{},t._visualizersByDisplayID[this._displayID]=r,t._visualizers=t._visualizers||[],t._visualizers=t._visualizers.concat(r)},m.prototype._onDataSourceRemoved=function(e,t){var r=t._visualizersByDisplayID[this._displayID];if(u(r)){for(var i=r.length,a=0;a<i;a++){var n=r[a];n.destroy();var o=t._visualizers.indexOf(n);t._visualizers.splice(o,1)}delete t._visualizersByDisplayID[this._displayID]}},m.prototype._onDataSourceMoved=function(e,t,r){},e.exports=m},function(e,t,r){"use strict";var i=r(184),a=r(81),n=r(24),o=r(12),s=r(32),l=r(14),u=r(22),c=r(8),d=r(20),p=r(11),f=r(26),h=r(38),m=r(415),g=r(455),v=u.WHITE,y=u.BLACK,b=function e(t,r){if(!c(t))throw new p("leafletScene is required.");if(!c(r))throw new p("entityCollection is required.");var n=i.featureGroup().addTo(t.map);r.collectionChanged.addEventListener(e.prototype._onCollectionChanged,this),this._leafletScene=t,this._featureGroup=n,this._entityCollection=r,this._entitiesToVisualize=new a,this._entityHash={},this._onCollectionChanged(r,r.values,[],[])};function _(e,t,r){var i=r[e.id];w(e,t,i),S(e,t,i),C(e,t,i),x(e,t,i),E(e,t,i),delete r[e.id]}function w(e,t,r){c(r.point)&&(t.removeLayer(r.point.layer),r.point=void 0)}function S(e,t,r){c(r.polygon)&&(t.removeLayer(r.polygon.layer),r.polygon=void 0)}function C(e,t,r){c(r.billboard)&&(t.removeLayer(r.billboard.layer),r.billboard=void 0)}function x(e,t,r){c(r.label)&&(t.removeLayer(r.label.layer),r.label=void 0)}function E(e,t,r){c(r.polyline)&&(t.removeLayer(r.polyline.layer),r.polyline=void 0)}b.prototype._onCollectionChanged=function(e,t,r,i){var a,n,o=this._featureGroup,s=this._entitiesToVisualize,l=this._entityHash;for(a=t.length-1;a>-1;a--)n=t[a],((c(n._point)||c(n._billboard)||c(n._label))&&c(n._position)||c(n._polyline)||c(n._polygon))&&(s.set(n.id,n),l[n.id]={});for(a=i.length-1;a>-1;a--)n=i[a],(c(n._point)||c(n._billboard)||c(n._label))&&c(n._position)||c(n._polyline)||c(n._polygon)?(s.set(n.id,n),l[n.id]=l[n.id]||{}):(_(n,o,l),s.remove(n.id));for(a=r.length-1;a>-1;a--)_(n=r[a],o,l),s.remove(n.id)},b.prototype.update=function(e){if(!c(e))throw new p("time is required.");for(var t=this._entitiesToVisualize.values,r=this._entityHash,i=0,a=t.length;i<a;i++){var n=t[i],o=r[n.id];c(n._point)&&this._updatePoint(n,e,r,o),c(n._billboard)&&this._updateBillboard(n,e,r,o),c(n._label)&&this._updateLabel(n,e,r,o),c(n._polyline)&&this._updatePolyline(n,e,r,o),c(n._polygon)&&this._updatePolygon(n,e,r,o)}return!0},b.prototype.getLatLngBounds=function(){var e,t=this;return Object.keys(this._entityHash).forEach(function(r){var a=t._entityHash[r];Object.keys(a).forEach(function(t){var r=a[t];if(c(r.layer)){if(c(r.layer.getBounds)){var n=r.layer.getBounds();c(n)&&(e=void 0===e?i.latLngBounds(n.getSouthWest(),n.getNorthEast()):e.extend(n))}if(c(r.layer.getLatLng)){var o=r.layer.getLatLng();c(o)&&(e=void 0===e?i.latLngBounds([o]):e.extend(o))}}})}),e};var I=new s;function k(e,t){var r=f.WGS84.cartesianToCartographic(e,I),a=l.toDegrees(r.longitude);return t&&(t._latlng.lng-a>180?a+=360:t._latlng.lng-a<-180&&(a-=360)),i.latLng(l.toDegrees(r.latitude),a)}function L(e){return T(Array.isArray(e)?e:e.positions)}b.prototype._updatePoint=function(e,t,r,a){var n=this._featureGroup,s=e._point;if(e.isAvailable(t)&&h.getValueOrDefault(s._show,t,!0)){var l=a.point;c(l)||(l=a.point={layer:void 0,lastPosition:new o,lastPixelSize:1,lastColor:new u,lastOutlineColor:new u,lastOutlineWidth:1});var d=h.getValueOrUndefined(e._position,t);if(c(d)){var p=h.getValueOrDefault(s._pixelSize,t,5),f=h.getValueOrDefault(s._color,t,v),m=h.getValueOrDefault(s._outlineColor,t,y),g=h.getValueOrDefault(s._outlineWidth,t,1),b=l.layer,_=null;if(n.eachLayer(function(e){_=e}),!c(b)){var S={radius:p/2,fillColor:f.toCssColorString(),fillOpacity:f.alpha,color:m.toCssColorString(),weight:g,opacity:m.alpha};return(b=l.layer=i.circleMarker(k(d,_),S)).on("click",A.bind(void 0,this,e)),b.on("mousedown",j.bind(void 0,this,e)),n.addLayer(b),o.clone(d,l.lastPosition),l.lastPixelSize=p,u.clone(f,l.lastColor),u.clone(m,l.lastOutlineColor),void(l.lastOutlineWidth=g)}o.equals(d,l.lastPosition)||(b.setLatLng(k(d,_)),o.clone(d,l.lastPosition)),p!==l.lastPixelSize&&(b.setRadius(p/2),l.lastPixelSize=p);var C=b.options,x=!1;u.equals(f,l.lastColor)||(C.fillColor=f.toCssColorString(),C.fillOpacity=f.alpha,u.clone(f,l.lastColor),x=!0),u.equals(m,l.lastOutlineColor)||(C.color=m.toCssColorString(),C.opacity=m.alpha,u.clone(m,l.lastOutlineColor),x=!0),g!==l.lastOutlineWidth&&(C.weight=g,l.lastOutlineWidth=g,x=!0),x&&b.setStyle(C)}else w(0,n,a)}else w(0,n,a)},b.prototype._updatePolygon=function(e,t,r,a){var n=this._featureGroup,o=e._polygon;if(e.isAvailable(t)&&h.getValueOrDefault(o._show,t,!0)){var s=a.polygon;c(s)||(s=a.polygon={layer:void 0,lastHierarchy:void 0,lastFill:void 0,lastFillColor:new u,lastOutline:void 0,lastOutlineColor:new u});var l=h.getValueOrUndefined(o._hierarchy,t);if(c(l)){var d,p=h.getValueOrDefault(o._fill,t,!0),f=h.getValueOrDefault(o._outline,t,!0),m=h.getValueOrDefault(o._outlineColor,t,y),g=h.getValueOrUndefined(o._material,t);d=c(g)&&c(g.color)?g.color:v;var b=s.layer;if(!c(b)){var _={fill:p,fillColor:d.toCssColorString(),fillOpacity:d.alpha,weight:f?1:0,color:m.toCssColorString(),opacity:m.alpha};return(b=s.layer=i.polygon(L(l),_)).on("click",A.bind(void 0,this,e)),b.on("mousedown",j.bind(void 0,this,e)),n.addLayer(b),s.lastHierarchy=l,s.lastFill=p,s.lastOutline=f,u.clone(d,s.lastFillColor),void u.clone(m,s.lastOutlineColor)}l!==s.lastHierachy&&(b.setLatLngs(L(l)),s.lastHierachy=l);var w=b.options,C=!1;p!==s.lastFill&&(w.fill=p,s.lastFill=p,C=!0),f!==s.lastOutline&&(w.weight=f?1:0,s.lastOutline=f,C=!0),u.equals(d,s.lastFillColor)||(w.fillColor=d.toCssColorString(),w.fillOpacity=d.alpha,u.clone(d,s.lastFillColor),C=!0),u.equals(m,s.lastOutlineColor)||(w.color=m.toCssColorString(),w.opacity=m.alpha,u.clone(m,s.lastOutlineColor),C=!0),C&&b.setStyle(w)}else S(0,n,a)}else S(0,n,a)};var P="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAP///yH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==";function T(e){for(var t=f.WGS84.cartesianArrayToCartographicArray(e),r=[],a=null,n=0;n<t.length;n++){var o=l.toDegrees(t[n].longitude);a-o>180?o+=360:a-o<-180&&(o-=360),r.push(i.latLng(l.toDegrees(t[n].latitude),o)),a=o}return r}b.prototype._updateBillboard=function(e,t,r,a){var o,s,u=e._billboard,d=this._featureGroup,p=a.billboard;c(p)||(p=a.billboard={layer:void 0});var m=p.layer,g=e.isAvailable(t)&&h.getValueOrDefault(u._show,t,!0);if(g&&(o=h.getValueOrUndefined(e._position,t),g=c(o)),g){var y,b=f.WGS84.cartesianToCartographic(o),_=i.latLng(l.toDegrees(b.latitude),l.toDegrees(b.longitude)),w=h.getValueOrDefault(u._image,t,void 0),S=h.getValueOrDefault(u._height,t,void 0),x=h.getValueOrDefault(u._width,t,void 0),E=h.getValueOrDefault(u._color,t,v),I=h.getValueOrDefault(u._scale,t,1),k=h.getValueOrDefault(u._verticalOrigin,t,0),L=h.getValueOrDefault(u._horizontalOrigin,t,0),T=h.getValueOrDefault(u._pixelOffset,t,n.ZERO);c(w)&&(y="string"==typeof w?w:c(w.toDataURL)?w.toDataURL():c(w.url)?w.url:w.src);var M={color:E.toCssColorString(),origUrl:y,scale:I,horizontalOrigin:L,verticalOrigin:k};(c(S)||c(x))&&(M.iconSize=[x,S]);var D=!1;if(c(m)){for(var N in(s=m)._latlng.equals(_)||s.setLatLng(_),M)if(M[N]!==s.options.icon.options[N]){D=!0;break}}else{var O={icon:i.icon({iconUrl:P})};(s=i.marker(_,O)).on("click",A.bind(void 0,this,e)),s.on("mousedown",j.bind(void 0,this,e)),d.addLayer(s),p.layer=s,D=!0}if(D){var F=function(e,t){M.iconUrl=t||e,c(M.iconSize)||(M.iconSize=[e.width*I,e.height*I]);var r=M.iconSize[0],a=M.iconSize[1],n=r/2*(1-L)-T.x,o=a/2*(1+k)-T.y;M.iconAnchor=[n,o],E.equals(v)||(M.iconUrl=function(e,t){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var i=r.getContext("2d");i.drawImage(e,0,0);for(var a=i.getImageData(0,0,r.width,r.height),n=[t.red,t.green,t.blue,t.alpha],o=a.data.length,s=0;s<o;s+=4)for(var l=0;l<4;l++)a.data[l+s]*=n[l];return i.putImageData(a,0,0),r.toDataURL()}(e,E)),s.setIcon(i.icon(M))},R=new Image;R.onload=function(){F(R,y)},R.src=y}}else C(0,d,a)},b.prototype._updateLabel=function(e,t,r,a){var o,s,u=e._label,d=this._featureGroup,p=a.label;c(p)||(p=a.label={layer:void 0});var g=p.layer,y=e.isAvailable(t)&&h.getValueOrDefault(u._show,t,!0);if(y&&(o=h.getValueOrUndefined(e._position,t),y=c(o)),y){var b=f.WGS84.cartesianToCartographic(o),_=i.latLng(l.toDegrees(b.latitude),l.toDegrees(b.longitude)),w=h.getValueOrDefault(u._text,t,void 0),S=h.getValueOrDefault(u._font,t,void 0),C=h.getValueOrDefault(u._scale,t,1),E=h.getValueOrDefault(u._fillColor,t,v),I=h.getValueOrDefault(u._verticalOrigin,t,0),k=h.getValueOrDefault(u._horizontalOrigin,t,0),L=h.getValueOrDefault(u._pixelOffset,t,n.ZERO),T={text:w,font:S,color:E.toCssColorString(),scale:C,horizontalOrigin:k,verticalOrigin:I},M=!1;if(c(g)){for(var D in(s=g)._latlng.equals(_)||s.setLatLng(_),T)if(T[D]!==s.options.icon.options[D]){M=!0;break}}else{var N={icon:i.icon({iconUrl:P})};(s=i.marker(_,N)).on("click",A.bind(void 0,this,e)),s.on("mousedown",j.bind(void 0,this,e)),d.addLayer(s),p.layer=s,M=!0}if(M){var O=m(w,{fillColor:E,font:S}).toDataURL(),F=new Image;F.onload=function(){!function(e,t){T.iconUrl=t||e,c(T.iconSize)||(T.iconSize=[e.width*C,e.height*C]);var r=T.iconSize[0],a=T.iconSize[1],n=r/2*(1-k)-L.x,o=a/2*(1+I)-L.y;T.iconAnchor=[n,o],s.setIcon(i.icon(T))}(F,O)},F.src=O}}else x(0,d,a)},b.prototype._updatePolyline=function(e,t,r,a){var n,o,s=e._polyline,l=this._featureGroup,u=a.polyline;c(u)||(u=a.polyline={layer:void 0});var d=u.layer,p=e.isAvailable(t)&&h.getValueOrDefault(s._show,t,!0);if(p&&(n=h.getValueOrUndefined(s._positions,t),p=c(n)),p){var f,m,y=T(n);s._material instanceof g?(f=v,m=5):(f=h.getValueOrDefault(s._material.color,t,v),m=h.getValueOrDefault(s._width,t,5));var b={color:f.toCssColorString(),weight:m,opacity:f.alpha};if(c(d)){for(var _=(o=d).getLatLngs(),w=y.length!==_.length,S=0;S<_.length&&!w;S++)_[S].equals(y[S])||(w=!0);for(var C in w&&o.setLatLngs(y),b)if(b[C]!==o.options[C]){o.setStyle(b);break}}else y.length>0&&((o=i.polyline(y,b)).on("click",A.bind(void 0,this,e)),o.on("mousedown",j.bind(void 0,this,e)),l.addLayer(o),u.layer=o)}else E(0,l,a)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){for(var e=this._entitiesToVisualize.values,t=this._entityHash,r=e.length-1;r>-1;r--)_(e[r],this._featureGroup,t);return this._entityCollection.collectionChanged.removeEventListener(b.prototype._onCollectionChanged,this),this._leafletScene.map.removeLayer(this._featureGroup),d(this)};var M=function(){};function A(e,t,r){e._leafletScene.featureClicked.raiseEvent(t,r)}function j(e,t,r){e._leafletScene.featureMousedown.raiseEvent(t,r)}M.prototype.visualizersCallback=function(e,t,r){var i=r.entities;return[new b(e,i)]},e.exports=M},function(e,t,r){"use strict";var i,a=r(8);e.exports=function(){if(a(i))return i;if(!window.WebGLRenderingContext)return i=!1;var e=document.createElement("canvas"),t={alpha:!1,stencil:!1,failIfMajorPerformanceCaveat:!0},r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return r?i=!0:(t.failIfMajorPerformanceCaveat=!1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!!r&&"slow"),i}},function(e,t,r){e.exports=r.p+"0d44f6c1c46240a1fe2043605a55bca4.svg"},function(e,t,r){e.exports={formLabel:"tjs-search-box__formLabel",searchField:"tjs-search-box__searchField tjs-_form__field tjs-_form__input",searchData:"tjs-search-box__searchData",searchClear:"tjs-search-box__searchClear tjs-_buttons__btn"}},function(e,t,r){e.exports={root:"tjs-data-catalog-tab__root","data-explorer":"tjs-data-catalog-tab__data-explorer tjs-tabs__tab-left-col",dataExplorer:"tjs-data-catalog-tab__data-explorer tjs-tabs__tab-left-col","data-catalog":"tjs-data-catalog-tab__data-catalog tjs-_base__list-reset tjs-_base__scrollbars",dataCatalog:"tjs-data-catalog-tab__data-catalog tjs-_base__list-reset tjs-_base__scrollbars","data--catalog-group":"tjs-data-catalog-tab__data--catalog-group tjs-_base__list-reset",dataCatalogGroup:"tjs-data-catalog-tab__data--catalog-group tjs-_base__list-reset",label:"tjs-data-catalog-tab__label tjs-_labels__label"}},function(e,t,r){"use strict";var i=f(r(13)),a=f(r(35)),n=f(r(19)),o=f(r(39)),s=f(r(15)),l=f(r(464)),u=f(r(465)),c=f(r(1480)),d=f(r(21)),p=f(r(1484));function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=(0,n.default)({displayName:"MyDataTab",mixins:[d.default],propTypes:{terria:s.default.object,viewState:s.default.object},getInitialState:function(){return{activeTab:null}},hasUserAddedData:function(){return this.props.terria.catalog.userAddedDataGroup.items.length>0},changeTab:function(e){this.setState({activeTab:e})},resetTab:function(){this.setState({activeTab:null})},renderTabs:function(){return i.default.createElement("ul",{className:p.default.tabList},[{id:"local",caption:"Add Local Data"},{id:"web",caption:"Add Web Data"}].map(function(e,t){return i.default.createElement("li",{className:p.default.tabListItem,key:e.id},i.default.createElement("button",{type:"button",onClick:this.changeTab.bind(null,e.id),title:e.caption,className:(0,a.default)(p.default.tabListBtn,h({},p.default.isActive,this.state.activeTab===e.id))},i.default.createElement(o.default,{glyph:o.default.GLYPHS[e.id]}),e.caption))},this))},renderPromptBox:function(){return this.hasUserAddedData()?i.default.createElement("div",{className:p.default.dataTypeTab},i.default.createElement("div",{className:p.default.dndBox},i.default.createElement(o.default,{glyph:o.default.GLYPHS.upload}),"Drag and Drop")):i.default.createElement("div",{className:p.default.dataTypeTab},i.default.createElement("div",null,i.default.createElement("div",null,"Drag and drop a file here to view it locally on the map"),i.default.createElement("div",null,"(it won’t be saved or uploaded to the internet)"),i.default.createElement("div",{className:p.default.tabCenter},this.renderTabs())),i.default.createElement("div",{className:p.default.dndBox},i.default.createElement(o.default,{glyph:o.default.GLYPHS.upload})))},render:function(){var e,t=this.hasUserAddedData()&!this.state.activeTab;return i.default.createElement("div",{className:p.default.root},i.default.createElement("div",{className:(0,a.default)((e={},h(e,p.default.leftCol,t),h(e,p.default.oneCol,!t),e))},this.state.activeTab?[i.default.createElement("button",{type:"button",onClick:this.resetTab,className:p.default.btnBackToMyData,key:"0"},i.default.createElement(o.default,{glyph:o.default.GLYPHS.left}),"Back"),i.default.createElement(c.default,{terria:this.props.terria,viewState:this.props.viewState,activeTab:this.state.activeTab,resetTab:this.resetTab,key:"1"})]:null,t?i.default.createElement("div",{className:p.default.addedData},i.default.createElement("p",{className:p.default.explanation},i.default.createElement("strong",null,"Note: "),"Data added in this way is not saved or made visible to others."),i.default.createElement("div",{className:p.default.tabLeft},this.renderTabs()),i.default.createElement("ul",{className:p.default.dataCatalog},i.default.createElement(l.default,{items:this.props.terria.catalog.userAddedDataGroup.items,removable:!0,viewState:this.props.viewState,terria:this.props.terria}))):null,this.state.activeTab?null:this.renderPromptBox()),t?i.default.createElement(u.default,{terria:this.props.terria,viewState:this.props.viewState,previewed:this.props.viewState.userDataPreviewedItem}):null)}});e.exports=m},function(e,t,r){"use strict";var i=y(r(13)),a=y(r(19)),n=y(r(15)),o=y(r(39)),s=y(r(463)),l=y(r(687)),u=y(r(138)),c=y(r(451)),d=y(r(1481)),p=y(r(688)),f=y(r(21)),h=y(r(36)),m=y(r(686)),g=y(r(1483)),v=y(r(132));function y(e){return e&&e.__esModule?e:{default:e}}var b=(0,p.default)().remoteDataType,_=(0,p.default)().localDataType,w=(0,a.default)({displayName:"AddData",mixins:[f.default],propTypes:{terria:n.default.object,viewState:n.default.object,resetTab:n.default.func,activeTab:n.default.string},getInitialState:function(){return{localDataType:_[0],remoteDataType:b[0],remoteUrl:"",isLoading:!1}},selectLocalOption:function(e){this.setState({localDataType:e})},selectRemoteOption:function(e){this.setState({remoteDataType:e})},handleUploadFile:function(e){var t=this;this.setState({isLoading:!0}),(0,m.default)(e.target.files,this.props.terria,this.props.viewState,this.state.localDataType).then(function(e){e.length>0&&t.onFileAddFinished(e[0]),t.setState({isLoading:!1}),t.props.resetTab()})},handleUrl:function(e){var t=this,r=this.state.remoteUrl;e.preventDefault(),this.props.terria.analytics.logEvent("addDataUrl",r);var i,a;if(this.setState({isLoading:!0}),"auto"===this.state.remoteDataType.value)a=this,i=(0,l.default)(a.props.terria,a.props.viewState,a.state.remoteUrl,a.state.remoteDataType.value,!0);else{var n=(0,u.default)(this.state.remoteDataType.value,this.props.terria);n.name=this.state.remoteUrl,n.url=this.state.remoteUrl,i=n.load().then(function(){return n})}(0,s.default)(this.props.terria,i).then(function(e){!e||e instanceof h.default||t.onFileAddFinished(e),t.setState({isLoading:!1}),t.props.resetTab()})},onFileAddFinished:function(e){this.props.viewState.myDataIsUploadView=!1,this.props.viewState.viewCatalogMember(e)},onRemoteUrlChange:function(e){this.setState({remoteUrl:e.target.value})},renderPanels:function(){var e={dropdown:g.default.dropdown,list:g.default.dropdownList,isOpen:g.default.dropdownListIsOpen,icon:i.default.createElement(o.default,{glyph:o.default.GLYPHS.opened})},t=_.reduce(function(e,t){return t.extensions?e.concat(t.extensions.map(function(e){return"."+e})):e},[]);return i.default.createElement("div",{className:g.default.tabPanels},"local"===this.props.activeTab?[i.default.createElement("div",{className:g.default.tabHeading,key:"0"},"Add local file"),i.default.createElement("section",{className:g.default.tabPanel,key:"1"},i.default.createElement("label",{className:g.default.label},i.default.createElement("strong",null,"Step 1:")," Select file type (optional)"),i.default.createElement(c.default,{options:_,selected:this.state.localDataType,selectOption:this.selectLocalOption,matchWidth:!0,theme:e}),i.default.createElement("label",{className:g.default.label},i.default.createElement("strong",null,"Step 2:")," Select file"),i.default.createElement(d.default,{accept:t.join(","),onChange:this.handleUploadFile}),this.state.isLoading&&i.default.createElement(v.default,null))]:null,"web"===this.props.activeTab?[i.default.createElement("div",{className:g.default.tabHeading,key:"0"},"Add web data"),i.default.createElement("section",{className:g.default.tabPanel,key:"1"},i.default.createElement("label",{className:g.default.label},i.default.createElement("strong",null,"Step 1:")," Select file type (optional)"),i.default.createElement(c.default,{options:b,selected:this.state.remoteDataType,selectOption:this.selectRemoteOption,matchWidth:!0,theme:e}),i.default.createElement("label",{className:g.default.label},i.default.createElement("strong",null,"Step 2:")," Enter the URL of the data file or web service"),i.default.createElement("form",{className:g.default.urlInput},i.default.createElement("input",{value:this.state.remoteUrl,onChange:this.onRemoteUrlChange,className:g.default.urlInputTextBox,type:"text",placeholder:"e.g. http://data.gov.au/geoserver/wms"}),i.default.createElement("button",{type:"submit",onClick:this.handleUrl,className:g.default.urlInputBtn},"Add"),this.state.isLoading&&i.default.createElement(v.default,null)))]:null)},render:function(){return i.default.createElement("div",{className:g.default.inner},this.renderPanels())}});e.exports=w},function(e,t,r){"use strict";var i=l(r(13)),a=l(r(15)),n=l(r(19)),o=l(r(35)),s=l(r(1482));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,n.default)({displayName:"FileInput",propTypes:{onChange:a.default.func,accept:a.default.string},getInitialState:function(){return{value:"Browse...",hovered:!1}},handleChange:function(e){this.setState({value:e.target.value.split(/(\\|\/)/g).pop()}),this.props.onChange&&this.props.onChange(e)},render:function(){var e,t,r,a=this;return i.default.createElement("form",{className:s.default.fileInput,onMouseEnter:function(){return a.setState({hovered:!0})},onMouseLeave:function(){return a.setState({hovered:!1})}},i.default.createElement("input",{type:"file",onChange:this.handleChange,accept:this.props.accept,className:s.default.input}),i.default.createElement("label",{className:(0,o.default)(s.default.btn,(e={},t=s.default.btnHover,r=this.state.hovered,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},this.state.value?this.state.value:"Browse..."))}});e.exports=u},function(e,t,r){e.exports={"file-input":"tjs-file-input__file-input",fileInput:"tjs-file-input__file-input",input:"tjs-file-input__input",btn:"tjs-file-input__btn tjs-_buttons__btn tjs-_buttons__btn-primary","btn--hover":"tjs-file-input__btn--hover tjs-_buttons__btn-primary--hover",btnHover:"tjs-file-input__btn--hover tjs-_buttons__btn-primary--hover"}},function(e,t,r){e.exports={"url-input":"tjs-add-data__url-input",urlInput:"tjs-add-data__url-input",inner:"tjs-add-data__inner","tab-panels":"tjs-add-data__tab-panels",tabPanels:"tjs-add-data__tab-panels","tab-panel":"tjs-add-data__tab-panel",tabPanel:"tjs-add-data__tab-panel",label:"tjs-add-data__label tjs-_labels__label",tabHeading:"tjs-add-data__tabHeading","url-input__text-box":"tjs-add-data__url-input__text-box tjs-_form__field tjs-_form__input",urlInputTextBox:"tjs-add-data__url-input__text-box tjs-_form__field tjs-_form__input","url-input__btn":"tjs-add-data__url-input__btn tjs-_buttons__btn tjs-_buttons__btn-transparent tjs-_buttons__btn-primary",urlInputBtn:"tjs-add-data__url-input__btn tjs-_buttons__btn tjs-_buttons__btn-transparent tjs-_buttons__btn-primary",dropdown__list:"tjs-add-data__dropdown__list",dropdownList:"tjs-add-data__dropdown__list"}},function(e,t,r){e.exports={root:"tjs-my-data-tab__root","data-catalog":"tjs-my-data-tab__data-catalog tjs-_base__list-reset",dataCatalog:"tjs-my-data-tab__data-catalog tjs-_base__list-reset","left-col":"tjs-my-data-tab__left-col tjs-tabs__tab-left-col tjs-_base__scrollbars",leftCol:"tjs-my-data-tab__left-col tjs-tabs__tab-left-col tjs-_base__scrollbars",oneCol:"tjs-my-data-tab__oneCol",tabCenter:"tjs-my-data-tab__tabCenter",tabLeft:"tjs-my-data-tab__tabLeft","tab-list":"tjs-my-data-tab__tab-list",tabList:"tjs-my-data-tab__tab-list","tab-list__item":"tjs-my-data-tab__tab-list__item",tabListItem:"tjs-my-data-tab__tab-list__item","tab-list__btn":"tjs-my-data-tab__tab-list__btn tjs-_buttons__btn tjs-_buttons__btn-transparent",tabListBtn:"tjs-my-data-tab__tab-list__btn tjs-_buttons__btn tjs-_buttons__btn-transparent","is-active":"tjs-my-data-tab__is-active",isActive:"tjs-my-data-tab__is-active",dndBox:"tjs-my-data-tab__dndBox",dataTypeTab:"tjs-my-data-tab__dataTypeTab",explanation:"tjs-my-data-tab__explanation","btn--back-to-my-data":"tjs-my-data-tab__btn--back-to-my-data tjs-_buttons__btn tjs-_buttons__btn-small undefined tjs-_buttons__btn-transparent",btnBackToMyData:"tjs-my-data-tab__btn--back-to-my-data tjs-_buttons__btn tjs-_buttons__btn-small undefined tjs-_buttons__btn-transparent","btn--add-more-data":"tjs-my-data-tab__btn--add-more-data tjs-_buttons__btn tjs-_buttons__btn-transparent tjs-_buttons__btn-primary",btnAddMoreData:"tjs-my-data-tab__btn--add-more-data tjs-_buttons__btn tjs-_buttons__btn-transparent tjs-_buttons__btn-primary",h3:"tjs-my-data-tab__h3 tjs-_base__h3"}},function(e,t,r){e.exports={tabs:"tjs-tabs__tabs","tab-list":"tjs-tabs__tab-list tjs-_base__list-reset tjs-_base__clearfix",tabList:"tjs-tabs__tab-list tjs-_base__list-reset tjs-_base__clearfix","tab-list__item":"tjs-tabs__tab-list__item",tabListItem:"tjs-tabs__tab-list__item","tab-panel":"tjs-tabs__tab-panel",tabPanel:"tjs-tabs__tab-panel","panel-content":"tjs-tabs__panel-content tjs-_base__clearfix",panelContent:"tjs-tabs__panel-content tjs-_base__clearfix","tab-left-col":"tjs-tabs__tab-left-col",tabLeftCol:"tjs-tabs__tab-left-col","btn--tab":"tjs-tabs__btn--tab tjs-_buttons__btn",btnTab:"tjs-tabs__btn--tab tjs-_buttons__btn","btn--selected":"tjs-tabs__btn--selected",btnSelected:"tjs-tabs__btn--selected"}},function(e,t,r){e.exports={"modal-wrapper":"tjs-explorer-window__modal-wrapper",modalWrapper:"tjs-explorer-window__modal-wrapper","explorer-panel":"tjs-explorer-window__explorer-panel",explorerPanel:"tjs-explorer-window__explorer-panel","is-mounted":"tjs-explorer-window__is-mounted",isMounted:"tjs-explorer-window__is-mounted","modal-overlay":"tjs-explorer-window__modal-overlay tjs-_base__sm-show",modalOverlay:"tjs-explorer-window__modal-overlay tjs-_base__sm-show","btn--close-modal":"tjs-explorer-window__btn--close-modal tjs-_base__sm-show tjs-_buttons__btn tjs-_buttons__btn-transparent",btnCloseModal:"tjs-explorer-window__btn--close-modal tjs-_base__sm-show tjs-_buttons__btn tjs-_buttons__btn-transparent"}},function(e,t,r){"use strict";var i=p(r(21)),a=p(r(13)),n=p(r(19)),o=p(r(192)),s=p(r(15)),l=p(r(1488)),u=p(r(1489)),c=p(r(39)),d=p(r(35));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=(0,n.default)({displayName:"FeedbackForm",mixins:[i.default],propTypes:{viewState:s.default.object.isRequired},getInitialState:function(){return{isSending:!1,sendShareURL:!0,name:"",email:"",comment:""}},componentDidMount:function(){var e=this;this.escKeyListener=function(t){27===t.keyCode&&e.onDismiss()},window.addEventListener("keydown",this.escKeyListener,!0)},componentWillUnmount:function(){window.removeEventListener("keydown",this.escKeyListener,!0)},onDismiss:function(){this.props.viewState.feedbackFormIsVisible=!1,this.setState(this.getInitialState())},onSubmit:function(e){var t=this;return e.preventDefault(),this.state.comment.length>0&&(this.setState({isSending:!0}),(0,l.default)({terria:this.props.viewState.terria,name:this.state.name,email:this.state.email,sendShareURL:this.state.sendShareURL,comment:this.state.comment}).then(function(e){e?(t.setState({isSending:!1,comment:""}),t.props.viewState.feedbackFormIsVisible=!1):t.setState({isSending:!1})})),!1},handleChange:function(e){this.setState(f({},e.target.getAttribute("name"),e.target.value))},changeSendShareUrl:function(e){this.setState({sendShareURL:!this.state.sendShareURL})},render:function(){var e=(0,o.default)(this.props.viewState.terria.configParameters.feedbackPreamble||"We would love to hear from you!"),t=(0,d.default)(u.default.form,f({},u.default.isOpen,this.props.viewState.feedbackFormIsVisible));return a.default.createElement("div",{className:"feedback__inner"},a.default.createElement("div",{className:t},a.default.createElement("div",{className:u.default.header},a.default.createElement("h4",{className:u.default.title},"Feedback"),a.default.createElement("button",{className:u.default.btnClose,onClick:this.onDismiss,title:"close feedback"},a.default.createElement(c.default,{glyph:c.default.GLYPHS.close}))),a.default.createElement("form",{onSubmit:this.onSubmit},a.default.createElement("div",{className:u.default.description},e),a.default.createElement("label",{className:u.default.label},"Your name (optional)"),a.default.createElement("input",{type:"text",name:"name",className:u.default.field,value:this.state.name,onChange:this.handleChange}),a.default.createElement("label",{className:u.default.label},"Email address (optional)",a.default.createElement("br",null),a.default.createElement("em",null,"We can't follow up without it!")),a.default.createElement("input",{type:"text",name:"email",className:u.default.field,value:this.state.email,onChange:this.handleChange}),a.default.createElement("label",{className:u.default.label},"Comment or question"),a.default.createElement("textarea",{className:u.default.field,name:"comment",value:this.state.comment,onChange:this.handleChange}),a.default.createElement("div",{className:u.default.shareUrl},a.default.createElement("button",{onClick:this.changeSendShareUrl,type:"button"},this.state.sendShareURL?a.default.createElement(c.default,{glyph:c.default.GLYPHS.checkboxOn}):a.default.createElement(c.default,{glyph:c.default.GLYPHS.checkboxOff}),"Share my map view with ",this.props.viewState.terria.appName," ","developers",a.default.createElement("br",null),a.default.createElement("small",null,"This helps us to troubleshoot issues by letting us see what you're seeing"))),a.default.createElement("div",{className:u.default.action},a.default.createElement("button",{type:"button",className:u.default.btnCancel,onClick:this.onDismiss},"Cancel"),a.default.createElement("button",{type:"submit",className:u.default.btnSubmit,disabled:this.state.isSending},this.state.isSending?"Sending...":"Send")))))}});e.exports=h},function(e,t,r){"use strict";var i=r(8),a=r(11),n=r(154),o=r(18),s=r(471),l=r(36);function u(e){e.error.raiseEvent(new l({title:"Unable to send feedback",message:"This is really embarrassing, but an error occurred while attempting to send your feedback.  Please email it to "+e.supportEmail+" instead."}))}e.exports=function(e){if(!i(e)||!i(e.terria))throw new a("options.terria is required.");var t=e.terria;if(i(t.configParameters.feedbackUrl))return(e.sendShareURL?s.canShorten(t)?s.buildShortShareLink(t):o(s.buildShareLink(t)):o("Not shared")).then(function(r){var i={title:e.title,name:e.name,email:e.email,shareLink:r,comment:e.comment};return e.additionalParameters&&t.serverConfig.config&&t.serverConfig.config.additionalFeedbackParameters&&t.serverConfig.config.additionalFeedbackParameters.forEach(function(t){var r=t.name;i[r]=e.additionalParameters[r]}),n({url:t.configParameters.feedbackUrl,responseType:"json",method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"application/json"}})}).then(function(e){return(e instanceof String||"string"==typeof e)&&(e=JSON.parse(e)),e&&e.result&&"SUCCESS"===e.result?(t.error.raiseEvent(new l({title:"Thank you for your feedback!",message:"Your feedback helps make "+t.appName+" better."})),!0):(u(t),!1)}).otherwise(function(){return u(t),!1});u(t)}},function(e,t,r){e.exports={form:"tjs-feedback-form__form tjs-_base__scrollbars",isOpen:"tjs-feedback-form__isOpen",header:"tjs-feedback-form__header",title:"tjs-feedback-form__title",description:"tjs-feedback-form__description",btnSubmit:"tjs-feedback-form__btnSubmit tjs-_buttons__btn","btnSubmit--hover":"tjs-feedback-form__btnSubmit--hover",btnSubmitHover:"tjs-feedback-form__btnSubmit--hover",field:"tjs-feedback-form__field tjs-_form__field tjs-_form__input",action:"tjs-feedback-form__action",btnCancel:"tjs-feedback-form__btnCancel tjs-_buttons__btn",btnClose:"tjs-feedback-form__btnClose tjs-_buttons__btn","share-url":"tjs-feedback-form__share-url",shareUrl:"tjs-feedback-form__share-url",label:"tjs-feedback-form__label"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=g(r(13)),a=g(r(19)),n=g(r(15));r(1491);var o=g(r(1492)),s=g(r(1496)),l=g(r(1497)),u=g(r(1498)),c=g(r(21)),d=g(r(1501)),p=g(r(8)),f=g(r(48)),h=g(r(35)),m=g(r(1521));function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=f.default.isInternetExplorer(),b=f.default.chromeVersion(),_=(0,a.default)({displayName:"MapColumn",mixins:[c.default],propTypes:{terria:n.default.object.isRequired,viewState:n.default.object.isRequired,customFeedbacks:n.default.array.isRequired},getInitialState:function(){return{}},UNSAFE_componentWillMount:function(){y&&(this.observer=new MutationObserver(this.resizeMapCell),window.addEventListener("resize",this.resizeMapCell,!1))},addBottomDock:function(e){y&&this.observer.observe(e,{childList:!0,subtree:!0})},newMapCell:function(e){y&&(this.mapCell=e,this.resizeMapCell())},resizeMapCell:function(){this.mapCell&&this.setState({height:this.mapCell.offsetHeight})},componentWillUnmount:function(){y&&(window.removeEventListener("resize",this.resizeMapCell,!1),this.observer.disconnect())},render:function(){var e=b&&b[0]&&Number(b[0])>75,t=(0,h.default)(m.default.mapCell,v({},m.default.mapCellChrome,e));return i.default.createElement("div",{className:(0,h.default)(m.default.mapInner,v({},m.default.mapInnerChrome,e))},i.default.createElement("div",{className:m.default.mapRow},i.default.createElement("div",{className:(0,h.default)(t,m.default.mapCellMap),ref:this.newMapCell},i.default.createElement("div",{className:m.default.mapWrapper,style:{height:this.state.height||(y?"100vh":"100%")}},i.default.createElement(o.default,{terria:this.props.terria,viewState:this.props.viewState})),this.props.viewState.hideMapUi()||this.props.terria.configParameters.hideLocationBar?null:i.default.createElement("div",{className:m.default.locationDistance},i.default.createElement(s.default,{terria:this.props.terria,mouseCoords:this.props.viewState.mouseCoords}),i.default.createElement(l.default,{terria:this.props.terria})),this.props.customFeedbacks.length||!this.props.terria.configParameters.feedbackUrl||this.props.viewState.hideMapUi()?null:i.default.createElement("div",{className:(0,h.default)(m.default.feedbackButtonWrapper,v({},m.default.withTimeSeriesControls,(0,p.default)(this.props.terria.timeSeriesStack.topLayer)))},i.default.createElement(u.default,{viewState:this.props.viewState})),this.props.customFeedbacks.length&&this.props.terria.configParameters.feedbackUrl&&!this.props.viewState.hideMapUi()?this.props.customFeedbacks.map(function(e,t){return i.default.createElement("div",{key:t},e)},this):null),this.props.terria.configParameters.printDisclaimer?i.default.createElement("div",{className:(0,h.default)(t,"print")},i.default.createElement("a",{className:m.default.printDisclaimer,href:this.props.terria.configParameters.printDisclaimer.url},this.props.terria.configParameters.printDisclaimer.text)):null),this.props.viewState.hideMapUi()?null:i.default.createElement("div",{className:m.default.mapRow},i.default.createElement("div",{className:t},i.default.createElement(d.default,{terria:this.props.terria,viewState:this.props.viewState,domElementRef:this.addBottomDock}))))}});t.default=_},,function(e,t,r){"use strict";var i=d(r(13)),a=d(r(19)),n=d(r(15)),o=d(r(24)),s=d(r(1493)),l=d(r(1494)),u=d(r(21)),c=d(r(708));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,a.default)({displayName:"TerriaViewerWrapper",mixins:[u.default],lastMouseX:-1,lastMouseY:-1,propTypes:{terria:n.default.object.isRequired,viewState:n.default.object.isRequired},componentDidMount:function(){this.terriaViewer=c.default.create(this.props.terria,{terrain:this.props.terria.configParameters.cesiumTerrainUrl,developerAttribution:{text:"Built with Terria",link:"https://terria.io/"}})},componentWillUnmount:function(){this.terriaViewer&&this.terriaViewer.destroy(),this.mapElement.innerHTML=""},onMouseMove:function(e){if(e.clientX!==this.lastMouseX||e.clientY!==this.lastMouseY)if(this.lastMouseX=e.clientX,this.lastMouseY=e.clientY,this.props.terria.cesium){var t=this.mapElement.getBoundingClientRect(),r=new o.default(e.clientX-t.left,e.clientY-t.top);this.props.viewState.mouseCoords.updateCoordinatesFromCesium(this.props.terria,r)}else this.props.terria.leaflet&&this.props.viewState.mouseCoords.updateCoordinatesFromLeaflet(this.props.terria,e.nativeEvent)},render:function(){var e=this;return i.default.createElement("aside",{className:s.default.container},i.default.createElement("div",{className:s.default.mapPlaceholder},"Loading the map, please wait..."),i.default.createElement(l.default,{terria:this.props.terria}),i.default.createElement("div",{id:"cesiumContainer",className:s.default.cesiumContainer,ref:function(t){e.mapElement=t},onMouseMove:this.onMouseMove}))}});e.exports=p},function(e,t,r){e.exports={"cesium-container":"tjs-terria-viewer-wrapper__cesium-container",cesiumContainer:"tjs-terria-viewer-wrapper__cesium-container",container:"tjs-terria-viewer-wrapper__container",mapPlaceholder:"tjs-terria-viewer-wrapper__mapPlaceholder"}},function(e,t,r){"use strict";var i=u(r(13)),a=u(r(19)),n=u(r(15)),o=u(r(39)),s=u(r(1495)),l=u(r(21));function u(e){return e&&e.__esModule?e:{default:e}}var c=!1;try{var d=Object.defineProperty({},"passive",{get:function(){return c=!0,!0}});window.addEventListener("test",null,d),window.removeEventListener("test",null,d)}catch(e){}var p=!!c&&{passive:!1},f=(0,a.default)({displayName:"Splitter",mixins:[l.default],propTypes:{terria:n.default.object.isRequired,thumbSize:n.default.number,padding:n.default.number},getDefaultProps:function(){return{thumbSize:42,padding:0}},componentDidMount:function(){var e=this;window.addEventListener("resize",function(){e.forceRefresh()})},componentWillUnmount:function(){this.unsubscribe()},forceRefresh:function(){var e=this.props.terria.splitPosition<.5?1e-4:-1e-4;this.props.terria.splitPosition+=e},startDrag:function(e){this.props.terria.currentViewer.pauseMapInteraction(),document.addEventListener("mousemove",this.drag,p),document.addEventListener("touchmove",this.drag,p),document.addEventListener("mouseup",this.stopDrag,p),document.addEventListener("touchend",this.stopDrag,p),e.preventDefault(),e.stopPropagation()},drag:function(e){var t=e.clientX,r=e.clientY;e.targetTouches&&e.targetTouches.length>0&&(t=e.targetTouches.item(0).clientX,r=e.targetTouches.item(0).clientY);var i=this.props.terria.currentViewer.getContainer().getBoundingClientRect(),a=this;function n(e,t,r){var i=t-e,n=(r-e)/i,o=(e+a.props.padding+.5*a.props.thumbSize-e)/i,s=(t-a.props.padding-.5*a.props.thumbSize-e)/i;return Math.min(s,Math.max(o,n))}var o=n(i.left,i.right,t),s=n(i.top,i.bottom,r),l=n(i.left,i.right,i.left+100),u=n(i.left,i.right,i.right-100);o=Math.min(u,Math.max(l,o)),s=Math.min(.8,Math.max(.2,s)),this.props.terria.splitPosition=o,this.props.terria.splitPositionVertical=s,e.preventDefault(),e.stopPropagation()},stopDrag:function(e){this.unsubscribe(),this.props.terria.currentViewer.resumeMapInteraction(),e.preventDefault(),e.stopPropagation()},unsubscribe:function(){document.removeEventListener("mousemove",this.drag,p),document.removeEventListener("touchmove",this.drag,p),document.removeEventListener("mouseup",this.stopDrag,p),document.removeEventListener("touchend",this.stopDrag,p),window.removeEventListener("resize",this.forceRefresh)},getPosition:function(){var e=this.props.terria.currentViewer.getContainer().clientWidth,t=this.props.terria.currentViewer.getContainer().clientHeight;return{x:this.props.terria.splitPosition*e,y:this.props.terria.splitPositionVertical*t}},render:function(){if(!this.props.terria.showSplitter||!this.props.terria.currentViewer.canShowSplitter||!this.props.terria.currentViewer.getContainer())return null;var e=this.props.thumbSize,t=this.getPosition(),r={left:t.x+"px",backgroundColor:this.props.terria.baseMapContrastColor},a={left:t.x+"px",top:t.y+"px",width:e+"px",height:e+"px",marginLeft:"-"+.5*e+"px",marginTop:"-"+.5*e+"px",lineHeight:e-2+"px",borderRadius:.5*e+"px",fontSize:e-12+"px"};return i.default.createElement("div",null,i.default.createElement("div",{className:s.default.dividerWrapper},i.default.createElement("div",{className:s.default.divider,style:r})),i.default.createElement("button",{className:s.default.thumb,style:a,onClick:function(e){return e.preventDefault()},onMouseDown:this.startDrag,onTouchStart:this.startDrag,title:"Drag left or right to adjust views"},i.default.createElement(o.default,{glyph:o.default.GLYPHS.splitter})))}});e.exports=f},function(e,t,r){e.exports={"divider-wrapper":"tjs-splitter__divider-wrapper",dividerWrapper:"tjs-splitter__divider-wrapper",divider:"tjs-splitter__divider",thumb:"tjs-splitter__thumb"}},function(e,t,r){"use strict";var i=u(r(35)),a=u(r(21)),n=u(r(13)),o=u(r(19)),s=u(r(15)),l=u(r(711));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,o.default)({displayName:"LocationBar",mixins:[a.default],propTypes:{terria:s.default.object,showUtmZone:s.default.bool,mouseCoords:s.default.object.isRequired},getDefaultProps:function(){return{showUtmZone:!0}},toggleUseProjection:function(){this.props.mouseCoords.toggleUseProjection()},render:function(){return n.default.createElement("button",{type:"button",className:(0,i.default)(l.default.locationBar,(e={},t=l.default.useProjection,r=this.props.mouseCoords.useProjection,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),onClick:this.toggleUseProjection},this.props.mouseCoords.useProjection?[n.default.createElement("div",{className:l.default.sectionShort,key:"0"},n.default.createElement("span",null,"ZONE"),n.default.createElement("span",null,this.props.mouseCoords.utmZone)),n.default.createElement("div",{className:l.default.section,key:"1"},n.default.createElement("span",null,"E"),n.default.createElement("span",null,this.props.mouseCoords.east)),n.default.createElement("div",{className:l.default.section,key:"2"},n.default.createElement("span",null,"N"),n.default.createElement("span",null,this.props.mouseCoords.north))]:[n.default.createElement("div",{className:l.default.section,key:"0"},n.default.createElement("span",null,"Lat"),n.default.createElement("span",null,this.props.mouseCoords.latitude)),n.default.createElement("div",{className:l.default.section,key:"1"},n.default.createElement("span",null,"Lon"),n.default.createElement("span",null,this.props.mouseCoords.longitude))],n.default.createElement("div",{className:l.default.sectionLong},n.default.createElement("span",null,"Elev"),n.default.createElement("span",null,this.props.mouseCoords.elevation)));var e,t,r}});e.exports=c},function(e,t,r){"use strict";var i=f(r(13)),a=f(r(19)),n=f(r(15)),o=f(r(184)),s=f(r(24)),l=f(r(8)),u=f(r(209)),c=f(r(111)),d=f(r(21)),p=f(r(711));function f(e){return e&&e.__esModule?e:{default:e}}var h=new u.default,m=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7],g=(0,a.default)({displayName:"DistanceLegend",mixins:[d.default],propTypes:{terria:n.default.object},getInitialState:function(){return{distanceLabel:void 0,barWidth:0}},UNSAFE_componentWillMount:function(){var e=this;this.viewerSubscriptions=[],this.removeUpdateSubscription=void 0,this._lastLegendUpdate=void 0,this.viewerSubscriptions.push(this.props.terria.beforeViewerChanged.addEventListener(function(){(0,l.default)(e.removeUpdateSubscription)&&(e.removeUpdateSubscription(),e.removeUpdateSubscription=void 0)})),this.addUpdateSubscription(),this.viewerSubscriptions.push(this.props.terria.afterViewerChanged.addEventListener(function(){e.addUpdateSubscription()}))},componentWillUnmount:function(){this.removeUpdateSubscription&&this.removeUpdateSubscription(),this.viewerSubscriptions.forEach(function(e){return e()})},addUpdateSubscription:function(){var e=this,t=this;if((0,l.default)(this.props.terria.cesium)){var r=this.props.terria.cesium.scene;this.removeUpdateSubscription=r.postRender.addEventListener(function(){e.updateDistanceLegendCesium(r)})}else if((0,l.default)(this.props.terria.leaflet)){var i=this.props.terria.leaflet.map,a=function(){t.updateDistanceLegendLeaflet(i)};t.removeUpdateSubscription=function(){i.off("zoomend",a),i.off("moveend",a)},i.on("zoomend",a),i.on("moveend",a),t.updateDistanceLegendLeaflet(i)}},updateDistanceLegendCesium:function(e){var t=(0,c.default)();if(!(t<this._lastLegendUpdate+250)){this._lastLegendUpdate=t;var r=e.canvas.clientWidth,i=e.canvas.clientHeight,a=e.camera.getPickRay(new s.default(r/2|0,i-1)),n=e.camera.getPickRay(new s.default(1+r/2|0,i-1)),o=e.globe,u=o.pick(a,e),d=o.pick(n,e);if((0,l.default)(u)&&(0,l.default)(d)){var p=o.ellipsoid.cartesianToCartographic(u),f=o.ellipsoid.cartesianToCartographic(d);h.setEndPoints(p,f);for(var g,v,y=h.surfaceDistance,b=m.length-1;!(0,l.default)(g)&&b>=0;--b)m[b]/y<100&&(g=m[b]);if((0,l.default)(g))v=g>=1e3?(g/1e3).toString()+" km":g.toString()+" m",this.setState({barWidth:g/y|0,distanceLabel:v});else this.setState({barWidth:void 0,distanceLabel:void 0})}else this.setState({barWidth:void 0,distanceLabel:void 0})}},updateDistanceLegendLeaflet:function(e){var t=e.getSize().y/2,r=e.containerPointToLatLng([0,t]).distanceTo(e.containerPointToLatLng([100,t])),i=o.default.control.scale()._getRoundNum(r),a=i<1e3?i+" m":i/1e3+" km";this.setState({barWidth:i/r*100,distanceLabel:a})},render:function(){var e={width:this.state.barWidth+"px",left:5+(125-this.state.barWidth)/2+"px",height:"2px"};return this.state.distanceLabel?i.default.createElement("div",{className:p.default.distanceLegend},i.default.createElement("label",null,this.state.distanceLabel),i.default.createElement("div",{className:p.default.bar,style:e})):null}});e.exports=g},function(e,t,r){"use strict";var i=c(r(21)),a=c(r(13)),n=c(r(19)),o=c(r(15)),s=c(r(1499)),l=r(349),u=c(r(39));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,n.default)({displayName:"FeedbackButton",mixins:[i.default],propTypes:{viewState:o.default.object.isRequired},onClick:function(){this.props.viewState.feedbackFormIsVisible=!0},render:function(){return a.default.createElement("div",{className:s.default.feedback},a.default.createElement("button",{type:"button",className:s.default.btnFeedback,onClick:this.onClick},a.default.createElement(u.default,{glyph:u.default.GLYPHS.feedback}),a.default.createElement(l.Medium,null,a.default.createElement("span",null,"Give feedback"))))}});e.exports=d},function(e,t,r){e.exports={feedback:"tjs-feedback-button__feedback",btnFeedback:"tjs-feedback-button__btnFeedback tjs-_buttons__btn"}},,function(e,t,r){"use strict";var i=c(r(13)),a=c(r(19)),n=c(r(15)),o=c(r(1502)),s=c(r(1507)),l=c(r(21)),u=c(r(1520));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,a.default)({mixins:[l.default],displayName:"BottomDock",propTypes:{terria:n.default.object.isRequired,viewState:n.default.object.isRequired,domElementRef:n.default.func},handleClick:function(){this.props.viewState.topElement="BottomDock"},render:function(){var e=this.props.terria;return i.default.createElement("div",{className:"".concat(u.default.bottomDock," ").concat("BottomDock"===this.props.viewState.topElement?"top-element":""),ref:this.props.domElementRef,tabIndex:0,onClick:this.handleClick},i.default.createElement(o.default,{terria:e,onHeightChange:this.onHeightChange,viewState:this.props.viewState}),e.timeSeriesStack.topLayer?i.default.createElement(s.default,{terria:e}):null)}});e.exports=d},function(e,t,r){"use strict";var i=f(r(13)),a=f(r(19)),n=f(r(15)),o=f(r(8)),s=f(r(450)),l=f(r(1503)),u=f(r(132)),c=f(r(21)),d=f(r(39)),p=f(r(1506));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,a.default)({displayName:"ChartPanel",mixins:[c.default],propTypes:{terria:n.default.object.isRequired,onHeightChange:n.default.func,viewState:n.default.object.isRequired,animationDuration:n.default.number},closePanel:function(){this.props.viewState.chartIsOpen=!1},componentDidUpdate:function(){(0,o.default)(this.props.onHeightChange)&&this.props.onHeightChange()},render:function(){var e=this.props.terria.catalog.chartableItems;if(!1===this.props.viewState.chartIsOpen)return null;var t,r=[];e.forEach(function(e){var i=e.chartData();(0,o.default)(i)&&e.isEnabled&&(r=r.concat(i),!(0,o.default)(t)&&(0,o.default)(e.xAxis)&&(t=e.xAxis.units))});var a,n,c=e.length>0&&e[e.length-1].isLoading;return this.props.terria.currentViewer.notifyRepaintRequired(),c&&(a=i.default.createElement(u.default,{className:p.default.loader})),r.length>0&&(n=i.default.createElement(s.default,{data:r,axisLabel:{x:t,y:void 0},height:266})),i.default.createElement("div",{className:p.default.holder},i.default.createElement("div",{className:p.default.inner},i.default.createElement("div",{className:p.default.chartPanel,style:{height:300}},i.default.createElement("div",{className:p.default.body},i.default.createElement("div",{className:p.default.header},i.default.createElement("label",{className:p.default.sectionLabel},a||"Charts"),i.default.createElement(l.default,{chartableItems:this.props.terria.catalog.chartableItems}),i.default.createElement("button",{type:"button",title:"Close Panel",className:p.default.btnCloseChartPanel,onClick:this.closePanel},i.default.createElement(d.default,{glyph:d.default.GLYPHS.close}))),i.default.createElement("div",{className:p.default.chart},n)))))}});e.exports=h},function(e,t,r){"use strict";var i=h(r(19)),a=h(r(599)),n=h(r(15)),o=h(r(13)),s=h(r(8)),l=h(r(48)),u=h(r(18)),c=h(r(128)),d=h(r(39)),p=h(r(21)),f=h(r(1504));function h(e){return e&&e.__esModule?e:{default:e}}var m="date",g=(0,i.default)({displayName:"ChartPanelDownloadButton",mixins:[p.default],propTypes:{chartableItems:n.default.array.isRequired},synthesizeNameAndValueArrays:function(e){for(var t=[],r=[],i=function(i){var a=e[i],n=function(e){return e.timeColumn||e.tableStructure&&e.tableStructure.columnsByType[c.default.SCALAR][0]}(a);if(!n)return"continue";r.length||r.push(function(e,t){return e.timeColumn?m:t.name}(a,n));var o=[n];if(a.isEnabled&&(0,s.default)(a.tableStructure)){if(!(0,s.default)(o[0]))return"continue";var l=a.tableStructure.columnsByType[c.default.SCALAR].filter(function(e){return e.isActive});l.length>0&&(o=o.concat(l),t.push(o.map(function(e){return e.type===c.default.SCALAR?new Float32Array(e.values):Array.prototype.slice.call(e.values)})),l.forEach(function(e){r.push(a.name+" "+e.name)}))}},a=e.length-1;a>=0;a--)i(a);return{values:t,names:r}},isDownloadSupported:function(){return l.default.supportsTypedArrays()&&l.default.supportsWebWorkers()},download:function(){var e=this;if(this.isDownloadSupported()){var t=this.props.chartableItems.map(function(e){return(0,u.default)(e.load()).then(function(){return e}).otherwise(function(){})});u.default.all(t).then(function(t){var i=e.synthesizeNameAndValueArrays(t.filter(function(e){return void 0!==e})),n=new(r(1505));i.values&&i.values.length>0&&(n.postMessage(i),n.onmessage=function(e){var t=new Blob([e.data],{type:"text/csv;charset=utf-8"});a.default.saveAs(t,"chart data.csv")})})}},render:function(){return this.isDownloadSupported()?o.default.createElement("button",{className:f.default.btnDownload,onClick:this.download},o.default.createElement(d.default,{glyph:d.default.GLYPHS.download}),"Download"):null}});e.exports=g},function(e,t,r){e.exports={"btn-download":"tjs-chart-panel-download-button__btn-download tjs-_buttons__btn",btnDownload:"tjs-chart-panel-download-button__btn-download tjs-_buttons__btn"}},function(e,t,r){e.exports=function(){return new Worker(r.p+"ed0b2ed3f2caa4b8455c.worker.js")}},function(e,t,r){e.exports={inner:"tjs-chart-panel__inner","chart-panel":"tjs-chart-panel__chart-panel",chartPanel:"tjs-chart-panel__chart-panel",holder:"tjs-chart-panel__holder",header:"tjs-chart-panel__header",chart:"tjs-chart-panel__chart",axis:"tjs-chart-panel__axis",colors:"tjs-chart-panel__colors","section-label":"tjs-chart-panel__section-label tjs-_labels__label",sectionLabel:"tjs-chart-panel__section-label tjs-_labels__label",btn:"tjs-chart-panel__btn",loader:"tjs-chart-panel__loader","btn--close-chart-panel":"tjs-chart-panel__btn--close-chart-panel tjs-_buttons__btn",btnCloseChartPanel:"tjs-chart-panel__btn--close-chart-panel tjs-_buttons__btn"}},function(e,t,r){"use strict";var i=v(r(19)),a=v(r(211)),n=v(r(13)),o=v(r(15)),s=v(r(8)),l=v(r(23)),u=v(r(168)),c=v(r(42)),d=v(r(21)),p=v(r(1508)),f=v(r(1510)),h=v(r(712)),m=r(279),g=v(r(713));function v(e){return e&&e.__esModule?e:{default:e}}var y=(0,i.default)({displayName:"Timeline",mixins:[d.default],propTypes:{terria:o.default.object.isRequired,autoPlay:o.default.bool,locale:o.default.object},getDefaultProps:function(){return{autoPlay:!0}},getInitialState:function(){return{currentTimeString:"<>",isPickerOpen:!1}},UNSAFE_componentWillMount:function(){var e=this;this.resizeListener=function(){return e.timeline&&e.timeline.resize()},window.addEventListener("resize",this.resizeListener,!1);var t=function(t){var r,i=t.currentTime;r=(0,s.default)(e.props.terria.timeSeriesStack.topLayer)&&(0,s.default)(e.props.terria.timeSeriesStack.topLayer.dateFormat.currentTime)?(0,a.default)(i,e.props.terria.timeSeriesStack.topLayer.dateFormat.currentTime):(0,m.formatDateTime)(c.default.toDate(i),e.props.locale),e.setState({currentTimeString:r})};this.removeTickEvent=this.props.terria.clock.onTick.addEventListener(t),t(this.props.terria.clock),this.topLayerSubscription=l.default.getObservable(this.props.terria.timeSeriesStack,"topLayer").subscribe(function(){return e.updateForNewTopLayer()}),this.updateForNewTopLayer()},componentWillUnmount:function(){this.removeTickEvent(),this.topLayerSubscription.dispose(),window.removeEventListener("resize",this.resizeListener)},updateForNewTopLayer:function(){var e=this.props.terria.autoPlay;(0,s.default)(e)||(e=this.props.autoPlay);var t=this.props.terria,r=t.timeSeriesStack.topLayer;r&&e&&(t.clock.tick(),t.clock.shouldAnimate=!0),t.clock.clockRange=u.default.LOOP_STOP,this.setState({layerName:r&&r.name})},changeDateTime:function(e){this.props.terria.clock.currentTime=c.default.fromDate(new Date(e)),this.props.terria.currentViewer.notifyRepaintRequired()},onOpenPicker:function(){this.setState({isPickerOpen:!0})},onClosePicker:function(){this.setState({isPickerOpen:!1})},render:function(){var e=this.props.terria,t=e.timeSeriesStack.topLayer;return(0,s.default)(t)?n.default.createElement("div",{className:g.default.timeline},n.default.createElement("div",{className:g.default.textRow},n.default.createElement("div",{className:g.default.textCell,title:"Name of the dataset whose time range is shown"},t.name," ",this.state.currentTimeString)),n.default.createElement("div",{className:g.default.controlsRow},n.default.createElement(p.default,{clock:e.clock,analytics:e.analytics,currentViewer:e.currentViewer}),(0,s.default)(t.availableDates)&&0!==t.availableDates.length?n.default.createElement(h.default,{currentDate:t.clampedDiscreteTime,dates:t.availableDates,onChange:this.changeDateTime,openDirection:"up",isOpen:this.state.isPickerOpen,onOpen:this.onOpenPicker,onClose:this.onClosePicker,dateFormat:t.dateFormat}):null,n.default.createElement(f.default,{terria:e}))):null}});e.exports=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(13)),a=u(r(15)),n=u(r(19)),o=u(r(168)),s=u(r(1509)),l=u(r(39));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)({displayName:"TimelineControls",propTypes:{clock:a.default.object.isRequired,analytics:a.default.object.isRequired,currentViewer:a.default.object.isRequired,locale:a.default.object},getInitialState:function(){return{currentTimeString:""}},gotoStart:function(){this.props.analytics.logEvent("navigation","click","gotoStart"),this.props.clock.currentTime=this.props.clock.startTime,this.props.currentViewer.notifyRepaintRequired()},togglePlay:function(){this.props.analytics.logEvent("navigation","click","togglePlay"),this.props.clock.tick(),this.props.clock.multiplier<0&&(this.props.clock.multiplier=-this.props.clock.multiplier),this.props.clock.shouldAnimate=!this.props.clock.shouldAnimate,this.props.currentViewer.notifyRepaintRequired()},playSlower:function(){this.props.analytics.logEvent("navigation","click","playSlower"),this.props.clock.tick(),this.props.clock.multiplier/=2,this.props.clock.shouldAnimate=!0,this.props.currentViewer.notifyRepaintRequired()},playFaster:function(){this.props.analytics.logEvent("navigation","click","playFaster"),this.props.clock.tick(),this.props.clock.multiplier*=2,this.props.clock.shouldAnimate=!0,this.props.currentViewer.notifyRepaintRequired()},toggleLoop:function(){this.props.analytics.logEvent("navigation","click","toggleLoop"),this.isLooping()?this.props.clock.clockRange=o.default.CLAMPED:this.props.clock.clockRange=o.default.LOOP_STOP},isLooping:function(){return this.props.clock.clockRange===o.default.LOOP_STOP},isPlaying:function(){return this.props.clock.shouldAnimate},render:function(){return i.default.createElement("div",{className:s.default.controls},i.default.createElement("button",{type:"button",className:s.default.timelineControl,onClick:this.gotoStart,title:"Go to beginning"},i.default.createElement(l.default,{glyph:l.default.GLYPHS.backToStart})),i.default.createElement("button",{type:"button",className:s.default.timelineControl,onClick:this.togglePlay,title:"Play"},this.isPlaying()?i.default.createElement(l.default,{glyph:l.default.GLYPHS.pause}):i.default.createElement(l.default,{glyph:l.default.GLYPHS.play})),i.default.createElement("button",{type:"button",className:s.default.timelineControl,onClick:this.playSlower,title:"Play Slower"},i.default.createElement(l.default,{glyph:l.default.GLYPHS.backward})),i.default.createElement("button",{type:"button",className:s.default.timelineControl,onClick:this.playFaster,title:"Play Faster"},i.default.createElement(l.default,{glyph:l.default.GLYPHS.forward})))}});t.default=c},function(e,t,r){e.exports={controls:"tjs-timeline-controls__controls",timeline__control:"tjs-timeline-controls__timeline__control tjs-_buttons__btn",timelineControl:"tjs-timeline-controls__timeline__control tjs-_buttons__btn","is-active":"tjs-timeline-controls__is-active",isActive:"tjs-timeline-controls__is-active"}},function(e,t,r){"use strict";var i=f(r(13)),a=f(r(15)),n=f(r(19)),o=f(r(23)),s=f(r(1511)),l=f(r(42)),u=r(279),c=f(r(1514)),d=f(r(8)),p=f(r(211));function f(e){return e&&e.__esModule?e:{default:e}}var h=(0,n.default)({displayName:"CesiumTimeline",propTypes:{terria:a.default.object.isRequired,autoPlay:a.default.bool},componentDidMount:function(){var e=this;this.cesiumTimeline=new s.default(this.timelineContainer,this.props.terria.clock),this.cesiumTimeline.makeLabel=function(t){if((0,d.default)(e.props.terria.timeSeriesStack.topLayer)){var r=e.props.terria.timeSeriesStack.topLayer;if((0,d.default)(r.dateFormat.timelineTic))return(0,p.default)(l.default.toDate(t),r.dateFormat.timelineTic)}var i=e.cesiumTimeline._startJulian,a=e.cesiumTimeline._endJulian,n=l.default.daysDifference(a,i);return n>14?(0,u.formatDate)(l.default.toDate(t),e.locale):n<1?(0,u.formatTime)(l.default.toDate(t),e.locale):(0,u.formatDateTime)(l.default.toDate(t),e.locale)},this.cesiumTimeline.scrubFunction=function(t){var r=t.clock;r.currentTime=t.timeJulian,r.shouldAnimate=!1,e.props.terria.currentViewer.notifyRepaintRequired()},this.cesiumTimeline.addEventListener("settime",this.cesiumTimeline.scrubFunction,!1),this.topLayerSubscription=o.default.getObservable(this.props.terria.timeSeriesStack,"topLayer").subscribe(function(){return e.zoom()}),this.zoom()},zoom:function(){this.cesiumTimeline.zoomTo(this.props.terria.clock.startTime,this.props.terria.clock.stopTime)},componentWillUnmount:function(){this.topLayerSubscription.dispose()},shouldComponentUpdate:function(){return!1},render:function(){var e=this;return i.default.createElement("div",{className:c.default.cesiumTimeline,ref:function(t){e.timelineContainer=t}})}});e.exports=h},,,,function(e,t,r){var i=r(1515);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(1)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,r){t=e.exports=r(0)(!0);var i=r(1516)(r(1517));t.push([e.i,"._3l0U_YAEexR8g78xykcVFd {\n  display: table-cell;\n  height: 19px;\n  vertical-align: bottom; }\n\n.cesium-timeline-needle, .cesium-timeline-trackContainer, .cesium-timeline-ruler {\n  display: none !important; }\n\n.cesium-timeline-main {\n  position: relative;\n  left: 0;\n  bottom: 0;\n  overflow: hidden;\n  border: solid 1px #888; }\n\n.cesium-timeline-trackContainer {\n  width: 100%;\n  overflow: auto;\n  border-top: solid 1px #888;\n  position: relative;\n  top: 0;\n  left: 0; }\n\n.cesium-timeline-tracks {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%; }\n\n.cesium-timeline-needle {\n  position: absolute;\n  left: 0;\n  top: 1.7em;\n  bottom: 0;\n  width: 1px;\n  background: #f00; }\n\n.cesium-timeline-bar {\n  position: relative;\n  left: 0;\n  top: 0;\n  overflow: hidden;\n  cursor: pointer;\n  width: 100%;\n  height: 1.7em;\n  background-color: #fafafa;\n  background: rgba(32, 32, 32, 0.8);\n  background: -moz-linear-gradient(top, rgba(116, 117, 119, 0.8) 0%, rgba(58, 68, 82, 0.8) 11%, rgba(46, 50, 56, 0.8) 46%, rgba(53, 53, 53, 0.8) 81%, rgba(53, 53, 53, 0.8) 100%);\n  /* FF3.6+ */\n  background: -webkit-linear-gradient(top, rgba(116, 117, 119, 0.8) 0%, rgba(58, 68, 82, 0.8) 11%, rgba(46, 50, 56, 0.8) 46%, rgba(53, 53, 53, 0.8) 81%, rgba(53, 53, 53, 0.8) 100%);\n  /* Chrome10+,Safari5.1+ */\n  background: linear-gradient(to bottom, rgba(116, 117, 119, 0.8) 0%, rgba(58, 68, 82, 0.8) 11%, rgba(46, 50, 56, 0.8) 46%, rgba(53, 53, 53, 0.8) 81%, rgba(53, 53, 53, 0.8) 100%);\n  /* W3C */ }\n\n.cesium-timeline-ruler {\n  /* NOTE: The label and the ruler must use the same font/size */\n  visibility: hidden;\n  white-space: nowrap;\n  font-size: 80%;\n  z-index: -200; }\n\n.cesium-timeline-highlight {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background: #08f; }\n\n.cesium-timeline-ticLabel {\n  position: absolute;\n  top: 0;\n  left: 0;\n  white-space: nowrap;\n  font-size: 80%;\n  color: #eee; }\n\n.cesium-timeline-ticMain {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 1px;\n  height: 50%;\n  background: #eee; }\n\n.cesium-timeline-ticSub {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 1px;\n  height: 33%;\n  background: #aaa; }\n\n.cesium-timeline-ticTiny {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 1px;\n  height: 25%;\n  background: #888; }\n\n.cesium-timeline-icon16 {\n  display: block;\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background-image: url("+i+");\n  background-repeat: no-repeat; }\n","",{version:3,sources:["/Users/pawanmacbook/Documents/ppb/ppbcha-terriamap/packages/terriajs/lib/ReactViews/BottomDock/Timeline/cesium-timeline.scss"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,YAAY;EACZ,sBAAsB,EAAA;;AAGxB;EAKM,wBAAwB,EAAA;;AAM9B;EAEI,kBAAkB;EAClB,OAAO;EACP,SAAS;EACT,gBAAgB;EAChB,sBAAsB,EAAA;;AAN1B;EAUI,WAAW;EACX,cAAc;EACd,0BAA0B;EAC1B,kBAAkB;EAClB,MAAM;EACN,OAAO,EAAA;;AAfX;EAmBI,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,WAAW,EAAA;;AAtBf;EA0BI,kBAAkB;EAClB,OAAO;EACP,UAAU;EACV,SAAS;EACT,UAAU;EACV,gBAAgB,EAAA;;AA/BpB;EAmCI,kBAAkB;EAClB,OAAO;EACP,MAAM;EACN,gBAAgB;EAChB,eAAe;EACf,WAAW;EACX,aAAa;EACb,yBAAyB;EACzB,iCAAiC;EACjC,+KAOC;EAAE,WAAA;EACH,kLAOC;EAAE,yBAAA;EACH,gLAOC;EAAE,QAAA,EAAS;;AAnEhB;EAuEI,8DAAA;EACA,kBAAkB;EAClB,mBAAmB;EACnB,cAAc;EACd,aAAa,EAAA;;AA3EjB;EA+EI,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,gBAAgB,EAAA;;AAlFpB;EAsFI,kBAAkB;EAClB,MAAM;EACN,OAAO;EACP,mBAAmB;EACnB,cAAc;EACd,WAAW,EAAA;;AA3Ff;EA+FI,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,UAAU;EACV,WAAW;EACX,gBAAgB,EAAA;;AApGpB;EAwGI,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,UAAU;EACV,WAAW;EACX,gBAAgB,EAAA;;AA7GpB;EAiHI,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,UAAU;EACV,WAAW;EACX,gBAAgB,EAAA;;AAtHpB;EA0HI,cAAc;EACd,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,+CAAqE;EACrE,4BAA4B,EAAA",file:"cesium-timeline.scss",sourcesContent:['.cesiumTimeline {\n  display: table-cell;\n  height: 19px;\n  vertical-align: bottom;\n}\n\n:global {\n  .cesium-timeline {\n    &-needle,\n    &-trackContainer,\n    &-ruler {\n      display: none !important;\n    }\n  }\n}\n\n// TODO: import this from cesium, doesn\'t work for me so far.\n:global {\n  .cesium-timeline-main {\n    position: relative;\n    left: 0;\n    bottom: 0;\n    overflow: hidden;\n    border: solid 1px #888;\n  }\n\n  .cesium-timeline-trackContainer {\n    width: 100%;\n    overflow: auto;\n    border-top: solid 1px #888;\n    position: relative;\n    top: 0;\n    left: 0;\n  }\n\n  .cesium-timeline-tracks {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n  }\n\n  .cesium-timeline-needle {\n    position: absolute;\n    left: 0;\n    top: 1.7em;\n    bottom: 0;\n    width: 1px;\n    background: #f00;\n  }\n\n  .cesium-timeline-bar {\n    position: relative;\n    left: 0;\n    top: 0;\n    overflow: hidden;\n    cursor: pointer;\n    width: 100%;\n    height: 1.7em;\n    background-color: #fafafa;\n    background: rgba(32, 32, 32, 0.8);\n    background: -moz-linear-gradient(\n      top,\n      rgba(116, 117, 119, 0.8) 0%,\n      rgba(58, 68, 82, 0.8) 11%,\n      rgba(46, 50, 56, 0.8) 46%,\n      rgba(53, 53, 53, 0.8) 81%,\n      rgba(53, 53, 53, 0.8) 100%\n    ); /* FF3.6+ */\n    background: -webkit-linear-gradient(\n      top,\n      rgba(116, 117, 119, 0.8) 0%,\n      rgba(58, 68, 82, 0.8) 11%,\n      rgba(46, 50, 56, 0.8) 46%,\n      rgba(53, 53, 53, 0.8) 81%,\n      rgba(53, 53, 53, 0.8) 100%\n    ); /* Chrome10+,Safari5.1+ */\n    background: linear-gradient(\n      to bottom,\n      rgba(116, 117, 119, 0.8) 0%,\n      rgba(58, 68, 82, 0.8) 11%,\n      rgba(46, 50, 56, 0.8) 46%,\n      rgba(53, 53, 53, 0.8) 81%,\n      rgba(53, 53, 53, 0.8) 100%\n    ); /* W3C */\n  }\n\n  .cesium-timeline-ruler {\n    /* NOTE: The label and the ruler must use the same font/size */\n    visibility: hidden;\n    white-space: nowrap;\n    font-size: 80%;\n    z-index: -200;\n  }\n\n  .cesium-timeline-highlight {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    background: #08f;\n  }\n\n  .cesium-timeline-ticLabel {\n    position: absolute;\n    top: 0;\n    left: 0;\n    white-space: nowrap;\n    font-size: 80%;\n    color: #eee;\n  }\n\n  .cesium-timeline-ticMain {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 1px;\n    height: 50%;\n    background: #eee;\n  }\n\n  .cesium-timeline-ticSub {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 1px;\n    height: 33%;\n    background: #aaa;\n  }\n\n  .cesium-timeline-ticTiny {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 1px;\n    height: 25%;\n    background: #888;\n  }\n\n  .cesium-timeline-icon16 {\n    display: block;\n    position: absolute;\n    width: 16px;\n    height: 16px;\n    background-image: url("../../../../wwwroot/images/TimelineIcons.png");\n    background-repeat: no-repeat;\n  }\n}\n']}]),t.locals={cesiumTimeline:"_3l0U_YAEexR8g78xykcVFd"}},,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sIDBITKIVzLEMAAAKNSURBVEjHxdXNSxRhHAfw7zzrqhuoWJnSkrippUVSEKsHI9BTUYdAJA/RoYMREV26rAdn6tAfUARi16hQqkOBQRgUEYFWEC3OwczMjdZd92VmdWfmeelgTjO7q7gb0VzmmZnn85vvPPPMM8B/3qTcE2PPpuTZKB1eWuUQACgXYACYwVFbCTTVeZXB/i55o4LFelcAZfStYD4vpAoPGAGo4GBcQEgSOAUMQyAezwK6iQfDPXnhS/FkHZ+/8VLMWxxqWkfH3gbMRNOYi2roavbja0zHQmoFPYf8ED4Ko4aivm9MOG/u9I8mwrafeK7a/tVrNc/bARYN5noadeq7q0342vXw9CIMU6BmW8rVP9cPBPe52uu+v3O/y9sB4gkTWs6Qsk0mj5ExXMelejvA8WafYmkmGPHanTijdtvif8rx5RiCjdWKs2Cp3jWRDl96KhrbqlBeJqBOLyLQXg0IgbkZDS0dO8EZxZfPSTA9jvDDK3mT0OmP1FXh3XwEEAKdTX5MRWLgjCK4pwH3xt/YnjgLHAv4lHTCAKMMu/wV+KZGob6PoKyMQ0+sgBpZVJZn0NterxQaVqef/DRn+/EXYds/mZx2eVeAW9d65dhCEsaKCb7K8HH0gqTevyh9GDkn0VULRiaLzJKGBu9swfdaiie5RVo9ESURN8E8BE0n7ggACJy8KzghSCzp6DmwWxkaCm24EBXr8wI8Hrkq06QBiRC0t24HALS11IBTCyJl4vb1AXmzpbVYTwoVOXN0h7L8Mwtm8bXPybIQ/5FCX3dA2cr6XowvGCA02CvztAnz9+JiZk1AMxG6fEreSoBiPNmoyNnuWiWVzAIAtISO08E6pZi/3N96AIDn4E3h3P8L/wshP+txtEs4JAAAAABJRU5ErkJggg=="},,,function(e,t,r){e.exports={"bottom-dock":"tjs-bottom-dock__bottom-dock",bottomDock:"tjs-bottom-dock__bottom-dock"}},function(e,t,r){e.exports={map__inner:"tjs-map-column__map__inner",mapInner:"tjs-map-column__map__inner",map__innerChrome:"tjs-map-column__map__innerChrome",mapInnerChrome:"tjs-map-column__map__innerChrome",map__row:"tjs-map-column__map__row",mapRow:"tjs-map-column__map__row",map__cell:"tjs-map-column__map__cell",mapCell:"tjs-map-column__map__cell",map__cellChrome:"tjs-map-column__map__cellChrome",mapCellChrome:"tjs-map-column__map__cellChrome","map-cell-map":"tjs-map-column__map-cell-map",mapCellMap:"tjs-map-column__map-cell-map","map-wrapper":"tjs-map-column__map-wrapper",mapWrapper:"tjs-map-column__map-wrapper",feedback:"tjs-map-column__feedback","location-distance":"tjs-map-column__location-distance tjs-_base__clearfix",locationDistance:"tjs-map-column__location-distance tjs-_base__clearfix","feedback-button-wrapper":"tjs-map-column__feedback-button-wrapper",feedbackButtonWrapper:"tjs-map-column__feedback-button-wrapper","with-time-series-controls":"tjs-map-column__with-time-series-controls",withTimeSeriesControls:"tjs-map-column__with-time-series-controls","print-disclaimer":"tjs-map-column__print-disclaimer",printDisclaimer:"tjs-map-column__print-disclaimer"}},function(e,t,r){"use strict";var i=d(r(21)),a=d(r(13)),n=d(r(19)),o=d(r(15)),s=d(r(278)),l=d(r(1523)),u=d(r(35)),c=d(r(8));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,n.default)({displayName:"MapInteractionWindow",mixins:[i.default],propTypes:{terria:o.default.object,viewState:o.default.object},UNSAFE_componentWillUnmount:function(){this.removeContextItem()},UNSAFE_componentWillReceiveProps:function(e){var t=this.props.terria.mapInteractionModeStack&&this.props.terria.mapInteractionModeStack[this.props.terria.mapInteractionModeStack.length-1];(0,c.default)(t)?this.enableContextItem(e):this.removeContextItem()},enableContextItem:function(e){this.removeContextItem(),(0,c.default)(e.viewState.previewedItem)&&(0,c.default)(e.viewState.previewedItem.contextItem)&&(e.viewState.previewedItem.contextItem.isEnabled=!0,this._lastContextItem=e.viewState.previewedItem.contextItem)},removeContextItem:function(){(0,c.default)(this._lastContextItem)&&(this._lastContextItem.isEnabled=!1,this._lastContextItem=void 0)},render:function(){var e,t,r,i=this.props.terria.mapInteractionModeStack&&this.props.terria.mapInteractionModeStack[this.props.terria.mapInteractionModeStack.length-1],n=(0,u.default)(l.default.window,(e={},t=l.default.isActive,r=i,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e));return a.default.createElement("div",{className:n,"aria-hidden":!i},a.default.createElement("div",{className:l.default.content},i&&(0,s.default)(i.message())),i&&i.customUi&&i.customUi(),a.default.createElement("button",{type:"button",onClick:i&&i.onCancel,className:l.default.btn},i&&i.buttonText))}});e.exports=p},function(e,t,r){e.exports={window:"tjs-map-interaction-window__window",isActive:"tjs-map-interaction-window__isActive",content:"tjs-map-interaction-window__content",btn:"tjs-map-interaction-window__btn tjs-_buttons__btn tjs-_buttons__btn-primary"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=g(r(1525)),a=g(r(19)),n=g(r(1527)),o=g(r(21)),s=g(r(15)),l=g(r(13)),u=r(349),c=g(r(1528)),d=g(r(1529)),p=g(r(177)),f=g(r(1531)),h=g(r(35)),m=g(r(8));function g(e){return e&&e.__esModule?e:{default:e}}var v=(0,a.default)({displayName:"MapNavigation",mixins:[o.default],propTypes:{terria:s.default.object.isRequired,viewState:s.default.object.isRequired,navItems:s.default.arrayOf(s.default.element)},getDefaultProps:function(){return{navItems:[]}},render:function(){return l.default.createElement("div",{className:(0,h.default)(c.default.mapNavigation,(e={},t=c.default.withTimeSeriesControls,r=(0,m.default)(this.props.terria.timeSeriesStack.topLayer),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},l.default.createElement(u.Medium,null,l.default.createElement("div",{className:c.default.navs},this.props.terria.viewerMode!==p.default.Leaflet?l.default.createElement("div",{className:c.default.control},l.default.createElement(i.default,{terria:this.props.terria})):null,l.default.createElement("div",{className:c.default.control},l.default.createElement(f.default,{terria:this.props.terria})))),l.default.createElement("div",{className:c.default.controls},this.props.terria.configParameters.disableMyLocation?null:l.default.createElement("div",{className:c.default.control},l.default.createElement(n.default,{terria:this.props.terria})),this.props.terria.configParameters.disableSplitter?null:l.default.createElement("div",{className:c.default.control},l.default.createElement(d.default,{terria:this.props.viewState.terria})),this.props.navItems.map(function(e,t){return l.default.createElement("div",{className:c.default.control,key:t},e)},this)));var e,t,r}});t.default=v},function(e,t,r){"use strict";var i=o(r(19)),a=o(r(39)),n=o(r(1526));function o(e){return e&&e.__esModule?e:{default:e}}var s=r(13),l=r(15),u=r(714),c=r(24),d=r(12),p=r(14),f=r(8),h=r(26),m=r(111),g=r(28),v=r(146),y=r(60),b=(0,i.default)({displayName:"Compass",propTypes:{terria:l.object},getInitialState:function(){return{orbitCursorAngle:0,heading:0,orbitCursorOpacity:0}},componentDidMount:function(){var e=this;this._unsubscribeFromViewerChange=this.props.terria.afterViewerChanged.addEventListener(function(){return I(e)}),I(this)},componentWillUnmount:function(){document.removeEventListener("mousemove",this.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",this.orbitMouseUpFunction,!1),this._unsubscribeFromClockTick&&this._unsubscribeFromClockTick(),this._unsubscribeFromPostRender&&this._unsubscribeFromPostRender(),this._unsubscribeFromViewerChange&&this._unsubscribeFromViewerChange()},handleMouseDown:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var t=e.currentTarget,r=e.currentTarget.getBoundingClientRect(),i=r.width/2,a=new c((r.right-r.left)/2,(r.bottom-r.top)/2),n=new c(e.clientX-r.left,e.clientY-r.top),o=c.subtract(n,a,_),s=c.magnitude(o)/i;if(s<50/145)!function(e,t,r){document.removeEventListener("mousemove",e.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",e.orbitMouseUpFunction,!1),f(e.orbitTickFunction)&&e.props.terria.clock.onTick.removeEventListener(e.orbitTickFunction);e.orbitMouseMoveFunction=void 0,e.orbitMouseUpFunction=void 0,e.orbitTickFunction=void 0,e.isOrbiting=!0,e.orbitLastTimestamp=m();var i=e.props.terria.cesium.scene,a=i.camera,n=x;n.x=i.canvas.clientWidth/2,n.y=i.canvas.clientHeight/2;var o=a.getPickRay(n,E),s=i.globe.pick(o,i,C);f(s)?(e.orbitFrame=y.eastNorthUpToFixedFrame(s,h.WGS84,S),e.orbitIsLook=!1):(e.orbitFrame=y.eastNorthUpToFixedFrame(a.positionWC,h.WGS84,S),e.orbitIsLook=!0);function l(t,r){var i=Math.atan2(-t.y,t.x);e.setState({orbitCursorAngle:p.zeroToTwoPi(i-p.PI_OVER_TWO)});var a=c.magnitude(t),n=r/2,o=Math.min(a/n,1),s=.5*o*o+.5;e.setState({orbitCursorOpacity:s}),e.props.terria.cesium.notifyRepaintRequired()}e.orbitTickFunction=function(t){var r=m(),n=r-e.orbitLastTimestamp,o=2.5*(e.state.orbitCursorOpacity-.5)/1e3,s=n*o,l=e.state.orbitCursorAngle+p.PI_OVER_TWO,u=Math.cos(l)*s,c=Math.sin(l)*s;i=e.props.terria.cesium.scene,a=i.camera;var f=g.clone(a.transform,w);a.lookAtTransform(e.orbitFrame),e.orbitIsLook?(a.look(d.UNIT_Z,-u),a.look(a.right,-c)):(a.rotateLeft(u),a.rotateUp(c)),a.lookAtTransform(f),e.props.terria.cesium.notifyRepaintRequired(),e.orbitLastTimestamp=r},e.orbitMouseMoveFunction=function(e){var r=t.getBoundingClientRect();s=new c((r.right-r.left)/2,(r.bottom-r.top)/2);var i=new c(e.clientX-r.left,e.clientY-r.top),a=c.subtract(i,s,_);l(a,r.width)},e.orbitMouseUpFunction=function(t){e.isOrbiting=!1,document.removeEventListener("mousemove",e.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",e.orbitMouseUpFunction,!1),f(e.orbitTickFunction)&&e.props.terria.clock.onTick.removeEventListener(e.orbitTickFunction),e.orbitMouseMoveFunction=void 0,e.orbitMouseUpFunction=void 0,e.orbitTickFunction=void 0},document.addEventListener("mousemove",e.orbitMouseMoveFunction,!1),document.addEventListener("mouseup",e.orbitMouseUpFunction,!1),e._unsubscribeFromClockTick=e.props.terria.clock.onTick.addEventListener(e.orbitTickFunction),l(r,t.getBoundingClientRect().width)}(this,t,o);else{if(!(s<1))return!0;!function(e,t,r){document.removeEventListener("mousemove",e.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",e.rotateMouseUpFunction,!1),e.rotateMouseMoveFunction=void 0,e.rotateMouseUpFunction=void 0,e.isRotating=!0,e.rotateInitialCursorAngle=Math.atan2(-r.y,r.x);var i=e.props.terria.cesium.scene,a=i.camera,n=x;n.x=i.canvas.clientWidth/2,n.y=i.canvas.clientHeight/2;var o=a.getPickRay(n,E),s=i.globe.pick(o,i,C);f(s)?(e.rotateFrame=y.eastNorthUpToFixedFrame(s,h.WGS84,S),e.rotateIsLook=!1):(e.rotateFrame=y.eastNorthUpToFixedFrame(a.positionWC,h.WGS84,S),e.rotateIsLook=!0);var l=g.clone(a.transform,w);a.lookAtTransform(e.rotateFrame),e.rotateInitialCameraAngle=Math.atan2(a.position.y,a.position.x),e.rotateInitialCameraDistance=d.magnitude(new d(a.position.x,a.position.y,0)),a.lookAtTransform(l),e.rotateMouseMoveFunction=function(r){var i=t.getBoundingClientRect(),n=new c((i.right-i.left)/2,(i.bottom-i.top)/2),o=new c(r.clientX-i.left,r.clientY-i.top),s=c.subtract(o,n,_),u=Math.atan2(-s.y,s.x),d=u-e.rotateInitialCursorAngle,f=p.zeroToTwoPi(e.rotateInitialCameraAngle-d);a=e.props.terria.cesium.scene.camera,l=g.clone(a.transform,w),a.lookAtTransform(e.rotateFrame);var h=Math.atan2(a.position.y,a.position.x);a.rotateRight(f-h),a.lookAtTransform(l),e.props.terria.cesium.notifyRepaintRequired()},e.rotateMouseUpFunction=function(t){e.isRotating=!1,document.removeEventListener("mousemove",e.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",e.rotateMouseUpFunction,!1),e.rotateMouseMoveFunction=void 0,e.rotateMouseUpFunction=void 0},document.addEventListener("mousemove",e.rotateMouseMoveFunction,!1),document.addEventListener("mouseup",e.rotateMouseUpFunction,!1)}(this,t,o)}},handleDoubleClick:function(e){var t=this.props.terria.cesium.scene,r=t.camera,i=x;i.x=t.canvas.clientWidth/2,i.y=t.canvas.clientHeight/2;var a=r.getPickRay(i,E),n=t.globe.pick(a,t,C);if(f(n)){var o=y.eastNorthUpToFixedFrame(n,h.WGS84),s=d.subtract(n,r.position,new d),l=u.createTween(t,{destination:g.multiplyByPoint(o,new d(0,0,d.magnitude(s)),new d),direction:g.multiplyByPointAsVector(o,new d(0,0,-1),new d),up:g.multiplyByPointAsVector(o,new d(0,1,0),new d),duration:1.5});t.tweens.add(l)}else this.props.terria.currentViewer.zoomTo(this.props.terria.homeView,1.5)},resetRotater:function(){this.setState({orbitCursorOpacity:0,orbitCursorAngle:0})},render:function(){var e={transform:"rotate(-"+this.state.orbitCursorAngle+"rad)",WebkitTransform:"rotate(-"+this.state.orbitCursorAngle+"rad)",opacity:this.state.orbitCursorOpacity},t={transform:"rotate(-"+this.state.heading+"rad)",WebkitTransform:"rotate(-"+this.state.heading+"rad)",opacity:""};return s.createElement("div",{className:n.default.compass,title:"Drag outer ring: rotate view.\nDrag inner gyroscope: free orbit.\nDouble-click: reset view.\nTIP: You can also free orbit by holding the CTRL key and dragging the map.",onMouseDown:this.handleMouseDown,onDoubleClick:this.handleDoubleClick,onMouseUp:this.resetRotater},s.createElement("div",{className:n.default.outerRing,style:t},s.createElement(a.default,{glyph:a.default.GLYPHS.compassOuter})),s.createElement("div",{className:n.default.innerRing,title:"Click and drag to rotate the camera"},s.createElement(a.default,{glyph:a.default.GLYPHS.compassInner})),s.createElement("div",{className:n.default.rotationMarker,style:e},s.createElement(a.default,{glyph:a.default.GLYPHS.compassRotationMarker})))}}),_=new c,w=new g,S=new g,C=new d,x=new c,E=new v;function I(e){f(e.props.terria.cesium)?(e._unsubscribeFromPostRender&&(e._unsubscribeFromPostRender(),e._unsubscribeFromPostRender=void 0),e._unsubscribeFromPostRender=e.props.terria.cesium.scene.postRender.addEventListener(function(){e.setState({heading:e.props.terria.cesium.scene.camera.heading})})):(e._unsubscribeFromPostRender&&(e._unsubscribeFromPostRender(),e._unsubscribeFromPostRender=void 0),e.showCompass=!1)}e.exports=b},function(e,t,r){e.exports={compass:"tjs-compass__compass tjs-_base__sm-show",innerRing:"tjs-compass__innerRing",rotationMarker:"tjs-compass__rotationMarker",outerRing:"tjs-compass__outerRing"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=m(r(13)),a=m(r(19)),n=m(r(15)),o=m(r(51)),s=m(r(29)),l=m(r(79)),u=m(r(21)),c=m(r(454)),d=m(r(36)),p=m(r(32)),f=m(r(39)),h=m(r(8));function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,a.default)({displayName:"MyLocation",mixins:[u.default],propTypes:{terria:n.default.object.isRequired},_marker:void 0,UNSAFE_componentWillMount:function(){this._marker=new l.default(this.props.terria)},getInitialState:function(){return{}},getLocation:function(){if(navigator.geolocation){var e={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};if(this.augmentedVirtualityEnabled()){var t=navigator.geolocation.watchPosition(this.zoomToMyLocation,this.handleLocationError,e);this.setState({watchId:t})}else navigator.geolocation.getCurrentPosition(this.zoomToMyLocation,this.handleLocationError,e)}else this.props.terria.error.raiseEvent(new d.default({sender:this,title:"Error getting location",message:"Your browser cannot provide your location."}))},zoomToMyLocation:function(e){var t=e.coords.longitude,r=e.coords.latitude;if(this.augmentedVirtualityEnabled())this.props.terria.augmentedVirtuality.moveTo(p.default.fromDegrees(t,r),27500,!(0,h.default)(this.state.flown)),this.setState({flown:!0});else{var i=s.default.fromDegrees(t-.1,r-.1,t+.1,r+.1);this.props.terria.currentViewer.zoomTo(i)}this._marker.name="My Location",this._marker.data={type:"Feature",geometry:{type:"Point",coordinates:[t,r]},properties:{title:"Location",longitude:t,latitude:r}},this._marker.style={"marker-size":25,"marker-color":"#08ABD5",stroke:"#ffffff","stroke-width":3},this._marker.load(),!0!==this._marker.isEnabled&&(this._marker.isEnabled=!0)},handleLocationError:function(e){var t=e.message;t&&0===t.indexOf("Only secure origins are allowed")&&(t="Your browser can only provide your location when using https. You may be able to use "+new o.default(window.location).protocol("https").toString()+" instead.");this.props.terria.error.raiseEvent(new d.default({sender:this,title:"Error getting location",message:t}))},augmentedVirtualityEnabled:function(){return(0,h.default)(this.props.terria.augmentedVirtuality)&&this.props.terria.augmentedVirtuality.enabled},followMeEnabled:function(){return!!(0,h.default)(this.state.watchId)},disableFollowMe:function(){(0,h.default)(this.state.watchId)&&(navigator.geolocation.clearWatch(this.state.watchId),this.setState({watchId:void 0}),this.setState({flown:void 0}))},handleCick:function(){this.followMeEnabled()?this.disableFollowMe():this.getLocation()},render:function(){var e=c.default.btn;return this.followMeEnabled()&&(e=c.default.btnPrimary),i.default.createElement("div",{className:c.default.toolButton},i.default.createElement("button",{type:"button",className:e,title:"Centre map at your current location",onClick:this.handleCick},i.default.createElement(f.default,{glyph:f.default.GLYPHS.geolocation})))}});t.default=g},function(e,t,r){e.exports={"map-navigation":"tjs-map-navigation__map-navigation",mapNavigation:"tjs-map-navigation__map-navigation","with-time-series-controls":"tjs-map-navigation__with-time-series-controls",withTimeSeriesControls:"tjs-map-navigation__with-time-series-controls",control:"tjs-map-navigation__control",navs:"tjs-map-navigation__navs",controls:"tjs-map-navigation__controls"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(r(19)),a=u(r(15)),n=u(r(13)),o=u(r(39)),s=u(r(21)),l=u(r(1530));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,i.default)({displayName:"ToggleSplitterTool",mixins:[s.default],propTypes:{terria:a.default.object},handleClick:function(){var e=this.props.terria;e.showSplitter=!e.showSplitter},render:function(){return this.props.terria.currentViewer.canShowSplitter?n.default.createElement("div",{className:l.default.toggle_splitter_tool},n.default.createElement("button",{type:"button",className:l.default.btn,title:"Enable side-by-side comparison between two different sets of data",onClick:this.handleClick},n.default.createElement(o.default,{glyph:this.props.terria.showSplitter?o.default.GLYPHS.splitterOn:o.default.GLYPHS.splitterOff}))):null}});t.default=c},function(e,t,r){e.exports={btn:"tjs-toggle_splitter_tool__btn tjs-_buttons__btn","btn-primary":"tjs-toggle_splitter_tool__btn-primary tjs-_buttons__btn",btnPrimary:"tjs-toggle_splitter_tool__btn-primary tjs-_buttons__btn","btn-blink":"tjs-toggle_splitter_tool__btn-blink tjs-_buttons__btn",btnBlink:"tjs-toggle_splitter_tool__btn-blink tjs-_buttons__btn","btn-primary--hover":"tjs-toggle_splitter_tool__btn-primary--hover",btnPrimaryHover:"tjs-toggle_splitter_tool__btn-primary--hover",blinker:"tjs-toggle_splitter_tool__blinker","toggle-splitter-tool":"tjs-toggle_splitter_tool__toggle-splitter-tool",toggleSplitterTool:"tjs-toggle_splitter_tool__toggle-splitter-tool"}},function(e,t,r){"use strict";var i=o(r(19)),a=o(r(39)),n=o(r(1532));function o(e){return e&&e.__esModule?e:{default:e}}var s=r(13),l=r(15),u=r(8),c=r(146),d=r(145),p=r(26),f=r(303),h=r(14),m=r(12),g=(0,i.default)({displayName:"ZoomControl",propTypes:{terria:l.object},flyToPosition:function(e,t,r){var i=e.camera.position,a=t;var n=e.screenSpaceCameraController;n.enableInputs=!1,e.tweens.add({duration:.2,easingFunction:f.Easing.Sinusoidal.InOut,startObject:{time:0},stopObject:{time:1},update:function(t){e.isDestroyed()||(e.camera.position.x=h.lerp(i.x,a.x,t.time),e.camera.position.y=h.lerp(i.y,a.y,t.time),e.camera.position.z=h.lerp(i.z,a.z,t.time))},complete:function(){n.isDestroyed()||(n.enableInputs=!0)},cancel:function(){n.isDestroyed()||(n.enableInputs=!0)}})},getCameraFocus:function(e){var t=new c(e.camera.positionWC,e.camera.directionWC),r=d.rayEllipsoid(t,p.WGS84);return u(r)?c.getPoint(t,r.start):d.grazingAltitudeLocation(t,p.WGS84)},zoomIn:function(){var e=new m;if(this.props.terria.analytics.logEvent("navigation","click","zoomIn"),u(this.props.terria.leaflet)&&this.props.terria.leaflet.map.zoomIn(1),u(this.props.terria.cesium)){var t=this.props.terria.cesium.scene,r=t.camera,i=this.getCameraFocus(t),a=m.subtract(i,r.position,e),n=m.multiplyByScalar(a,2/3,e),o=m.add(r.position,n,e);this.flyToPosition(t,o)}this.props.terria.currentViewer.notifyRepaintRequired()},zoomOut:function(){var e=new m;if(this.props.terria.analytics.logEvent("navigation","click","zoomOut"),u(this.props.terria.leaflet)&&this.props.terria.leaflet.map.zoomOut(1),u(this.props.terria.cesium)){var t=this.props.terria.cesium.scene,r=t.camera,i=this.getCameraFocus(t),a=m.subtract(i,r.position,e),n=m.multiplyByScalar(a,-2,e),o=m.add(r.position,n,e);this.flyToPosition(t,o)}this.props.terria.currentViewer.notifyRepaintRequired()},zoomReset:function(){this.props.terria.analytics.logEvent("navigation","click","reset"),this.props.terria.currentViewer.zoomTo(this.props.terria.homeView,1.5)},render:function(){return s.createElement("div",{className:n.default.zoomControl},s.createElement("ul",{className:n.default.list},s.createElement("li",null,s.createElement("button",{type:"button",onClick:this.zoomIn,className:n.default.increase,title:"Zoom in"},s.createElement(a.default,{glyph:a.default.GLYPHS.increase}))),s.createElement("li",null,s.createElement("button",{type:"button",onClick:this.zoomReset,className:n.default.refresh,title:"Reset zoom"},s.createElement(a.default,{glyph:a.default.GLYPHS.refresh}))),s.createElement("li",null,s.createElement("button",{type:"button",onClick:this.zoomOut,className:n.default.decrease,title:"Zoom out"},s.createElement(a.default,{glyph:a.default.GLYPHS.decrease})))))}});e.exports=g},function(e,t,r){e.exports={zoomControl:"tjs-zoom_control__zoomControl",list:"tjs-zoom_control__list tjs-_base__list-reset",increase:"tjs-zoom_control__increase tjs-_buttons__btn",decrease:"tjs-zoom_control__decrease tjs-_buttons__btn",refresh:"tjs-zoom_control__refresh tjs-_buttons__btn"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=m(r(13)),a=m(r(351)),n=m(r(19)),o=m(r(15)),s=m(r(35)),l=m(r(715)),u=m(r(347)),c=m(r(1592)),d=m(r(39)),p=m(r(21)),f=m(r(1594)),h=m(r(1596));function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,n.default)({displayName:"MenuBar",mixins:[p.default],propTypes:{terria:o.default.object,viewState:o.default.object.isRequired,allBaseMaps:o.default.array,animationDuration:o.default.number,menuItems:o.default.arrayOf(o.default.element)},getDefaultProps:function(){return{menuItems:[]}},handleClick:function(){this.props.viewState.topElement="MenuBar"},onStoryButtonClick:function(){this.props.viewState.storyBuilderShown=!this.props.viewState.storyBuilderShown,this.props.terria.currentViewer.notifyRepaintRequired(),setTimeout(function(){(0,a.default)()},this.props.animationDuration||1),this.props.viewState.toggleFeaturePrompt("story",!1,!0)},dismissAction:function(){this.props.viewState.toggleFeaturePrompt("story",!1,!0)},render:function(){var e=this.props.terria.configParameters.storyEnabled,t=this.props.terria.configParameters.shareEnabled,r="1"===this.props.terria.getUserProperty("tools"),a=this.props.terria.stories.length>0?i.default.createElement("div",null,"You can view and create stories at any time by clicking here."):i.default.createElement("div",null,i.default.createElement("small",null,"INTRODUCING"),i.default.createElement("h3",null,"Data Stories"),i.default.createElement("div",null,"Create and share interactive stories directly from your map.")),n=e&&this.props.terria.stories.length>0?1e3:2e3;return i.default.createElement("div",{className:(0,s.default)(h.default.menuArea,"MenuBar"===this.props.viewState.topElement?"top-element":""),onClick:this.handleClick},i.default.createElement("ul",{className:h.default.menu},e?i.default.createElement("li",{className:h.default.menuItem},i.default.createElement("button",{className:h.default.storyBtn,type:"button",onClick:this.onStoryButtonClick},i.default.createElement(d.default,{glyph:d.default.GLYPHS.story}),i.default.createElement("span",null,"Story")),e&&this.props.viewState.featurePrompts.indexOf("story")>=0&&i.default.createElement(f.default,{content:a,displayDelay:n,dismissText:"Got it, thanks!",dismissAction:this.dismissAction})):null,i.default.createElement("li",{className:h.default.menuItem},i.default.createElement(l.default,{terria:this.props.terria,allBaseMaps:this.props.allBaseMaps,viewState:this.props.viewState})),t?i.default.createElement("li",{className:h.default.menuItem},i.default.createElement(u.default,{terria:this.props.terria,viewState:this.props.viewState})):null,r&&i.default.createElement("li",{className:h.default.menuItem},i.default.createElement(c.default,{terria:this.props.terria,viewState:this.props.viewState})),this.props.viewState.useSmallScreenInterface?null:this.props.menuItems.map(function(e,t){return i.default.createElement("li",{className:h.default.menuItem,key:t},e)},this)))}});t.default=g},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports={"dropdown-inner":"tjs-setting-panel__dropdown-inner",dropdownInner:"tjs-setting-panel__dropdown-inner","viewer-selector":"tjs-setting-panel__viewer-selector tjs-_base__clearfix tjs-_base__list-reset",viewerSelector:"tjs-setting-panel__viewer-selector tjs-_base__clearfix tjs-_base__list-reset","base-map-selector":"tjs-setting-panel__base-map-selector tjs-_base__clearfix tjs-_base__list-reset",baseMapSelector:"tjs-setting-panel__base-map-selector tjs-_base__clearfix tjs-_base__list-reset","list-item":"tjs-setting-panel__list-item tjs-_base__col tjs-_base__col-4",listItem:"tjs-setting-panel__list-item tjs-_base__col tjs-_base__col-4","btn--viewer":"tjs-setting-panel__btn--viewer tjs-_buttons__btn tjs-_buttons__btn-grey",btnViewer:"tjs-setting-panel__btn--viewer tjs-_buttons__btn tjs-_buttons__btn-grey","is-active":"tjs-setting-panel__is-active",isActive:"tjs-setting-panel__is-active","btn--base-map":"tjs-setting-panel__btn--base-map",btnBaseMap:"tjs-setting-panel__btn--base-map","native-resolution-wrapper":"tjs-setting-panel__native-resolution-wrapper",nativeResolutionWrapper:"tjs-setting-panel__native-resolution-wrapper","native-resolution-header":"tjs-setting-panel__native-resolution-header",nativeResolutionHeader:"tjs-setting-panel__native-resolution-header","btn--nativeResolution":"tjs-setting-panel__btn--nativeResolution tjs-_buttons__btn",btnNativeResolution:"tjs-setting-panel__btn--nativeResolution tjs-_buttons__btn","quality-wrapper":"tjs-setting-panel__quality-wrapper",qualityWrapper:"tjs-setting-panel__quality-wrapper","quality-label":"tjs-setting-panel__quality-label",qualityLabel:"tjs-setting-panel__quality-label","opacity-slider":"tjs-setting-panel__opacity-slider",opacitySlider:"tjs-setting-panel__opacity-slider"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(r(13)),a=d(r(19)),n=d(r(15)),o=d(r(21)),s=d(r(345)),l=d(r(1593)),u=d(r(730)),c=d(r(217));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,a.default)({displayName:"ToolsPanel",mixins:[o.default],propTypes:{terria:n.default.object,viewState:n.default.object.isRequired},getInitialState:function(){return{isOpen:!1,resultsMessage:""}},onOpenChanged:function(e){this.setState({isOpen:e})},updateResults:function(e){this.setState({resultsMessage:e})},render:function(){var e={btn:u.default.btnShare,outer:u.default.ToolsPanel,inner:u.default.dropdownInner,icon:"settings"};return i.default.createElement(s.default,{theme:e,btnText:"Tool",viewState:this.props.viewState,btnTitle:"Advanced toolbox",onOpenChanged:this.onOpenChanged,isOpen:this.state.isOpen,smallScreen:this.props.viewState.useSmallScreenInterface},this.state.isOpen?i.default.createElement("div",{className:c.default.section},i.default.createElement("div",{className:u.default.this},i.default.createElement(l.default,{terria:this.props.terria,viewState:this.props.viewState,updateResults:this.updateResults}))):null,i.default.createElement("div",{className:u.default.results},i.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.resultsMessage}})))}});t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(r(13)),a=d(r(19)),n=d(r(15)),o=d(r(21)),s=d(r(8)),l=d(r(18)),u=d(r(132)),c=d(r(730));function d(e){return e&&e.__esModule?e:{default:e}}var p=1,f=(0,a.default)({displayName:"CountDatasets",mixins:[o.default],propTypes:{terria:n.default.object,viewState:n.default.object.isRequired},getInitialState:function(){return{btnText:"Start"}},countDatasets:function(){var e={name:void 0,groups:0,items:0,messages:[],subTotals:[],showResults:!1};function t(e,t,i){t.name=e.name;for(var n=[],o=0;o<e.items.length;++o){var u=e.items[o];if(u.countValue!==p)if(u.countValue=p,void 0!==u.items){var c={name:void 0,groups:0,items:0,messages:[],subTotals:[]};i.push(u.name);var d=u.load();(0,s.default)(d)&&u.isLoading?n.push(d.then(r.bind(void 0,u,t,c,i.slice())).otherwise(a.bind(void 0,u,t,i.slice()))):n.push(r(u,t,c,i)),i.pop()}else++t.items}return l.default.all(n)}function r(e,r,i,a){return t(e,i,a).then(function(){r.groups+=i.groups+1,r.items+=i.items,r.messages.push.apply(r.messages,i.messages),r.subTotals.push(i)})}function a(e,t,r){t.messages.push(r.join(" -> ")+" failed to load.")}this.setState({btnText:i.default.createElement(u.default,{message:"Counting, please wait..."})}),++p;var n=this.props.terria.catalog.group,o=this;t(n,e,[]).then(function(){var t,r="<div>The catalog contains "+e.items+" items in "+e.groups+" groups.</div>";o.props.updateResults(r);var i=e.subTotals;for(t=0;t<i.length;++t)r+="<div>"+i[t].name+": "+i[t].items+" items / "+i[t].groups+" groups</div>";r+="<div>&nbsp;</div>";var a=e.messages;for(t=0;t<a.length;++t)r+="<div>"+a[t]+"</div>";o.setState({btnText:"Recount"}),o.props.updateResults(r)})},render:function(){return i.default.createElement("form",null,"Count Datasets",i.default.createElement("button",{className:c.default.submit,onClick:this.countDatasets,type:"button",value:"Count datasets"},this.state.btnText))}});t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(r(13)),a=s(r(15)),n=s(r(1595)),o=s(r(35));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=c(this,d(t).call(this,e))).state={isShown:!1},r}var r,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i["default"].PureComponent),r=t,(a=[{key:"fadeIn",value:function(){var e=this;this.fadeInTimer=setTimeout(function(){e.setState({isShown:!0})},this.props.displayDelay)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.fadeInTimer)}},{key:"componentDidMount",value:function(){this.fadeIn()}},{key:"render",value:function(){return i.default.createElement("div",{className:(0,o.default)(n.default.prompt,(e={},t=n.default.isVisible,r=this.state.isShown,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},this.props.content,i.default.createElement("button",{className:n.default.btn,title:this.props.dismissText,onClick:this.props.dismissAction},this.props.dismissText));var e,t,r}}])&&u(r.prototype,a),s&&u(r,s),t}();t.default=f,f.propTypes={content:a.default.object,dismissText:a.default.string,dismissAction:a.default.func,displayDelay:a.default.number}},function(e,t,r){e.exports={prompt:"tjs-prompt__prompt",isVisible:"tjs-prompt__isVisible",btn:"tjs-prompt__btn tjs-_buttons__btn"}},function(e,t,r){e.exports={"menu-area":"tjs-menu-bar__menu-area",menuArea:"tjs-menu-bar__menu-area",menu:"tjs-menu-bar__menu tjs-_base__list-reset tjs-_base__clearfix tjs-_base__sm-show","menu-item":"tjs-menu-bar__menu-item",menuItem:"tjs-menu-bar__menu-item",storyBtn:"tjs-menu-bar__storyBtn tjs-_buttons__btn tjs-_buttons__btn--map"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(r(13)),a=l(r(19)),n=l(r(15)),o=l(r(21)),s=l(r(1598));function l(e){return e&&e.__esModule?e:{default:e}}var u=(0,a.default)({displayName:"ExperimentalFeatures",mixins:[o.default],propTypes:{terria:n.default.object.isRequired,viewState:n.default.object.isRequired,experimentalItems:n.default.arrayOf(n.default.element)},getDefaultProps:function(){return{experimentalItems:[]}},render:function(){return i.default.createElement("div",{className:s.default.experimentalFeatures},this.props.experimentalItems.map(function(e,t){return i.default.createElement("div",{className:s.default.control,key:t},e)},this))}});t.default=u},function(e,t,r){e.exports={"experimental-features":"tjs-experimental-features__experimental-features",experimentalFeatures:"tjs-experimental-features__experimental-features",control:"tjs-experimental-features__control"}},function(e,t,r){"use strict";var i=m(r(13)),a=m(r(19)),n=m(r(15)),o=m(r(472)),s=m(r(21)),l=m(r(1600)),u=m(r(677)),c=m(r(1642)),d=m(r(39)),p=m(r(1643)),f=m(r(35)),h=r(245);function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,a.default)({displayName:"MobileHeader",mixins:[s.default],propTypes:{terria:n.default.object,viewState:n.default.object.isRequired,allBaseMaps:n.default.array,version:n.default.string,menuItems:n.default.array},getInitialState:function(){return{}},showSearch:function(){var e=this.props.viewState,t=e.mobileView,r=e.mobileViewOptions,i=e.searchState;t===r.data||t===r.preview?i.showMobileCatalogSearch=!0:(i.showMobileLocationSearch=!0,this.showLocationSearchResults())},closeLocationSearch:function(){this.props.viewState.searchState.showMobileLocationSearch=!1,this.props.viewState.explorerPanelIsVisible=!1,this.props.viewState.switchMobileView(null)},closeCatalogSearch:function(){this.props.viewState.searchState.showMobileCatalogSearch=!1,this.props.viewState.searchState.catalogSearchText=""},onMobileDataCatalogClicked:function(){this.toggleView(this.props.viewState.mobileViewOptions.data)},onMobileNowViewingClicked:function(){this.toggleView(this.props.viewState.mobileViewOptions.nowViewing)},changeLocationSearchText:function(e){this.props.viewState.searchState.locationSearchText=e,0===e.length&&(0,h.removeMarker)(this.props.terria),this.showLocationSearchResults()},showLocationSearchResults:function(){var e=this.props.viewState.searchState.locationSearchText;e&&e.length>0?(this.props.viewState.explorerPanelIsVisible=!0,this.props.viewState.mobileView=this.props.viewState.mobileViewOptions.locationSearchResults):(this.props.viewState.explorerPanelIsVisible=!1,this.props.viewState.mobileView=null)},changeCatalogSearchText:function(e){this.props.viewState.searchState.catalogSearchText=e},searchLocations:function(){this.props.viewState.searchState.searchLocations()},searchCatalog:function(){this.props.viewState.searchState.searchCatalog()},toggleView:function(e){this.props.viewState.mobileView!==e?(this.props.viewState.explorerPanelIsVisible=!0,this.props.viewState.switchMobileView(e)):(this.props.viewState.explorerPanelIsVisible=!1,this.props.viewState.switchMobileView(null))},onClickFeedback:function(e){e.preventDefault(),this.props.viewState.feedbackFormIsVisible=!0,this.setState({menuIsOpen:!1})},render:function(){var e,t,r,a=this,n=this.props.viewState.searchState,s=this.props.terria.nowViewing.items.length;return i.default.createElement("div",{className:c.default.ui},i.default.createElement("div",{className:c.default.mobileHeader},n.showMobileLocationSearch||n.showMobileCatalogSearch?i.default.createElement("div",{className:c.default.formSearchData},n.showMobileLocationSearch?i.default.createElement(o.default,{searchText:n.locationSearchText,onSearchTextChanged:this.changeLocationSearchText,onDoSearch:this.searchLocations,placeholder:"Search for locations",alwaysShowClear:!0,onClear:this.closeLocationSearch,autoFocus:!0}):n.showMobileCatalogSearch?i.default.createElement(o.default,{searchText:n.catalogSearchText,onSearchTextChanged:this.changeCatalogSearchText,onDoSearch:this.searchCatalog,placeholder:"Search the catalogue",onClear:this.closeCatalogSearch,autoFocus:!0}):null):[i.default.createElement("div",{className:c.default.groupLeft,key:"0"},i.default.createElement("button",{type:"button",onClick:function(){return a.props.viewState.mobileMenuVisible=!0},className:c.default.btnMenu,title:"toggle navigation"},i.default.createElement(d.default,{glyph:d.default.GLYPHS.menu})),i.default.createElement(u.default,{terria:this.props.terria,version:this.props.version})),i.default.createElement("div",{className:c.default.groupRight,key:"1"},i.default.createElement("button",{type:"button",className:c.default.btnAdd,onClick:this.onMobileDataCatalogClicked},"Data",i.default.createElement(d.default,{glyph:d.default.GLYPHS.increase})),s>0?i.default.createElement("button",{type:"button",className:c.default.btnNowViewing,onClick:this.onMobileNowViewingClicked},i.default.createElement(d.default,{glyph:d.default.GLYPHS.eye}),i.default.createElement("span",{className:(0,f.default)(c.default.nowViewingCount,(e={},t=c.default.doubleDigit,r=s>9,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},s)):null,i.default.createElement("button",{className:c.default.btnSearch,type:"button",onClick:this.showSearch},i.default.createElement(d.default,{glyph:d.default.GLYPHS.search})))]),i.default.createElement(p.default,{menuItems:this.props.menuItems,viewState:this.props.viewState,allBaseMaps:this.props.allBaseMaps,terria:this.props.terria,showFeedback:!!this.props.terria.configParameters.feedbackUrl}),i.default.createElement(l.default,{terria:this.props.terria,viewState:this.props.viewState}))}});e.exports=g},function(e,t,r){"use strict";var i=h(r(13)),a=h(r(19)),n=h(r(15)),o=h(r(35)),s=h(r(464)),l=h(r(465)),u=h(r(1601)),c=h(r(732)),d=h(r(21)),p=h(r(39)),f=h(r(1641));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=(0,a.default)({displayName:"MobileModalWindow",mixins:[d.default],propTypes:{terria:n.default.object,viewState:n.default.object.isRequired},renderModalContent:function(){var e=this.props.viewState,t=e.searchState;if(e.mobileView!==e.mobileViewOptions.data&&e.mobileView!==e.mobileViewOptions.preview&&t.showMobileLocationSearch&&t.locationSearchText.length>0)return i.default.createElement(u.default,{terria:this.props.terria,viewState:this.props.viewState});switch(e.mobileView){case e.mobileViewOptions.data:return i.default.createElement(s.default,{terria:this.props.terria,viewState:this.props.viewState,items:this.props.terria.catalog.group.items});case e.mobileViewOptions.preview:return i.default.createElement(l.default,{terria:this.props.terria,viewState:this.props.viewState,previewed:this.props.viewState.previewedItem});case e.mobileViewOptions.nowViewing:return i.default.createElement(c.default,{viewState:this.props.viewState,terria:this.props.terria});default:return null}},onClearMobileUI:function(){this.props.viewState.switchMobileView(null),this.props.viewState.explorerPanelIsVisible=!1,this.props.viewState.searchState.showMobileLocationSearch=!1,this.props.viewState.searchState.showMobileCatalogSearch=!1,this.props.viewState.searchState.catalogSearchText=""},UNSAFE_componentWillReceiveProps:function(){0===this.props.terria.nowViewing.items.length&&this.props.viewState.mobileView===this.props.viewState.mobileViewOptions.nowViewing&&(this.props.viewState.switchMobileView(null),this.props.viewState.explorerPanelIsVisible=!1)},goBack:function(){this.props.viewState.mobileView=this.props.viewState.mobileViewOptions.data},render:function(){var e=(0,o.default)(f.default.mobileModal,m({},f.default.isOpen,this.props.viewState.explorerPanelIsVisible&&this.props.viewState.mobileView)),t=this.props.viewState.mobileView;return i.default.createElement("div",{className:e},i.default.createElement("div",{className:f.default.modalBg},i.default.createElement("div",{className:f.default.modalTop},this.props.viewState.explorerPanelIsVisible&&t?i.default.createElement("button",{type:"button",className:f.default.doneButton,onClick:this.onClearMobileUI},"Done"):null,i.default.createElement("button",{type:"button",disabled:t!==this.props.viewState.mobileViewOptions.preview,className:(0,o.default)(f.default.backButton,m({},f.default.backButtonInactive,t!==this.props.viewState.mobileViewOptions.preview)),onClick:this.goBack},i.default.createElement(p.default,{className:f.default.iconBack,glyph:p.default.GLYPHS.left}))),this.renderModalContent()))}});e.exports=g},function(e,t,r){"use strict";var i=d(r(13)),a=d(r(19)),n=d(r(15)),o=r(245),s=d(r(21)),l=d(r(731)),u=d(r(489)),c=d(r(1604));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,a.default)({displayName:"MobileSearch",mixins:[s.default],propTypes:{viewState:n.default.object,terria:n.default.object},onLocationClick:function(e){e.clickAction(),(0,o.addMarker)(this.props.terria,e),this.props.viewState.switchMobileView(null),this.props.viewState.searchState.showMobileLocationSearch=!1},searchInDataCatalog:function(){var e=this.props.viewState.mobileViewOptions.data;this.props.viewState.explorerPanelIsVisible=!0,this.props.viewState.switchMobileView(e),this.props.viewState.searchInCatalog(this.props.viewState.searchState.locationSearchText)},render:function(){return i.default.createElement("div",{className:c.default.mobileSearch},i.default.createElement("div",null,this.renderSearchInCatalogLink("light")),i.default.createElement("div",{className:c.default.location},this.renderLocationResult("light")))},renderSearchInCatalogLink:function(e){return this.props.viewState.searchState.locationSearchText.length>0?i.default.createElement("div",{className:c.default.providerResult},i.default.createElement("ul",{className:c.default.btnList},i.default.createElement(u.default,{clickAction:this.searchInDataCatalog,icon:null,name:'Search for "'.concat(this.props.viewState.searchState.locationSearchText,'" in the Data Catalogue'),theme:e}))):null},renderLocationResult:function(e){var t=this,r=this.props.viewState.searchState;return r.locationSearchProviders.filter(function(e){return e.isSearching||e.searchResults&&e.searchResults.length}).map(function(a){return i.default.createElement(l.default,{key:a.name,terria:t.props.terria,viewState:t.props.viewState,search:a,onLocationClick:t.onLocationClick,isWaitingForSearchToStart:r.isWaitingForSearchToStart,theme:e})})}});e.exports=p},function(e,t,r){e.exports={"search-result":"tjs-search-result__search-result",searchResult:"tjs-search-result__search-result",light:"tjs-search-result__light",btn:"tjs-search-result__btn tjs-_buttons__btn",dark:"tjs-search-result__dark",icon:"tjs-search-result__icon",resultName:"tjs-search-result__resultName","arrow-icon":"tjs-search-result__arrow-icon",arrowIcon:"tjs-search-result__arrow-icon",btnLocationName:"tjs-search-result__btnLocationName"}},function(e,t,r){e.exports={heading:"tjs-location-search-result__heading tjs-_buttons__btn",footer:"tjs-location-search-result__footer tjs-_buttons__btn","provider-result":"tjs-location-search-result__provider-result",providerResult:"tjs-location-search-result__provider-result",items:"tjs-location-search-result__items tjs-_base__clearfix tjs-_base__list-reset",light:"tjs-location-search-result__light",dark:"tjs-location-search-result__dark",isOpen:"tjs-location-search-result__isOpen"}},function(e,t,r){e.exports={results:"tjs-mobile-search__results tjs-_base__list-reset",label:"tjs-mobile-search__label",location:"tjs-mobile-search__location","provider-result":"tjs-mobile-search__provider-result",providerResult:"tjs-mobile-search__provider-result",items:"tjs-mobile-search__items",btnList:"tjs-mobile-search__btnList tjs-_base__clearfix tjs-_base__list-reset",data:"tjs-mobile-search__data"}},function(e,t,r){"use strict";var i=I(r(35)),a=I(r(13)),n=I(r(19)),o=I(r(15)),s=r(357),l=I(r(8)),u=I(r(1606)),c=I(r(1610)),d=I(r(1612)),p=I(r(1616)),f=I(r(1618)),h=I(r(340)),m=I(r(1620)),g=I(r(702)),v=I(r(21)),y=I(r(1622)),b=I(r(1624)),_=I(r(1626)),w=I(r(1628)),S=I(r(1630)),C=I(r(1632)),x=I(r(1637)),E=I(r(39));function I(e){return e&&e.__esModule?e:{default:e}}var k=(0,n.default)({displayName:"WorkbenchItem",mixins:[v.default],propTypes:{style:o.default.object,className:o.default.string,onMouseDown:o.default.func.isRequired,onTouchStart:o.default.func.isRequired,item:o.default.object.isRequired,viewState:o.default.object.isRequired,setWrapperState:o.default.func},toggleDisplay:function(){this.props.item.isLegendVisible=!this.props.item.isLegendVisible},openModal:function(){this.props.setWrapperState({modalWindowIsOpen:!0,activeTab:1,previewed:this.props.item})},toggleVisibility:function(){this.props.item.isShown=!this.props.item.isShown},render:function(){var e,t,r,n=this.props.item;return a.default.createElement("li",{style:this.props.style,className:(0,i.default)(this.props.className,x.default.workbenchItem,(e={},t=x.default.isOpen,r=n.isLegendVisible,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},a.default.createElement("ul",{className:x.default.header},n.supportsToggleShown?a.default.createElement("li",{className:x.default.visibilityColumn},a.default.createElement("button",{type:"button",onClick:this.toggleVisibility,title:"Data show/hide",className:x.default.btnVisibility},n.isShown?a.default.createElement(E.default,{glyph:E.default.GLYPHS.checkboxOn}):a.default.createElement(E.default,{glyph:E.default.GLYPHS.checkboxOff}))):null,a.default.createElement("li",{className:x.default.nameColumn},a.default.createElement("div",{onMouseDown:this.props.onMouseDown,onTouchStart:this.props.onTouchStart,className:x.default.draggable,title:(0,h.default)(n).map(function(e){return e.nameInCatalog}).concat(n.nameInCatalog).join(" → ")},n.isMappable?null:a.default.createElement("span",{className:x.default.iconLineChart},a.default.createElement(E.default,{glyph:E.default.GLYPHS.lineChart})),n.name)),a.default.createElement("li",{className:x.default.toggleColumn},a.default.createElement("button",{type:"button",className:x.default.btnToggle,onClick:this.toggleDisplay},n.isLegendVisible?a.default.createElement(E.default,{glyph:E.default.GLYPHS.opened}):a.default.createElement(E.default,{glyph:E.default.GLYPHS.closed}))),a.default.createElement("li",{className:x.default.headerClearfix})),n.isLegendVisible?a.default.createElement("div",{className:x.default.inner},a.default.createElement(S.default,{item:n,viewState:this.props.viewState}),a.default.createElement(y.default,{item:n}),a.default.createElement(m.default,{item:n}),a.default.createElement(C.default,{item:n}),(0,l.default)(n.concepts)&&n.concepts.length>0&&n.displayChoicesBeforeLegend?a.default.createElement(u.default,{item:n}):null,a.default.createElement(p.default,{item:n}),a.default.createElement(c.default,{item:n}),a.default.createElement(d.default,{item:n}),a.default.createElement(w.default,{item:n}),a.default.createElement(b.default,{item:n,minValue:n.colorScaleMinimum,maxValue:n.colorScaleMaximum}),a.default.createElement(f.default,{item:n}),a.default.createElement(g.default,{item:n}),(0,l.default)(n.concepts)&&n.concepts.length>0&&!n.displayChoicesBeforeLegend?a.default.createElement(u.default,{item:n}):null,n.shortReport||n.shortReportSections&&n.shortReportSections.length?a.default.createElement(_.default,{item:n}):null):null)}});e.exports=(0,s.sortable)(k)},function(e,t,r){"use strict";var i=d(r(1607)),a=d(r(490)),n=d(r(21)),o=d(r(660)),s=d(r(13)),l=d(r(19)),u=d(r(15)),c=d(r(733));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,l.default)({displayName:"ConceptViewer",mixins:[n.default],propTypes:{item:u.default.object.isRequired},render:function(){var e=this.props.item.concepts.filter(function(e){return e.isVisible&&!o.default.prototype.isPrototypeOf(e)});return s.default.createElement("div",{className:c.default.root},e.length>0?s.default.createElement("div",{className:c.default.section},e.map(function(e,t){return s.default.createElement("div",{className:c.default.inner,key:t},s.default.createElement("ul",{className:c.default.childrenList},s.default.createElement(a.default,{concept:e,isLoading:this.props.item.isLoading})))},this)):null,this.props.item.concepts.filter(function(e){return e.isVisible&&o.default.prototype.isPrototypeOf(e)}).map(function(e,t){return s.default.createElement("div",{className:c.default.section,key:t},s.default.createElement("ul",{className:c.default.childrenList},s.default.createElement(i.default,{concept:e,isLoading:this.props.item.isLoading})))},this))}});e.exports=p},function(e,t,r){"use strict";var i=p(r(594)),a=p(r(1608)),n=p(r(1609)),o=p(r(39)),s=p(r(21)),l=p(r(13)),u=p(r(19)),c=p(r(15)),d=p(r(491));function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,u.default)({displayName:"SummaryConcept",mixins:[s.default],propTypes:{concept:c.default.object.isRequired,isLoading:c.default.bool},render:function(){var e,t,r=this.props.concept,o=r.getNodes(function(e){return!e.items||0===e.items.length}).filter(function(e){return e.isActive}),s=(e=function(e){return e.id},t={},o.forEach(function(r){var i=e(r.parent);t[i]||(t[i]={parent:r.parent,children:[]}),t[i].children.push(r)}),Object.keys(t).map(function(e){return t[e]})),u=function(e){var t=function e(t){if(t.isOpen)return[t];if(!t.items)return[];return t.items.map(function(t){return e(t)})}(e);return(0,i.default)(t).filter(h)}(r),c=this.props.isLoading;return l.default.createElement("div",{className:d.default.root},l.default.createElement("div",{className:d.default.title},r.name,":"),s.map(function(e,t){return l.default.createElement(a.default,{key:t,rootConcept:r,activeLeafNodesWithParent:e,isLoading:c})},this),0===s.length&&0===u.length?l.default.createElement("div",{className:d.default.noConditions},"None"):null,u.length>0&&!c?l.default.createElement(n.default,{rootConcept:r,openInactiveConcept:u[0]}):null,r.allowMultiple&&0===u.length?l.default.createElement(m,{rootConcept:r,numberOfExisting:s.length}):null)}});function h(e){return!e.items||e.items.every(function(e){return!e.isActive})}var m=(0,u.default)({displayName:"AddButton",mixins:[s.default],propTypes:{rootConcept:c.default.object.isRequired,numberOfExisting:c.default.number},addNew:function(){this.props.rootConcept.closeDescendants(),this.props.rootConcept.isOpen=!0},render:function(){var e=this.props.numberOfExisting>0?"Add new condition":"Add a condition";return l.default.createElement("div",{className:d.default.section},l.default.createElement("button",{onClick:this.addNew,className:d.default.btnAddNew},l.default.createElement(o.default,{glyph:o.default.GLYPHS.add}),l.default.createElement("span",{className:d.default.text},e)))}});e.exports=f},function(e,t,r){"use strict";var i=d(r(35)),a=d(r(490)),n=d(r(39)),o=d(r(21)),s=d(r(13)),l=d(r(19)),u=d(r(15)),c=d(r(491));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=(0,l.default)({displayName:"ActiveConcept",mixins:[o.default],propTypes:{activeLeafNodesWithParent:u.default.object.isRequired,rootConcept:u.default.object.isRequired,isLoading:u.default.bool},open:function(){this.props.rootConcept.closeDescendants(),this.props.activeLeafNodesWithParent.parent.isOpen=!0},close:function(e){e.stopPropagation(),this.props.activeLeafNodesWithParent.parent.isOpen=!1},remove:function(e){e.stopPropagation(),this.props.activeLeafNodesWithParent.parent.toggleActiveItem(null)},render:function(){var e,t=this.props.activeLeafNodesWithParent;return s.default.createElement("div",{className:c.default.section},s.default.createElement("div",{className:(0,i.default)((e={},p(e,c.default.btnOpen,!t.parent.isOpen),p(e,c.default.isLoading,this.props.isLoading),e)),onClick:this.open},s.default.createElement("div",{className:c.default.controls},t.parent.isOpen?null:[s.default.createElement("button",{className:c.default.btnEdit,title:"Edit condition",key:"0"},s.default.createElement(n.default,{glyph:n.default.GLYPHS.settings})),this.props.rootConcept.allowMultiple?s.default.createElement("button",{className:c.default.btnRemove,onClick:this.remove,title:"Remove condition",key:"1"},s.default.createElement(n.default,{glyph:n.default.GLYPHS.close})):null],t.parent.isOpen?s.default.createElement("button",{className:c.default.btnClose,onClick:this.close},"Close"):null),s.default.createElement("div",{className:c.default.heading},t.parent.name),t.parent.isOpen?null:t.children.map(function(e,t){return s.default.createElement("div",{className:c.default.condition,key:t},e.name)},this),t.parent.isOpen?s.default.createElement("ul",{className:c.default.childrenList},s.default.createElement(a.default,{hideName:!0,concept:t.parent,isLoading:this.props.isLoading})):null))}});e.exports=f},function(e,t,r){"use strict";var i=d(r(35)),a=d(r(490)),n=d(r(39)),o=d(r(21)),s=d(r(13)),l=d(r(19)),u=d(r(15)),c=d(r(491));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,l.default)({displayName:"OpenInactiveConcept",mixins:[o.default],propTypes:{rootConcept:u.default.object.isRequired,openInactiveConcept:u.default.object.isRequired},cancel:function(){this.props.openInactiveConcept.isOpen=!1},back:function(){this.props.openInactiveConcept.isOpen=!1,this.props.openInactiveConcept.parent.isOpen=!0},render:function(){var e,t,r,o=this.props.rootConcept.allowMultiple;return s.default.createElement("div",{className:c.default.section},s.default.createElement("div",{className:c.default.controls},o?s.default.createElement("button",{className:c.default.btnClose,onClick:this.cancel},"Cancel"):null),s.default.createElement("div",{className:c.default.heading},this.props.rootConcept!==this.props.openInactiveConcept?[o?s.default.createElement("button",{className:c.default.btnBack,onClick:this.back,key:"0"},s.default.createElement(n.default,{glyph:n.default.GLYPHS.left})):null,s.default.createElement("div",{className:(0,i.default)((e={},t=c.default.indented,r=o,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),key:"1"},this.props.openInactiveConcept.name)]:null,this.props.rootConcept===this.props.openInactiveConcept?"New condition":null),s.default.createElement("ul",{className:c.default.childrenList},this.props.openInactiveConcept.items.map(function(e,t){return[e.items&&e.items.length>0?s.default.createElement(f,{concept:e,key:t}):null,e.items&&0!==e.items.length?null:s.default.createElement("li",{className:c.default.items,key:"1"},s.default.createElement("ul",{className:c.default.listReset},s.default.createElement(a.default,{concept:e,key:t})))]},this)))}}),f=(0,l.default)({displayName:"ConceptParent",mixins:[o.default],propTypes:{concept:u.default.object.isRequired},open:function(){this.props.concept.isOpen=!0,this.props.concept.parent.isOpen=!1},render:function(){return s.default.createElement("li",null,s.default.createElement("div",{className:c.default.btnAddOpen,onClick:this.open},s.default.createElement("div",{className:c.default.controls},s.default.createElement(n.default,{glyph:n.default.GLYPHS.closed})),s.default.createElement("div",{className:c.default.condition},this.props.concept.name)))}});e.exports=p},function(e,t,r){"use strict";var i=m(r(211)),a=m(r(13)),n=m(r(19)),o=m(r(35)),s=m(r(15)),l=m(r(8)),u=m(r(42)),c=m(r(712)),d=m(r(21)),p=r(279),f=m(r(1611)),h=m(r(39));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=(0,n.default)({displayName:"DateTimeSelectorSection",mixins:[d.default],propTypes:{item:s.default.object.isRequired},getInitialState:function(){return{isOpen:!1}},changeDateTime:function(e){var t=this.props.item;t.terria.timeSeriesStack.promoteLayerToTop(t),t.currentTime=u.default.fromDate(new Date(e)),t.terria.currentViewer.notifyRepaintRequired()},onTimelineButtonClicked:function(){var e=this.props.item;e.useOwnClock=!e.useOwnClock,e.useClock(),e.terria.currentViewer.notifyRepaintRequired()},onShowOnChartButtonClicked:function(){var e=this.props.item;e.showOnChart=!e.showOnChart},onPreviousButtonClicked:function(){var e=this.props.item;e.terria.timeSeriesStack.promoteLayerToTop(e),e.moveToPreviousTime(),e.terria.currentViewer.notifyRepaintRequired()},onNextButtonClicked:function(){var e=this.props.item;e.terria.timeSeriesStack.promoteLayerToTop(e),e.moveToNextTime(),e.terria.currentViewer.notifyRepaintRequired()},onOpen:function(){this.setState({isOpen:!0})},onClose:function(){this.setState({isOpen:!1})},toggleOpen:function(e){this.setState({isOpen:!this.state.isOpen}),e.stopPropagation()},render:function(){var e,t,r=this.props.item;if((0,l.default)(r.discreteTime)){var n=r.discreteTime;(0,l.default)(r.dateFormat.currentTime)?(t=r.dateFormat,e=(0,i.default)(n,r.dateFormat.currentTime)):e=(0,p.formatDateTime)(n)}return(0,l.default)(r.clock)&&(0,l.default)(r.availableDates)&&0!==r.availableDates.length?a.default.createElement("div",{className:f.default.datetimeSelector},a.default.createElement("div",{className:f.default.title},"Time:"),a.default.createElement("div",{className:f.default.datetimeSelectorInner},a.default.createElement("div",{className:f.default.datetimeAndPicker},a.default.createElement("button",{className:f.default.datetimePrevious,disabled:!r.isPreviousTimeAvaliable(),onClick:this.onPreviousButtonClicked,title:"Previous time"},a.default.createElement(h.default,{glyph:h.default.GLYPHS.previous})),a.default.createElement("button",{className:f.default.currentDate,onClick:this.toggleOpen,title:"Select a time"},(0,l.default)(e)?e:"Currently out of range."),a.default.createElement("button",{className:f.default.datetimeNext,disabled:!r.isNextTimeAvaliable(),onClick:this.onNextButtonClicked,title:"Next time"},a.default.createElement(h.default,{glyph:h.default.GLYPHS.next}))),a.default.createElement("div",{className:f.default.picker,title:"Select a time"},a.default.createElement(c.default,{currentDate:r.clampedDiscreteTime,dates:r.availableDates,onChange:this.changeDateTime,openDirection:"down",isOpen:this.state.isOpen,showCalendarButton:!1,onOpen:this.onOpen,onClose:this.onClose,dateFormat:t})),a.default.createElement("button",{className:(0,o.default)(f.default.timelineButton,g({},f.default.timelineActive,!r.useOwnClock)),type:"button",onClick:this.onTimelineButtonClicked,title:"Use timeline"},a.default.createElement(h.default,{glyph:h.default.GLYPHS.timeline})),a.default.createElement("button",{className:(0,o.default)(f.default.timelineButton,g({},f.default.timelineActive,r.showOnChart)),type:"button",onClick:this.onShowOnChartButtonClicked,title:"Show available times on chart"},a.default.createElement(h.default,{glyph:h.default.GLYPHS.lineChart})))):null}});e.exports=v},function(e,t,r){e.exports={"datetime-selector":"tjs-datetime-selector-section__datetime-selector tjs-_base__clearfix",datetimeSelector:"tjs-datetime-selector-section__datetime-selector tjs-_base__clearfix",title:"tjs-datetime-selector-section__title",datetimeAndPicker:"tjs-datetime-selector-section__datetimeAndPicker",time:"tjs-datetime-selector-section__time","timeline-button":"tjs-datetime-selector-section__timeline-button tjs-_buttons__btn",timelineButton:"tjs-datetime-selector-section__timeline-button tjs-_buttons__btn","timeline-active":"tjs-datetime-selector-section__timeline-active",timelineActive:"tjs-datetime-selector-section__timeline-active",currentDate:"tjs-datetime-selector-section__currentDate tjs-_buttons__btn",picker:"tjs-datetime-selector-section__picker",datetimePrevious:"tjs-datetime-selector-section__datetimePrevious tjs-_buttons__btn",datetimeNext:"tjs-datetime-selector-section__datetimeNext tjs-_buttons__btn"}},function(e,t,r){"use strict";var i=g(r(19)),a=g(r(15)),n=g(r(13)),o=g(r(8)),s=g(r(26)),l=g(r(29)),u=g(r(23)),c=g(r(183)),d=g(r(137)),p=g(r(132)),f=g(r(1613)),h=g(r(21)),m=g(r(1615));function g(e){return e&&e.__esModule?e:{default:e}}var v=(0,i.default)({displayName:"SatelliteImageryTimeFilterSection",mixins:[h.default],propTypes:{item:a.default.object},removeFilter:function(){this.props.item.filterIntervalsByFeature(void 0)},zoomTo:function(){var e=this.props.item.intervalFilterFeature,t=void 0!==e&&void 0!==e.position?e.position.getValue(this.props.item.currentTime):void 0;if((0,o.default)(t)){var r=s.default.WGS84.cartesianToCartographic(t);this.props.item.terria.currentViewer.zoomTo(new l.default(r.longitude-5e-4,r.latitude-5e-4,r.longitude+5e-4,r.latitude+5e-4))}},newLocation:function(){var e=this,t=this.props.item.terria,r=new c.default({message:"Select a point by clicking on the map.",onCancel:function(){t.mapInteractionModeStack.pop()}});t.mapInteractionModeStack.push(r),u.default.getObservable(r,"pickedFeatures").subscribe(function(i){r.customUi=function(){return n.default.createElement(p.default,{message:"Querying position..."})},i.allFeaturesAvailablePromise.then(function(){if(t.mapInteractionModeStack[t.mapInteractionModeStack.length-1]===r){var a=e.props.item,n=i.features.filter(function(e){return e.imageryLayer===a.imageryLayer})[0];if(void 0!==n)try{a.filterIntervalsByFeature(n,i)}catch(e){(0,d.default)(t,e)}t.mapInteractionModeStack.pop()}})})},render:function(){if(!this.props.item.canFilterIntervalsByFeature)return null;var e=this.props.item.intervalFilterFeature;return void 0===e?this.renderNoFeatureSelected():this.renderFeatureSelected(e)},renderNoFeatureSelected:function(){return n.default.createElement("div",{className:m.default.inactive},n.default.createElement("div",{className:m.default.btnGroup},n.default.createElement("button",{className:m.default.btn,onClick:this.newLocation},"Filter by location")))},renderFeatureSelected:function(e){var t=void 0!==e.position?e.position.getValue(this.props.item.currentTime):void 0;return n.default.createElement("div",{className:m.default.active},n.default.createElement("div",{className:m.default.infoGroup},n.default.createElement("div",null,"Only showing available capture times for:"),n.default.createElement(f.default,{position:t})),n.default.createElement("div",{className:m.default.btnGroup},n.default.createElement("button",{className:m.default.btn,onClick:this.removeFilter},"Remove filter"),n.default.createElement("button",{className:m.default.btn,onClick:this.zoomTo},"Zoom to"),n.default.createElement("button",{className:m.default.btn,onClick:this.newLocation},"New location")))}});e.exports=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=u(r(14)),a=u(r(26)),n=u(r(337)),o=u(r(13)),s=u(r(15)),l=u(r(1614));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t="",r="";if(e.position){var s=e.position,u=a.default.WGS84.cartesianToCartographic(s),c=i.default.toDegrees(u.latitude),d=i.default.toDegrees(u.longitude),p=(0,n.default)(d,c);t=p.latitude,r=p.longitude}return o.default.createElement("div",{className:l.default.location},o.default.createElement("span",null,"Lat / Lon "),o.default.createElement("span",null,t+", "+r))}c.propTypes={position:s.default.object}},function(e,t,r){e.exports={location:"tjs-location-item__location"}},function(e,t,r){e.exports={active:"tjs-satellite-imagery-time-filter-section__active",inactive:"tjs-satellite-imagery-time-filter-section__inactive",infoGroup:"tjs-satellite-imagery-time-filter-section__infoGroup",btn:"tjs-satellite-imagery-time-filter-section__btn tjs-_buttons__btn-primary tjs-_buttons__btn",btnGroup:"tjs-satellite-imagery-time-filter-section__btnGroup"}},function(e,t,r){"use strict";var i=u(r(8)),a=u(r(13)),n=u(r(19)),o=u(r(15)),s=u(r(21)),l=u(r(1617));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)({displayName:"DimensionSelectorSection",mixins:[s.default],propTypes:{item:o.default.object.isRequired},changeDimension:function(e,t){var r=this.props.item,i=r.dimensions||{};i[e.name]=t.target.value,r.dimensions=i,r.refresh()},render:function(){var e=this.props.item;if(e.disableUserChanges||!(0,i.default)(e.availableDimensions)||!(0,i.default)(e.layers))return null;var t=[];return e.layers.split(",").forEach(function(r){var a=e.availableDimensions[r];a&&a.forEach(function(e){if("time"!==e.name.toLowerCase()){var r=t.filter(function(t){return t.name===e.name})[0];(0,i.default)(r)||t.push(e)}})}),a.default.createElement("div",{className:l.default.dimensionSelector},t.map(this.renderDimensionSelector))},renderDimensionSelector:function(e){var t=e.options,r=(this.props.item.dimensions||{})[e.name]||e.default||"",i=0===r.length&&e.options.indexOf(r)<0,n=e.name.length>0?e.name.charAt(0).toUpperCase()+e.name.slice(1):"";return e.unitSymbol&&(n+="("+e.unitSymbol+")"),a.default.createElement("div",{key:e.name},a.default.createElement("label",{className:l.default.title,htmlFor:e.name},n),a.default.createElement("select",{className:l.default.field,name:e.name,value:r,onChange:this.changeDimension.bind(this,e)},i&&a.default.createElement("option",{key:"__default__",value:""},"Default"),t.map(function(e){return a.default.createElement("option",{key:e,value:e},e)})))}});e.exports=c},function(e,t,r){e.exports={"dimension-selector":"tjs-dimension-selector-section__dimension-selector",dimensionSelector:"tjs-dimension-selector-section__dimension-selector",title:"tjs-dimension-selector-section__title",field:"tjs-dimension-selector-section__field tjs-_form__field tjs-_form__input"}},function(e,t,r){"use strict";var i=c(r(35)),a=c(r(21)),n=c(r(13)),o=c(r(19)),s=c(r(15)),l=c(r(39)),u=c(r(1619));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=(0,o.default)({displayName:"DisplayAsPercentSection",mixins:[a.default],propTypes:{item:s.default.object},togglePercentage:function(){this.props.item.displayPercent=!this.props.item.displayPercent},render:function(){var e;return this.props.item.canDisplayPercent?n.default.createElement("label",{className:u.default.main},n.default.createElement("button",{type:"button",onClick:this.togglePercentage,className:(0,i.default)(u.default.btn,(e={},d(e,u.default.btnActive,this.props.item.displayPercent),d(e,u.default.btnInactive,!this.props.item.displayPercent),e))},this.props.item.displayPercent?n.default.createElement(l.default,{glyph:l.default.GLYPHS.checkboxOn}):n.default.createElement(l.default,{glyph:l.default.GLYPHS.checkboxOff}),n.default.createElement("span",null,"Display as a percentage of regional total"))):null}});e.exports=p},function(e,t,r){e.exports={btn:"tjs-display-as-percent__btn tjs-_buttons__btn"}},function(e,t,r){"use strict";var i=d(r(35)),a=d(r(19)),n=d(r(15)),o=d(r(13)),s=d(r(8)),l=d(r(140)),u=d(r(21)),c=d(r(1621));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=(0,a.default)({displayName:"LeftRightSection",mixins:[u.default],propTypes:{item:n.default.object.isRequired},goLeft:function(){this.props.item.splitDirection=l.default.LEFT},goBoth:function(){this.props.item.splitDirection=l.default.NONE},goRight:function(){this.props.item.splitDirection=l.default.RIGHT},render:function(){var e=this.props.item,t=e.splitDirection;return e.supportsSplitting&&(0,s.default)(t)&&e.terria.showSplitter?o.default.createElement("div",{className:c.default.leftRightSection},o.default.createElement("button",{type:"button",onClick:this.goLeft,className:(0,i.default)(c.default.goLeft,p({},c.default.isActive,t===l.default.LEFT)),title:"Show on the left side"},"Left"),o.default.createElement("button",{type:"button",onClick:this.goBoth,className:(0,i.default)(c.default.goBoth,p({},c.default.isActive,t===l.default.NONE)),title:"Show on both sides"},"Both"),o.default.createElement("button",{type:"button",onClick:this.goRight,className:(0,i.default)(c.default.goRight,p({},c.default.isActive,t===l.default.RIGHT)),title:"Show on the right side"},"Right")):null}});e.exports=f},function(e,t,r){e.exports={"left-right-section":"tjs-left-right-section__left-right-section",leftRightSection:"tjs-left-right-section__left-right-section","go-left":"tjs-left-right-section__go-left tjs-_buttons__btn tjs-_buttons__btn-primary",goLeft:"tjs-left-right-section__go-left tjs-_buttons__btn tjs-_buttons__btn-primary","go-both":"tjs-left-right-section__go-both tjs-_buttons__btn tjs-_buttons__btn-primary",goBoth:"tjs-left-right-section__go-both tjs-_buttons__btn tjs-_buttons__btn-primary","go-right":"tjs-left-right-section__go-right tjs-_buttons__btn tjs-_buttons__btn-primary",goRight:"tjs-left-right-section__go-right tjs-_buttons__btn tjs-_buttons__btn-primary",isActive:"tjs-left-right-section__isActive"}},function(e,t,r){"use strict";var i=u(r(771)),a=u(r(13)),n=u(r(19)),o=u(r(15)),s=u(r(21)),l=u(r(1623));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)({displayName:"OpacitySection",mixins:[s.default],propTypes:{item:o.default.object.isRequired},changeOpacity:function(e){this.props.item.opacity=e/100},render:function(){var e=this.props.item;return e.supportsOpacity?a.default.createElement("div",{className:l.default.opacity},a.default.createElement("label",{htmlFor:"opacity"},"Opacity: ",parseInt(100*e.opacity,10)," %"),a.default.createElement(i.default,{className:l.default.opacitySlider,min:0,max:100,value:100*e.opacity|0,onChange:this.changeOpacity})):null}});e.exports=c},function(e,t,r){e.exports={opacity:"tjs-opacity-section__opacity tjs-_base__clearfix",opacitySlider:"tjs-opacity-section__opacitySlider"}},function(e,t,r){"use strict";var i=u(r(13)),a=u(r(19)),n=u(r(15)),o=u(r(21)),s=u(r(8)),l=u(r(1625));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.default)({displayName:"ColorScaleRangeSection",mixins:[o.default],propTypes:{item:n.default.object.isRequired,minValue:n.default.number,maxValue:n.default.number},getInitialState:function(){return{minRange:-50,maxRange:50}},UNSAFE_componentWillMount:function(){this.setState({minRange:this.props.minValue,maxRange:this.props.maxValue})},UNSAFE_componentWillReceiveProps:function(e){this.setState({minRange:e.minValue,maxRange:e.maxValue})},updateRange:function(e){e.preventDefault();var t=parseFloat(this.state.minRange);if(t==t){var r=parseFloat(this.state.maxRange);r==r?r<=t?this.props.item.terria.error.raiseEvent({sender:this.props.item,title:"Invalid color scale range",message:"The minimum value of the color scale range must be less than the maximum value."}):(this.props.item.colorScaleMinimum=t,this.props.item.colorScaleMaximum=r):this.props.item.terria.error.raiseEvent({sender:this.props.item,title:"Invalid color scale range",message:"The maximum value must be a number."})}else this.props.item.terria.error.raiseEvent({sender:this.props.item,title:"Invalid color scale range",message:"The minimum value must be a number."})},changeRangeMin:function(e){this.setState({minRange:e.target.value})},changeRangeMax:function(e){this.setState({maxRange:e.target.value})},render:function(){var e=this.props.item;return(0,s.default)(e.colorScaleMinimum)&&(0,s.default)(e.colorScaleMaximum)?i.default.createElement("form",{className:l.default.colorscalerange,onSubmit:this.updateRange},i.default.createElement("div",{className:l.default.title},"Color Scale Range "),i.default.createElement("label",{htmlFor:"rangeMax"},"Maximum: "),i.default.createElement("input",{className:l.default.field,type:"text",name:"rangeMax",value:this.state.maxRange,onChange:this.changeRangeMax}),i.default.createElement("label",{htmlFor:"rangeMin"},"Minimum: "),i.default.createElement("input",{className:l.default.field,type:"text",name:"rangeMin",value:this.state.minRange,onChange:this.changeRangeMin}),i.default.createElement("button",{type:"submit",title:"Update Range",className:l.default.btn},"Update Range")):null}});e.exports=c},function(e,t,r){e.exports={colorscalerange:"tjs-colorscalerange-section__colorscalerange",title:"tjs-colorscalerange-section__title",btn:"tjs-colorscalerange-section__btn tjs-_buttons__btn tjs-_buttons__btn-primary",field:"tjs-colorscalerange-section__field tjs-_form__field tjs-_form__input"}},function(e,t,r){"use strict";var i=u(r(21)),a=u(r(13)),n=u(r(19)),o=u(r(15)),s=u(r(192)),l=u(r(1627));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)({displayName:"ShortReport",mixins:[i.default],propTypes:{item:o.default.object.isRequired},render:function(){return a.default.createElement("div",{className:l.default.shortReport},this.props.item.shortReport?(0,s.default)(this.props.item.shortReport,{catalogItem:this.props.item}):null,this.props.item.shortReportSections?this.props.item.shortReportSections.map(function(e,t){return a.default.createElement("div",{key:t},a.default.createElement("label",null,e.name),(0,s.default)(e.content,{catalogItem:this.props.item}))},this):null)}});e.exports=c},function(e,t,r){e.exports={"short-report":"tjs-short-report__short-report",shortReport:"tjs-short-report__short-report","now-viewing-item__short-report":"tjs-short-report__now-viewing-item__short-report",nowViewingItemShortReport:"tjs-short-report__now-viewing-item__short-report","collapsible-header":"tjs-short-report__collapsible-header",collapsibleHeader:"tjs-short-report__collapsible-header","btn--toggle":"tjs-short-report__btn--toggle",btnToggle:"tjs-short-report__btn--toggle"}},function(e,t,r){"use strict";var i=c(r(8)),a=c(r(13)),n=c(r(19)),o=c(r(15)),s=c(r(21)),l=c(r(39)),u=c(r(1629));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,n.default)({displayName:"StyleSelectorSection",mixins:[s.default],propTypes:{item:o.default.object.isRequired},changeStyle:function(e,t){var r=this.props.item,i=r.layers.split(","),a=r.styles.split(","),n=i.indexOf(e.name);-1!==n&&(a[n]=t.target.value,r.styles=a.join(","),r.refresh())},changeStyleEnv:function(e,t){var r=this.props.item;r.styleEnv=t.target.value,r.refresh()},render:function(){var e=this.props.item,t=[];if(!e.disableUserChanges&&(0,i.default)(e.styles)&&(0,i.default)(e.layers)&&0!==e.layers.length){var r=e.styles.split(",");if((0,i.default)(e.availableStyles)){var n=e.layerTitles,o=e.layers.split(",").map(function(e,t){return{name:e.trim(),title:n&&n[t]||e.trim(),style:r[t]}});t.push(a.default.createElement("div",{key:"styles",className:u.default.styleSelector},o.map(this.renderStyleSelectorForLayer)))}(0,i.default)(e.availableStyleEnvs)&&0!==e.availableStyleEnvs.length&&t.push(a.default.createElement("div",{key:"envs",className:u.default.styleSelector},r.map(this.renderStyleEnvSelectorForStyle)))}return t},renderStyleSelectorForLayer:function(e){var t=this.props.item,r=t.availableStyles[e.name];if(!(0,i.default)(r)||r.length<2)return null;var n=t.layers.indexOf(",")>=0?e.title+" Style":"Style";return a.default.createElement("div",{key:e.name},a.default.createElement("label",{className:u.default.title,htmlFor:e.name},n),a.default.createElement("select",{className:u.default.field,name:e.name,value:e.style,onChange:this.changeStyle.bind(this,e)},r.map(function(e){return a.default.createElement("option",{key:e.name,value:e.name},e.title||e.name)})),a.default.createElement(l.default,{glyph:l.default.GLYPHS.opened}))},renderStyleEnvSelectorForStyle:function(e){var t=this.props.item,r=t.availableStyleEnvs[e];if(console.log(t.availableStyleEnvs),!(0,i.default)(r)||r.length<2)return null;var n=t.styles.indexOf(",")>=0?e+" Env":"Env";return a.default.createElement("div",{key:e},a.default.createElement("label",{className:u.default.title,htmlFor:e},n),a.default.createElement("select",{className:u.default.field,name:e,value:t.styleEnv,onChange:this.changeStyleEnv.bind(this,e)},r.map(function(e){return a.default.createElement("option",{key:e.name,value:e.name},e.title||e.name)})))}});e.exports=d},function(e,t,r){e.exports={"style-selector":"tjs-style-selector-section__style-selector",styleSelector:"tjs-style-selector-section__style-selector",title:"tjs-style-selector-section__title",field:"tjs-style-selector-section__field tjs-_form__field tjs-_form__input"}},function(e,t,r){"use strict";var i=b(r(32)),a=b(r(8)),n=b(r(26)),o=b(r(39)),s=b(r(21)),l=b(r(405)),u=b(r(13)),c=b(r(19)),d=b(r(15)),p=b(r(29)),f=b(r(18)),h=b(r(35)),m=b(r(1631)),g=b(r(138)),v=b(r(463)),y=b(r(140));function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=(0,c.default)({displayName:"ViewingControls",mixins:[s.default],propTypes:{item:d.default.object.isRequired,viewState:d.default.object.isRequired},removeFromMap:function(){this.props.item.isEnabled=!1},zoomTo:function(){this.props.item.zoomToAndUseClock()},openFeature:function(){var e=this.props.item,t=new l.default;t.features.push(e.tableStructure.sourceFeature),t.allFeaturesAvailablePromise=(0,f.default)(),t.isLoading=!1;var r=e.tableStructure.sourceFeature.position.getValue(e.terria.clock.currentTime),a=n.default.WGS84,o=i.default.fromCartesian(r,a),s=o.latitude+.05,u=o.longitude-.05,c=o.latitude-.05,d=o.longitude+.05,h=new p.default(u,s,d,c);setTimeout(function(){e.terria.pickedFeatures=t,e.terria.currentViewer.zoomTo(h,1)},50)},splitItem:function(){var e=this.props.item;e.splitDirection=y.default.RIGHT;var t=e.serializeToJson();t.name=t.name+" (copy)",t.splitDirection=y.default.LEFT,delete t.id;var r=(0,g.default)(e.type,e.terria);r.updateFromJson(t),!1===r.useOwnClock&&(r.useOwnClock=!0),(0,v.default)(e.terria,r,{open:!1,zoomTo:!1}),e.terria.showSplitter=!0},previewItem:function(){var e=this.props.item;(0,a.default)(e.sourceCatalogItem)&&(e=e.sourceCatalogItem),e.enableWithParents(),this.props.viewState.viewCatalogMember(e),this.props.viewState.switchMobileView(this.props.viewState.mobileViewOptions.preview)},exportData:function(){this.props.item.exportData()},render:function(){var e,t=this.props.item,r=t.canZoomTo||t.tableStructure&&t.tableStructure.sourceFeature,i=!t.terria.configParameters.disableSplitter&&t.supportsSplitting&&(0,a.default)(t.splitDirection)&&t.terria.currentViewer.canShowSplitter,n=(_(e={},m.default.noZoom,!r),_(e,m.default.noSplit,!i),_(e,m.default.noInfo,!t.showsInfo),e);return u.default.createElement("ul",{className:m.default.control},t.canZoomTo?[u.default.createElement("li",{className:(0,h.default)(m.default.zoom,n),key:"0"},u.default.createElement("button",{type:"button",onClick:this.zoomTo,title:"Zoom to extent",className:m.default.btn},"Zoom To Extent")),u.default.createElement("span",{className:m.default.separator,key:"1"})]:null,t.tableStructure&&t.tableStructure.sourceFeature?[u.default.createElement("li",{className:(0,h.default)(m.default.zoom,n),key:"0"},u.default.createElement("button",{type:"button",onClick:this.openFeature,title:"Zoom to data",className:m.default.btn},"Zoom To")),u.default.createElement("span",{className:m.default.separator,key:"1"})]:null,t.showsInfo?[u.default.createElement("li",{className:(0,h.default)(m.default.info,n),key:"0"},u.default.createElement("button",{type:"button",onClick:this.previewItem,className:m.default.btn,title:"info"},"About This Data")),u.default.createElement("span",{className:m.default.separator,key:"1"})]:null,i?[u.default.createElement("li",{className:(0,h.default)(m.default.split,n),key:"0"},u.default.createElement("button",{type:"button",onClick:this.splitItem,title:"Duplicate and show splitter",className:m.default.btn},"Split")),u.default.createElement("span",{className:m.default.separator,key:"1"})]:null,(0,a.default)(t.linkedWcsUrl)?[u.default.createElement("li",{className:(0,h.default)(m.default.info,n),key:"0"},u.default.createElement("button",{type:"button",onClick:this.exportData,className:m.default.btn,title:"Export map data"},"Export")),u.default.createElement("span",{className:m.default.separator,key:"1"})]:null,u.default.createElement("li",{className:(0,h.default)(m.default.remove,n)},u.default.createElement("button",{type:"button",onClick:this.removeFromMap,title:"Remove this data",className:m.default.btn},"Remove ",u.default.createElement(o.default,{glyph:o.default.GLYPHS.remove}))))}});e.exports=w},function(e,t,r){e.exports={control:"tjs-viewing-controls__control tjs-_base__list-reset",separator:"tjs-viewing-controls__separator",remove:"tjs-viewing-controls__remove",btn:"tjs-viewing-controls__btn tjs-_buttons__btn"}},function(e,t,r){"use strict";var i=c(r(13)),a=c(r(15)),n=c(r(19)),o=c(r(8)),s=c(r(21)),l=c(r(1633)),u=c(r(1636));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,n.default)({displayName:"TimerSection",mixins:[s.default],propTypes:{item:a.default.object.isRequired},isEnabled:function(){return(0,o.default)(this.props.item)&&(0,o.default)(this.props.item.polling)&&this.props.item.polling.isPolling&&(0,o.default)(this.props.item.polling.nextScheduledUpdateTime)&&this.props.item.polling.seconds<18e5},getInitialState:function(){return{secondsLeft:0}},getCountdownDuration:function(){return Math.floor((this.props.item.polling.nextScheduledUpdateTime.getTime()-(new Date).getTime())/1e3)},getTimerStartTime:function(){return new Date(this.props.item.polling.nextScheduledUpdateTime-1e3*this.props.item.polling.seconds)},countdown:function(){var e=this;this.state.secondsLeft>0?this.setState(function(){return{secondsLeft:e.state.secondsLeft-1}}):clearInterval(this.interval)},startCountdown:function(){this.setState({secondsLeft:this.getCountdownDuration()}),this.interval=setInterval(this.countdown,1e3)},getCountdownString:function(){var e=new Date(null);e.setSeconds(this.state.secondsLeft);var t=function(e){return e.length<2?"0"+e:e},r=t(e.getMinutes().toString()),i=t(e.getSeconds().toString());return"00:".concat(r,":").concat(i)},componentDidUpdate:function(){this.isEnabled()&&this.nextUpdate!==this.props.item.polling.nextScheduledUpdateTime&&((0,o.default)(this.interval)&&clearInterval(this.interval),this.startCountdown(),this.nextUpdate=this.props.item.polling.nextScheduledUpdateTime)},componentDidMount:function(){this.isEnabled()&&this.startCountdown()},componentWillUnmount:function(){clearInterval(this.interval)},render:function(){return i.default.createElement(i.default.Fragment,null,this.isEnabled()?i.default.createElement("div",{className:u.default.section},i.default.createElement("div",{className:u.default.timerContainer},i.default.createElement(l.default,{tooltipText:"Next data update at ".concat(this.props.item.polling.nextScheduledUpdateTime),radius:10,start:this.getTimerStartTime().getTime(),stop:this.props.item.polling.nextScheduledUpdateTime.getTime()})),i.default.createElement("span",null,"Next data update in ",this.getCountdownString())):null)}});e.exports=d},function(e,t,r){"use strict";var i,a,n=c(r(13)),o=c(r(15)),s=c(r(72)),l=r(1634),u=c(r(1635));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}void 0!==document.hidden?(i="hidden",a="visibilitychange"):void 0!==document.msHidden?(i="msHidden",a="msvisibilitychange"):void 0!==document.webkitHidden&&(i="webkitHidden",a="webkitvisibilitychange");var g=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=f(this,h(t).call(this))).containerId="timer-container-"+(0,s.default)(),r}var r,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,n["default"].PureComponent),r=t,(o=[{key:"calculateTimerInterval",value:function(){return this.props.stop>this.props.start?(this.props.stop-this.props.start)/1e3:0}},{key:"calculateElaspedTime",value:function(){var e=Math.floor((new Date).getTime()/1e3-this.props.start/1e3);return e>0?e:0}},{key:"startTimer",value:function(){(new Date).getTime()>this.props.start&&(0,l.startTimer)(this.props.radius,this.calculateTimerInterval(),this.containerId,u.default.elapsedTime,u.default.backgroundCircle,this.calculateElaspedTime())}},{key:"componentDidUpdate",value:function(){this.startTimer()}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener(a,function(){document[i]||e.startTimer()},!1),(0,l.createTimer)(this.props.radius,this.containerId,u.default.elapsedTime,u.default.backgroundCircle),this.startTimer()}},{key:"componentWillUnmount",value:function(){document.removeEventListener(a,this.handleVisibilityChange)}},{key:"render",value:function(){return n.default.createElement("div",{id:this.containerId,className:u.default.timer,title:this.props.tooltipText})}}])&&p(r.prototype,o),c&&p(r,c),t}();g.propTypes={start:o.default.number.isRequired,stop:o.default.number.isRequired,radius:o.default.number.isRequired,tooltipText:o.default.string},e.exports=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTimer=function(e,t,r,i){var a=(0,n.select)("#"+t);if(!(0,l.default)(a))return null;var o=2*e,s=a.append("svg").attr("width",o).attr("height",o).append("g").attr("transform","translate(".concat(e,",").concat(e,")"));s.append("circle").attr("class",i).attr("cx",0).attr("cy",0).attr("r",e),s.append("path").attr("class",r).datum({endAngle:0}).attr("d",u(e))},t.startTimer=function(e,t,r,i,a){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,p=(0,n.select)("#"+r).select("."+i);if(!(0,l.default)(p)||p.empty())return null;var f=(0,n.select)("#"+r).select("."+a);if(!(0,l.default)(f)||f.empty())return null;!function(e,t,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n=c((a={deltaOpacity:(0,l.default)(a.deltaOpacity)?a.deltaOpacity:.7,opacityAnimationInterval:(0,l.default)(a.opacityAnimationInterval)?a.opacityAnimationInterval:3,minOpacity:(0,l.default)(a.minOpacity)?a.minOpacity:.1,elapsed:(0,l.default)(a.elapsed)?a.elapsed:0}).elapsed/t);r.datum({endAngle:c(n)}).transition("arc"+(new Date).getTime().toString()).duration(1e3*(t-a.elapsed)).ease(s.easeLinear).attrTween("d",function(){return function(t){return u(e)({endAngle:c(t,n)})}});var d=function e(t,r,i){if(i<=0)t.interrupt();else{var n=r-a.deltaOpacity>a.minOpacity?r-a.deltaOpacity:a.minOpacity;t.transition("in").duration(1e3*a.opacityAnimationInterval/2).styleTween("opacity",function(){return function(e){return(0,o.interpolate)(r,n)(e)}}),t.transition("out").delay(1e3*a.opacityAnimationInterval/2).duration(1e3*a.opacityAnimationInterval/2).styleTween("opacity",function(){return function(e){return(0,o.interpolate)(n,r)(e)}}).on("end",function(){return e(t,r,i-1)})}},p=Math.ceil(t/a.opacityAnimationInterval)-1,f=parseFloat(i.style("opacity"));d(i,f,p);var h=parseFloat(r.style("opacity"));d(r,h,p)}(e,t,p,f,{elapsed:d})};var i,a=r(770),n=r(82),o=r(223),s=r(772),l=(i=r(8))&&i.__esModule?i:{default:i};function u(e){return(0,a.arc)().innerRadius(0).outerRadius(e).startAngle(0)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,o.interpolate)(t,2*Math.PI)(e)}},function(e,t,r){e.exports={timer:"tjs-timer__timer","background-circle":"tjs-timer__background-circle",backgroundCircle:"tjs-timer__background-circle",elapsedTime:"tjs-timer__elapsedTime"}},function(e,t,r){e.exports={section:"tjs-timer-section__section","timer-container":"tjs-timer-section__timer-container",timerContainer:"tjs-timer-section__timer-container"}},function(e,t,r){e.exports={"workbench-item":"tjs-workbench-item__workbench-item",workbenchItem:"tjs-workbench-item__workbench-item","is-open":"tjs-workbench-item__is-open",isOpen:"tjs-workbench-item__is-open","btn--toggle":"tjs-workbench-item__btn--toggle",btnToggle:"tjs-workbench-item__btn-toggle tjs-_buttons__btn",inner:"tjs-workbench-item__inner tjs-_base__clearfix",header:"tjs-workbench-item__header tjs-_base__list-reset","header-clearfix":"tjs-workbench-item__header-clearfix tjs-_base__clearfix",headerClearfix:"tjs-workbench-item__header-clearfix tjs-_base__clearfix",visibilityColumn:"tjs-workbench-item__visibilityColumn tjs-_base__col tjs-_base__col-1","btn-visibility":"tjs-workbench-item__btn-visibility tjs-_buttons__btn",btnVisibility:"tjs-workbench-item__btn-visibility tjs-_buttons__btn",nameColumn:"tjs-workbench-item__nameColumn tjs-_base__col tjs-_base__col-10",toggleColumn:"tjs-workbench-item__toggleColumn tjs-_base__col tjs-_base__col-1","btn-toggle":"tjs-workbench-item__btn-toggle tjs-_buttons__btn",iconLineChart:"tjs-workbench-item__iconLineChart",draggable:"tjs-workbench-item__draggable"}},function(e,t,r){e.exports={"workbench-content":"tjs-workbench-list__workbench-content tjs-_base__list-reset tjs-_base__scrollbars",workbenchContent:"tjs-workbench-list__workbench-content tjs-_base__list-reset tjs-_base__scrollbars","is-active":"tjs-workbench-list__is-active tjs-_drop_zone__is-active",isActive:"tjs-workbench-list__is-active tjs-_drop_zone__is-active","drop-zone":"tjs-workbench-list__drop-zone tjs-_drop_zone__drop-zone tjs-_base__clearfix",dropZone:"tjs-workbench-list__drop-zone tjs-_drop_zone__drop-zone tjs-_base__clearfix"}},function(e,t,r){var i=r(1640);"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(1)(i,a);i.locals&&(e.exports=i.locals)},function(e,t,r){(e.exports=r(0)(!0)).push([e.i,".ui-sortable .ui-sortable-placeholder.visible {\n  opacity: .2;\n}\n","",{version:3,sources:["sortable.css"],names:[],mappings:"AAAA;EACE,WAAW;AACb",file:"sortable.css",sourcesContent:[".ui-sortable .ui-sortable-placeholder.visible {\n  opacity: .2;\n}\n"]}])},function(e,t,r){e.exports={mobileModal:"tjs-mobile-modal-window__mobileModal tjs-_base__scrollbars",isOpen:"tjs-mobile-modal-window__isOpen",modalBg:"tjs-mobile-modal-window__modalBg tjs-_base__scrollbars","modal-top":"tjs-mobile-modal-window__modal-top",modalTop:"tjs-mobile-modal-window__modal-top",button:"tjs-mobile-modal-window__button tjs-_buttons__btn","done-button":"tjs-mobile-modal-window__done-button tjs-mobile-modal-window__button tjs-_buttons__btn",doneButton:"tjs-mobile-modal-window__done-button tjs-mobile-modal-window__button tjs-_buttons__btn","back-button":"tjs-mobile-modal-window__back-button tjs-mobile-modal-window__button tjs-_buttons__btn",backButton:"tjs-mobile-modal-window__back-button tjs-mobile-modal-window__button tjs-_buttons__btn","back-button--inactive":"tjs-mobile-modal-window__back-button--inactive",backButtonInactive:"tjs-mobile-modal-window__back-button--inactive","icon-back":"tjs-mobile-modal-window__icon-back",iconBack:"tjs-mobile-modal-window__icon-back","data-catalog":"tjs-mobile-modal-window__data-catalog tjs-data-catalog-tab__data-catalog tjs-_base__list-reset tjs-_base__scrollbars",dataCatalog:"tjs-mobile-modal-window__data-catalog tjs-data-catalog-tab__data-catalog tjs-_base__list-reset tjs-_base__scrollbars"}},function(e,t,r){e.exports={ui:"tjs-mobile-header__ui","mobile-header":"tjs-mobile-header__mobile-header tjs-_base__sm-hide tjs-_base__clearfix",mobileHeader:"tjs-mobile-header__mobile-header tjs-_base__sm-hide tjs-_base__clearfix",btn:"tjs-mobile-header__btn tjs-_buttons__btn tjs-_buttons__btn-primary","btn-add":"tjs-mobile-header__btn-add tjs-mobile-header__btn tjs-_buttons__btn tjs-_buttons__btn-primary",btnAdd:"tjs-mobile-header__btn-add tjs-mobile-header__btn tjs-_buttons__btn tjs-_buttons__btn-primary","btn-search":"tjs-mobile-header__btn-search tjs-mobile-header__btn tjs-_buttons__btn tjs-_buttons__btn-primary",btnSearch:"tjs-mobile-header__btn-search tjs-mobile-header__btn tjs-_buttons__btn tjs-_buttons__btn-primary","btn-now-viewing":"tjs-mobile-header__btn-now-viewing tjs-mobile-header__btn tjs-_buttons__btn tjs-_buttons__btn-primary",btnNowViewing:"tjs-mobile-header__btn-now-viewing tjs-mobile-header__btn tjs-_buttons__btn tjs-_buttons__btn-primary",nowViewingCount:"tjs-mobile-header__nowViewingCount",doubleDigit:"tjs-mobile-header__doubleDigit","group-left":"tjs-mobile-header__group-left",groupLeft:"tjs-mobile-header__group-left","group-right":"tjs-mobile-header__group-right",groupRight:"tjs-mobile-header__group-right",btnMenu:"tjs-mobile-header__btnMenu tjs-_buttons__btn","form-search-data":"tjs-mobile-header__form-search-data",formSearchData:"tjs-mobile-header__form-search-data"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=m(r(13)),a=m(r(8)),n=m(r(19)),o=m(r(15)),s=m(r(21)),l=m(r(35)),u=m(r(456)),c=m(r(715)),d=m(r(347)),p=m(r(452)),f=m(r(670)),h=m(r(1644));function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,n.default)({displayName:"MobileMenu",mixins:[s.default],propTypes:{menuItems:o.default.arrayOf(o.default.element),viewState:o.default.instanceOf(f.default).isRequired,showFeedback:o.default.bool,terria:o.default.instanceOf(p.default).isRequired,allBaseMaps:o.default.array.isRequired},getDefaultProps:function(){return{menuItems:[],showFeedback:!1}},toggleMenu:function(){this.props.viewState.mobileMenuVisible=!this.props.viewState.mobileMenuVisible},getInitialState:function(){return{}},onFeedbackFormClick:function(){this.props.viewState.feedbackFormIsVisible=!0,this.props.viewState.mobileMenuVisible=!1},hideMenu:function(){this.props.viewState.mobileMenuVisible=!1},runStories:function(){this.props.viewState.storyBuilderShown=!1,this.props.viewState.storyShown=!0,this.props.viewState.mobileMenuVisible=!1},render:function(){var e,t,r,n=this.props.terria.configParameters.storyEnabled&&(0,a.default)(this.props.terria.stories)&&this.props.terria.stories.length>0;return i.default.createElement("div",null,this.props.viewState.mobileMenuVisible?i.default.createElement("div",{className:h.default.overlay,onClick:this.toggleMenu}):null,i.default.createElement("div",{className:(0,l.default)(h.default.mobileNav,(e={},t=h.default.mobileNavHidden,r=!this.props.viewState.mobileMenuVisible,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},i.default.createElement("div",{onClick:this.hideMenu},i.default.createElement(c.default,{terria:this.props.terria,allBaseMaps:this.props.allBaseMaps,viewState:this.props.viewState})),i.default.createElement("div",{onClick:this.hideMenu},i.default.createElement(d.default,{terria:this.props.terria,viewState:this.props.viewState})),this.props.menuItems.map(function(e,t){return i.default.createElement("div",{onClick:this.hideMenu,key:e.key},e)},this),this.props.showFeedback?i.default.createElement(u.default,{onClick:this.onFeedbackFormClick,caption:"Give Feedback"}):null,n?i.default.createElement(u.default,{onClick:this.runStories,caption:"View Stories (".concat(this.props.terria.stories.length,")")}):null))}});t.default=g},function(e,t,r){e.exports={overlay:"tjs-mobile-menu__overlay","mobile-nav":"tjs-mobile-menu__mobile-nav tjs-_base__list-reset",mobileNav:"tjs-mobile-menu__mobile-nav tjs-_base__list-reset","mobile-nav--hidden":"tjs-mobile-menu__mobile-nav--hidden",mobileNavHidden:"tjs-mobile-menu__mobile-nav--hidden"}},function(e,t,r){"use strict";var i=c(r(8)),a=c(r(21)),n=c(r(13)),o=c(r(19)),s=c(r(15)),l=c(r(1646)),u=c(r(351));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,o.default)({displayName:"Notification",mixins:[a.default],propTypes:{viewState:s.default.object},confirm:function(){var e=this.props.viewState.notifications[0];e&&e.confirmAction&&e.confirmAction(),this.close(e)},deny:function(){var e=this.props.viewState.notifications[0];e&&e.denyAction&&e.denyAction(),this.close(e)},close:function(e){this.props.viewState.notifications.splice(0,1),e&&e.hideUi&&(0,u.default)()},render:function(){var e=this.props.viewState.notifications[0]||null;return e&&n.default.createElement(l.default,{title:e.title,message:e.message,confirmText:e.confirmText,denyText:e.denyText,onConfirm:this.confirm,onDeny:this.deny,type:(0,i.default)(e.type)?e.type:"notification",width:e.width,height:e.height})}});e.exports=d},function(e,t,r){"use strict";var i=d(r(35)),a=d(r(8)),n=d(r(21)),o=d(r(13)),s=d(r(19)),l=d(r(15)),u=d(r(192)),c=d(r(1647));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,s.default)({displayName:"NotificationWindow",mixins:[n.default],propTypes:{title:l.default.string.isRequired,message:l.default.string.isRequired,confirmText:l.default.string,denyText:l.default.string,onConfirm:l.default.func.isRequired,onDeny:l.default.func.isRequired,type:l.default.string,height:l.default.oneOfType([l.default.string,l.default.number]),width:l.default.oneOfType([l.default.string,l.default.number])},confirm:function(e){e.stopPropagation(),this.props.onConfirm&&this.props.onConfirm()},deny:function(e){e.stopPropagation(),this.props.onDeny&&this.props.onDeny()},render:function(){var e=this.props.title,t=this.props.message,r=this.props.confirmText||"OK",n=this.props.denyText,s=this.props.type,l={height:(0,a.default)(this.props.height)?this.props.height:"auto",width:(0,a.default)(this.props.width)?this.props.width:"500px"};return o.default.createElement("div",{className:(0,i.default)(c.default.wrapper,"".concat(s))},o.default.createElement("div",{className:c.default.notification},o.default.createElement("div",{className:c.default.inner,style:l},o.default.createElement("h3",{className:"title"},e),o.default.createElement("div",{className:c.default.body},(0,u.default)(t))),o.default.createElement("div",{className:c.default.footer},n?o.default.createElement("button",{type:"button",className:c.default.btn,onClick:this.deny},n):null,o.default.createElement("button",{type:"button",className:c.default.btn,onClick:this.confirm},r))))}});e.exports=p},function(e,t,r){e.exports={wrapper:"tjs-notification-window__wrapper tjs-_base__flex",notification:"tjs-notification-window__notification",title:"tjs-notification-window__title tjs-_base__h3",inner:"tjs-notification-window__inner tjs-_base__scrollbars",footer:"tjs-notification-window__footer",body:"tjs-notification-window__body",btn:"tjs-notification-window__btn tjs-_buttons__btn"}},function(e,t,r){"use strict";var i=u(r(13)),a=u(r(15)),n=u(r(19)),o=u(r(153)),s=u(r(35)),l=u(r(1649));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)({displayName:"ProgressBar",propTypes:{terria:a.default.object.isRequired},getInitialState:function(){return{visible:"hidden"}},UNSAFE_componentWillMount:function(){this.eventHelper=new o.default,this.eventHelper.add(this.props.terria.tileLoadProgressEvent,this.setProgress),this.eventHelper.add(this.props.terria.beforeViewerChanged,this.setProgress.bind(this,0,0))},setProgress:function(e,t){var r=100*(1-e/t),i=Math.floor(e>0?r:100);this.setState({percentage:i})},componentWillUnmount:function(){this.eventHelper.removeAll()},render:function(){var e,t,r,a=this.state.percentage+"%",n=this.state.percentage<100?"visible":"hidden",o=100===this.state.percentage;return i.default.createElement("div",{className:(0,s.default)(l.default.progressBar,(e={},t=l.default.complete,r=o,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e)),style:{visibility:n,width:a}})}});e.exports=c},function(e,t,r){e.exports={"progress-bar":"tjs-progress-bar__progress-bar",progressBar:"tjs-progress-bar__progress-bar",complete:"tjs-progress-bar__complete"}},function(e,t,r){"use strict";var i=m(r(13)),a=m(r(19)),n=m(r(15)),o=m(r(23)),s=m(r(21)),l=m(r(472)),u=m(r(1651)),c=m(r(1656)),d=m(r(39)),p=m(r(734)),f=r(245),h=m(r(1659));function m(e){return e&&e.__esModule?e:{default:e}}var g=(0,a.default)({displayName:"SidePanel",mixins:[s.default],propTypes:{terria:n.default.object.isRequired,viewState:n.default.object.isRequired},componentDidMount:function(){this.subscribeToProps()},componentDidUpdate:function(){this.subscribeToProps()},componentWillUnmount:function(){this.unsubscribeFromProps()},subscribeToProps:function(){var e=this;this.unsubscribeFromProps(),this._nowViewingChangeSubscription=o.default.getObservable(this.props.terria.nowViewing,"items").subscribe(function(){e.props.viewState.searchState.showLocationSearchResults=!1})},unsubscribeFromProps:function(){this._nowViewingChangeSubscription&&(this._nowViewingChangeSubscription.dispose(),this._nowViewingChangeSubscription=void 0)},onAddDataClicked:function(e){e.stopPropagation(),this.props.viewState.topElement="AddData",this.props.viewState.openAddData()},onAddLocalDataClicked:function(){this.props.viewState.openUserData()},changeSearchText:function(e){this.props.viewState.searchState.locationSearchText=e,0===e.length&&(0,f.removeMarker)(this.props.terria)},search:function(){this.props.viewState.searchState.searchLocations()},startLocationSearch:function(){this.props.viewState.searchState.showLocationSearchResults=!0},render:function(){var e=this.props.viewState.searchState;return i.default.createElement("div",{className:h.default.workBench},i.default.createElement("div",{className:h.default.header},i.default.createElement(p.default,{terria:this.props.terria,viewState:this.props.viewState,minified:!0,animationDuration:250,btnText:"Hide"}),i.default.createElement(l.default,{onSearchTextChanged:this.changeSearchText,onDoSearch:this.search,onFocus:this.startLocationSearch,searchText:e.locationSearchText,placeholder:"Search for locations"}),i.default.createElement("div",{className:h.default.addData},i.default.createElement("button",{type:"button",onClick:this.onAddDataClicked,className:h.default.button,title:"Add data"},i.default.createElement(d.default,{glyph:d.default.GLYPHS.add}),"Add data"),i.default.createElement("button",{type:"button",onClick:this.onAddLocalDataClicked,className:h.default.uploadData,title:"Load local/web data"},i.default.createElement(d.default,{glyph:d.default.GLYPHS.upload})))),i.default.createElement("div",{className:h.default.body},e.locationSearchText.length>0&&e.showLocationSearchResults?i.default.createElement(u.default,{terria:this.props.terria,viewState:this.props.viewState,isWaitingForSearchToStart:e.isWaitingToStartLocationSearch}):this.props.terria.nowViewing.items&&this.props.terria.nowViewing.items.length>0?i.default.createElement(c.default,{viewState:this.props.viewState,terria:this.props.terria}):i.default.createElement("div",{className:h.default.workbenchEmpty},i.default.createElement("div",null,"Your workbench is empty"),i.default.createElement("p",null,i.default.createElement("strong",null,"Click 'Add data' above to:")),i.default.createElement("ul",null,i.default.createElement("li",null,"Browse the Data Catalogue"),i.default.createElement("li",null,"Load your own data onto the map")),i.default.createElement("p",null,i.default.createElement(d.default,{glyph:d.default.GLYPHS.bulb}),i.default.createElement("strong",null,"TIP:")," ",i.default.createElement("em",null,"All your active data sets will be listed here")))))}});e.exports=g},function(e,t,r){"use strict";var i=p(r(21)),a=p(r(13)),n=p(r(19)),o=p(r(15)),s=p(r(492)),l=p(r(1653)),u=p(r(731)),c=p(r(1654)),d=r(245);function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,n.default)({displayName:"SidebarSearch",mixins:[i.default],propTypes:{viewState:o.default.object.isRequired,isWaitingForSearchToStart:o.default.bool,terria:o.default.object.isRequired},backToNowViewing:function(){this.props.viewState.searchState.showLocationSearchResults=!1},onLocationClick:function(e){(0,d.addMarker)(this.props.terria,e),e.clickAction()},render:function(){return a.default.createElement("div",{className:l.default.search},a.default.createElement("div",{className:l.default.results},a.default.createElement(s.default,{label:"Search Results"},a.default.createElement("button",{type:"button",onClick:this.backToNowViewing,className:l.default.btnDone},"Done")),a.default.createElement("div",{className:l.default.resultsContent},this.props.viewState.searchState.locationSearchText.length>0?a.default.createElement(c.default,{terria:this.props.terria,viewState:this.props.viewState}):null,this.props.viewState.searchState.locationSearchProviders.map(function(e,t){return a.default.createElement(u.default,{key:e.name,terria:this.props.terria,viewState:this.props.viewState,search:e,onLocationClick:this.onLocationClick,isWaitingForSearchToStart:this.props.isWaitingForSearchToStart})},this))))}});e.exports=f},function(e,t,r){e.exports={header:"tjs-badge-bar__header tjs-_base__sm-show tjs-_base__clearfix tjs-_base__list-reset","label-badge":"tjs-badge-bar__label-badge",labelBadge:"tjs-badge-bar__label-badge"}},function(e,t,r){e.exports={results:"tjs-sidebar-search__results","results-content":"tjs-sidebar-search__results-content tjs-_base__scrollbars",resultsContent:"tjs-sidebar-search__results-content tjs-_base__scrollbars",heading:"tjs-sidebar-search__heading tjs-_base__h4","provider-result":"tjs-sidebar-search__provider-result",providerResult:"tjs-sidebar-search__provider-result",items:"tjs-sidebar-search__items",btnList:"tjs-sidebar-search__btnList tjs-_base__clearfix tjs-_base__list-reset","btn--done":"tjs-sidebar-search__btn--done tjs-_buttons__btn undefined tjs-_buttons__btn--tertiary-dark",btnDone:"tjs-sidebar-search__btn--done tjs-_buttons__btn undefined tjs-_buttons__btn--tertiary-dark"}},function(e,t,r){"use strict";var i=d(r(21)),a=d(r(13)),n=d(r(19)),o=d(r(15)),s=d(r(489)),l=d(r(35)),u=d(r(39)),c=d(r(1655));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=(0,n.default)({displayName:"SideBarDatasetSearchResults",mixins:[i.default],propTypes:{viewState:o.default.object.isRequired,terria:o.default.object.isRequired,theme:o.default.string},getDefaultProps:function(){return{theme:"dark"}},getInitialState:function(){return{isOpen:!0}},searchInDataCatalog:function(){this.props.viewState.searchInCatalog(this.props.viewState.searchState.locationSearchText)},toggleGroup:function(){this.setState({isOpen:!this.state.isOpen})},render:function(){var e;return a.default.createElement("div",{key:"data",className:(0,l.default)(c.default.providerResult,(e={},p(e,c.default.isOpen,this.state.isOpen),p(e,c.default.dark,"dark"===this.props.theme),p(e,c.default.light,"light"===this.props.theme),e))},a.default.createElement("button",{onClick:this.toggleGroup,className:c.default.heading},a.default.createElement("span",null,"Data"),a.default.createElement(u.default,{glyph:this.state.isOpen?u.default.GLYPHS.opened:u.default.GLYPHS.closed})),a.default.createElement("ul",{className:c.default.items},a.default.createElement(s.default,{clickAction:this.searchInDataCatalog,icon:"data",name:'Search for "'.concat(this.props.viewState.searchState.locationSearchText,'" in the Data Catalogue')})))}});e.exports=f},function(e,t,r){e.exports={heading:"tjs-sidebar-dataset-search-results__heading tjs-_buttons__btn","provider-result":"tjs-sidebar-dataset-search-results__provider-result",providerResult:"tjs-sidebar-dataset-search-results__provider-result",items:"tjs-sidebar-dataset-search-results__items tjs-_base__clearfix tjs-_base__list-reset",light:"tjs-sidebar-dataset-search-results__light",dark:"tjs-sidebar-dataset-search-results__dark",isOpen:"tjs-sidebar-dataset-search-results__isOpen"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(r(492)),a=d(r(39)),n=d(r(21)),o=d(r(13)),s=d(r(19)),l=d(r(15)),u=d(r(732)),c=d(r(1657));function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,s.default)({displayName:"Workbench",mixins:[n.default],propTypes:{terria:l.default.object.isRequired,viewState:l.default.object.isRequired},removeAll:function(){this.props.terria.nowViewing.removeAll()},render:function(){return o.default.createElement("div",{className:c.default.workbench},o.default.createElement(i.default,{label:"Data Sets",badge:this.props.terria.nowViewing.items.length},o.default.createElement("button",{type:"button",onClick:this.removeAll,className:c.default.removeButton},"Remove All ",o.default.createElement(a.default,{glyph:a.default.GLYPHS.remove}))),o.default.createElement(u.default,{viewState:this.props.viewState,terria:this.props.terria}))}});t.default=p},function(e,t,r){e.exports={"remove-button":"tjs-workbench__remove-button tjs-_buttons__btn",removeButton:"tjs-workbench__remove-button tjs-_buttons__btn"}},function(e,t,r){e.exports={"full-screen":"tjs-full_screen_button__full-screen",fullScreen:"tjs-full_screen_button__full-screen",toggleWorkbench:"tjs-full_screen_button__toggleWorkbench",minifiedFullscreenBtnWrapper:"tjs-full_screen_button__minifiedFullscreenBtnWrapper",btn:"tjs-full_screen_button__btn tjs-_buttons__btn tjs-_buttons__btn--map",minified:"tjs-full_screen_button__minified",enter:"tjs-full_screen_button__enter",exit:"tjs-full_screen_button__exit"}},function(e,t,r){e.exports={workBench:"tjs-side-panel__workBench",workbenchEmpty:"tjs-side-panel__workbenchEmpty",header:"tjs-side-panel__header",body:"tjs-side-panel__body",addData:"tjs-side-panel__addData",uploadData:"tjs-side-panel__uploadData tjs-_buttons__btn tjs-_buttons__btn-primary",button:"tjs-side-panel__button tjs-_buttons__btn tjs-_buttons__btn-primary"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return a.default.Children.toArray(t).reduce(function(t,r){var i=function(e){return s.filter(function(t){return e.type===o[t]})[0]}(r);return t[i]=t[i].concat(function(e,t){return a.default.Children.map(t.props.children,function(t){return"string"==typeof t?a.default.createElement("span",null,t):t&&t.type.propTypes&&t.type.propTypes.smallScreen?a.default.cloneElement(t,{smallScreen:e}):t})}(e,r)),t},s.reduce(function(e,t){return e[t]=[],e},{}))};var i,a=(i=r(13))&&i.__esModule?i:{default:i},n=r(673);var o={menu:n.Menu,nav:n.Nav,experimentalMenu:n.ExperimentalMenu,feedback:n.Feedback},s=Object.keys(o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activateStory=v,t.default=void 0;var i=m(r(13)),a=m(r(19)),n=m(r(15)),o=m(r(35)),s=m(r(21)),l=m(r(278)),u=r(349),c=m(r(39)),d=r(1662),p=m(r(18)),f=m(r(8)),h=m(r(1663));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(e.shareData){var r=e.shareData.initSources.map(function(e){return t.addInitSource(e,!0)});p.default.all(r).then(function(){var r=e.shareData.initSources.reduce(function(e,t){return t.sharedCatalogMembers?e.concat(Object.keys(t.sharedCatalogMembers)):e},[]);t.nowViewing.items.slice().forEach(function(e){var t=(0,f.default)(e.creatorCatalogItem)?e.creatorCatalogItem:e,i=t.uniqueId;r.indexOf(i)<0&&(t.isEnabled=!1)})})}}var y=(0,a.default)({displayName:"StoryPanel",mixins:[s.default],propTypes:{terria:n.default.object.isRequired,viewState:n.default.object.isRequired},slideInTimer:null,slideOutTimer:null,escKeyListener:null,getInitialState:function(){return{inView:!1}},UNSAFE_componentWillMount:function(){var e=this.props.terria.stories||[];(this.props.viewState.currentStoryId>e.length-1||this.props.viewState.currentStoryId<0)&&(this.props.viewState.currentStoryId=0),this.activateStory(e[this.props.viewState.currentStoryId])},componentDidMount:function(){var e=this;this.slideIn(),this.escKeyListener=function(t){27===t.keyCode&&e.exitStory()},window.addEventListener("keydown",this.escKeyListener,!0)},slideIn:function(){var e=this;this.slideInTimer=setTimeout(function(){e.setState({inView:!0})},300)},slideOut:function(){var e=this;this.slideOutTimer=this.setState({inView:!1}),setTimeout(function(){e.exitStory()},300)},onClickContainer:function(){this.props.viewState.topElement="StoryPanel"},componentWillUnmount:function(){window.removeEventListener("keydown",this.escKeyListener,!1),clearTimeout(this.slideInTimer),this.slideOutTimer&&clearTimeout(this.slideOutTimer)},navigateStory:function(e){e<0?e=this.props.terria.stories.length-1:e>=this.props.terria.stories.length&&(e=0),e!==this.props.viewState.currentStoryId&&(this.props.viewState.currentStoryId=e,e<(this.props.terria.stories||[]).length&&this.activateStory(this.props.terria.stories[e]))},activateStory:function(e){v(e||this.props.terria.stories[0],this.props.terria)},onCenterScene:function(e){e.shareData&&this.props.terria.updateFromStartData(e.shareData)},goToPrevStory:function(){this.navigateStory(this.props.viewState.currentStoryId-1)},goToNextStory:function(){this.navigateStory(this.props.viewState.currentStoryId+1)},exitStory:function(){this.props.viewState.storyShown=!1,this.props.terria.currentViewer.notifyRepaintRequired()},render:function(){var e,t=this,r=this.props.terria.stories||[],a=r[this.props.viewState.currentStoryId],n=i.default.createElement("button",{className:h.default.locationBtn,title:"center scene",onClick:this.onCenterScene.bind(this,a)},i.default.createElement(c.default,{glyph:c.default.GLYPHS.location})),s=i.default.createElement("button",{className:h.default.exitBtn,title:"exit story",onClick:this.slideOut},i.default.createElement(c.default,{glyph:c.default.GLYPHS.close}));return i.default.createElement(d.Swipeable,{onSwipedLeft:this.goToNextStory,onSwipedRight:this.goToPrevStory},i.default.createElement("div",{className:(0,o.default)(h.default.fullPanel,(e={},g(e,h.default.isHidden,!this.props.viewState.storyShown),g(e,h.default.isPushedUp,this.props.viewState.chartIsOpen),g(e,h.default.isCentered,this.props.viewState.isMapFullScreen),e),"StoryPanel"===this.props.viewState.topElement?"top-element":""),onClick:this.onClickContainer},i.default.createElement("div",{className:(0,o.default)(h.default.storyContainer,g({},h.default.isMounted,this.state.inView)),key:a.id},i.default.createElement(u.Medium,null,i.default.createElement("div",{className:h.default.left},n,i.default.createElement("button",{className:h.default.previousBtn,disabled:this.props.terria.stories.length<=1,title:"go to previous scene",onClick:this.goToPrevStory},i.default.createElement(c.default,{glyph:c.default.GLYPHS.left})))),i.default.createElement("div",{className:h.default.story},i.default.createElement("div",{className:h.default.storyHeader},i.default.createElement(u.Small,null,n),a.title&&a.title.length>0?i.default.createElement("h3",null,a.title):i.default.createElement("h3",null," untitled scene "),i.default.createElement(u.Small,null,s),this.props.terria.stories.length>=2?i.default.createElement(u.Medium,null,i.default.createElement("div",{className:h.default.navBtn}," ",r.map(function(e,r){return i.default.createElement("button",{title:"go to story ".concat(e.title),type:"button",key:e.id,onClick:function(){return t.navigateStory(r)}}," ",i.default.createElement(c.default,{glyph:r===t.props.viewState.currentStoryId?c.default.GLYPHS.circleFull:c.default.GLYPHS.circleEmpty}))}))):null),a.text&&i.default.createElement("div",{className:h.default.body},(0,l.default)(a.text))),i.default.createElement(u.Medium,null,i.default.createElement("div",{className:h.default.right},s,i.default.createElement("button",{disabled:this.props.terria.stories.length<=1,className:h.default.nextBtn,title:"go to next scene",onClick:this.goToNextStory},i.default.createElement(c.default,{glyph:c.default.GLYPHS.right})))),i.default.createElement(u.Small,null,i.default.createElement("div",{className:h.default.navBtnMobile}," ",r.map(function(e,r){return i.default.createElement("button",{title:"go to story ".concat(e.title),type:"button",key:e.id,className:(0,o.default)(h.default.mobileNavBtn,g({},h.default.isActive,r===t.props.viewState.currentStoryId)),onClick:function(){return t.navigateStory(r)}},r)}))))))}});t.default=y},,function(e,t,r){e.exports={"full-panel":"tjs-story-panel__full-panel",fullPanel:"tjs-story-panel__full-panel","is-hidden":"tjs-story-panel__is-hidden",isHidden:"tjs-story-panel__is-hidden",isPushedUp:"tjs-story-panel__isPushedUp",isCentered:"tjs-story-panel__isCentered","story-container":"tjs-story-panel__story-container",storyContainer:"tjs-story-panel__story-container","is-mounted":"tjs-story-panel__is-mounted",isMounted:"tjs-story-panel__is-mounted",left:"tjs-story-panel__left",right:"tjs-story-panel__right",story:"tjs-story-panel__story",storyHeader:"tjs-story-panel__storyHeader",body:"tjs-story-panel__body",locationBtn:"tjs-story-panel__locationBtn tjs-_buttons__btn",exitBtn:"tjs-story-panel__exitBtn tjs-_buttons__btn",nextBtn:"tjs-story-panel__nextBtn tjs-_buttons__btn",previousBtn:"tjs-story-panel__previousBtn tjs-_buttons__btn",navBtn:"tjs-story-panel__navBtn",navBtnMobile:"tjs-story-panel__navBtnMobile",mobileNavBtn:"tjs-story-panel__mobileNavBtn tjs-_buttons__btn",isActive:"tjs-story-panel__isActive"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=_(r(13)),a=_(r(19)),n=_(r(15)),o=_(r(58)),s=r(471),l=_(r(8)),u=_(r(21)),c=_(r(39)),d=_(r(1665)),p=_(r(1667)),f=_(r(357)),h=_(r(72)),m=_(r(35)),g=_(r(492)),v=_(r(351)),y=_(r(132)),b=_(r(1671));function _(e){return e&&e.__esModule?e:{default:e}}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var C=(0,a.default)({displayName:"StoryBuilder",mixins:[u.default],propTypes:{terria:n.default.object.isRequired,isVisible:n.default.bool,viewState:n.default.object.isRequired,animationDuration:n.default.number},getInitialState:function(){return{editingMode:!1,currentStory:void 0,recaptureSuccessful:void 0,showVideoGuide:!1,videoGuideVisible:!1}},removeStory:function(e,t){this.props.terria.stories=this.props.terria.stories.filter(function(e){return e.id!==t.id}),e<this.props.viewState.currentStoryId&&(this.props.viewState.currentStoryId-=1)},removeAllStories:function(){this.props.terria.stories=[]},onSave:function(e){var t={title:e.title,text:e.text,id:e.id?e.id:(0,h.default)()},r=(this.props.terria.stories||[]).map(function(e){return e.id}).indexOf(e.id);if(r>=0){var i=this.props.terria.stories[r];this.props.terria.stories=[].concat(S(this.props.terria.stories.slice(0,r)),[(0,o.default)(t,i)],S(this.props.terria.stories.slice(r+1)))}else this.captureStory(t);this.setState({editingMode:!1})},captureStory:function(e){e.shareData=JSON.parse(JSON.stringify((0,s.getShareData)(this.props.terria,this.props.viewState,{includeStories:!1}))),void 0===this.props.terria.stories?this.props.terria.stories=[e]:this.props.terria.stories.push(e)},toggleVideoGuide:function(){var e=this,t=this.state.showVideoGuide;t||this.setState({showVideoGuide:!t,videoGuideVisible:!0}),t&&(this.slideOutTimer=this.setState({videoGuideVisible:!1}),setTimeout(function(){e.setState({showVideoGuide:!t})},300))},recaptureScene:function(e){clearTimeout(this.resetReCaptureStatus);var t=(this.props.terria.stories||[]).map(function(e){return e.id}).indexOf(e.id);if(!(t>=0))throw new Error("Story does not exsit");e.shareData=JSON.parse(JSON.stringify((0,s.getShareData)(this.props.terria,this.props.viewState,{includeStories:!1}))),this.props.terria.stories=[].concat(S(this.props.terria.stories.slice(0,t)),[e],S(this.props.terria.stories.slice(t+1))),this.setState({recaptureSuccessful:e.id}),setTimeout(this.resetReCaptureStatus,2e3)},resetReCaptureStatus:function(){this.setState({recaptureSuccessful:void 0})},runStories:function(){this.props.viewState.storyBuilderShown=!1,this.props.viewState.storyShown=!0,setTimeout(function(){(0,v.default)()},this.props.animationDuration||1),this.props.terria.currentViewer.notifyRepaintRequired()},editStory:function(e){this.props.viewState.storyBuilderShow=!0,this.props.viewState.storyShown=!1,this.setState({editingMode:!0,currentStory:e})},viewStory:function(e,t){this.props.viewState.currentStoryId=e,this.runStories()},onSort:function(e,t,r){this.props.terria.stories=e},componentWillUnmount:function(){clearTimeout(this.resetReCaptureStatus)},renderIntro:function(){return i.default.createElement("div",{className:b.default.intro},i.default.createElement(c.default,{glyph:c.default.GLYPHS.story})," ",i.default.createElement("strong",null,"This is your story editor"),i.default.createElement("div",{className:b.default.instructions},"Create and share interactive stories directly from your map",i.default.createElement("div",null,i.default.createElement("button",{onClick:this.toggleVideoGuide,className:b.default.tutBtn},i.default.createElement(c.default,{glyph:c.default.GLYPHS.play}),"Getting Started"," "))))},renderVideoGuide:function(){var e;return i.default.createElement("div",{className:(0,m.default)((e={},w(e,b.default.videoGuideWrapper,!0),w(e,b.default.videoGuideWrapperClosing,!this.state.videoGuideVisible),e)),onClick:this.toggleVideoGuide},i.default.createElement("div",{className:b.default.videoGuide,onClick:function(e){return e.stopPropagation()},style:{backgroundImage:"url(".concat(r(1672),")")}},i.default.createElement("div",{className:b.default.videoGuideRatio},i.default.createElement("div",{className:b.default.videoGuideLoading},i.default.createElement(y.default,{message:" "})),i.default.createElement("iframe",{className:b.default.videoGuideIframe,src:"https://www.youtube.com/embed/fbiQawV8IYY",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}))))},openMenu:function(e){this.setState({storyWithOpenMenu:e})},renderStories:function(e){var t,r=this.props.terria.stories||[],a=(0,m.default)((w(t={},b.default.stories,!0),w(t,b.default.isActive,e),t));return i.default.createElement("div",{className:a},i.default.createElement(g.default,{label:"Scenes",badge:this.props.terria.stories.length},i.default.createElement("button",{type:"button",onClick:this.removeAllStories,className:b.default.removeButton},"Remove All ",i.default.createElement(c.default,{glyph:c.default.GLYPHS.remove}))),i.default.createElement(f.default,{onSort:this.onSort,direction:"vertical",dynamic:!0},r.map(function(e,t){return i.default.createElement(d.default,{key:e.id,story:e,sortData:e,deleteStory:this.removeStory.bind(this,t),recaptureStory:this.recaptureScene,recaptureStorySuccessful:Boolean(e.id===this.state.recaptureSuccessful),viewStory:this.viewStory.bind(this,t),menuOpen:this.state.storyWithOpenMenu===e,openMenu:this.openMenu,editStory:this.editStory})},this)))},onClickCapture:function(){this.setState({editingMode:!0,currentStory:void 0})},render:function(){var e,t=this,r=(0,l.default)(this.props.terria.stories)&&this.props.terria.stories.length>0,a=(0,m.default)((w(e={},b.default.storyPanel,!0),w(e,b.default.isVisible,this.props.isVisible),w(e,b.default.isHidden,!this.props.isVisible),e));return i.default.createElement("div",{className:a},this.state.showVideoGuide&&this.renderVideoGuide(),i.default.createElement("div",{className:b.default.header},!r&&this.renderIntro(),i.default.createElement("div",{className:b.default.actions},r&&i.default.createElement("button",{disabled:this.state.editingMode||!r,className:b.default.previewBtn,onClick:this.runStories,title:"preview stories"},i.default.createElement(c.default,{glyph:c.default.GLYPHS.play}),"Play Story"),i.default.createElement("button",{disabled:this.state.editingMode,className:b.default.captureBtn,title:"capture current scene",onClick:this.onClickCapture}," ",i.default.createElement(c.default,{glyph:c.default.GLYPHS.story})," Capture Scene"," "))),r&&this.renderStories(this.state.editingMode),this.state.editingMode&&i.default.createElement(p.default,{removeStory:this.removeStory,exitEditingMode:function(){return t.setState({editingMode:!1})},story:this.state.currentStory,saveStory:this.onSave}))}});t.default=C},function(e,t,r){"use strict";var i=c(r(13)),a=c(r(15)),n=c(r(1666)),o=c(r(35)),s=c(r(39)),l=c(r(278)),u=r(357);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var r,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(a=h(t).call(this,e))||"object"!==d(a)&&"function"!=typeof a?m(i):a).toggleMenu=r.toggleMenu.bind(m(r)),r.viewStory=r.viewStory.bind(m(r)),r.deleteStory=r.deleteStory.bind(m(r)),r.editStory=r.editStory.bind(m(r)),r.recaptureStory=r.recaptureStory.bind(m(r)),r.hideList=r.hideList.bind(m(r)),r}var r,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,i["default"].Component),r=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){window.addEventListener("click",this.hideList)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.hideList)}},{key:"hideList",value:function(){this.props.openMenu(null)}},{key:"getTruncatedContent",value:function(e){return function e(t){return"string"==typeof t?t:t[0]&&t[0].props&&t[0].props.children?e(t[0].props.children):t.props&&t.props.children?"string"==typeof t.props.children?t.props.children:e(t.props.children):""}((0,l.default)(e)).slice(0,100)}},{key:"toggleMenu",value:function(e){e.stopPropagation(),this.props.openMenu(this.props.story)}},{key:"viewStory",value:function(e){e.stopPropagation(),this.props.viewStory(this.props.story),this.hideList()}},{key:"editStory",value:function(e){e.stopPropagation(),this.props.editStory(this.props.story),this.hideList()}},{key:"recaptureStory",value:function(e){e.stopPropagation(),this.props.recaptureStory(this.props.story),this.hideList()}},{key:"deleteStory",value:function(e){e.stopPropagation(),this.props.deleteStory(this.props.story),this.hideList()}},{key:"renderMenu",value:function(){var e;return i.default.createElement("div",{className:n.default.menu},i.default.createElement("ul",{className:n.default.menuInner},i.default.createElement("li",null,i.default.createElement("button",{className:n.default.menuBtn,type:"button",title:"view",onClick:this.viewStory},"View")),i.default.createElement("li",null,i.default.createElement("button",{className:n.default.menuBtn,type:"button",title:"edit",onClick:this.editStory},"Edit")),i.default.createElement("li",null,i.default.createElement("button",{className:(0,o.default)((e={},p(e,n.default.menuBtn,!0),p(e,n.default.isSuccessful,this.props.recaptureStorySuccessful),e)),type:"button",title:"re-capture",onClick:this.recaptureStory},"Recapture")),i.default.createElement("li",null,i.default.createElement("button",{className:n.default.menuBtn,type:"button",title:"delete",onClick:this.deleteStory},"Delete"))))}},{key:"render",value:function(){var e,t=this.props.story,r=this.getTruncatedContent(t.text);return i.default.createElement("div",{className:(0,o.default)(this.props.className,n.default.story),onMouseDown:this.props.onMouseDown,style:this.props.style,onTouchStart:this.props.onTouchStart},i.default.createElement("div",{className:n.default.storyHeader},i.default.createElement("h3",{className:n.default.draggable},i.default.createElement(s.default,{className:(0,o.default)((e={},p(e,n.default.recapture,!0),p(e,n.default.isSuccessful,this.props.recaptureStorySuccessful),e)),glyph:s.default.GLYPHS.recapture}),t.title&&t.title.length>0?t.title:"untitled scene"),i.default.createElement("button",{className:n.default.toggleBtn,onClick:this.toggleMenu},i.default.createElement(s.default,{glyph:s.default.GLYPHS.menuDotted})),this.props.menuOpen&&this.renderMenu()),r.length>0&&i.default.createElement("div",{className:n.default.body},r))}}])&&f(r.prototype,a),u&&f(r,u),t}();v.propTypes={story:a.default.object,editStory:a.default.func,viewStory:a.default.func,deleteStory:a.default.func,recaptureStory:a.default.func,recaptureStorySuccessful:a.default.bool,onMouseDown:a.default.func.isRequired,onTouchStart:a.default.func.isRequired,style:a.default.object,className:a.default.string,menuOpen:a.default.bool,openMenu:a.default.func},e.exports=(0,u.sortable)(v)},function(e,t,r){e.exports={story:"tjs-story__story",storyHeader:"tjs-story__storyHeader",recapture:"tjs-story__recapture",isSuccessful:"tjs-story__isSuccessful",body:"tjs-story__body",toggleBtn:"tjs-story__toggleBtn tjs-_buttons__btn",footer:"tjs-story__footer",viewBtn:"tjs-story__viewBtn tjs-_buttons__btn tjs-_buttons__btn-primary",menu:"tjs-story__menu",menuInner:"tjs-story__menuInner",menuBtn:"tjs-story__menuBtn tjs-_buttons__btn undefined",draggable:"tjs-story__draggable"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(r(13)),a=l(r(15)),n=l(r(1668)),o=l(r(35)),s=l(r(1670));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var r,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(a=d(t).call(this,e))||"object"!==u(a)&&"function"!=typeof a?p(i):a).state={title:"",text:"",id:void 0,inView:!1},r.keys={ctrl:!1,enter:!1},r.saveStory=r.saveStory.bind(p(r)),r.cancelEditing=r.cancelEditing.bind(p(r)),r.updateTitle=r.updateTitle.bind(p(r)),r.onKeyDown=r.onKeyDown.bind(p(r)),r.onKeyUp=r.onKeyUp.bind(p(r)),r.slideInTimer=null,r.slideOutTimer=null,r.escKeyListener=null,r}var r,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i["default"].Component),r=t,(a=[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.story;this.setState({title:e.title,text:e.text,id:e.id})}},{key:"componentDidMount",value:function(){this.slideIn()}},{key:"slideIn",value:function(){var e=this;this.slideInTimer=setTimeout(function(){e.setState({inView:!0}),e.titleInput.focus()},300)}},{key:"slideOut",value:function(){var e=this;this.slideOutTimer=this.setState({inView:!1}),setTimeout(function(){e.cancelEditing()},300)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.slideInTimer),this.slideOutTimer&&clearTimeout(this.slideOutTimer),this.setState({title:"",text:"",id:void 0})}},{key:"updateTitle",value:function(e){this.setState({title:e.target.value})}},{key:"saveStory",value:function(){this.props.saveStory({title:this.state.title,text:this.state.text,id:this.state.id}),this.setState({isPopupEditorOpen:!1})}},{key:"cancelEditing",value:function(){this.props.exitEditingMode(),this.setState({title:this.props.story.title,text:this.props.story.text})}},{key:"onKeyDown",value:function(e){27===e.keyCode&&this.cancelEditing(),13===e.keyCode&&(this.keys.enter=!0),17===e.keyCode&&(this.keys.ctrl=!0)}},{key:"onKeyUp",value:function(e){(13===e.keyCode||17===e.keyCode)&&this.keys.enter&&this.keys.ctrl&&this.saveStory(),13===e.keyCode&&(this.keys.enter=!1),17===e.keyCode&&(this.keys.ctrl=!1)}},{key:"renderPopupEditor",value:function(){var e,t,r,a=this;return i.default.createElement("div",{onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,className:(0,o.default)(s.default.popupEditor,(e={},t=s.default.isMounted,r=this.state.inView,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e))},i.default.createElement("div",{className:s.default.inner},i.default.createElement("div",{className:s.default.header},i.default.createElement("input",{ref:function(e){return a.titleInput=e},placeholder:"Enter a title here",autoComplete:"off",className:s.default.field,type:"text",id:"title",value:this.state.title,onChange:this.updateTitle}),i.default.createElement("button",{className:s.default.cancelBtn,onClick:this.cancelEditing,type:"button",title:"cancel"},"Cancel"),i.default.createElement("button",{disabled:!this.state.title.length,className:s.default.saveBtn,onClick:this.saveStory,type:"button",title:"save"},"Save")),i.default.createElement("div",{className:s.default.body},i.default.createElement(n.default,{html:this.state.text,onChange:function(e){return a.setState({text:e})}}))))}},{key:"removeStory",value:function(){this.props.exitEditingMode(),this.state.id&&this.props.removeStory(this.state.id)}},{key:"render",value:function(){return i.default.createElement("div",{className:s.default.editor},this.renderPopupEditor())}}])&&c(r.prototype,a),l&&c(r,l),t}();t.default=h,h.propTypes={story:a.default.object,removeStory:a.default.func,saveStory:a.default.func,exitEditingMode:a.default.func},h.defaultProps={story:{title:"",text:"",id:void 0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(r(13)),a=r(1669),n=o(r(15));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i["default"].PureComponent),r=t,(n=[{key:"componentDidMount",value:function(){this.editor=(0,a.init)({element:this.node,onChange:this.props.onChange,actions:this.props.actions}),this.editor.content.innerHTML=this.props.html}},{key:"componentWillUnmount",value:function(){this.editor=void 0}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{ref:function(t){return e.node=t}})}}])&&l(r.prototype,n),o&&l(r,o),t}();t.default=p,p.propTypes={html:n.default.string,onChange:n.default.func.isRequired,actions:n.default.array},p.defaultProps={actions:["bold","italic","underline","heading1","heading2","olist","ulist","image",{name:"link",result:function(){var e=window.prompt("Enter the link URL","http://");e&&(0,a.exec)("createLink",e)}}]}},,function(e,t,r){e.exports={popupEditor:"tjs-story-editor__popupEditor","is-mounted":"tjs-story-editor__is-mounted",isMounted:"tjs-story-editor__is-mounted",inner:"tjs-story-editor__inner",header:"tjs-story-editor__header",body:"tjs-story-editor__body",editor:"tjs-story-editor__editor",editorHeader:"tjs-story-editor__editorHeader",field:"tjs-story-editor__field tjs-_form__field tjs-_form__input",fieldBtn:"tjs-story-editor__fieldBtn tjs-_buttons__btn tjs-_buttons__btn--map",doneBtn:"tjs-story-editor__doneBtn tjs-_buttons__btn tjs-_buttons__btn-primary",saveBtn:"tjs-story-editor__saveBtn tjs-_buttons__btn tjs-_buttons__btn-primary",cancelBtn:"tjs-story-editor__cancelBtn tjs-_buttons__btn tjs-_buttons__btn--secondary"}},function(e,t,r){e.exports={"story-panel":"tjs-story-builder__story-panel",storyPanel:"tjs-story-builder__story-panel",isVisible:"tjs-story-builder__isVisible",isHidden:"tjs-story-builder__isHidden",header:"tjs-story-builder__header",actions:"tjs-story-builder__actions",stories:"tjs-story-builder__stories",isActive:"tjs-story-builder__isActive",story:"tjs-story-builder__story",trashBtn:"tjs-story-builder__trashBtn tjs-_buttons__btn tjs-_buttons__btn--map",removeBtn:"tjs-story-builder__removeBtn tjs-_buttons__btn tjs-_buttons__btn--map",footer:"tjs-story-builder__footer",captureBtn:"tjs-story-builder__captureBtn tjs-_buttons__btn tjs-_buttons__btn-primary",previewBtn:"tjs-story-builder__previewBtn tjs-_buttons__btn tjs-_buttons__btn-primary",intro:"tjs-story-builder__intro","remove-button":"tjs-story-builder__remove-button tjs-_buttons__btn",removeButton:"tjs-story-builder__remove-button tjs-_buttons__btn",tutBtn:"tjs-story-builder__tutBtn tjs-_buttons__btn",VideoGuideWrapper:"tjs-story-builder__VideoGuideWrapper",videoGuideWrapper:"tjs-story-builder__VideoGuideWrapper","story-fade-in":"tjs-story-builder__story-fade-in",storyFadeIn:"tjs-story-builder__story-fade-in","VideoGuideWrapper--closing":"tjs-story-builder__VideoGuideWrapper--closing",videoGuideWrapperClosing:"tjs-story-builder__VideoGuideWrapper--closing","story-fade-out":"tjs-story-builder__story-fade-out",storyFadeOut:"tjs-story-builder__story-fade-out","story-slide-down":"tjs-story-builder__story-slide-down",storySlideDown:"tjs-story-builder__story-slide-down",videoGuide:"tjs-story-builder__videoGuide","story-slide-up":"tjs-story-builder__story-slide-up",storySlideUp:"tjs-story-builder__story-slide-up",videoGuideRatio:"tjs-story-builder__videoGuideRatio",videoGuideLoading:"tjs-story-builder__videoGuideLoading","videoGuide--iframe":"tjs-story-builder__videoGuide--iframe",videoGuideIframe:"tjs-story-builder__videoGuide--iframe"}},function(e,t,r){e.exports=r.p+"37c0e9e810a4a4164331a775a1b3733a.jpg"},,function(e,t,r){e.exports={"story-wrapper":"tjs-standard-user-interface__story-wrapper",storyWrapper:"tjs-standard-user-interface__story-wrapper","ui-root":"tjs-standard-user-interface__ui-root",uiRoot:"tjs-standard-user-interface__ui-root",ui:"tjs-standard-user-interface__ui",explorerPanelIsVisible:"tjs-standard-user-interface__explorerPanelIsVisible",sidePanel:"tjs-standard-user-interface__sidePanel",map:"tjs-standard-user-interface__map",feedback:"tjs-standard-user-interface__feedback",featureInfo:"tjs-standard-user-interface__featureInfo",featureInfoFullScreen:"tjs-standard-user-interface__featureInfoFullScreen",sidePanelHide:"tjs-standard-user-interface__sidePanelHide",showWorkbenchButton:"tjs-standard-user-interface__showWorkbenchButton",showWorkbenchButtonisVisible:"tjs-standard-user-interface__showWorkbenchButtonisVisible",showWorkbenchButtonisNotVisible:"tjs-standard-user-interface__showWorkbenchButtonisNotVisible",uiInner:"tjs-standard-user-interface__uiInner"}},function(e,t){e.exports=" (plus local modifications)"},function(e,t,r){e.exports={rcSliderTooltipZoomDownIn:"tm-global__rcSliderTooltipZoomDownIn",rcSliderTooltipZoomDownOut:"tm-global__rcSliderTooltipZoomDownOut"}},function(e,t,r){"use strict";var i=r(239),a=r(493);e.exports=function(e){var t=[],n=new i(e);return n.url="http://services.ga.gov.au/gis/rest/services/NationalMap_Colour_Topographic_Base_World_WM/MapServer",n.opacity=1,n.isRequiredForRendering=!0,n.name="Australian Topography",n.allowFeaturePicking=!1,t.push(new a({image:r(1678),catalogItem:n,contrastColor:"#000000"})),t}},function(e,t,r){e.exports=r.p+"b7da0b1fd98192044be2d9807bae528a.png"},function(e,t,r){"use strict";var i=r(1680),a=r(493),n=r(172),o=r(449);e.exports=function(e,t){var s=i(e,t),l=new n(e);l.name="Natural Earth II",l.url="http://geoserver.nationalmap.nicta.com.au/imagery/natural-earth-ii/wms",l.layers="natural-earth-ii:NE2_HR_LC_SR_W_DR",l.parameters={tiled:!0},l.opacity=1,l.isRequiredForRendering=!0,s.push(new a({image:r(1684),catalogItem:l}));var u=new n(e);u.name="NASA Black Marble",u.url="http://geoserver.nationalmap.nicta.com.au/imagery/nasa-black-marble/wms",u.layers="nasa-black-marble:dnb_land_ocean_ice.2012.54000x27000_geo",u.parameters={tiled:!0},u.opacity=1,u.isRequiredForRendering=!0,s.push(new a({image:r(1685),catalogItem:u}));var c=new o(e);c.name="Positron (Light)",c.url="https://global.ssl.fastly.net/light_all/",c.attribution="© OpenStreetMap contributors ODbL, © CartoDB CC-BY 3.0",c.opacity=1,c.subdomains=["cartodb-basemaps-a","cartodb-basemaps-b","cartodb-basemaps-c","cartodb-basemaps-d"],s.push(new a({image:r(1686),catalogItem:c,contrastColor:"#000000"}));var d=new o(e);return d.name="Dark Matter",d.url="https://global.ssl.fastly.net/dark_all/",d.attribution="© OpenStreetMap contributors ODbL, © CartoDB CC-BY 3.0",d.opacity=1,d.subdomains=["cartodb-basemaps-a","cartodb-basemaps-b","cartodb-basemaps-c","cartodb-basemaps-d"],s.push(new a({image:r(1687),catalogItem:d})),s}},function(e,t,r){"use strict";var i=r(493),a=r(612),n=r(425),o=r(654),s=r(735);e.exports=function(e,t){var l,u,c,d=[];if(t&&!0!==e.configParameters.useCesiumIonBingImagery)(l=new a(e)).mapStyle=n.AERIAL_WITH_LABELS_ON_DEMAND,l.key=t,(u=new a(e)).mapStyle=n.AERIAL,u.key=t,(c=new a(e)).mapStyle=n.ROAD_ON_DEMAND,c.key=t;else{if(!1===e.configParameters.useCesiumIonBingImagery)return d;(l=new o(e)).ionAssetId=s.AERIAL_WITH_LABELS,(u=new o(e)).ionAssetId=s.AERIAL,(c=new o(e)).ionAssetId=s.ROAD}return l.name="Bing Maps Aerial with Labels",l.opacity=1,l.isRequiredForRendering=!0,d.push(new i({image:r(1681),catalogItem:l})),u.name="Bing Maps Aerial",u.opacity=1,u.isRequiredForRendering=!0,d.push(new i({image:r(1682),catalogItem:u})),c.name="Bing Maps Roads",c.opacity=1,c.isRequiredForRendering=!0,d.push(new i({image:r(1683),catalogItem:c,contrastColor:"#000000"})),d}},function(e,t,r){e.exports=r.p+"3456d1802ab2ef330ae2732387726771.png"},function(e,t,r){e.exports=r.p+"13d842d1bd88d606d0e2a710222d48c1.png"},function(e,t,r){e.exports=r.p+"efa2f6c408eb790753a9b5fb2f3dc678.png"},function(e,t,r){e.exports=r.p+"78303112301085744794e356ff2dca25.png"},function(e,t,r){e.exports=r.p+"1bf410692dcdf215fbe68099e8cb285b.png"},function(e,t,r){e.exports=r.p+"d8b97d3e38a0d43e5a06dea9aae17a3e.png"},function(e,t,r){e.exports=r.p+"b7ddbf3ecb52008a53e8dc404081bd87.png"},function(e,t,r){"use strict";var i=r(8),a=r(23);e.exports=function(e,t,r,n){function o(r){if(i(r))for(var a=0;a<t.length;++a)if(t[a].catalogItem.name===r)return e.baseMap=t[a].catalogItem,e.baseMapContrastColor=t[a].contrastColor,e.baseMap}var s;if(a.getObservable(e,"baseMapName").subscribe(function(){o(e.baseMapName)}),0!==t.length)return n&&(s=o(e.getLocalProperty("basemap"))),s=s||o(e.baseMapName)||o(r)||o(t[0].catalogItem.name)}},function(e,t){e.exports='<div style="border:1px solid red; background:hsla(0,50%,50%,0.2); padding: 0.5em;">\n<h1>Development site</h1>\n\n<p>You are viewing a site other than the official production site. It may not operate as you expect.</p>\n</div>'},function(e,t){e.exports="<div>\n<p>This is the global disclaimer shown to all users of this site. It should be replaced with something specific, by modifying <samp>lib/Views/GlobalDisclaimer.html</samp>.\n</div>"}]]);
//# sourceMappingURL=3.TerriaMap.js.map